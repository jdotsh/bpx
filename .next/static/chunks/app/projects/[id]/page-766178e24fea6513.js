(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{5346:function(e,t,s){Promise.resolve().then(s.bind(s,8786))},8786:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return p}});var r=s(7437),a=s(2265),n=s(9376),i=s(2869),l=s(6070),c=s(5186),d=s(2660),o=s(8736),m=s(1047);let u=(0,s(9205).Z)("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);var h=s(3247),x=s(9397),f=s(7648);function p(e){let{params:t}=e,[s,p]=(0,a.useState)(null),[j,b]=(0,a.useState)([]),[y,N]=(0,a.useState)(!0),[v,w]=(0,a.useState)(""),[k,Z]=(0,a.useState)(!1),C=(0,n.useRouter)(),S=(0,a.useCallback)(async()=>{try{let e=await fetch("/api/projects/".concat(t.id));if(e.ok){let t=await e.json();p(t)}else 404===e.status&&C.push("/projects")}catch(e){console.error("Failed to fetch project:",e)}},[t.id,C]),M=(0,a.useCallback)(async()=>{try{let e=await fetch("/api/diagrams?projectId=".concat(t.id));if(e.ok){let t=await e.json();b(t)}}catch(e){console.error("Failed to fetch diagrams:",e)}finally{N(!1)}},[t.id]);(0,a.useEffect)(()=>{S(),M()},[t.id,S,M]);let P=async e=>{try{let s=await fetch("/api/diagrams",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({projectId:t.id,title:e,bpmnXml:'<?xml version="1.0" encoding="UTF-8"?>\n<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" id="Definitions_1" targetNamespace="http://bpmn.io/schema/bpmn">\n  <bpmn:process id="Process_1" isExecutable="true">\n    <bpmn:startEvent id="StartEvent_1"/>\n  </bpmn:process>\n  <bpmndi:BPMNDiagram id="BPMNDiagram_1">\n    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1">\n      <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1">\n        <dc:Bounds x="179" y="99" width="36" height="36"/>\n      </bpmndi:BPMNShape>\n    </bpmndi:BPMNPlane>\n  </bpmndi:BPMNDiagram>\n</bpmn:definitions>'})});if(s.ok){let e=await s.json();b(t=>[e,...t]),Z(!1),C.push("/studio?diagramId=".concat(e.id))}}catch(e){console.error("Failed to create diagram:",e)}},D=j.filter(e=>e.title.toLowerCase().includes(v.toLowerCase()));return y||!s?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading project..."})]})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("header",{className:"bg-white shadow",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(f.default,{href:"/projects",children:(0,r.jsxs)(i.z,{variant:"ghost",size:"sm",children:[(0,r.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"Projects"]})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:s.name}),s.description&&(0,r.jsx)("p",{className:"text-gray-600 mt-1",children:s.description})]})]}),(0,r.jsx)("div",{className:"flex items-center space-x-4",children:(0,r.jsx)(f.default,{href:"/dashboard",children:(0,r.jsx)(i.z,{variant:"outline",children:"Dashboard"})})})]})})}),(0,r.jsx)("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"px-4 py-6 sm:px-0",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[(0,r.jsx)(l.Zb,{children:(0,r.jsx)(l.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(o.Z,{className:"h-8 w-8 text-blue-600"}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-2xl font-bold",children:j.length}),(0,r.jsx)("p",{className:"text-gray-600",children:"Diagrams"})]})]})})}),(0,r.jsx)(l.Zb,{children:(0,r.jsx)(l.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(m.Z,{className:"h-8 w-8 text-green-600"}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium",children:"Last Updated"}),(0,r.jsx)("p",{className:"text-gray-600",children:new Date(s.updatedAt).toLocaleDateString()})]})]})})}),(0,r.jsx)(l.Zb,{children:(0,r.jsx)(l.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(u,{className:"h-8 w-8 text-purple-600"}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium",children:"Version"}),(0,r.jsxs)("p",{className:"text-gray-600",children:["v",s.version]})]})]})})})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 space-y-4 sm:space-y-0",children:[(0,r.jsxs)("div",{className:"relative w-full sm:w-96",children:[(0,r.jsx)(h.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,r.jsx)(c.I,{placeholder:"Search diagrams...",value:v,onChange:e=>w(e.target.value),className:"pl-10"})]}),(0,r.jsxs)(i.z,{onClick:()=>Z(!0),className:"w-full sm:w-auto",children:[(0,r.jsx)(x.Z,{className:"h-4 w-4 mr-2"}),"New Diagram"]})]}),0===D.length?(0,r.jsx)(l.Zb,{className:"text-center py-12",children:(0,r.jsxs)(l.aY,{children:[(0,r.jsx)(o.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:v?"No diagrams found":"No diagrams yet"}),(0,r.jsx)("p",{className:"text-gray-500 mb-6",children:v?"Try adjusting your search terms.":"Create your first diagram to start modeling."}),!v&&(0,r.jsxs)(i.z,{onClick:()=>Z(!0),children:[(0,r.jsx)(x.Z,{className:"h-4 w-4 mr-2"}),"Create Diagram"]})]})}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:D.map(e=>(0,r.jsx)(l.Zb,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:(0,r.jsxs)(f.default,{href:"/studio?diagramId=".concat(e.id),children:[(0,r.jsxs)(l.Ol,{children:[(0,r.jsx)(l.ll,{className:"text-lg",children:e.title}),(0,r.jsxs)(l.SZ,{children:["Version ",e.version]})]}),(0,r.jsx)(l.aY,{children:(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(m.Z,{className:"h-4 w-4 mr-1"}),(0,r.jsx)("span",{children:new Date(e.updatedAt).toLocaleDateString()})]}),e.lastEditor&&(0,r.jsxs)("span",{className:"text-xs",children:["by ",e.lastEditor]})]})})]})},e.id))})]})}),k&&(0,r.jsx)(g,{onClose:()=>Z(!1),onSubmit:P})]})}function g(e){let{onClose:t,onSubmit:s}=e,[n,d]=(0,a.useState)(""),[o,m]=(0,a.useState)(!1),u=async e=>{if(e.preventDefault(),n.trim()){m(!0);try{await s(n.trim())}finally{m(!1)}}};return(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,r.jsxs)(l.Zb,{className:"w-full max-w-md",children:[(0,r.jsxs)(l.Ol,{children:[(0,r.jsx)(l.ll,{children:"Create New Diagram"}),(0,r.jsx)(l.SZ,{children:"Start a new BPMN diagram"})]}),(0,r.jsx)(l.aY,{children:(0,r.jsxs)("form",{onSubmit:u,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Diagram Title *"}),(0,r.jsx)(c.I,{id:"title",value:n,onChange:e=>d(e.target.value),placeholder:"My Process Diagram",required:!0,disabled:o})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,r.jsx)(i.z,{type:"button",variant:"outline",onClick:t,disabled:o,children:"Cancel"}),(0,r.jsx)(i.z,{type:"submit",disabled:o||!n.trim(),children:o?"Creating...":"Create Diagram"})]})]})})]})})}},2869:function(e,t,s){"use strict";s.d(t,{z:function(){return d}});var r=s(7437),a=s(2265),n=s(5293),i=s(535),l=s(4508);let c=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:s,variant:a,size:i,asChild:d=!1,...o}=e,m=d?n.g7:"button";return(0,r.jsx)(m,{className:(0,l.cn)(c({variant:a,size:i,className:s})),ref:t,...o})});d.displayName="Button"},6070:function(e,t,s){"use strict";s.d(t,{Ol:function(){return l},SZ:function(){return d},Zb:function(){return i},aY:function(){return o},ll:function(){return c}});var r=s(7437),a=s(2265),n=s(4508);let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",s),...a})});i.displayName="Card";let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...a})});l.displayName="CardHeader";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("h3",{ref:t,className:(0,n.cn)("font-semibold leading-none tracking-tight",s),...a})});c.displayName="CardTitle";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...a})});d.displayName="CardDescription";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...a})});o.displayName="CardContent",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...a})}).displayName="CardFooter"},5186:function(e,t,s){"use strict";s.d(t,{I:function(){return i}});var r=s(7437),a=s(2265),n=s(4508);let i=a.forwardRef((e,t)=>{let{className:s,type:a,...i}=e;return(0,r.jsx)("input",{type:a,className:(0,n.cn)("flex h-9 w-full rounded-md border border-input bg-background px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...i})});i.displayName="Input"},4508:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var r=s(1994),a=s(3335);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,r.W)(t))}},9205:function(e,t,s){"use strict";s.d(t,{Z:function(){return c}});var r=s(2265);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&s.indexOf(e)===t).join(" ")};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,r.forwardRef)((e,t)=>{let{color:s="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:c,className:d="",children:o,iconNode:m,...u}=e;return(0,r.createElement)("svg",{ref:t,...i,width:a,height:a,stroke:s,strokeWidth:c?24*Number(l)/Number(a):l,className:n("lucide",d),...u},[...m.map(e=>{let[t,s]=e;return(0,r.createElement)(t,s)}),...Array.isArray(o)?o:[o]])}),c=(e,t)=>{let s=(0,r.forwardRef)((s,i)=>{let{className:c,...d}=s;return(0,r.createElement)(l,{ref:i,iconNode:t,className:n("lucide-".concat(a(e)),c),...d})});return s.displayName="".concat(e),s}},2660:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},1047:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},8736:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},9397:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},3247:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},7648:function(e,t,s){"use strict";s.d(t,{default:function(){return a.a}});var r=s(2972),a=s.n(r)},9376:function(e,t,s){"use strict";var r=s(5475);s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})}},function(e){e.O(0,[50,972,971,117,744],function(){return e(e.s=5346)}),_N_E=e.O()}]);