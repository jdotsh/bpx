"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[906],{8906:function(e,t,n){function i(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}n.r(t),n.d(t,{default:function(){return hG}});var o=(iw=ik={exports:{}},ik.exports,(iS=iw.exports=function(e,t){if(t||(t=16),void 0===e&&(e=128),e<=0)return"0";for(var n=Math.log(Math.pow(2,e))/Math.log(t),i=2;n===1/0;i*=2)n=Math.log(Math.pow(2,e/i))/Math.log(t)*i;for(var o=n-Math.floor(n),r="",i=0;i<Math.floor(n);i++){var a=Math.floor(Math.random()*t).toString(t);r=a+r}if(o){var a=Math.floor(Math.random()*Math.pow(t,o)).toString(t);r=a+r}var s=parseInt(r,t);return s!==1/0&&s>=Math.pow(2,e)?iS(e,t):r}).rack=function(e,t,n){var i=function(i){var r=0;do{if(r++>10){if(n)e+=n;else throw Error("too many ID collisions, use more bits")}var a=iS(e,t)}while(Object.hasOwnProperty.call(o,a));return o[a]=i,a},o=i.hats={};return i.get=function(e){return i.hats[e]},i.set=function(e,t){return i.hats[e]=t,i},i.bits=e||128,i.base=t||16,i},ik.exports);function r(e){if(!(this instanceof r))return new r(e);e=e||[128,36,1],this._seed=e.length?o.rack(e[0],e[1],e[2]):e}r.prototype.next=function(e){return this._seed(e||!0)},r.prototype.nextPrefixed=function(e,t){var n;do n=e+this.next(!0);while(this.assigned(n));return this.claim(n,t),n},r.prototype.claim=function(e,t){this._seed.set(e,t||!0)},r.prototype.assigned=function(e){return this._seed.get(e)||!1},r.prototype.unclaim=function(e){delete this._seed.hats[e]},r.prototype.clear=function(){var e,t=this._seed.hats;for(e in t)this.unclaim(e)};var a=n(785),s=n(891),c=n(1334);let p=/^class[ {]/;function l(e){return Array.isArray(e)}function u(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function h(...e){1===e.length&&l(e[0])&&(e=e[0]);let t=(e=[...e]).pop();return t.$inject=e,t}let d=/constructor\s*[^(]*\(\s*([^)]*)\)/m,m=/^(?:async\s+)?(?:function\s*[^(]*)?(?:\(\s*([^)]*)\)|(\w+))/m,f=/\/\*([^*]*)\*\//m;function g(e,t){let n=t||{get:function(e,t){if(i.push(e),!1===t)return null;throw s(`No provider for "${e}"!`)}},i=[],o=this._providers=Object.create(n._providers||null),r=this._instances=Object.create(null),a=r.injector=this,s=function(e){let t=i.join(" -> ");return i.length=0,Error(t?`${e} (Resolving: ${t})`:e)};function c(e,t){if(!o[e]&&e.includes(".")){let t=e.split("."),n=c(t.shift());for(;t.length;)n=n[t.shift()];return n}if(u(r,e))return r[e];if(u(o,e)){if(-1!==i.indexOf(e))throw i.push(e),s("Cannot resolve circular dependency!");return i.push(e),r[e]=o[e][0](o[e][1]),i.pop(),r[e]}return n.get(e,t)}function y(e,t){if(void 0===t&&(t={}),"function"!=typeof e){if(l(e))e=h(e.slice());else throw s(`Cannot invoke "${e}". Expected a function!`)}let n=(e.$inject||function(e){if("function"!=typeof e)throw Error(`Cannot annotate "${e}". Expected a function!`);let t=e.toString().match(p.test(e.toString())?d:m);if(!t)return[];let n=t[1]||t[2];return n&&n.split(",").map(e=>{let t=e.match(f);return(t&&t[1]||e).trim()})||[]}(e)).map(e=>u(t,e)?t[e]:c(e));return{fn:e,dependencies:n}}function v(e){let{fn:t,dependencies:n}=y(e);return new(Function.prototype.bind.call(t,null,...n))}function _(e,t,n){let{fn:i,dependencies:o}=y(e,n);return i.apply(t,o)}function b(e,t){if(t&&t.length){let n,i,r,a;let s=Object.create(null),c=Object.create(null),p=[],l=[],u=[];for(let e in o)n=o[e],-1!==t.indexOf(e)&&("private"===n[2]?-1===(i=p.indexOf(n[3]))?(a=function(e){return h(t=>e.get(t))}(r=n[3].createChild([],t)),p.push(n[3]),l.push(r),u.push(a),s[e]=[a,e,"private",r]):s[e]=[u[i],e,"private",l[i]]:s[e]=[n[2],n[1]],c[e]=!0),("factory"===n[2]||"type"===n[2])&&n[1].$scope&&t.forEach(t=>{-1!==n[1].$scope.indexOf(t)&&(s[e]=[n[2],n[1]],c[t]=!0)});t.forEach(e=>{if(!c[e])throw Error('No provider for "'+e+'". Cannot use provider from the parent!')}),e.unshift(s)}return new g(e,a)}let x={factory:_,type:v,value:function(e){return e}};function E(e,t){let n=e.__init__||[];return function(){n.forEach(e=>{"string"==typeof e?t.get(e):t.invoke(e)})}}function w(e){let t=e.__exports__;if(t){let n=e.__modules__,i=Object.keys(e).reduce((t,n)=>("__exports__"!==n&&"__modules__"!==n&&"__init__"!==n&&"__depends__"!==n&&(t[n]=e[n]),t),Object.create(null)),r=b((n||[]).concat(i)),a=h(function(e){return r.get(e)});t.forEach(function(e){o[e]=[a,e,"private",r]});let s=(e.__init__||[]).slice();return s.unshift(function(){r.init()}),E(e=Object.assign({},e,{__init__:s}),r)}return Object.keys(e).forEach(function(t){var n;if("__init__"===t||"__depends__"===t)return;let i=e[t];if("private"===i[2]){o[t]=i;return}let r=i[0],a=i[1];o[t]=[x[r],(n=a,"value"!==r&&l(n)&&(n=h(n.slice())),n),r]}),E(e,a)}function S(e,t){return -1!==e.indexOf(t)||-1!==(e=(t.__depends__||[]).reduce(S,e)).indexOf(t)?e:e.concat(t)}this.get=c,this.invoke=_,this.instantiate=v,this.createChild=b,this.init=function(e){let t=e.reduce(S,[]).map(w),n=!1;return function(){n||(n=!0,t.forEach(e=>e()))}}(e)}function y(e,t){var n=this;t=t||1e3,e.on(["render.shape","render.connection"],t,function(e,t){var i=e.type,o=t.element,r=t.gfx,a=t.attrs;if(n.canRender(o))return"render.shape"===i?n.drawShape(r,o,a):n.drawConnection(r,o,a)}),e.on(["render.getShapePath","render.getConnectionPath"],t,function(e,t){if(n.canRender(t))return"render.getShapePath"===e.type?n.getShapePath(t):n.getConnectionPath(t)})}function v(e){return e.flat().join(",").replace(/,?([A-Za-z]),?/g,"$1")}function _(e){return["L",e.x,e.y]}function b(e,t,n){let i=t.x-e.x,o=t.y-e.y,r=n/x(i,o);return{x:e.x+i*r,y:e.y+o*r}}function x(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}function E(e,t,n){(0,a.hj)(t)&&(n=t,t=null),t||(t={});let i=(0,c.Ue)("path",t);return(0,a.hj)(n)&&(i.dataset.cornerRadius=String(n)),w(i,e)}function w(e,t){let n=parseInt(e.dataset.cornerRadius,10)||0;return(0,c.Lj)(e,{d:v(function(e,t){var n;let i=e.length,o=[["M",(n=e[0]).x,n.y]];for(let n=1;n<i;n++){let i=e[n-1],r=e[n],a=e[n+1];if(!a||!t){o.push(_(r));continue}let s=Math.min(t,x(r.x-i.x,r.y-i.y),x(a.x-r.x,a.y-r.y));if(!s){o.push(_(r));continue}let c=b(r,i,s),p=b(r,i,.5*s),l=b(r,a,s),u=b(r,a,.5*s);o.push(_(c)),o.push(["C",p.x,p.y,u.x,u.y,l.x,l.y])}return o}(t,n))}),e}function S(e){return(0,a.hX)(e,function(t){return!(0,a.sE)(e,function(e){return e!==t&&function e(t,n){return n?t===n?n:t.parent?e(t.parent,n):void 0:void 0}(t,e)})})}function k(e,t,n){var i=!n||-1===e.indexOf(t);return i&&e.push(t),i}function C(e,t,n){n=n||0,(0,a.kJ)(e)||(e=[e]),(0,a.Ed)(e,function(e,i){var o=t(e,i,n);(0,a.kJ)(o)&&o.length&&C(o,t,n+1)})}function R(e,t){var n,i,o;return n=!t,i=[],o=[],C(e,function(e,t,r){k(i,e,n);var a=e.children;if(a&&k(o,a,n))return a}),i}function P(e,t){var n,i,o,r;return t=!!t,(0,a.kJ)(e)||(e=[e]),(0,a.Ed)(e,function(e){var a=e;e.waypoints&&!t&&(a=P(e.waypoints,!0));var s=a.x,c=a.y,p=a.height||0,l=a.width||0;(s<n||void 0===n)&&(n=s),(c<i||void 0===i)&&(i=c),(s+l>o||void 0===o)&&(o=s+l),(c+p>r||void 0===r)&&(r=c+p)}),{x:n,y:i,height:r-i,width:o-n}}function A(e,t){var n={};return(0,a.Ed)(e,function(e){var i=e;i.waypoints&&(i=P(i)),!(0,a.hj)(t.y)&&i.x>t.x&&(n[e.id]=e),!(0,a.hj)(t.x)&&i.y>t.y&&(n[e.id]=e),i.x>t.x&&i.y>t.y&&((0,a.hj)(t.width)&&(0,a.hj)(t.height)&&i.width+i.x<t.width+t.x&&i.height+i.y<t.height+t.y?n[e.id]=e:(0,a.hj)(t.width)&&(0,a.hj)(t.height)||(n[e.id]=e))}),n}function M(e){return"waypoints"in e?"connection":"x"in e?"shape":"root"}function T(e){return!!(e&&e.isFrame)}function D(e,t){return(0,a.f0)({},e||{},t||{})}function B(e,t){y.call(this,e,1),this.CONNECTION_STYLE=t.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=t.style({fill:"white",stroke:"fuchsia",strokeWidth:2}),this.FRAME_STYLE=t.style(["no-fill"],{stroke:"fuchsia",strokeDasharray:4,strokeWidth:2})}function j(e,t){if(!e||!t)return -1;var n=e.indexOf(t);return -1!==n&&e.splice(n,1),n}function N(e,t,n){if(e&&t){"number"!=typeof n&&(n=-1);var i=e.indexOf(t);if(-1!==i){if(i===n||-1===n)return;e.splice(i,1)}-1!==n?e.splice(n,0,t):e.push(t)}}function O(e,t){return e&&t?e.indexOf(t):-1}y.prototype.canRender=function(e){},y.prototype.drawShape=function(e,t){},y.prototype.drawConnection=function(e,t){},y.prototype.getShapePath=function(e){},y.prototype.getConnectionPath=function(e){},i(B,y),B.prototype.canRender=function(){return!0},B.prototype.drawShape=function(e,t,n){var i=(0,c.Ue)("rect");return(0,c.Lj)(i,{x:0,y:0,width:t.width||0,height:t.height||0}),T(t)?(0,c.Lj)(i,(0,a.f0)({},this.FRAME_STYLE,n||{})):(0,c.Lj)(i,(0,a.f0)({},this.SHAPE_STYLE,n||{})),(0,c.R3)(e,i),i},B.prototype.drawConnection=function(e,t,n){var i=E(t.waypoints,(0,a.f0)({},this.CONNECTION_STYLE,n||{}));return(0,c.R3)(e,i),i},B.prototype.getShapePath=function(e){var t=e.x,n=e.y,i=e.width;return v([["M",t,n],["l",i,0],["l",0,e.height],["l",-i,0],["z"]])},B.prototype.getConnectionPath=function(e){var t,n,i=e.waypoints,o=[];for(t=0;n=i[t];t++)n=n.original||n,o.push([0===t?"M":"L",n.x,n.y]);return v(o)},B.$inject=["eventBus","styles"];var L=n(8661);function $(e,t){return Math.round(e*t)/t}function I(e){return(0,a.hj)(e)?e+"px":e}function z(e,t,n){let i=(0,c.Ue)("g");(0,c.Sh)(i).add(t);let o=void 0!==n?n:e.childNodes.length-1;return e.insertBefore(i,e.childNodes[o]||null),i}let H={shape:["x","y","width","height"],connection:["waypoints"]};function F(e,t,n,i){this._eventBus=t,this._elementRegistry=i,this._graphicsFactory=n,this._rootsIdx=0,this._layers={},this._planes=[],this._rootElement=null,this._focused=!1,this._init(e||{})}function G(e,t){let n="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttribute("transform",n)}F.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"],F.prototype._init=function(e){let t=this._eventBus,n=this._container=function(e){let t=(e=(0,a.f0)({},{width:"100%",height:"100%"},e)).container||document.body,n=document.createElement("div");return n.setAttribute("class","djs-container djs-parent"),(0,s.i5)(n,{position:"relative",overflow:"hidden",width:I(e.width),height:I(e.height)}),t.appendChild(n),n}(e),i=this._svg=(0,c.Ue)("svg");(0,c.Lj)(i,{width:"100%",height:"100%"}),(0,s.Lj)(i,"tabindex",0),e.autoFocus&&t.on("element.hover",()=>{this.restoreFocus()}),t.on("element.mousedown",500,e=>{this.focus()}),i.addEventListener("focusin",()=>{this._setFocused(!0)}),i.addEventListener("focusout",()=>{this._setFocused(!1)}),(0,c.R3)(n,i);let o=this._viewport=z(i,"viewport");e.deferUpdate&&(this._viewboxChanged=(0,a.Ds)((0,a.ak)(this._viewboxChanged,this),300)),t.on("diagram.init",()=>{t.fire("canvas.init",{svg:i,viewport:o})}),t.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed","root.set"],()=>{delete this._cachedViewbox}),t.on("diagram.destroy",500,this._destroy,this),t.on("diagram.clear",500,this._clear,this)},F.prototype._destroy=function(){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});let e=this._container.parentNode;e&&e.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._planes,delete this._rootElement,delete this._viewport},F.prototype._setFocused=function(e){e!=this._focused&&(this._focused=e,this._eventBus.fire("canvas.focus.changed",{focused:e}))},F.prototype._clear=function(){this._elementRegistry.getAll().forEach(e=>{let t=M(e);"root"===t?this.removeRootElement(e):this._removeElement(e,t)}),this._planes=[],this._rootElement=null,delete this._cachedViewbox},F.prototype.focus=function(){this._svg.focus({preventScroll:!0}),this._setFocused(!0)},F.prototype.restoreFocus=function(){document.activeElement===document.body&&this.focus()},F.prototype.isFocused=function(){return this._focused},F.prototype.getDefaultLayer=function(){return this.getLayer("base",0)},F.prototype.getLayer=function(e,t){if(!e)throw Error("must specify a name");let n=this._layers[e];if(n||(n=this._layers[e]=this._createLayer(e,t)),void 0!==t&&n.index!==t)throw Error("layer <"+e+"> already created at index <"+t+">");return n.group},F.prototype._getChildIndex=function(e){return(0,a.u4)(this._layers,function(t,n){return n.visible&&e>=n.index&&t++,t},0)},F.prototype._createLayer=function(e,t){void 0===t&&(t=1);let n=this._getChildIndex(t);return{group:z(this._viewport,"layer-"+e,n),index:t,visible:!0}},F.prototype.showLayer=function(e){if(!e)throw Error("must specify a name");let t=this._layers[e];if(!t)throw Error("layer <"+e+"> does not exist");let n=this._viewport,i=t.group,o=t.index;if(t.visible)return i;let r=this._getChildIndex(o);return n.insertBefore(i,n.childNodes[r]||null),t.visible=!0,i},F.prototype.hideLayer=function(e){if(!e)throw Error("must specify a name");let t=this._layers[e];if(!t)throw Error("layer <"+e+"> does not exist");let n=t.group;return t.visible&&((0,c.Od)(n),t.visible=!1),n},F.prototype._removeLayer=function(e){let t=this._layers[e];t&&(delete this._layers[e],(0,c.Od)(t.group))},F.prototype.getActiveLayer=function(){let e=this._findPlaneForRoot(this.getRootElement());return e?e.layer:null},F.prototype.findRoot=function(e){if("string"==typeof e&&(e=this._elementRegistry.get(e)),e)return(this._findPlaneForRoot(function(e){for(;e.parent;)e=e.parent;return e}(e))||{}).rootElement},F.prototype.getRootElements=function(){return this._planes.map(function(e){return e.rootElement})},F.prototype._findPlaneForRoot=function(e){return(0,a.sE)(this._planes,function(t){return t.rootElement===e})},F.prototype.getContainer=function(){return this._container},F.prototype._updateMarker=function(e,t,n){let i;e.id||(e=this._elementRegistry.get(e)),e.markers=e.markers||new Set,(i=this._elementRegistry._elements[e.id])&&((0,a.Ed)([i.gfx,i.secondaryGfx],function(i){i&&(n?(e.markers.add(t),(0,c.Sh)(i).add(t)):(e.markers.delete(t),(0,c.Sh)(i).remove(t)))}),this._eventBus.fire("element.marker.update",{element:e,gfx:i.gfx,marker:t,add:!!n}))},F.prototype.addMarker=function(e,t){this._updateMarker(e,t,!0)},F.prototype.removeMarker=function(e,t){this._updateMarker(e,t,!1)},F.prototype.hasMarker=function(e,t){return e.id||(e=this._elementRegistry.get(e)),!!e.markers&&e.markers.has(t)},F.prototype.toggleMarker=function(e,t){this.hasMarker(e,t)?this.removeMarker(e,t):this.addMarker(e,t)},F.prototype.getRootElement=function(){let e=this._rootElement;return e||this._planes.length?e:this.setRootElement(this.addRootElement(null))},F.prototype.addRootElement=function(e){let t=this._rootsIdx++;e||(e={id:"__implicitroot_"+t,children:[],isImplicit:!0});let n=e.layer="root-"+t;this._ensureValid("root",e);let i=this.getLayer(n,0);return this.hideLayer(n),this._addRoot(e,i),this._planes.push({rootElement:e,layer:i}),e},F.prototype.removeRootElement=function(e){if("string"==typeof e&&(e=this._elementRegistry.get(e)),this._findPlaneForRoot(e))return this._removeRoot(e),this._removeLayer(e.layer),this._planes=this._planes.filter(function(t){return t.rootElement!==e}),this._rootElement===e&&(this._rootElement=null),e},F.prototype.setRootElement=function(e){if(e===this._rootElement)return e;if(!e)throw Error("rootElement required");return this._findPlaneForRoot(e)||(e=this.addRootElement(e)),this._setRoot(e),e},F.prototype._removeRoot=function(e){let t=this._elementRegistry,n=this._eventBus;n.fire("root.remove",{element:e}),n.fire("root.removed",{element:e}),t.remove(e)},F.prototype._addRoot=function(e,t){let n=this._elementRegistry,i=this._eventBus;i.fire("root.add",{element:e}),n.add(e,t),i.fire("root.added",{element:e,gfx:t})},F.prototype._setRoot=function(e,t){let n=this._rootElement;n&&(this._elementRegistry.updateGraphics(n,null,!0),this.hideLayer(n.layer)),e&&(t||(t=this._findPlaneForRoot(e).layer),this._elementRegistry.updateGraphics(e,this._svg,!0),this.showLayer(e.layer)),this._rootElement=e,this._eventBus.fire("root.set",{element:e})},F.prototype._ensureValid=function(e,t){if(!t.id)throw Error("element must have an id");if(this._elementRegistry.get(t.id))throw Error("element <"+t.id+"> already exists");let n=H[e];if(!(0,a.yW)(n,function(e){return void 0!==t[e]}))throw Error("must supply { "+n.join(", ")+" } with "+e)},F.prototype._setParent=function(e,t,n){N(t.children,e,n),e.parent=t},F.prototype._addElement=function(e,t,n,i){n=n||this.getRootElement();let o=this._eventBus,r=this._graphicsFactory;this._ensureValid(e,t),o.fire(e+".add",{element:t,parent:n}),this._setParent(t,n,i);let a=r.create(e,t,i);return this._elementRegistry.add(t,a),r.update(e,t,a),o.fire(e+".added",{element:t,gfx:a}),t},F.prototype.addShape=function(e,t,n){return this._addElement("shape",e,t,n)},F.prototype.addConnection=function(e,t,n){return this._addElement("connection",e,t,n)},F.prototype._removeElement=function(e,t){let n=this._elementRegistry,i=this._graphicsFactory,o=this._eventBus;if(e=n.get(e.id||e))return o.fire(t+".remove",{element:e}),i.remove(e),j(e.parent&&e.parent.children,e),e.parent=null,o.fire(t+".removed",{element:e}),n.remove(e),e},F.prototype.removeShape=function(e){return this._removeElement(e,"shape")},F.prototype.removeConnection=function(e){return this._removeElement(e,"connection")},F.prototype.getGraphics=function(e,t){return this._elementRegistry.getGraphics(e,t)},F.prototype._changeViewbox=function(e){this._eventBus.fire("canvas.viewbox.changing"),e.apply(this),this._cachedViewbox=null,this._viewboxChanged()},F.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})},F.prototype.viewbox=function(e){let t,n,i,o,r,a,s;if(void 0===e&&this._cachedViewbox)return structuredClone(this._cachedViewbox);let p=this._viewport,l=this.getSize();return e?this._changeViewbox(function(){r=Math.min(l.width/e.width,l.height/e.height);let t=this._svg.createSVGMatrix().scale(r).translate(-e.x,-e.y);(0,c.vs)(p,t)}):(t=(i=this._rootElement?this.getActiveLayer():null)&&i.getBBox()||{},r=$((n=(o=(0,c.vs)(p))?o.matrix:(0,c.wz)()).a,1e3),a=$(-n.e||0,1e3),s=$(-n.f||0,1e3),e=this._cachedViewbox={x:a?a/r:0,y:s?s/r:0,width:l.width/r,height:l.height/r,scale:r,inner:{width:t.width||0,height:t.height||0,x:t.x||0,y:t.y||0},outer:l}),e},F.prototype.scroll=function(e){let t=this._viewport,n=t.getCTM();return e&&this._changeViewbox(function(){e=(0,a.f0)({dx:0,dy:0},e||{}),G(t,n=this._svg.createSVGMatrix().translate(e.dx,e.dy).multiply(n))}),{x:n.e,y:n.f}},F.prototype.scrollToElement=function(e,t){let n,i,o=100;"string"==typeof e&&(e=this._elementRegistry.get(e));let r=this.findRoot(e);if(r!==this.getRootElement()&&this.setRootElement(r),r===e)return;t||(t={}),"number"==typeof t&&(o=t),t={top:t.top||o,right:t.right||o,bottom:t.bottom||o,left:t.left||o};let a=P(e),s=(0,L.JA)(a),c=this.viewbox(),p=this.zoom();c.y+=t.top/p,c.x+=t.left/p,c.width-=(t.right+t.left)/p,c.height-=(t.bottom+t.top)/p;let l=(0,L.JA)(c);if(a.width<c.width&&a.height<c.height){let e=Math.max(0,s.right-l.right),t=Math.min(0,s.left-l.left),o=Math.max(0,s.bottom-l.bottom),r=Math.min(0,s.top-l.top);n=e||t,i=o||r}else n=a.x-c.x,i=a.y-c.y;this.scroll({dx:-n*p,dy:-i*p})},F.prototype.zoom=function(e,t){let n,i;return e?"fit-viewport"===e?this._fitViewport(t):(this._changeViewbox(function(){"object"!=typeof t&&(t={x:(n=this.viewbox().outer).width/2,y:n.height/2}),i=this._setZoom(e,t)}),$(i.a,1e3)):this.viewbox(e).scale},F.prototype._fitViewport=function(e){let t,n;let i=this.viewbox(),o=i.outer,r=i.inner;return r.x>=0&&r.y>=0&&r.x+r.width<=o.width&&r.y+r.height<=o.height&&!e?n={x:0,y:0,width:Math.max(r.width+r.x,o.width),height:Math.max(r.height+r.y,o.height)}:(t=Math.min(1,o.width/r.width,o.height/r.height),n={x:r.x+(e?r.width/2-o.width/t/2:0),y:r.y+(e?r.height/2-o.height/t/2:0),width:o.width/t,height:o.height/t}),this.viewbox(n),this.viewbox(!1).scale},F.prototype._setZoom=function(e,t){let n,i,o,r;let s=this._svg,c=this._viewport,p=s.createSVGMatrix(),l=s.createSVGPoint(),u=(i=c.getCTM()).a;return t?(n=(0,a.f0)(l,t).matrixTransform(i.inverse()),o=p.translate(n.x,n.y).scale(1/u*e).translate(-n.x,-n.y),r=i.multiply(o)):r=p.scale(e),G(this._viewport,r),r},F.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}},F.prototype.getAbsoluteBBox=function(e){let t;let n=this.viewbox(),i=(t=e.waypoints?this.getGraphics(e).getBBox():e).x*n.scale-n.x*n.scale;return{x:i,y:t.y*n.scale-n.y*n.scale,width:t.width*n.scale,height:t.height*n.scale}},F.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")};var W="data-element-id";function V(e){this._elements={},this._eventBus=e}function U(e,t,n){var i,o,r=(i=n[t.name]||[],o=t.inverse,Object.defineProperty(i,"remove",{value:function(t){var i=this.indexOf(t);return -1!==i&&(this.splice(i,1),e.unset(t,o,n)),t}}),Object.defineProperty(i,"contains",{value:function(e){return -1!==this.indexOf(e)}}),Object.defineProperty(i,"add",{value:function(t,i){var r=this.indexOf(t);if(void 0===i){if(-1!==r)return;i=this.length}-1!==r&&this.splice(r,1),this.splice(i,0,t),-1===r&&e.set(t,o,n)}}),Object.defineProperty(i,"__refs_collection",{value:!0}),i);Object.defineProperty(n,t.name,{enumerable:t.enumerable,value:r}),r.length&&r.forEach(function(i){e.set(i,t.inverse,n)})}function K(e,t){if(!(this instanceof K))return new K(e,t);e.inverse=t,t.inverse=e,this.props={},this.props[e.name]=e,this.props[t.name]=t}V.$inject=["eventBus"],V.prototype.add=function(e,t,n){var i=e.id;this._validateId(i),(0,c.Lj)(t,W,i),n&&(0,c.Lj)(n,W,i),this._elements[i]={element:e,gfx:t,secondaryGfx:n}},V.prototype.remove=function(e){var t=this._elements,n=e.id||e,i=n&&t[n];i&&((0,c.Lj)(i.gfx,W,""),i.secondaryGfx&&(0,c.Lj)(i.secondaryGfx,W,""),delete t[n])},V.prototype.updateId=function(e,t){this._validateId(t),"string"==typeof e&&(e=this.get(e)),this._eventBus.fire("element.updateId",{element:e,newId:t});var n=this.getGraphics(e),i=this.getGraphics(e,!0);this.remove(e),e.id=t,this.add(e,n,i)},V.prototype.updateGraphics=function(e,t,n){var i=e.id||e,o=this._elements[i];return n?o.secondaryGfx=t:o.gfx=t,t&&(0,c.Lj)(t,W,i),t},V.prototype.get=function(e){t="string"==typeof e?e:e&&(0,c.Lj)(e,W);var t,n=this._elements[t];return n&&n.element},V.prototype.filter=function(e){var t=[];return this.forEach(function(n,i){e(n,i)&&t.push(n)}),t},V.prototype.find=function(e){for(var t=this._elements,n=Object.keys(t),i=0;i<n.length;i++){var o=t[n[i]],r=o.element;if(e(r,o.gfx))return r}},V.prototype.getAll=function(){return this.filter(function(e){return e})},V.prototype.forEach=function(e){var t=this._elements;Object.keys(t).forEach(function(n){var i=t[n];return e(i.element,i.gfx)})},V.prototype.getGraphics=function(e,t){var n=e.id||e,i=this._elements[n];return i&&(t?i.secondaryGfx:i.gfx)},V.prototype._validateId=function(e){if(!e)throw Error("element must have an id");if(this._elements[e])throw Error("element with id "+e+" already added")},K.prototype.bind=function(e,t){if("string"==typeof t){if(!this.props[t])throw Error("no property <"+t+"> in ref");t=this.props[t]}if(t.collection)U(this,t,e);else{var n,i,o,r;n=this,o=(i=t).inverse,r=e[i.name],Object.defineProperty(e,i.name,{configurable:i.configurable,enumerable:i.enumerable,get:function(){return r},set:function(t){if(t!==r){var i=r;r=null,i&&n.unset(i,o,e),r=t,n.set(r,o,e)}}})}},K.prototype.ensureRefsCollection=function(e,t){var n=e[t.name];return!0!==n.__refs_collection&&U(this,t,e),n},K.prototype.ensureBound=function(e,t){Object.prototype.hasOwnProperty.call(e,t.name||t)||this.bind(e,t)},K.prototype.unset=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).remove(n):e[t.name]=void 0)},K.prototype.set=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).add(n):e[t.name]=n)};var q=new K({name:"children",enumerable:!0,collection:!0},{name:"parent"}),J=new K({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),X=new K({name:"attachers",collection:!0},{name:"host"}),Y=new K({name:"outgoing",collection:!0},{name:"source"}),Z=new K({name:"incoming",collection:!0},{name:"target"});function Q(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(e){var t=this.label,n=this.labels;!e&&t?n.remove(t):n.add(e,0)}}),q.bind(this,"parent"),J.bind(this,"labels"),Y.bind(this,"outgoing"),Z.bind(this,"incoming")}function ee(){Q.call(this),q.bind(this,"children"),X.bind(this,"host"),X.bind(this,"attachers")}function et(){Q.call(this),q.bind(this,"children")}function en(){ee.call(this),J.bind(this,"labelTarget")}function ei(){Q.call(this),Y.bind(this,"source"),Z.bind(this,"target")}i(ee,Q),i(et,ee),i(en,ee),i(ei,Q);var eo={connection:ei,shape:ee,label:en,root:et};function er(){this._uid=12}er.prototype.createRoot=function(e){return this.create("root",e)},er.prototype.createLabel=function(e){return this.create("label",e)},er.prototype.createShape=function(e){return this.create("shape",e)},er.prototype.createConnection=function(e){return this.create("connection",e)},er.prototype.create=function(e,t){return(t=(0,a.f0)({},t||{})).id||(t.id=e+"_"+this._uid++),function(e,t){var n=eo[e];if(!n)throw Error("unknown type: <"+e+">");return(0,a.f0)(new n,t)}(e,t)};var ea="__fn",es=Array.prototype.slice;function ec(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}function ep(){}ec.prototype.on=function(e,t,n,i){if(e=(0,a.kJ)(e)?e:[e],(0,a.mf)(t)&&(i=n,n=t,t=1e3),!(0,a.hj)(t))throw Error("priority must be a number");var o=n;i&&((o=(0,a.ak)(n,i))[ea]=n[ea]||n);var r=this;e.forEach(function(e){r._addListener(e,{priority:t,callback:o,next:null})})},ec.prototype.once=function(e,t,n,i){var o=this;if((0,a.mf)(t)&&(i=n,n=t,t=1e3),!(0,a.hj)(t))throw Error("priority must be a number");function r(){r.__isTomb=!0;var t=n.apply(i,arguments);return o.off(e,r),t}r[ea]=n,this.on(e,t,r)},ec.prototype.off=function(e,t){e=(0,a.kJ)(e)?e:[e];var n=this;e.forEach(function(e){n._removeListener(e,t)})},ec.prototype.createEvent=function(e){var t=new ep;return t.init(e),t},ec.prototype.fire=function(e,t){if(r=es.call(arguments),"object"==typeof e&&(e=(t=e).type),!e)throw Error("no event type specified");if(i=this._listeners[e]){n=t instanceof ep?t:this.createEvent(t),r[0]=n;var n,i,o,r,a=n.type;e!==a&&(n.type=e);try{o=this._invokeListeners(n,r,i)}finally{e!==a&&(n.type=a)}return void 0===o&&n.defaultPrevented&&(o=!1),o}},ec.prototype.handleError=function(e){return!1===this.fire("error",{error:e})},ec.prototype._destroy=function(){this._listeners={}},ec.prototype._invokeListeners=function(e,t,n){for(var i;n&&!e.cancelBubble;)i=this._invokeListener(e,t,n),n=n.next;return i},ec.prototype._invokeListener=function(e,t,n){var i;if(n.callback.__isTomb)return i;try{i=n.callback.apply(null,t),void 0!==i&&(e.returnValue=i,e.stopPropagation()),!1===i&&e.preventDefault()}catch(e){if(!this.handleError(e))throw console.error("unhandled error in event listener",e),e}return i},ec.prototype._addListener=function(e,t){var n,i=this._getListeners(e);if(!i){this._setListeners(e,t);return}for(;i;){if(i.priority<t.priority){t.next=i,n?n.next=t:this._setListeners(e,t);return}n=i,i=i.next}n.next=t},ec.prototype._getListeners=function(e){return this._listeners[e]},ec.prototype._setListeners=function(e,t){this._listeners[e]=t},ec.prototype._removeListener=function(e,t){var n,i,o,r=this._getListeners(e);if(!t){this._setListeners(e,null);return}for(;r;)n=r.next,((o=r.callback)===t||o[ea]===t)&&(i?i.next=n:this._setListeners(e,n)),i=r,r=n},ep.prototype.stopPropagation=function(){this.cancelBubble=!0},ep.prototype.preventDefault=function(){this.defaultPrevented=!0},ep.prototype.init=function(e){(0,a.f0)(this,e||{})};var el=n(2722);function eu(e,t,n,i,o){var r=(0,c.pH)();r.setTranslate(t,n);var a=(0,c.pH)();a.setRotate(i||0,0,0);var s=(0,c.pH)();s.setScale(o||1,o||1),(0,c.vs)(e,[r,a,s])}function eh(e,t,n){var i=(0,c.pH)();i.setTranslate(t,n),(0,c.vs)(e,i)}function ed(e,t){var n=(0,c.pH)();n.setRotate(t,0,0),(0,c.vs)(e,n)}function em(e,t){this._eventBus=e,this._elementRegistry=t}function ef(e,t,n){var i=n||t.firstChild;e!==i&&t.insertBefore(e,i)}em.$inject=["eventBus","elementRegistry"],em.prototype._getChildrenContainer=function(e){var t,n=this._elementRegistry.getGraphics(e);return e.parent?(t=(0,el.G)(n))||(t=(0,c.Ue)("g"),(0,c.Sh)(t).add("djs-children"),(0,c.R3)(n.parentNode,t)):t=n,t},em.prototype._clear=function(e){var t=(0,el.s)(e);return(0,s.ZH)(t),t},em.prototype._createContainer=function(e,t,n,i){var o=(0,c.Ue)("g");(0,c.Sh)(o).add("djs-group"),void 0!==n?ef(o,t,t.childNodes[n]):(0,c.R3)(t,o);var r=(0,c.Ue)("g");(0,c.Sh)(r).add("djs-element"),(0,c.Sh)(r).add("djs-"+e),i&&(0,c.Sh)(r).add("djs-frame"),(0,c.R3)(o,r);var a=(0,c.Ue)("g");return(0,c.Sh)(a).add("djs-visual"),(0,c.R3)(r,a),r},em.prototype.create=function(e,t,n){var i=this._getChildrenContainer(t.parent);return this._createContainer(e,i,n,T(t))},em.prototype.updateContainments=function(e){var t,n=this,i=this._elementRegistry;t=(0,a.u4)(e,function(e,t){return t.parent&&(e[t.parent.id]=t.parent),e},{}),(0,a.Ed)(t,function(e){var t=e.children;if(t){var o=n._getChildrenContainer(e);(0,a.Ed)(t.slice().reverse(),function(e){ef(i.getGraphics(e).parentNode,o)})}})},em.prototype.drawShape=function(e,t,n={}){return this._eventBus.fire("render.shape",{gfx:e,element:t,attrs:n})},em.prototype.getShapePath=function(e){return this._eventBus.fire("render.getShapePath",e)},em.prototype.drawConnection=function(e,t,n={}){return this._eventBus.fire("render.connection",{gfx:e,element:t,attrs:n})},em.prototype.getConnectionPath=function(e){return this._eventBus.fire("render.getConnectionPath",e)},em.prototype.update=function(e,t,n){if(t.parent){var i=this._clear(n);if("shape"===e)this.drawShape(i,t),eh(n,t.x,t.y);else if("connection"===e)this.drawConnection(i,t);else throw Error("unknown type: "+e);t.hidden?(0,c.Lj)(n,"display","none"):(0,c.Lj)(n,"display","block")}},em.prototype.remove=function(e){var t=this._elementRegistry.getGraphics(e);(0,c.Od)(t.parentNode)};var eg={__depends__:[{__init__:["defaultRenderer"],defaultRenderer:["type",B],styles:["type",function(){var e={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},t=this;this.cls=function(e,t,n){var i=this.style(t,n);return(0,a.f0)(i,{class:e})},this.style=function(t,n){(0,a.kJ)(t)||n||(n=t,t=[]);var i=(0,a.u4)(t,function(t,n){return(0,a.f0)(t,e[n]||{})},{});return n?(0,a.f0)(i,n):i},this.computeStyle=function(e,n,i){return(0,a.kJ)(n)||(i=n,n=[]),t.style(n||[],(0,a.f0)({},i,e||{}))}}]}],__init__:["canvas"],canvas:["type",F],elementRegistry:["type",V],elementFactory:["type",er],eventBus:["type",ec],graphicsFactory:["type",em]};function ey(e,t){var n,i;this._injector=t||((i=new g([{config:["value",n=(n=e)||{}]},eg].concat(n.modules||[]))).init(),i),this.get("eventBus").fire("diagram.init")}function ev(){}function e_(e,t){this.model=e,this.properties=t}ey.prototype.get=function(e,t){return this._injector.get(e,t)},ey.prototype.invoke=function(e,t,n){return this._injector.invoke(e,t,n)},ey.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")},ey.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")},ev.prototype.get=function(e){return this.$model.properties.get(this,e)},ev.prototype.set=function(e,t){this.$model.properties.set(this,e,t)},e_.prototype.createType=function(e){var t=this.model,n=this.properties,i=Object.create(ev.prototype);(0,a.Ed)(e.properties,function(e){e.isMany||void 0===e.default||(i[e.name]=e.default)}),n.defineModel(i,t),n.defineDescriptor(i,e);var o=e.ns.name;function r(e){n.define(this,"$type",{value:o,enumerable:!0}),n.define(this,"$attrs",{value:{}}),n.define(this,"$parent",{writable:!0}),(0,a.Ed)(e,(0,a.ak)(function(e,t){this.set(t,e)},this))}return r.prototype=i,r.hasType=i.$instanceOf=this.model.hasType,n.defineModel(r,t),n.defineDescriptor(r,e),r};var eb={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},ex={String:function(e){return e},Boolean:function(e){return"true"===e},Integer:function(e){return parseInt(e,10)},Real:function(e){return parseFloat(e)}};function eE(e,t){var n=ex[e];return n?n(t):t}function ew(e,t){var n,i,o=e.split(/:/);if(1===o.length)n=e,i=t;else if(2===o.length)n=o[1],i=o[0];else throw Error("expected <prefix:localName> or <localName>, got "+e);return{name:e=(i?i+":":"")+n,prefix:i,localName:n}}function eS(e){this.ns=e,this.name=e.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}function ek(e,t){this.packageMap={},this.typeMap={},this.packages=[],this.properties=t,(0,a.Ed)(e,(0,a.ak)(this.registerPackage,this))}function eC(e,t,n){var i=t[n];if(i in e)throw Error("package with "+n+" <"+i+"> already defined")}function eR(e){this.model=e}function eP(e,t,n){Object.defineProperty(e,t.name,{enumerable:!t.isReference,writable:!0,value:n,configurable:!0})}function eA(e){return e.replace(/^:/,"")}function eM(e,t={}){this.properties=new eR(this),this.factory=new e_(this,this.properties),this.registry=new ek(e,this.properties),this.typeCache={},this.config=t}eS.prototype.build=function(){return(0,a.ei)(this,["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"])},eS.prototype.addProperty=function(e,t,n){"boolean"==typeof t&&(n=t,t=void 0),this.addNamedProperty(e,!1!==n);var i=this.properties;void 0!==t?i.splice(t,0,e):i.push(e)},eS.prototype.replaceProperty=function(e,t,n){var i=e.ns,o=this.properties,r=this.propertiesByName,a=e.name!==t.name;if(e.isId){if(!t.isId)throw Error("property <"+t.ns.name+"> must be id property to refine <"+e.ns.name+">");this.setIdProperty(t,!1)}if(e.isBody){if(!t.isBody)throw Error("property <"+t.ns.name+"> must be body property to refine <"+e.ns.name+">");this.setBodyProperty(t,!1)}var s=o.indexOf(e);if(-1===s)throw Error("property <"+i.name+"> not found in property list");o.splice(s,1),this.addProperty(t,n?void 0:s,a),r[i.name]=r[i.localName]=t},eS.prototype.redefineProperty=function(e,t,n){var i=e.ns.prefix,o=t.split("#"),r=ew(o[0],i),a=ew(o[1],r.prefix).name,s=this.propertiesByName[a];if(s)this.replaceProperty(s,e,n);else throw Error("refined property <"+a+"> not found");delete e.redefines},eS.prototype.addNamedProperty=function(e,t){var n=e.ns,i=this.propertiesByName;t&&(this.assertNotDefined(e,n.name),this.assertNotDefined(e,n.localName)),i[n.name]=i[n.localName]=e},eS.prototype.removeNamedProperty=function(e){var t=e.ns,n=this.propertiesByName;delete n[t.name],delete n[t.localName]},eS.prototype.setBodyProperty=function(e,t){if(t&&this.bodyProperty)throw Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+e.ns.name+">)");this.bodyProperty=e},eS.prototype.setIdProperty=function(e,t){if(t&&this.idProperty)throw Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+e.ns.name+">)");this.idProperty=e},eS.prototype.assertNotTrait=function(e){if((e.extends||[]).length)throw Error(`cannot create <${e.name}> extending <${e.extends}>`)},eS.prototype.assertNotDefined=function(e,t){var n=e.name,i=this.propertiesByName[n];if(i)throw Error("property <"+n+"> already defined; override of <"+i.definedBy.ns.name+"#"+i.ns.name+"> by <"+e.definedBy.ns.name+"#"+e.ns.name+"> not allowed without redefines")},eS.prototype.hasProperty=function(e){return this.propertiesByName[e]},eS.prototype.addTrait=function(e,t){t&&this.assertNotTrait(e);var n=this.allTypesByName,i=this.allTypes,o=e.name;o in n||((0,a.Ed)(e.properties,(0,a.ak)(function(n){Object.defineProperty(n=(0,a.f0)({},n,{name:n.ns.localName,inherited:t}),"definedBy",{value:e});var i=n.replaces,o=n.redefines;i||o?this.redefineProperty(n,i||o,i):(n.isBody&&this.setBodyProperty(n),n.isId&&this.setIdProperty(n),this.addProperty(n))},this)),i.push(e),n[o]=e)},ek.prototype.getPackage=function(e){return this.packageMap[e]},ek.prototype.getPackages=function(){return this.packages},ek.prototype.registerPackage=function(e){e=(0,a.f0)({},e);var t=this.packageMap;eC(t,e,"prefix"),eC(t,e,"uri"),(0,a.Ed)(e.types,(0,a.ak)(function(t){this.registerType(t,e)},this)),t[e.uri]=t[e.prefix]=e,this.packages.push(e)},ek.prototype.registerType=function(e,t){var n=ew((e=(0,a.f0)({},e,{superClass:(e.superClass||[]).slice(),extends:(e.extends||[]).slice(),properties:(e.properties||[]).slice(),meta:(0,a.f0)(e.meta||{})})).name,t.prefix),i=n.name,o={};(0,a.Ed)(e.properties,(0,a.ak)(function(e){var t=ew(e.name,n.prefix),i=t.name;eb[e.type]||(e.type=ew(e.type,t.prefix).name),(0,a.f0)(e,{ns:t,name:i}),o[i]=e},this)),(0,a.f0)(e,{ns:n,name:i,propertiesByName:o}),(0,a.Ed)(e.extends,(0,a.ak)(function(e){var t=ew(e,n.prefix),o=this.typeMap[t.name];o.traits=o.traits||[],o.traits.push(i)},this)),this.definePackage(e,t),this.typeMap[i]=e},ek.prototype.mapTypes=function(e,t,n){var i=eb[e.name]?{name:e.name}:this.typeMap[e.name],o=this;function r(n,i){var r=ew(n,eb[n]?"":e.prefix);o.mapTypes(r,t,i)}function s(e){return r(e,!0)}if(!i)throw Error("unknown type <"+e.name+">");(0,a.Ed)(i.superClass,n?s:function(e){return r(e,!1)}),t(i,!n),(0,a.Ed)(i.traits,s)},ek.prototype.getEffectiveDescriptor=function(e){var t=ew(e),n=new eS(t);this.mapTypes(t,function(e,t){n.addTrait(e,t)});var i=n.build();return this.definePackage(i,i.allTypes[i.allTypes.length-1].$pkg),i},ek.prototype.definePackage=function(e,t){this.properties.define(e,"$pkg",{value:t})},eR.prototype.set=function(e,t,n){if(!(0,a.HD)(t)||!t.length)throw TypeError("property name must be a non-empty string");var i=this.getProperty(e,t),o=i&&i.name;void 0===n?i?delete e[o]:delete e.$attrs[eA(t)]:i?o in e?e[o]=n:eP(e,i,n):e.$attrs[eA(t)]=n},eR.prototype.get=function(e,t){var n=this.getProperty(e,t);if(!n)return e.$attrs[eA(t)];var i=n.name;return!e[i]&&n.isMany&&eP(e,n,[]),e[i]},eR.prototype.define=function(e,t,n){if(!n.writable){var i=n.value;n=(0,a.f0)({},n,{get:function(){return i}}),delete n.value}Object.defineProperty(e,t,n)},eR.prototype.defineDescriptor=function(e,t){this.define(e,"$descriptor",{value:t})},eR.prototype.defineModel=function(e,t){this.define(e,"$model",{value:t})},eR.prototype.getProperty=function(e,t){var n=this.model,i=n.getPropertyDescriptor(e,t);if(i)return i;if(t.includes(":"))return null;let o=n.config.strict;if(void 0!==o){let n=TypeError(`unknown property <${t}> on <${e.$type}>`);if(o)throw n;"undefined"!=typeof console&&console.warn(n)}return null},eM.prototype.create=function(e,t){var n=this.getType(e);if(!n)throw Error("unknown type <"+e+">");return new n(t)},eM.prototype.getType=function(e){var t=this.typeCache,n=(0,a.HD)(e)?e:e.ns.name,i=t[n];return i||(e=this.registry.getEffectiveDescriptor(n),i=t[n]=this.factory.createType(e)),i},eM.prototype.createAny=function(e,t,n){var i=ew(e),o={$type:e,$instanceOf:function(e){return e===this.$type},get:function(e){return this[e]},set:function(e,t){(0,a.t8)(this,[e],t)}},r={name:e,isGeneric:!0,ns:{prefix:i.prefix,localName:i.localName,uri:t}};return this.properties.defineDescriptor(o,r),this.properties.defineModel(o,this),this.properties.define(o,"get",{enumerable:!1,writable:!0}),this.properties.define(o,"set",{enumerable:!1,writable:!0}),this.properties.define(o,"$parent",{enumerable:!1,writable:!0}),this.properties.define(o,"$instanceOf",{enumerable:!1,writable:!0}),(0,a.Ed)(n,function(e,t){(0,a.Kn)(e)&&void 0!==e.value?o[e.name]=e.value:o[t]=e}),o},eM.prototype.getPackage=function(e){return this.registry.getPackage(e)},eM.prototype.getPackages=function(){return this.registry.getPackages()},eM.prototype.getElementDescriptor=function(e){return e.$descriptor},eM.prototype.hasType=function(e,t){return void 0===t&&(t=e,e=this),t in e.$model.getElementDescriptor(e).allTypesByName},eM.prototype.getPropertyDescriptor=function(e,t){return this.getElementDescriptor(e).propertiesByName[t]},eM.prototype.getTypeDescriptor=function(e){return this.registry.typeMap[e]};var eT=String.fromCharCode,eD=Object.prototype.hasOwnProperty,eB=/&#(\d+);|&#x([0-9a-f]+);|&(\w+);/ig,ej={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};function eN(e,t,n,i){return i?eD.call(ej,i)?ej[i]:"&"+i+";":t?eT(t):eT(parseInt(n,16))}function eO(e){return e.length>3&&-1!==e.indexOf("&")?e.replace(eB,eN):e}Object.keys(ej).forEach(function(e){ej[e.toUpperCase()]=ej[e]});var eL="non-whitespace outside of root node";function e$(e){return Error(e)}function eI(e){return"missing namespace for prefix <"+e+">"}function ez(e){return{get:e,enumerable:!0}}function eH(){return{line:0,column:0}}function eF(e){throw e}function eG(e){if(!this)return new eG(e);var t,n,i,o,r,a,s,c,p,l=e&&e.proxy,u=eF,h=eH,d=!1,m=!1,f=null,g=!1;function y(e){e instanceof Error||(e=e$(e)),f=e,u(e,h)}function v(e){a&&(e instanceof Error||(e=e$(e)),a(e,h))}this.on=function(e,t){if("function"!=typeof t)throw e$("required args <name, cb>");switch(e){case"openTag":i=t;break;case"text":n=t;break;case"closeTag":o=t;break;case"error":u=t;break;case"warn":a=t;break;case"cdata":r=t;break;case"attention":p=t;break;case"question":c=t;break;case"comment":s=t;break;default:throw e$("unsupported event: "+e)}return this},this.ns=function(e){if(void 0===e&&(e={}),"object"!=typeof e)throw e$("required args <nsMap={}>");var n,i={};for(n in e)i[n]=e[n];return m=!0,t=i,this},this.parse=function(e){if("string"!=typeof e)throw e$("required args <xml=string>");return f=null,function(e){var a,u,f,_,b,x,E,w,S,k,C,R=m?[]:null,P=m?function(e){var t,n,i={};for(t in e)i[n=e[t]]=n,i[n+"$uri"]=t;return i}(t):null,A=[],M=0,T=!1,D=!1,B=0,j=0,N="",O=0;function L(){if(null!==C)return C;var e,n,i,o,r,a,s,c,p,l,u,h=m&&P.xmlns,f=m&&d?[]:null,g=O,y=N,_=y.length,b={},x={};e:for(;g<_;g++)if(p=!1,32!==(l=y.charCodeAt(g))&&(!(l<14)||!(l>8))){for((l<65||l>122||l>90&&l<97)&&95!==l&&58!==l&&(v("illegal first char attribute name"),p=!0),u=g+1;u<_;u++)if((!((l=y.charCodeAt(u))>96)||!(l<123))&&(!(l>64)||!(l<91))&&(!(l>47)||!(l<59))&&46!==l&&45!==l&&95!==l){if(32===l||l<14&&l>8){v("missing attribute value"),g=u;continue e}if(61===l)break;v("illegal attribute name char"),p=!0}if("xmlns:xmlns"===(c=y.substring(g,u))&&(v("illegal declaration of xmlns"),p=!0),34===(l=y.charCodeAt(u+1)))-1===(u=y.indexOf('"',g=u+2))&&-1!==(u=y.indexOf("'",g))&&(v("attribute value quote missmatch"),p=!0);else if(39===l)-1===(u=y.indexOf("'",g=u+2))&&-1!==(u=y.indexOf('"',g))&&(v("attribute value quote missmatch"),p=!0);else for(v("missing attribute value quotes"),p=!0,u+=1;u<_&&32!==(l=y.charCodeAt(u+1))&&(!(l<14)||!(l>8));u++);for(-1===u&&(v("missing closing quotes"),u=_,p=!0),p||(a=y.substring(g,u)),g=u;u+1<_&&32!==(l=y.charCodeAt(u+1))&&(!(l<14)||!(l>8));u++)g===u&&(v("illegal character after attribute end"),p=!0);if(g=u+1,!p){if(c in x){v("attribute <"+c+"> already defined");continue}if(x[c]=!0,!m){b[c]=a;continue}if(d){if(null!==(r="xmlns"===c?"xmlns":120===c.charCodeAt(0)&&"xmlns:"===c.substr(0,6)?c.substr(6):null)){if(e=eO(a),n=r+"$uri",!(s=t[e])){if("xmlns"===r||n in P&&P[n]!==e)do s="ns"+M++;while(void 0!==P[s]);else s=r;t[e]=s}P[r]!==s&&(o||(P=function(e){var t,n={};for(t in e)n[t]=e[t];return n}(P),o=!0),P[r]=s,"xmlns"===r&&(P[s+"$uri"]=e,h=s),P[n]=e),b[c]=a;continue}f.push(c,a);continue}if(-1===(l=c.indexOf(":"))){b[c]=a;continue}if(!(i=P[c.substring(0,l)])){v(eI(c.substring(0,l)));continue}b[c=h===i?c.substr(l+1):i+c.substr(l)]=a}}if(d)for(g=0,_=f.length;g<_;g++){if(c=f[g++],a=f[g],-1!==(l=c.indexOf(":"))){if(!(i=P[c.substring(0,l)])){v(eI(c.substring(0,l)));continue}c=h===i?c.substr(l+1):i+c.substr(l)}b[c]=a}return C=b}for(h=function(){for(var t,n,i=/(\r\n|\r|\n)/g,o=0,r=0,a=0,s=j;B>=a&&(t=i.exec(e))&&!((s=t[0].length+t.index)>B);)o+=1,a=s;return -1==B?(r=s,n=e.substring(j)):0===j?n=e.substring(j,B):(r=B-a,n=-1==j?e.substring(B):e.substring(B,j+1)),{data:n,line:o,column:r}},l&&(k=Object.create({},{name:ez(function(){return w}),originalName:ez(function(){return S}),attrs:ez(L),ns:ez(function(){return P})}));-1!==j;){if(-1===(B=60===e.charCodeAt(j)?j:e.indexOf("<",j))){if(A.length)return y("unexpected end of file");if(0===j)return y("missing start tag");j<e.length&&e.substring(j).trim()&&v(eL);return}if(j!==B){if(A.length){if(n&&(n(e.substring(j,B),eO,h),g))return}else if(e.substring(j,B).trim()&&(v(eL),g))return}if(33===(b=e.charCodeAt(B+1))){if(91===(_=e.charCodeAt(B+2))&&"CDATA["===e.substr(B+3,6)){if(-1===(j=e.indexOf("]]>",B)))return y("unclosed cdata");if(r&&(r(e.substring(B+9,j),h),g))return;j+=3;continue}if(45===_&&45===e.charCodeAt(B+3)){if(-1===(j=e.indexOf("-->",B)))return y("unclosed comment");if(s&&(s(e.substring(B+4,j),eO,h),g))return;j+=3;continue}}if(63===b){if(-1===(j=e.indexOf("?>",B)))return y("unclosed question");if(c&&(c(e.substring(B,j+2),h),g))return;j+=2;continue}for(u=B+1;;u++){if(isNaN(x=e.charCodeAt(u)))return j=-1,y("unclosed tag");if(34===x)u=-1!==(_=e.indexOf('"',u+1))?_:u;else if(39===x)u=-1!==(_=e.indexOf("'",u+1))?_:u;else if(62===x){j=u;break}}if(33===b){if(p&&(p(e.substring(B,j+1),eO,h),g))return;j+=1;continue}if(C={},47===b){if(T=!1,D=!0,!A.length)return y("missing open tag");if(u=w=A.pop(),_=B+2+u.length,e.substring(B+2,_)!==u)return y("closing tag mismatch");for(;_<j;_++)if(32!==(b=e.charCodeAt(_))&&(!(b>8)||!(b<14)))return y("close tag")}else{if(47===e.charCodeAt(j-1)?(u=w=e.substring(B+1,j-1),T=!0,D=!0):(u=w=e.substring(B+1,j),T=!0,D=!1),!(b>96&&b<123||b>64&&b<91||95===b||58===b))return y("illegal first char nodeName");for(_=1,f=u.length;_<f;_++)if((!((b=u.charCodeAt(_))>96)||!(b<123))&&(!(b>64)||!(b<91))&&(!(b>47)||!(b<59))&&45!==b&&95!==b&&46!=b){if(32===b||b<14&&b>8){w=u.substring(0,_),C=null;break}return y("invalid nodeName")}D||A.push(w)}if(m){if(a=P,T&&(D||R.push(a),null===C&&(d=-1!==u.indexOf("xmlns",_))&&(O=_,N=u,L(),d=!1)),S=w,-1!==(b=w.indexOf(":"))){if(!(E=P[w.substring(0,b)]))return y("missing namespace on <"+S+">");w=w.substr(b+1)}else E=P.xmlns;E&&(w=E+":"+w)}if(T&&(O=_,N=u,i&&(l?i(k,eO,D,h):i(w,L,eO,D,h),g)))return;if(D){if(o&&(o(l?k:w,eO,T,h),g))return;m&&(P=T?a:R.pop())}j+=1}}(e),h=eH,g=!1,f},this.stop=function(){g=!0}}function eW(e){return e.xml&&"lowerCase"===e.xml.tagAlias}var eV={xsi:"http://www.w3.org/2001/XMLSchema-instance",xml:"http://www.w3.org/XML/1998/namespace"},eU="property";function eK(e){return e.xml&&e.xml.serialize}function eq(e,t){var n;return eW(t)?e.prefix+":"+((n=e.localName).charAt(0).toUpperCase()+n.slice(1)):e.name}function eJ(e){return Error(e)}function eX(e){return e.$descriptor}function eY(e){(0,a.f0)(this,e),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(e){this.references.push(e)},this.addElement=function(e){if(!e)throw eJ("expected element");var t,n=this.elementsById,i=eX(e).idProperty;if(i&&(t=e.get(i.name))){if(!/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i.test(t))throw Error("illegal ID <"+t+">");if(n[t])throw eJ("duplicate ID <"+t+">");n[t]=e}},this.addWarning=function(e){this.warnings.push(e)}}function eZ(){}function eQ(){}function e0(){}function e1(e,t){this.property=e,this.context=t}function e2(e,t){this.element=t,this.propertyDesc=e}function e5(){}function e3(e,t,n){this.model=e,this.type=e.getType(t),this.context=n}function e6(e,t,n){e3.call(this,e,t,n)}function e4(e,t,n){this.model=e,this.context=n}function e9(e){e instanceof eM&&(e={model:e}),(0,a.f0)(this,{lax:!1},e)}eZ.prototype.handleEnd=function(){},eZ.prototype.handleText=function(){},eZ.prototype.handleNode=function(){},eQ.prototype=Object.create(eZ.prototype),eQ.prototype.handleNode=function(){return this},e0.prototype=Object.create(eZ.prototype),e0.prototype.handleText=function(e){this.body=(this.body||"")+e},e1.prototype=Object.create(e0.prototype),e1.prototype.handleNode=function(e){if(this.element)throw eJ("expected no sub nodes");return this.element=this.createReference(e),this},e1.prototype.handleEnd=function(){this.element.id=this.body},e1.prototype.createReference=function(e){return{property:this.property.ns.name,id:""}},e2.prototype=Object.create(e0.prototype),e2.prototype.handleEnd=function(){var e=this.body||"",t=this.element,n=this.propertyDesc;e=eE(n.type,e),n.isMany?t.get(n.name).push(e):t.set(n.name,e)},e5.prototype=Object.create(e0.prototype),e5.prototype.handleNode=function(e){var t=this,n=this.element;return n?t=this.handleChild(e):(n=this.element=this.createElement(e),this.context.addElement(n)),t},e3.prototype=Object.create(e5.prototype),e3.prototype.addReference=function(e){this.context.addReference(e)},e3.prototype.handleText=function(e){if(!eX(this.element).bodyProperty)throw eJ("unexpected body text <"+e+">");e0.prototype.handleText.call(this,e)},e3.prototype.handleEnd=function(){var e=this.body,t=this.element,n=eX(t).bodyProperty;n&&void 0!==e&&(e=eE(n.type,e),t.set(n.name,e))},e3.prototype.createElement=function(e){var t,n=e.attributes,i=this.type,o=eX(i),r=this.context,s=new i({}),c=this.model;return(0,a.Ed)(n,function(e,n){var i,p=o.propertiesByName[n];p&&p.isReference?p.isMany?(i=e.split(" "),(0,a.Ed)(i,function(e){r.addReference({element:s,property:p.ns.name,id:e})})):r.addReference({element:s,property:p.ns.name,id:e}):(p?e=eE(p.type,e):"xmlns"===n?n=":"+n:(t=ew(n,o.ns.prefix),c.getPackage(t.prefix)&&r.addWarning({message:"unknown attribute <"+n+">",element:s,property:n,value:e})),s.set(n,e))}),s},e3.prototype.getPropertyForNode=function(e){var t=ew(e.name),n=this.type,i=this.model,o=eX(n),r=t.name,s=o.propertiesByName[r];if(s&&!s.isAttr){let t=function(e){let t=eK(e);return t!==eU&&(t||null)}(s);if(t){let n=e.attributes[t];if(n){let t=function(e,t,n){let i=ew(e,t.xmlns),o=ew(`${t[i.prefix]||i.prefix}:${i.localName}`);var r,a,s,c=n.getPackage(o.prefix);return r=o.name,a=o.localName,(s=c&&c.xml&&c.xml.typePrefix)&&0===a.indexOf(s)?o.prefix+":"+a.slice(s.length):r}(n,e.ns,i),o=i.getType(t);return(0,a.f0)({},s,{effectiveType:eX(o).name})}}return s}var c=i.getPackage(t.prefix);if(c){let e=eq(t,c),n=i.getType(e);if(s=(0,a.sE)(o.properties,function(e){return!e.isVirtual&&!e.isReference&&!e.isAttribute&&n.hasType(e.type)}))return(0,a.f0)({},s,{effectiveType:eX(n).name})}else if(s=(0,a.sE)(o.properties,function(e){return!e.isReference&&!e.isAttribute&&"Element"===e.type}))return s;throw eJ("unrecognized element <"+t.name+">")},e3.prototype.toString=function(){return"ElementDescriptor["+eX(this.type).name+"]"},e3.prototype.valueHandler=function(e,t){return new e2(e,t)},e3.prototype.referenceHandler=function(e){return new e1(e,this.context)},e3.prototype.handler=function(e){return"Element"===e?new e4(this.model,e,this.context):new e3(this.model,e,this.context)},e3.prototype.handleChild=function(e){if(t=this.getPropertyForNode(e),i=this.element,ex[n=t.effectiveType||t.type])return this.valueHandler(t,i);var t,n,i,o,r=(o=t.isReference?this.referenceHandler(t).handleNode(e):this.handler(n).handleNode(e)).element;return void 0!==r&&(t.isMany?i.get(t.name).push(r):i.set(t.name,r),t.isReference?((0,a.f0)(r,{element:i}),this.context.addReference(r)):r.$parent=i),o},e6.prototype=Object.create(e3.prototype),e6.prototype.createElement=function(e){var t=e.name,n=ew(t),i=this.model,o=this.type,r=i.getPackage(n.prefix),a=r&&eq(n,r)||t;if(!o.hasType(a))throw eJ("unexpected element <"+e.originalName+">");return e3.prototype.createElement.call(this,e)},e4.prototype=Object.create(e5.prototype),e4.prototype.createElement=function(e){var t=e.name,n=ew(t).prefix,i=e.ns[n+"$uri"],o=e.attributes;return this.model.createAny(t,i,o)},e4.prototype.handleChild=function(e){var t=new e4(this.model,"Element",this.context).handleNode(e),n=this.element,i=t.element;return void 0!==i&&((n.$children=n.$children||[]).push(i),i.$parent=n),t},e4.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)},e9.prototype.fromXML=function(e,t,n){var i,o=t.rootHandler;t instanceof e3?(o=t,t={}):"string"==typeof t?(o=this.handler(t),t={}):"string"==typeof o&&(o=this.handler(o));var r=this.model,s=this.lax,c=new eY((0,a.f0)({},t,{rootHandler:o})),p=new eG({proxy:!0}),l=(Object.defineProperty(i=[],"peek",{value:function(){return this[this.length-1]}}),i);function u(e,t,n){var i=t(),o=i.line,r=i.column,a=i.data;"<"===a.charAt(0)&&-1!==a.indexOf(" ")&&(a=a.slice(0,a.indexOf(" "))+">");var s="unparsable content "+(a?a+" ":"")+"detected\n	line: "+o+"\n	column: "+r+"\n	nested error: "+e.message;if(n)return c.addWarning({message:s,error:e}),!0;throw eJ(s)}function h(e,t){return u(e,t,!0)}o.context=c,l.push(o);var d=/^<\?xml /i,m=/ encoding="([^"]+)"/i,f=/^utf-8$/i;function g(e,t){try{l.peek().handleText(e)}catch(e){h(e,t)}}var y=r.getPackages().reduce(function(e,t){return e[t.uri]=t.prefix,e},Object.entries(eV).reduce(function(e,[t,n]){return e[n]=t,e},r.config&&r.config.nsMap||{}));return p.ns(y).on("openTag",function(e,t,n,i){var o=e.attrs||{},r=Object.keys(o).reduce(function(e,n){var i=t(o[n]);return e[n]=i,e},{});!function(e,t){var n=l.peek();try{l.push(n.handleNode(e))}catch(e){u(e,t,s)&&l.push(new eQ)}}({name:e.name,originalName:e.originalName,attributes:r,ns:e.ns},i)}).on("question",function(e){if(d.test(e)){var t=m.exec(e),n=t&&t[1];!n||f.test(n)||c.addWarning({message:"unsupported document encoding <"+n+">, falling back to UTF-8"})}}).on("closeTag",function(){l.pop().handleEnd()}).on("cdata",g).on("text",function(e,t,n){var i;(i=t(e)).trim()&&g(i,n)}).on("error",u).on("warn",h),new Promise(function(t,n){try{p.parse(e),function(){var e,t,n=c.elementsById,i=c.references;for(e=0;t=i[e];e++){var o=t.element,r=n[t.id],a=eX(o).propertiesByName[t.property];if(r||c.addWarning({message:"unresolved reference <"+t.id+">",element:t.element,property:t.property,value:t.id}),a.isMany){var s=o.get(a.name),p=s.indexOf(t);-1===p&&(p=s.length),r?s[p]=r:s.splice(p,1)}else o.set(a.name,r)}}()}catch(e){i=e}var i,r=o.element;i||r||(i=eJ("failed to parse document as <"+o.type.$descriptor.name+">"));var a=c.warnings,s=c.references,l=c.elementsById;return i?(i.warnings=a,n(i)):t({rootElement:r,elementsById:l,references:s,warnings:a})})},e9.prototype.handler=function(e){return new e6(this.model,e)};var e8=/<|>|'|"|&|\n\r|\n/g,e7=/<|>|&/g;function te(e){this.prefixMap={},this.uriMap={},this.used={},this.wellknown=[],this.custom=[],this.parent=e,this.defaultPrefixMap=e&&e.defaultPrefixMap||{}}function tt(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function tn(e){return(0,a.HD)(e)?e:(e.prefix?e.prefix+":":"")+e.localName}te.prototype.mapDefaultPrefixes=function(e){this.defaultPrefixMap=e},te.prototype.defaultUriByPrefix=function(e){return this.defaultPrefixMap[e]},te.prototype.byUri=function(e){return this.uriMap[e]||this.parent&&this.parent.byUri(e)},te.prototype.add=function(e,t){this.uriMap[e.uri]=e,t?this.wellknown.push(e):this.custom.push(e),this.mapPrefix(e.prefix,e.uri)},te.prototype.uriByPrefix=function(e){return this.prefixMap[e||"xmlns"]||this.parent&&this.parent.uriByPrefix(e)},te.prototype.mapPrefix=function(e,t){this.prefixMap[e||"xmlns"]=t},te.prototype.getNSKey=function(e){return void 0!==e.prefix?e.uri+"|"+e.prefix:e.uri},te.prototype.logUsed=function(e){var t=e.uri,n=this.getNSKey(e);this.used[n]=this.byUri(t),this.parent&&this.parent.logUsed(e)},te.prototype.getUsed=function(e){return[].concat(this.wellknown,this.custom).filter(e=>{var t=this.getNSKey(e);return this.used[t]})};var ti={"\n":"#10","\n\r":"#10",'"':"#34","'":"#39","<":"#60",">":"#62","&":"#38"},to={"<":"lt",">":"gt","&":"amp"};function tr(e,t,n){return(e=(0,a.HD)(e)?e:""+e).replace(t,function(e){return"&"+n[e]+";"})}function ta(e){this.tagName=e}function ts(){}function tc(e){this.tagName=e}function tp(e,t){this.body=[],this.attrs=[],this.parent=e,this.propertyDescriptor=t}function tl(e,t,n){tp.call(this,e,t),this.serialization=n}function tu(){this.value="",this.write=function(e){this.value+=e}}function th(e,t){var n=[""];this.append=function(t){return e.write(t),this},this.appendNewLine=function(){return t&&e.write("\n"),this},this.appendIndent=function(){return t&&e.write(n.join("  ")),this},this.indent=function(){return n.push(""),this},this.unindent=function(){return n.pop(),this}}function td(e){return e=(0,a.f0)({format:!1,preamble:!0},e||{}),{toXML:function(t,n){var i=n||new tu,o=new th(i,e.format);e.preamble&&o.append('<?xml version="1.0" encoding="UTF-8"?>\n');var r=new tp,a=t.$model;if(r.getNamespaces().mapDefaultPrefixes(function(e){let t=e.config&&e.config.nsMap||{},n={};for(let e in eV)n[e]=eV[e];for(let e in t)n[t[e]]=e;for(let t of e.getPackages())n[t.prefix]=t.uri;return n}(a)),r.build(t).serializeTo(o),!n)return i.value}}}function tm(e,t){eM.call(this,e,t)}ta.prototype.build=function(e){return this.element=e,this},ta.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"+this.element.id+"</"+this.tagName+">").appendNewLine()},ts.prototype.serializeValue=ts.prototype.serializeTo=function(e){e.append(this.escape?tr(this.value,e7,to):this.value)},ts.prototype.build=function(e,t){return this.value=t,"String"===e.type&&-1!==t.search(e7)&&(this.escape=!0),this},tt(tc,ts),tc.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"),this.serializeValue(e),e.append("</"+this.tagName+">").appendNewLine()},tp.prototype.build=function(e){this.element=e;var t,n,i,o=e.$descriptor,r=this.propertyDescriptor,s=o.isGeneric;return(n=s?this.parseGenericNsAttributes(e):this.parseNsAttributes(e),r?this.ns=this.nsPropertyTagName(r):this.ns=this.nsTagName(o),this.tagName=this.addTagName(this.ns),s)?this.parseGenericContainments(e):(t=e.$descriptor,i=(0,a.hX)(t.properties,function(t){var n=t.name;if(t.isVirtual||!(0,a.e$)(e,n))return!1;var i=e[n];return i!==t.default&&null!==i&&(!t.isMany||i.length)}),this.parseAttributes((0,a.hX)(i,function(e){return e.isAttr})),this.parseContainments((0,a.hX)(i,function(e){return!e.isAttr}))),this.parseGenericAttributes(e,n),this},tp.prototype.nsTagName=function(e){var t,n;return t=this.logNamespaceUsed(e.ns),e.isGeneric?(0,a.f0)({localName:e.ns.localName},t):(0,a.f0)({localName:(n=e.ns.localName,eW(e.$pkg)?n.charAt(0).toLowerCase()+n.slice(1):n)},t)},tp.prototype.nsPropertyTagName=function(e){var t;return t=this.logNamespaceUsed(e.ns),(0,a.f0)({localName:e.ns.localName},t)},tp.prototype.isLocalNs=function(e){return e.uri===this.ns.uri},tp.prototype.nsAttributeName=function(e){if(t=(0,a.HD)(e)?ew(e):e.ns,e.inherited)return{localName:t.localName};var t,n=this.logNamespaceUsed(t);return(this.getNamespaces().logUsed(n),this.isLocalNs(n))?{localName:t.localName}:(0,a.f0)({localName:t.localName},n)},tp.prototype.parseGenericNsAttributes=function(e){return Object.entries(e).filter(([t,n])=>!t.startsWith("$")&&this.parseNsAttribute(e,t,n)).map(([e,t])=>({name:e,value:t}))},tp.prototype.parseGenericContainments=function(e){var t=e.$body;t&&this.body.push(new ts().build({type:"String"},t));var n=e.$children;n&&(0,a.Ed)(n,e=>{this.body.push(new tp(this).build(e))})},tp.prototype.parseNsAttribute=function(e,t,n){var i,o=e.$model,r=ew(t);if("xmlns"===r.prefix&&(i={prefix:r.localName,uri:n}),r.prefix||"xmlns"!==r.localName||(i={uri:n}),!i)return{name:t,value:n};if(o&&o.getPackage(n))this.logNamespace(i,!0,!0);else{var a=this.logNamespaceUsed(i,!0);this.getNamespaces().logUsed(a)}},tp.prototype.parseNsAttributes=function(e){var t=this,n=e.$attrs,i=[];return(0,a.Ed)(n,function(n,o){var r=t.parseNsAttribute(e,o,n);r&&i.push(r)}),i},tp.prototype.parseGenericAttributes=function(e,t){var n=this;(0,a.Ed)(t,function(t){try{n.addAttribute(n.nsAttributeName(t.name),t.value)}catch(n){"undefined"!=typeof console&&console.warn(`missing namespace information for <${t.name}=${t.value}> on`,e,n)}})},tp.prototype.parseContainments=function(e){var t=this,n=this.body,i=this.element;(0,a.Ed)(e,function(e){var o=i.get(e.name),r=e.isReference;if(e.isMany||(o=[o]),e.isBody)n.push(new ts().build(e,o[0]));else if(ex[e.type])(0,a.Ed)(o,function(i){n.push(new tc(t.addTagName(t.nsPropertyTagName(e))).build(e,i))});else if(r)(0,a.Ed)(o,function(i){n.push(new ta(t.addTagName(t.nsPropertyTagName(e))).build(i))});else{var s=eK(e);(0,a.Ed)(o,function(i){var o;o=s?s===eU?new tp(t,e):new tl(t,e,s):new tp(t),n.push(o.build(i))})}})},tp.prototype.getNamespaces=function(e){var t,n=this.namespaces,i=this.parent;return n||(t=i&&i.getNamespaces(),e||!t?this.namespaces=n=new te(t):n=t),n},tp.prototype.logNamespace=function(e,t,n){var i=this.getNamespaces(n),o=e.uri,r=e.prefix;return(!i.byUri(o)||n)&&i.add(e,t),i.mapPrefix(r,o),e},tp.prototype.logNamespaceUsed=function(e,t){var n,i,o,r=this.getNamespaces(t),a=e.prefix,s=e.uri;if(!a&&!s)return{localName:e.localName};if(o=r.defaultUriByPrefix(a),!(s=s||o||r.uriByPrefix(a)))throw Error("no namespace uri given for prefix <"+a+">");if((e=r.byUri(s))||a||(e=this.logNamespace({uri:s},o===s,!0)),!e){for(n=a,i=1;r.uriByPrefix(n);)n=a+"_"+i++;e=this.logNamespace({prefix:n,uri:s},o===s)}return a&&r.mapPrefix(a,s),e},tp.prototype.parseAttributes=function(e){var t=this,n=this.element;(0,a.Ed)(e,function(e){var i=n.get(e.name);if(e.isReference){if(e.isMany){var o=[];(0,a.Ed)(i,function(e){o.push(e.id)}),i=o.join(" ")}else i=i.id}t.addAttribute(t.nsAttributeName(e),i)})},tp.prototype.addTagName=function(e){var t=this.logNamespaceUsed(e);return this.getNamespaces().logUsed(t),tn(e)},tp.prototype.addAttribute=function(e,t){var n=this.attrs;(0,a.HD)(t)&&(t=tr(t,e8,ti));var i=(0,a.cx)(n,function(t){return t.name.localName===e.localName&&t.name.uri===e.uri&&t.name.prefix===e.prefix}),o={name:e,value:t};-1!==i?n.splice(i,1,o):n.push(o)},tp.prototype.serializeAttributes=function(e){var t=this.attrs,n=this.namespaces;n&&(t=n.getUsed().filter(function(e){return"xml"!==e.prefix}).map(function(e){return{name:"xmlns"+(e.prefix?":"+e.prefix:""),value:e.uri}}).concat(t)),(0,a.Ed)(t,function(t){e.append(" ").append(tn(t.name)).append('="').append(t.value).append('"')})},tp.prototype.serializeTo=function(e){var t=this.body[0],n=t&&t.constructor!==ts;e.appendIndent().append("<"+this.tagName),this.serializeAttributes(e),e.append(t?">":" />"),t&&(n&&e.appendNewLine().indent(),(0,a.Ed)(this.body,function(t){t.serializeTo(e)}),n&&e.unindent().appendIndent(),e.append("</"+this.tagName+">")),e.appendNewLine()},tt(tl,tp),tl.prototype.parseNsAttributes=function(e){var t=tp.prototype.parseNsAttributes.call(this,e).filter(e=>e.name!==this.serialization),n=e.$descriptor;if(n.name===this.propertyDescriptor.type)return t;var i=this.typeNs=this.nsTagName(n);this.getNamespaces().logUsed(this.typeNs);var o=e.$model.getPackage(i.uri),r=o.xml&&o.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName(this.serialization),(i.prefix?i.prefix+":":"")+r+n.ns.localName),t},tl.prototype.isLocalNs=function(e){return e.uri===(this.typeNs||this.ns).uri},tm.prototype=Object.create(eM.prototype),tm.prototype.fromXML=function(e,t,n){(0,a.HD)(t)||(n=t,t="bpmn:Definitions");var i=new e9((0,a.f0)({model:this,lax:!0},n)),o=i.handler(t);return i.fromXML(e,o)},tm.prototype.toXML=function(e,t){var n=new td(t);return new Promise(function(t,i){try{var o=n.toXML(e);return t({xml:o})}catch(e){return i(e)}})};let tf={bpmn:{name:"BPMN20",uri:"http://www.omg.org/spec/BPMN/20100524/MODEL",prefix:"bpmn",associations:[],types:[{name:"Interface",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"operations",type:"Operation",isMany:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"Operation",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"inMessageRef",type:"Message",isReference:!0},{name:"outMessageRef",type:"Message",isReference:!0},{name:"errorRef",type:"Error",isMany:!0,isReference:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"EndPoint",superClass:["RootElement"]},{name:"Auditing",superClass:["BaseElement"]},{name:"GlobalTask",superClass:["CallableElement"],properties:[{name:"resources",type:"ResourceRole",isMany:!0}]},{name:"Monitoring",superClass:["BaseElement"]},{name:"Performer",superClass:["ResourceRole"]},{name:"Process",superClass:["FlowElementsContainer","CallableElement"],properties:[{name:"processType",type:"ProcessType",isAttr:!0},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"properties",type:"Property",isMany:!0},{name:"laneSets",isMany:!0,replaces:"FlowElementsContainer#laneSets",type:"LaneSet"},{name:"flowElements",isMany:!0,replaces:"FlowElementsContainer#flowElements",type:"FlowElement"},{name:"artifacts",type:"Artifact",isMany:!0},{name:"resources",type:"ResourceRole",isMany:!0},{name:"correlationSubscriptions",type:"CorrelationSubscription",isMany:!0},{name:"supports",type:"Process",isMany:!0,isReference:!0},{name:"definitionalCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"isExecutable",isAttr:!0,type:"Boolean"}]},{name:"LaneSet",superClass:["BaseElement"],properties:[{name:"lanes",type:"Lane",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Lane",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"partitionElementRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"partitionElement",type:"BaseElement"},{name:"flowNodeRef",type:"FlowNode",isMany:!0,isReference:!0},{name:"childLaneSet",type:"LaneSet",xml:{serialize:"xsi:type"}}]},{name:"GlobalManualTask",superClass:["GlobalTask"]},{name:"ManualTask",superClass:["Task"]},{name:"UserTask",superClass:["Task"],properties:[{name:"renderings",type:"Rendering",isMany:!0},{name:"implementation",isAttr:!0,type:"String"}]},{name:"Rendering",superClass:["BaseElement"]},{name:"HumanPerformer",superClass:["Performer"]},{name:"PotentialOwner",superClass:["HumanPerformer"]},{name:"GlobalUserTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"renderings",type:"Rendering",isMany:!0}]},{name:"Gateway",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"gatewayDirection",type:"GatewayDirection",default:"Unspecified",isAttr:!0}]},{name:"EventBasedGateway",superClass:["Gateway"],properties:[{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"eventGatewayType",type:"EventBasedGatewayType",isAttr:!0,default:"Exclusive"}]},{name:"ComplexGateway",superClass:["Gateway"],properties:[{name:"activationCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ExclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"InclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ParallelGateway",superClass:["Gateway"]},{name:"RootElement",isAbstract:!0,superClass:["BaseElement"]},{name:"Relationship",superClass:["BaseElement"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"direction",type:"RelationshipDirection",isAttr:!0},{name:"source",isMany:!0,isReference:!0,type:"Element"},{name:"target",isMany:!0,isReference:!0,type:"Element"}]},{name:"BaseElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,type:"String",isId:!0},{name:"documentation",type:"Documentation",isMany:!0},{name:"extensionDefinitions",type:"ExtensionDefinition",isMany:!0,isReference:!0},{name:"extensionElements",type:"ExtensionElements"}]},{name:"Extension",properties:[{name:"mustUnderstand",default:!1,isAttr:!0,type:"Boolean"},{name:"definition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"extensionAttributeDefinitions",type:"ExtensionAttributeDefinition",isMany:!0}]},{name:"ExtensionAttributeDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"type",isAttr:!0,type:"String"},{name:"isReference",default:!1,isAttr:!0,type:"Boolean"},{name:"extensionDefinition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionElements",properties:[{name:"valueRef",isAttr:!0,isReference:!0,type:"Element"},{name:"values",type:"Element",isMany:!0},{name:"extensionAttributeDefinition",type:"ExtensionAttributeDefinition",isAttr:!0,isReference:!0}]},{name:"Documentation",superClass:["BaseElement"],properties:[{name:"text",type:"String",isBody:!0},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Event",isAbstract:!0,superClass:["FlowNode","InteractionNode"],properties:[{name:"properties",type:"Property",isMany:!0}]},{name:"IntermediateCatchEvent",superClass:["CatchEvent"]},{name:"IntermediateThrowEvent",superClass:["ThrowEvent"]},{name:"EndEvent",superClass:["ThrowEvent"]},{name:"StartEvent",superClass:["CatchEvent"],properties:[{name:"isInterrupting",default:!0,isAttr:!0,type:"Boolean"}]},{name:"ThrowEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"inputSet",type:"InputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"CatchEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"parallelMultiple",isAttr:!0,type:"Boolean",default:!1},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"outputSet",type:"OutputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"BoundaryEvent",superClass:["CatchEvent"],properties:[{name:"cancelActivity",default:!0,isAttr:!0,type:"Boolean"},{name:"attachedToRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"EventDefinition",isAbstract:!0,superClass:["RootElement"]},{name:"CancelEventDefinition",superClass:["EventDefinition"]},{name:"ErrorEventDefinition",superClass:["EventDefinition"],properties:[{name:"errorRef",type:"Error",isAttr:!0,isReference:!0}]},{name:"TerminateEventDefinition",superClass:["EventDefinition"]},{name:"EscalationEventDefinition",superClass:["EventDefinition"],properties:[{name:"escalationRef",type:"Escalation",isAttr:!0,isReference:!0}]},{name:"Escalation",properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"escalationCode",isAttr:!0,type:"String"}],superClass:["RootElement"]},{name:"CompensateEventDefinition",superClass:["EventDefinition"],properties:[{name:"waitForCompletion",isAttr:!0,type:"Boolean",default:!0},{name:"activityRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"TimerEventDefinition",superClass:["EventDefinition"],properties:[{name:"timeDate",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeCycle",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeDuration",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"LinkEventDefinition",superClass:["EventDefinition"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"target",type:"LinkEventDefinition",isReference:!0},{name:"source",type:"LinkEventDefinition",isMany:!0,isReference:!0}]},{name:"MessageEventDefinition",superClass:["EventDefinition"],properties:[{name:"messageRef",type:"Message",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isReference:!0}]},{name:"ConditionalEventDefinition",superClass:["EventDefinition"],properties:[{name:"condition",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"SignalEventDefinition",superClass:["EventDefinition"],properties:[{name:"signalRef",type:"Signal",isAttr:!0,isReference:!0}]},{name:"Signal",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ImplicitThrowEvent",superClass:["ThrowEvent"]},{name:"DataState",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ItemAwareElement",superClass:["BaseElement"],properties:[{name:"itemSubjectRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"dataState",type:"DataState"}]},{name:"DataAssociation",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"ItemAwareElement",isMany:!0,isReference:!0},{name:"targetRef",type:"ItemAwareElement",isReference:!0},{name:"transformation",type:"FormalExpression",xml:{serialize:"property"}},{name:"assignment",type:"Assignment",isMany:!0}]},{name:"DataInput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"inputSetRef",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithOptional",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithWhileExecuting",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"DataOutput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"outputSetRef",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithOptional",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithWhileExecuting",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"InputSet",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"dataInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"optionalInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"whileExecutingInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"outputSetRefs",type:"OutputSet",isMany:!0,isReference:!0}]},{name:"OutputSet",superClass:["BaseElement"],properties:[{name:"dataOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"inputSetRefs",type:"InputSet",isMany:!0,isReference:!0},{name:"optionalOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"whileExecutingOutputRefs",type:"DataOutput",isMany:!0,isReference:!0}]},{name:"Property",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"DataInputAssociation",superClass:["DataAssociation"]},{name:"DataOutputAssociation",superClass:["DataAssociation"]},{name:"InputOutputSpecification",superClass:["BaseElement"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"inputSets",type:"InputSet",isMany:!0},{name:"outputSets",type:"OutputSet",isMany:!0}]},{name:"DataObject",superClass:["FlowElement","ItemAwareElement"],properties:[{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"}]},{name:"InputOutputBinding",properties:[{name:"inputDataRef",type:"InputSet",isAttr:!0,isReference:!0},{name:"outputDataRef",type:"OutputSet",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"Assignment",superClass:["BaseElement"],properties:[{name:"from",type:"Expression",xml:{serialize:"xsi:type"}},{name:"to",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"DataStore",superClass:["RootElement","ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"capacity",isAttr:!0,type:"Integer"},{name:"isUnlimited",default:!0,isAttr:!0,type:"Boolean"}]},{name:"DataStoreReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataStoreRef",type:"DataStore",isAttr:!0,isReference:!0}]},{name:"DataObjectReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataObjectRef",type:"DataObject",isAttr:!0,isReference:!0}]},{name:"ConversationLink",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ConversationAssociation",superClass:["BaseElement"],properties:[{name:"innerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0},{name:"outerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0}]},{name:"CallConversation",superClass:["ConversationNode"],properties:[{name:"calledCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"Conversation",superClass:["ConversationNode"]},{name:"SubConversation",superClass:["ConversationNode"],properties:[{name:"conversationNodes",type:"ConversationNode",isMany:!0}]},{name:"ConversationNode",isAbstract:!0,superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"messageFlowRefs",type:"MessageFlow",isMany:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0}]},{name:"GlobalConversation",superClass:["Collaboration"]},{name:"PartnerEntity",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"PartnerRole",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"CorrelationProperty",superClass:["RootElement"],properties:[{name:"correlationPropertyRetrievalExpression",type:"CorrelationPropertyRetrievalExpression",isMany:!0},{name:"name",isAttr:!0,type:"String"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Error",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"errorCode",isAttr:!0,type:"String"}]},{name:"CorrelationKey",superClass:["BaseElement"],properties:[{name:"correlationPropertyRef",type:"CorrelationProperty",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Expression",superClass:["BaseElement"],isAbstract:!1,properties:[{name:"body",isBody:!0,type:"String"}]},{name:"FormalExpression",superClass:["Expression"],properties:[{name:"language",isAttr:!0,type:"String"},{name:"evaluatesToTypeRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Message",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"itemRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"ItemDefinition",superClass:["RootElement"],properties:[{name:"itemKind",type:"ItemKind",isAttr:!0},{name:"structureRef",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"import",type:"Import",isAttr:!0,isReference:!0}]},{name:"FlowElement",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"categoryValueRef",type:"CategoryValue",isMany:!0,isReference:!0}]},{name:"SequenceFlow",superClass:["FlowElement"],properties:[{name:"isImmediate",isAttr:!0,type:"Boolean"},{name:"conditionExpression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"sourceRef",type:"FlowNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"FlowNode",isAttr:!0,isReference:!0}]},{name:"FlowElementsContainer",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"laneSets",type:"LaneSet",isMany:!0},{name:"flowElements",type:"FlowElement",isMany:!0}]},{name:"CallableElement",isAbstract:!0,superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"supportedInterfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"ioBinding",type:"InputOutputBinding",isMany:!0,xml:{serialize:"property"}}]},{name:"FlowNode",isAbstract:!0,superClass:["FlowElement"],properties:[{name:"incoming",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"outgoing",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"lanes",type:"Lane",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"CorrelationPropertyRetrievalExpression",superClass:["BaseElement"],properties:[{name:"messagePath",type:"FormalExpression"},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"CorrelationPropertyBinding",superClass:["BaseElement"],properties:[{name:"dataPath",type:"FormalExpression"},{name:"correlationPropertyRef",type:"CorrelationProperty",isAttr:!0,isReference:!0}]},{name:"Resource",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"resourceParameters",type:"ResourceParameter",isMany:!0}]},{name:"ResourceParameter",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isRequired",isAttr:!0,type:"Boolean"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"CorrelationSubscription",superClass:["BaseElement"],properties:[{name:"correlationKeyRef",type:"CorrelationKey",isAttr:!0,isReference:!0},{name:"correlationPropertyBinding",type:"CorrelationPropertyBinding",isMany:!0}]},{name:"MessageFlow",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"MessageFlowAssociation",superClass:["BaseElement"],properties:[{name:"innerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0},{name:"outerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0}]},{name:"InteractionNode",isAbstract:!0,properties:[{name:"incomingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0},{name:"outgoingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"Participant",superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"interfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"participantMultiplicity",type:"ParticipantMultiplicity"},{name:"endPointRefs",type:"EndPoint",isMany:!0,isReference:!0},{name:"processRef",type:"Process",isAttr:!0,isReference:!0}]},{name:"ParticipantAssociation",superClass:["BaseElement"],properties:[{name:"innerParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"outerParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"ParticipantMultiplicity",properties:[{name:"minimum",default:0,isAttr:!0,type:"Integer"},{name:"maximum",default:1,isAttr:!0,type:"Integer"}],superClass:["BaseElement"]},{name:"Collaboration",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"participants",type:"Participant",isMany:!0},{name:"messageFlows",type:"MessageFlow",isMany:!0},{name:"artifacts",type:"Artifact",isMany:!0},{name:"conversations",type:"ConversationNode",isMany:!0},{name:"conversationAssociations",type:"ConversationAssociation"},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0},{name:"messageFlowAssociations",type:"MessageFlowAssociation",isMany:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"choreographyRef",type:"Choreography",isMany:!0,isReference:!0},{name:"conversationLinks",type:"ConversationLink",isMany:!0}]},{name:"ChoreographyActivity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"loopType",type:"ChoreographyLoopType",default:"None",isAttr:!0}]},{name:"CallChoreography",superClass:["ChoreographyActivity"],properties:[{name:"calledChoreographyRef",type:"Choreography",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"SubChoreography",superClass:["ChoreographyActivity","FlowElementsContainer"],properties:[{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"ChoreographyTask",superClass:["ChoreographyActivity"],properties:[{name:"messageFlowRef",type:"MessageFlow",isMany:!0,isReference:!0}]},{name:"Choreography",superClass:["Collaboration","FlowElementsContainer"]},{name:"GlobalChoreographyTask",superClass:["Choreography"],properties:[{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Group",superClass:["Artifact"],properties:[{name:"categoryValueRef",type:"CategoryValue",isAttr:!0,isReference:!0}]},{name:"Association",superClass:["Artifact"],properties:[{name:"associationDirection",type:"AssociationDirection",isAttr:!0},{name:"sourceRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"targetRef",type:"BaseElement",isAttr:!0,isReference:!0}]},{name:"Category",superClass:["RootElement"],properties:[{name:"categoryValue",type:"CategoryValue",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Artifact",isAbstract:!0,superClass:["BaseElement"]},{name:"CategoryValue",superClass:["BaseElement"],properties:[{name:"categorizedFlowElements",type:"FlowElement",isMany:!0,isVirtual:!0,isReference:!0},{name:"value",isAttr:!0,type:"String"}]},{name:"Activity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"isForCompensation",default:!1,isAttr:!0,type:"Boolean"},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"boundaryEventRefs",type:"BoundaryEvent",isMany:!0,isReference:!0},{name:"properties",type:"Property",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"startQuantity",default:1,isAttr:!0,type:"Integer"},{name:"resources",type:"ResourceRole",isMany:!0},{name:"completionQuantity",default:1,isAttr:!0,type:"Integer"},{name:"loopCharacteristics",type:"LoopCharacteristics"}]},{name:"ServiceTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"SubProcess",superClass:["Activity","FlowElementsContainer","InteractionNode"],properties:[{name:"triggeredByEvent",default:!1,isAttr:!0,type:"Boolean"},{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"LoopCharacteristics",isAbstract:!0,superClass:["BaseElement"]},{name:"MultiInstanceLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"isSequential",default:!1,isAttr:!0,type:"Boolean"},{name:"behavior",type:"MultiInstanceBehavior",default:"All",isAttr:!0},{name:"loopCardinality",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopDataInputRef",type:"ItemAwareElement",isReference:!0},{name:"loopDataOutputRef",type:"ItemAwareElement",isReference:!0},{name:"inputDataItem",type:"DataInput",xml:{serialize:"property"}},{name:"outputDataItem",type:"DataOutput",xml:{serialize:"property"}},{name:"complexBehaviorDefinition",type:"ComplexBehaviorDefinition",isMany:!0},{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"oneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0},{name:"noneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0}]},{name:"StandardLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"testBefore",default:!1,isAttr:!0,type:"Boolean"},{name:"loopCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopMaximum",type:"Integer",isAttr:!0}]},{name:"CallActivity",superClass:["Activity","InteractionNode"],properties:[{name:"calledElement",type:"String",isAttr:!0}]},{name:"Task",superClass:["Activity","InteractionNode"]},{name:"SendTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ReceiveTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ScriptTask",superClass:["Task"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"script",type:"String"}]},{name:"BusinessRuleTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"AdHocSubProcess",superClass:["SubProcess"],properties:[{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"ordering",type:"AdHocOrdering",isAttr:!0},{name:"cancelRemainingInstances",default:!0,isAttr:!0,type:"Boolean"}]},{name:"Transaction",superClass:["SubProcess"],properties:[{name:"protocol",isAttr:!0,type:"String"},{name:"method",isAttr:!0,type:"String"}]},{name:"GlobalScriptTask",superClass:["GlobalTask"],properties:[{name:"scriptLanguage",isAttr:!0,type:"String"},{name:"script",isAttr:!0,type:"String"}]},{name:"GlobalBusinessRuleTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"ComplexBehaviorDefinition",superClass:["BaseElement"],properties:[{name:"condition",type:"FormalExpression"},{name:"event",type:"ImplicitThrowEvent"}]},{name:"ResourceRole",superClass:["BaseElement"],properties:[{name:"resourceRef",type:"Resource",isReference:!0},{name:"resourceParameterBindings",type:"ResourceParameterBinding",isMany:!0},{name:"resourceAssignmentExpression",type:"ResourceAssignmentExpression"},{name:"name",isAttr:!0,type:"String"}]},{name:"ResourceParameterBinding",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"parameterRef",type:"ResourceParameter",isAttr:!0,isReference:!0}],superClass:["BaseElement"]},{name:"ResourceAssignmentExpression",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}}],superClass:["BaseElement"]},{name:"Import",properties:[{name:"importType",isAttr:!0,type:"String"},{name:"location",isAttr:!0,type:"String"},{name:"namespace",isAttr:!0,type:"String"}]},{name:"Definitions",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"targetNamespace",isAttr:!0,type:"String"},{name:"expressionLanguage",default:"http://www.w3.org/1999/XPath",isAttr:!0,type:"String"},{name:"typeLanguage",default:"http://www.w3.org/2001/XMLSchema",isAttr:!0,type:"String"},{name:"imports",type:"Import",isMany:!0},{name:"extensions",type:"Extension",isMany:!0},{name:"rootElements",type:"RootElement",isMany:!0},{name:"diagrams",isMany:!0,type:"bpmndi:BPMNDiagram"},{name:"exporter",isAttr:!0,type:"String"},{name:"relationships",type:"Relationship",isMany:!0},{name:"exporterVersion",isAttr:!0,type:"String"}]}],enumerations:[{name:"ProcessType",literalValues:[{name:"None"},{name:"Public"},{name:"Private"}]},{name:"GatewayDirection",literalValues:[{name:"Unspecified"},{name:"Converging"},{name:"Diverging"},{name:"Mixed"}]},{name:"EventBasedGatewayType",literalValues:[{name:"Parallel"},{name:"Exclusive"}]},{name:"RelationshipDirection",literalValues:[{name:"None"},{name:"Forward"},{name:"Backward"},{name:"Both"}]},{name:"ItemKind",literalValues:[{name:"Physical"},{name:"Information"}]},{name:"ChoreographyLoopType",literalValues:[{name:"None"},{name:"Standard"},{name:"MultiInstanceSequential"},{name:"MultiInstanceParallel"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"MultiInstanceBehavior",literalValues:[{name:"None"},{name:"One"},{name:"All"},{name:"Complex"}]},{name:"AdHocOrdering",literalValues:[{name:"Parallel"},{name:"Sequential"}]}],xml:{tagAlias:"lowerCase",typePrefix:"t"}},bpmndi:{name:"BPMNDI",uri:"http://www.omg.org/spec/BPMN/20100524/DI",prefix:"bpmndi",types:[{name:"BPMNDiagram",properties:[{name:"plane",type:"BPMNPlane",redefines:"di:Diagram#rootElement"},{name:"labelStyle",type:"BPMNLabelStyle",isMany:!0}],superClass:["di:Diagram"]},{name:"BPMNPlane",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"}],superClass:["di:Plane"]},{name:"BPMNShape",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"isHorizontal",isAttr:!0,type:"Boolean"},{name:"isExpanded",isAttr:!0,type:"Boolean"},{name:"isMarkerVisible",isAttr:!0,type:"Boolean"},{name:"label",type:"BPMNLabel"},{name:"isMessageVisible",isAttr:!0,type:"Boolean"},{name:"participantBandKind",type:"ParticipantBandKind",isAttr:!0},{name:"choreographyActivityShape",type:"BPMNShape",isAttr:!0,isReference:!0}],superClass:["di:LabeledShape"]},{name:"BPMNEdge",properties:[{name:"label",type:"BPMNLabel"},{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"sourceElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#source"},{name:"targetElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#target"},{name:"messageVisibleKind",type:"MessageVisibleKind",isAttr:!0,default:"initiating"}],superClass:["di:LabeledEdge"]},{name:"BPMNLabel",properties:[{name:"labelStyle",type:"BPMNLabelStyle",isAttr:!0,isReference:!0,redefines:"di:DiagramElement#style"}],superClass:["di:Label"]},{name:"BPMNLabelStyle",properties:[{name:"font",type:"dc:Font"}],superClass:["di:Style"]}],enumerations:[{name:"ParticipantBandKind",literalValues:[{name:"top_initiating"},{name:"middle_initiating"},{name:"bottom_initiating"},{name:"top_non_initiating"},{name:"middle_non_initiating"},{name:"bottom_non_initiating"}]},{name:"MessageVisibleKind",literalValues:[{name:"initiating"},{name:"non_initiating"}]}],associations:[]},dc:{name:"DC",uri:"http://www.omg.org/spec/DD/20100524/DC",prefix:"dc",types:[{name:"Boolean"},{name:"Integer"},{name:"Real"},{name:"String"},{name:"Font",properties:[{name:"name",type:"String",isAttr:!0},{name:"size",type:"Real",isAttr:!0},{name:"isBold",type:"Boolean",isAttr:!0},{name:"isItalic",type:"Boolean",isAttr:!0},{name:"isUnderline",type:"Boolean",isAttr:!0},{name:"isStrikeThrough",type:"Boolean",isAttr:!0}]},{name:"Point",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0}]},{name:"Bounds",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0},{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]}],associations:[]},di:{name:"DI",uri:"http://www.omg.org/spec/DD/20100524/DI",prefix:"di",types:[{name:"DiagramElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"extension",type:"Extension"},{name:"owningDiagram",type:"Diagram",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"owningElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"modelElement",isReadOnly:!0,isVirtual:!0,isReference:!0,type:"Element"},{name:"style",type:"Style",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"ownedElement",type:"DiagramElement",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Node",isAbstract:!0,superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"source",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"target",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"waypoint",isUnique:!1,isMany:!0,type:"dc:Point",xml:{serialize:"xsi:type"}}]},{name:"Diagram",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"rootElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0},{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"},{name:"ownedStyle",type:"Style",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Shape",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Plane",isAbstract:!0,superClass:["Node"],properties:[{name:"planeElement",type:"DiagramElement",subsettedProperty:"DiagramElement-ownedElement",isMany:!0}]},{name:"LabeledEdge",isAbstract:!0,superClass:["Edge"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"LabeledShape",isAbstract:!0,superClass:["Shape"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"Label",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Style",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"}]},{name:"Extension",properties:[{name:"values",isMany:!0,type:"Element"}]}],associations:[],xml:{tagAlias:"lowerCase"}},bioc:{name:"bpmn.io colors for BPMN",uri:"http://bpmn.io/schema/bpmn/biocolor/1.0",prefix:"bioc",types:[{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]}],enumerations:[],associations:[]},color:{name:"BPMN in Color",uri:"http://www.omg.org/spec/BPMN/non-normative/color/1.0",prefix:"color",types:[{name:"ColoredLabel",extends:["bpmndi:BPMNLabel"],properties:[{name:"color",isAttr:!0,type:"String"}]},{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"background-color",isAttr:!0,type:"String"},{name:"border-color",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"border-color",isAttr:!0,type:"String"}]}],enumerations:[],associations:[]}};function tg(e,t){return new tm((0,a.f0)({},tf,e),t)}function ty(e){return e?"<"+e.$type+(e.id?' id="'+e.id:"")+'" />':"<null>"}function tv(e){(0,a.e$)(e,"di")||Object.defineProperty(e,"di",{enumerable:!1,get:function(){throw Error("Tried to access di from the businessObject. The di is available through the diagram element only. For more information, see https://github.com/bpmn-io/bpmn-js/issues/1472")}})}function t_(e,t){return e.$instanceOf(t)}function tb(e){var t={},n=[],i={};function o(e,t){return function(n){e(n,t)}}function r(n,o){try{var r=i[n.id]&&function(t,n){if(t.gfx)throw Error(`already rendered ${ty(t)}`);return e.element(t,i[t.id],n)}(n,o);return t[n.id]=n,r}catch(e){s(e.message,{element:n,error:e}),console.error(`failed to import ${ty(n)}`,e)}}function s(t,n){e.error(t,n)}var c=this.registerDi=function(e){var t=e.bpmnElement;t?i[t.id]?s(`multiple DI elements defined for ${ty(t)}`,{element:t}):(i[t.id]=e,tv(t)):s(`no bpmnElement referenced in ${ty(e)}`,{element:e})};function p(e){c(e)}this.handleDefinitions=function(r,d){var m,f,y,v=r.diagrams;if(d&&-1===v.indexOf(d))throw Error("diagram not part of <bpmn:Definitions />");if(!d&&v&&v.length&&(d=v[0]),!d)throw Error("no diagram to display");i={},c(m=d.plane),(0,a.Ed)(m.planeElement,p);var _=d.plane;if(!_)throw Error(`no plane for ${ty(d)}`);var b=_.bpmnElement;if(!b){if(b=(0,a.sE)(r.rootElements,function(e){return t_(e,"bpmn:Process")||t_(e,"bpmn:Collaboration")}))s(`correcting missing bpmnElement on ${ty(_)} to ${ty(b)}`),_.bpmnElement=b,c(_);else throw Error("no process or collaboration to display")}var x=(y=b,e.root(y,i[y.id],_));if(t_(b,"bpmn:Process")||t_(b,"bpmn:SubProcess"))u(b,x);else if(t_(b,"bpmn:Collaboration"))f=b,(0,a.Ed)(f.participants,o(w,x)),n.push(function(){var e;e=f.messageFlows,(0,a.Ed)(e,o(h,x))}),g(f.artifacts,x),function(e,n){(0,a.hX)(e,function(e){return!t[e.id]&&t_(e,"bpmn:Process")&&e.laneSets}).forEach(o(u,n))}(r.rootElements,x);else throw Error(`unsupported bpmnElement for ${ty(_)}: ${ty(b)}`);l(n)};var l=this.handleDeferred=function(){for(;n.length;)n.shift()()};function u(e,n){E(e,n),y(e.ioSpecification,n),g(e.artifacts,n),t[e.id]=e}function h(e,t){r(e,t)}function d(e,t){r(e,t)}function m(e,t){r(e,t)}function f(e,t){r(e,t)}function g(e,t){(0,a.Ed)(e,function(e){t_(e,"bpmn:Association")?n.push(function(){r(e,t)}):r(e,t)})}function y(e,t){e&&((0,a.Ed)(e.dataInputs,o(m,t)),(0,a.Ed)(e.dataOutputs,o(f,t)))}var v=this.handleSubProcess=function(e,t){E(e,t),g(e.artifacts,t)};function _(e,t){var i=r(e,t);t_(e,"bpmn:SubProcess")&&v(e,i||t),t_(e,"bpmn:Activity")&&y(e.ioSpecification,t),n.push(function(){(0,a.Ed)(e.dataInputAssociations,o(d,t)),(0,a.Ed)(e.dataOutputAssociations,o(d,t))})}function b(e,t){n.push(function(){var n=r(e,t);e.childLaneSet&&x(e.childLaneSet,n||t),(0,a.Ed)(e.flowNodeRef,function(t){var n=t.get("lanes");n&&n.push(e)})})}function x(e,t){(0,a.Ed)(e.lanes,o(b,t))}function E(e,t){var i,c;i=e.flowElements,(0,a.Ed)(i,function(e){t_(e,"bpmn:SequenceFlow")?n.push(function(){r(e,t)}):t_(e,"bpmn:BoundaryEvent")?n.unshift(function(){_(e,t)}):t_(e,"bpmn:FlowNode")?_(e,t):t_(e,"bpmn:DataObject")||(t_(e,"bpmn:DataStoreReference")?r(e,t):t_(e,"bpmn:DataObjectReference")?r(e,t):s(`unrecognized flowElement ${ty(e)} in context ${ty(t&&t.businessObject)}`,{element:e,context:t}))}),e.laneSets&&(c=e.laneSets,(0,a.Ed)(c,o(x,t)))}function w(e,t){var n=r(e,t),i=e.processRef;i&&u(i,n||t)}}function tx(e,t){var n=tw(e);return n&&"function"==typeof n.$instanceOf&&n.$instanceOf(t)}function tE(e,t){return(0,a.G)(t,function(t){return tx(e,t)})}function tw(e){return e&&e.businessObject||e}function tS(e){return e&&e.di}var tk='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.02 5.57" width="53" height="21"><path fill="currentColor" d="M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z"/><path fill="currentColor" d="M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z"/></svg>',tC={verticalAlign:"middle"},tR={color:"#404040"},tP={zIndex:"1001",position:"fixed",top:"0",left:"0",right:"0",bottom:"0"},tA={width:"100%",height:"100%",background:"rgba(40,40,40,0.2)"},tM={position:"absolute",left:"50%",top:"40%",transform:"translate(-50%)",width:"260px",padding:"10px",background:"white",boxShadow:"0 1px 4px rgba(0,0,0,0.3)",fontFamily:"Helvetica, Arial, sans-serif",fontSize:"14px",display:"flex",lineHeight:"1.3"},tT='<div class="bjs-powered-by-lightbox"><div class="backdrop"></div><div class="notice"><a href="https://bpmn.io" target="_blank" rel="noopener" class="link">'+tk+'</a><span>Web-based tooling for BPMN, DMN and forms powered by <a href="https://bpmn.io" target="_blank" rel="noopener">bpmn.io</a>.</span></div></div>';function tD(e){e=(0,a.f0)({},tj,e),this._moddle=this._createModdle(e),this._container=this._createContainer(e),this._init(this._container,this._moddle,e),function(e){let t=(0,s.H6)('<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" >'+tk+"</a>");(0,s.i5)((0,s.IO)("svg",t),tC),(0,s.i5)(t,tR,{position:"absolute",bottom:"15px",right:"15px",zIndex:"100"}),e.appendChild(t),s.B.bind(t,"click",function(e){iC||(iC=(0,s.H6)(tT),(0,s.i5)(iC,tP),(0,s.i5)((0,s.IO)("svg",iC),tC),(0,s.i5)((0,s.IO)(".backdrop",iC),tA),(0,s.i5)((0,s.IO)(".notice",iC),tM),(0,s.i5)((0,s.IO)(".link",iC),tR,{margin:"15px 20px 15px 10px",alignSelf:"center"}),s.cl.bind(iC,".backdrop","click",function(e){document.body.removeChild(iC)})),document.body.appendChild(iC),e.preventDefault()})}(this._container)}function tB(e,t){return e.warnings=t,e}i(tD,ey),tD.prototype.importXML=async function(e,t){let n=[];try{var i;let o;e=this._emit("import.parse.start",{xml:e})||e;try{o=await this._moddle.fromXML(e,"bpmn:Definitions")}catch(e){throw this._emit("import.parse.complete",{error:e}),e}let r=o.rootElement,a=o.references,s=o.warnings,c=o.elementsById;n=n.concat(s),r=this._emit("import.parse.complete",(i={error:null,definitions:r,elementsById:c,references:a,warnings:n},this.get("eventBus").createEvent(i)))||r;let p=await this.importDefinitions(r,t);return n=n.concat(p.warnings),this._emit("import.done",{error:null,warnings:n}),{warnings:n}}catch(t){let e=t;throw n=n.concat(e.warnings||[]),tB(e,n),e=function(e){let t=/unparsable content <([^>]+)> detected([\s\S]*)$/.exec(e.message);return t&&(e.message="unparsable content <"+t[1]+"> detected; this may indicate an invalid BPMN 2.0 diagram file"+t[2]),e}(e),this._emit("import.done",{error:e,warnings:e.warnings}),e}},tD.prototype.importDefinitions=async function(e,t){return this._setDefinitions(e),{warnings:(await this.open(t)).warnings}},tD.prototype.open=async function(e){var t,n,i,o,r,s,c;let p=this._definitions,l=e;if(!p){let e=Error("no XML imported");throw tB(e,[]),e}if("string"==typeof e&&!(l=e&&(0,a.sE)(p.diagrams,function(t){return t.id===e})||null)){let t=Error("BPMNDiagram <"+e+"> not found");throw tB(t,[]),t}try{this.clear()}catch(e){throw tB(e,[]),e}let{warnings:u}=await (t=this,n=l,c=[],new Promise(function(e,l){try{return i=t.get("bpmnImporter"),o=t.get("eventBus"),r=t.get("canvas"),o.fire("import.render.start",{definitions:p}),function(e,t){var n=new tb({root:function(e,t){return i.add(e,t)},element:function(e,t,n){return i.add(e,t,n)},error:function(e,t){c.push({message:e,context:t})}});t=t||e.diagrams&&e.diagrams[0];var o=function(e,t){if(t&&t.plane){var n,i=t.plane.bpmnElement,o=i;tx(i,"bpmn:Process")||tx(i,"bpmn:Collaboration")||(o=function(e){for(var t=e;t;){if(tx(t,"bpmn:Process"))return t;t=t.$parent}}(i)),n=tx(o,"bpmn:Collaboration")?o:(0,a.sE)(e.rootElements,function(e){if(tx(e,"bpmn:Collaboration"))return(0,a.sE)(e.participants,function(e){return e.processRef===o})});var r=[o];n&&(r=(0,a.UI)(n.participants,function(e){return e.processRef})).push(n);var s=function e(t){var n=[];return(0,a.Ed)(t,function(t){t&&(n.push(t),n=n.concat(e(t.flowElements)))}),n}(r),c=[t],p=[i];return(0,a.Ed)(e.diagrams,function(e){if(e.plane){var t=e.plane.bpmnElement;-1!==s.indexOf(t)&&-1===p.indexOf(t)&&(c.push(e),p.push(t))}}),c}}(e,t);if(!o)throw Error("no diagram to display");(0,a.Ed)(o,function(t){n.handleDefinitions(e,t)});var s=t.plane.bpmnElement.id;r.setRootElement(r.findRoot(s+"_plane")||r.findRoot(s))}(p,n),o.fire("import.render.complete",{error:s,warnings:c}),e({warnings:c})}catch(e){return e.warnings=c,l(e)}}));return{warnings:u}},tD.prototype.saveXML=async function(e){e=e||{};let t=this._definitions,n,i;try{if(!t)throw Error("no definitions loaded");t=this._emit("saveXML.start",{definitions:t})||t,i=(await this._moddle.toXML(t,e)).xml,i=this._emit("saveXML.serialized",{xml:i})||i}catch(e){n=e}let o=n?{error:n}:{xml:i};if(this._emit("saveXML.done",o),n)throw n;return o},tD.prototype.saveSVG=async function(){let e,t;this._emit("saveSVG.start");try{let t=this.get("canvas"),n=t.getActiveLayer(),i=(0,s.IO)(":scope > defs",t._svg),o=(0,c.db)(n),r=i?"<defs>"+(0,c.db)(i)+"</defs>":"",a=n.getBBox();e='<?xml version="1.0" encoding="utf-8"?>\n<!-- created with bpmn-js / http://bpmn.io -->\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+a.width+'" height="'+a.height+'" viewBox="'+a.x+" "+a.y+" "+a.width+" "+a.height+'" version="1.1">'+r+o+"</svg>"}catch(e){t=e}if(this._emit("saveSVG.done",{error:t,svg:e}),t)throw t;return{svg:e}},tD.prototype._setDefinitions=function(e){this._definitions=e},tD.prototype.getModules=function(){return this._modules},tD.prototype.clear=function(){this.getDefinitions()&&ey.prototype.clear.call(this)},tD.prototype.destroy=function(){ey.prototype.destroy.call(this),(0,s.Od)(this._container)},tD.prototype.on=function(e,t,n,i){return this.get("eventBus").on(e,t,n,i)},tD.prototype.off=function(e,t){this.get("eventBus").off(e,t)},tD.prototype.attachTo=function(e){if(!e)throw Error("parentNode required");this.detach(),e.get&&e.constructor.prototype.jquery&&(e=e.get(0)),"string"==typeof e&&(e=(0,s.IO)(e)),e.appendChild(this._container),this._emit("attach",{}),this.get("canvas").resized()},tD.prototype.getDefinitions=function(){return this._definitions},tD.prototype.detach=function(){let e=this._container,t=e.parentNode;t&&(this._emit("detach",{}),t.removeChild(e))},tD.prototype._init=function(e,t,n){let i=[].concat([{bpmnjs:["value",this],moddle:["value",t]}],n.modules||this.getModules(n),n.additionalModules||[]),o=(0,a.f0)((0,a.CE)(n,["additionalModules"]),{canvas:(0,a.f0)({},n.canvas,{container:e}),modules:i});ey.call(this,o),n&&n.container&&this.attachTo(n.container)},tD.prototype._emit=function(e,t){return this.get("eventBus").fire(e,t)},tD.prototype._createContainer=function(e){let t=(0,s.H6)('<div class="bjs-container"></div>');return(0,s.i5)(t,{width:tN(e.width),height:tN(e.height),position:e.position}),t},tD.prototype._createModdle=function(e){return new tg((0,a.f0)({},this._moddleExtensions,e.moddleExtensions))},tD.prototype._modules=[];let tj={width:"100%",height:"100%",position:"relative"};function tN(e){return e+((0,a.hj)(e)?"px":"")}function tO(e){tD.call(this,e),this.on("import.parse.complete",function(e){e.error||this._collectIds(e.definitions,e.elementsById)},this),this.on("diagram.destroy",function(){this.get("moddle").ids.clear()},this)}function tL(e,t){return!tx(e,"bpmn:CallActivity")&&(tx(e,"bpmn:SubProcess")?!!((t=t||tS(e))&&tx(t,"bpmndi:BPMNPlane"))||t&&!!t.isExpanded:!tx(e,"bpmn:Participant")||!!tw(e).processRef)}function t$(e){if(tx(e,"bpmn:Participant")||tx(e,"bpmn:Lane")){var t=tS(e).isHorizontal;return void 0===t||t}}function tI(e){return e&&!!tw(e).triggeredByEvent}function tz(e,t){var n=tw(e).eventDefinitions;return(0,a.G)(n,function(e){return tx(e,t)})}i(tO,tD),tO.prototype._createModdle=function(e){var t=tD.prototype._createModdle.call(this,e);return t.ids=new r([32,36,1]),t},tO.prototype._collectIds=function(e,t){var n,i=e.$model.ids;for(n in i.clear(),t)i.claim(n,t[n])};var tH=n(4554),tF={width:90,height:20};function tG(e){return tx(e,"bpmn:Event")||tx(e,"bpmn:Gateway")||tx(e,"bpmn:DataStoreReference")||tx(e,"bpmn:DataObjectReference")||tx(e,"bpmn:DataInput")||tx(e,"bpmn:DataOutput")||tx(e,"bpmn:SequenceFlow")||tx(e,"bpmn:MessageFlow")||tx(e,"bpmn:Group")}function tW(e){return(0,tH.j_)(e.label)}function tV(e){if(e.waypoints){var t,n,i,o,r,a,s,c,p,l,u;return n=(t=e.waypoints).length/2-1,i=t[Math.floor(n)],o=t[Math.ceil(n+.01)],p=t.length/2-1,l=t[Math.floor(p)],u=t[Math.ceil(p+.01)],r={x:l.x+(u.x-l.x)/2,y:l.y+(u.y-l.y)/2},a=Math.atan((o.y-i.y)/(o.x-i.x)),s=r.x,c=r.y,Math.abs(a)<Math.PI/2?c-=15:s+=15,{x:s,y:c}}return tx(e,"bpmn:Group")?{x:e.x+e.width/2,y:e.y+tF.height/2}:{x:e.x+e.width/2,y:e.y+e.height+tF.height/2}}function tU(e){return tx(e,"bpmn:FlowElement")||tx(e,"bpmn:Participant")||tx(e,"bpmn:Lane")||tx(e,"bpmn:SequenceFlow")||tx(e,"bpmn:MessageFlow")||tx(e,"bpmn:DataInput")||tx(e,"bpmn:DataOutput")?"name":tx(e,"bpmn:TextAnnotation")?"text":tx(e,"bpmn:Group")?"categoryValueRef":void 0}function tK(e){var t,n=e.businessObject,i=tU(n);if(i)return"categoryValueRef"===i?(t=n.categoryValueRef)&&t.value||"":n[i]||""}var tq="hsl(225, 10%, 15%)";function tJ(e,t){return(0,a.G)(e.eventDefinitions,function(e){return e.$type===t})}function tX(e,t,n){var i=tS(e);return n||i.get("color:background-color")||i.get("bioc:fill")||t||"white"}function tY(e,t,n){var i=tS(e);return n||i.get("color:border-color")||i.get("bioc:stroke")||t||tq}function tZ(e,t,n,i){var o=tS(e).get("label");return i||o&&o.get("color:color")||t||tY(e,n)}function tQ(e,t={}){return{width:t0(e,t),height:t1(e,t)}}function t0(e,t={}){return(0,a.e$)(t,"width")?t.width:e.width}function t1(e,t={}){return(0,a.e$)(t,"height")?t.height:e.height}var t2=new r;function t5(e,t,n,i,o,r,p){y.call(this,t,p);var l=e&&e.defaultFillColor,u=e&&e.defaultStrokeColor,h=e&&e.defaultLabelColor;function d(e){return n.computeStyle(e,{strokeLinecap:"round",strokeLinejoin:"round",stroke:tq,strokeWidth:2,fill:"white"})}function m(e){return n.computeStyle(e,["no-fill"],{strokeLinecap:"round",strokeLinejoin:"round",stroke:tq,strokeWidth:2})}function f(e,t){var{ref:n={x:0,y:0},scale:i=1,element:r,parentGfx:a=o._svg}=t,p=(0,c.Ue)("marker",{id:e,viewBox:"0 0 20 20",refX:n.x,refY:n.y,markerWidth:20*i,markerHeight:20*i,orient:"auto"});(0,c.R3)(p,r);var l=(0,s.IO)(":scope > defs",a);l||(l=(0,c.Ue)("defs"),(0,c.R3)(a,l)),(0,c.R3)(l,p)}function g(e,t,n,i){var o=t2.nextPrefixed("marker-");return"sequenceflow-end"===t&&f(o,{element:(0,c.Ue)("path",{d:"M 1 5 L 11 10 L 1 15 Z",...d({fill:i,stroke:i,strokeWidth:1})}),ref:{x:11,y:10},scale:.5,parentGfx:e}),"messageflow-start"===t&&f(o,{element:(0,c.Ue)("circle",{cx:6,cy:6,r:3.5,...d({fill:n,stroke:i,strokeWidth:1,strokeDasharray:[1e4,1]})}),ref:{x:6,y:6},parentGfx:e}),"messageflow-end"===t&&f(o,{element:(0,c.Ue)("path",{d:"m 1 5 l 0 -3 l 7 3 l -7 3 z",...d({fill:n,stroke:i,strokeWidth:1,strokeDasharray:[1e4,1]})}),ref:{x:8.5,y:5},parentGfx:e}),"association-start"===t&&f(o,{element:(0,c.Ue)("path",{d:"M 11 5 L 1 10 L 11 15",...m({fill:"none",stroke:i,strokeWidth:1.5,strokeDasharray:[1e4,1]})}),ref:{x:1,y:10},scale:.5,parentGfx:e}),"association-end"===t&&f(o,{element:(0,c.Ue)("path",{d:"M 1 5 L 11 10 L 1 15",...m({fill:"none",stroke:i,strokeWidth:1.5,strokeDasharray:[1e4,1]})}),ref:{x:11,y:10},scale:.5,parentGfx:e}),"conditional-flow-marker"===t&&f(o,{element:(0,c.Ue)("path",{d:"M 0 10 L 8 6 L 16 10 L 8 14 Z",...d({fill:n,stroke:i})}),ref:{x:-1,y:10},scale:.5,parentGfx:e}),"conditional-default-flow-marker"===t&&f(o,{element:(0,c.Ue)("path",{d:"M 6 4 L 10 16",...d({stroke:i,fill:"none"})}),ref:{x:0,y:10},scale:.5,parentGfx:e}),"url(#"+o+")"}function v(e,t,n,i,o={}){(0,a.Kn)(i)&&(o=i,i=0),i=i||0,o=d(o);var r=(0,c.Ue)("circle",{cx:t/2,cy:n/2,r:Math.round((t+n)/4-i),...o});return(0,c.R3)(e,r),r}function _(e,t,n,i,o,r){(0,a.Kn)(o)&&(r=o,o=0),o=o||0,r=d(r);var s=(0,c.Ue)("rect",{x:o,y:o,width:t-2*o,height:n-2*o,rx:i,ry:i,...r});return(0,c.R3)(e,s),s}function b(e,t,n,i){var o=E(t,n=m(n),i);return(0,c.R3)(e,o),o}function x(e,t,n){n=m(n);var i=(0,c.Ue)("path",{...n,d:t});return(0,c.R3)(e,i),i}function w(e,t,n,i){return x(t,n,(0,a.f0)({"data-marker":e},i))}function S(e){return function(t,n,i){return z[e](t,n,i)}}var k={"bpmn:MessageEventDefinition":function(e,t,n={},o){return x(e,i.getScaledPath("EVENT_MESSAGE",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:n.width||t.width,containerHeight:n.height||t.height,position:{mx:.235,my:.315}}),{fill:o?tY(t,u,n.stroke):tX(t,l,n.fill),stroke:o?tX(t,l,n.fill):tY(t,u,n.stroke),strokeWidth:1})},"bpmn:TimerEventDefinition":function(e,t,n={}){var o=n.width||t.width,r=n.height||t.height,a=n.width?1:2,s=v(e,o,r,.2*r,{fill:tX(t,l,n.fill),stroke:tY(t,u,n.stroke),strokeWidth:a});x(e,i.getScaledPath("EVENT_TIMER_WH",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:o,containerHeight:r,position:{mx:.5,my:.5}}),{stroke:tY(t,u,n.stroke),strokeWidth:a});for(var c=0;c<12;c++){var p=i.getScaledPath("EVENT_TIMER_LINE",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:o,containerHeight:r,position:{mx:.5,my:.5}}),h=o/2,d=r/2;x(e,p,{strokeWidth:1,stroke:tY(t,u,n.stroke),transform:"rotate("+30*c+","+d+","+h+")"})}return s},"bpmn:EscalationEventDefinition":function(e,t,n={},o){return x(e,i.getScaledPath("EVENT_ESCALATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:n.width||t.width,containerHeight:n.height||t.height,position:{mx:.5,my:.2}}),{fill:o?tY(t,u,n.stroke):tX(t,l,n.fill),stroke:tY(t,u,n.stroke),strokeWidth:1})},"bpmn:ConditionalEventDefinition":function(e,t,n={}){return x(e,i.getScaledPath("EVENT_CONDITIONAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:n.width||t.width,containerHeight:n.height||t.height,position:{mx:.5,my:.222}}),{fill:tX(t,l,n.fill),stroke:tY(t,u,n.stroke),strokeWidth:1})},"bpmn:LinkEventDefinition":function(e,t,n={},o){return x(e,i.getScaledPath("EVENT_LINK",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.57,my:.263}}),{fill:o?tY(t,u,n.stroke):tX(t,l,n.fill),stroke:tY(t,u,n.stroke),strokeWidth:1})},"bpmn:ErrorEventDefinition":function(e,t,n={},o){return x(e,i.getScaledPath("EVENT_ERROR",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:n.width||t.width,containerHeight:n.height||t.height,position:{mx:.2,my:.722}}),{fill:o?tY(t,u,n.stroke):tX(t,l,n.fill),stroke:tY(t,u,n.stroke),strokeWidth:1})},"bpmn:CancelEventDefinition":function(e,t,n={},o){var r=x(e,i.getScaledPath("EVENT_CANCEL_45",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.638,my:-.055}}),{fill:o?tY(t,u,n.stroke):"none",stroke:tY(t,u,n.stroke),strokeWidth:1});return ed(r,45),r},"bpmn:CompensateEventDefinition":function(e,t,n={},o){return x(e,i.getScaledPath("EVENT_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:n.width||t.width,containerHeight:n.height||t.height,position:{mx:.22,my:.5}}),{fill:o?tY(t,u,n.stroke):tX(t,l,n.fill),stroke:tY(t,u,n.stroke),strokeWidth:1})},"bpmn:SignalEventDefinition":function(e,t,n={},o){return x(e,i.getScaledPath("EVENT_SIGNAL",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:n.width||t.width,containerHeight:n.height||t.height,position:{mx:.5,my:.2}}),{strokeWidth:1,fill:o?tY(t,u,n.stroke):tX(t,l,n.fill),stroke:tY(t,u,n.stroke)})},"bpmn:MultipleEventDefinition":function(e,t,n={},o){return x(e,i.getScaledPath("EVENT_MULTIPLE",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:n.width||t.width,containerHeight:n.height||t.height,position:{mx:.211,my:.36}}),{fill:o?tY(t,u,n.stroke):tX(t,l,n.fill),stroke:tY(t,u,n.stroke),strokeWidth:1})},"bpmn:ParallelMultipleEventDefinition":function(e,t,n={}){return x(e,i.getScaledPath("EVENT_PARALLEL_MULTIPLE",{xScaleFactor:1.2,yScaleFactor:1.2,containerWidth:n.width||t.width,containerHeight:n.height||t.height,position:{mx:.458,my:.194}}),{fill:tX(t,l,n.fill),stroke:tY(t,u,n.stroke),strokeWidth:1})},"bpmn:TerminateEventDefinition":function(e,t,n={}){return v(e,t.width,t.height,8,{fill:tY(t,u,n.stroke),stroke:tY(t,u,n.stroke),strokeWidth:4})}};function C(e,t,n={},i){var o=tw(e),r="bpmn:IntermediateThrowEvent"===o.$type||"bpmn:EndEvent"===o.$type,a=i||e;return o.get("eventDefinitions")&&o.get("eventDefinitions").length>1?o.get("parallelMultiple")?k["bpmn:ParallelMultipleEventDefinition"](t,a,n,r):k["bpmn:MultipleEventDefinition"](t,a,n,r):tJ(o,"bpmn:MessageEventDefinition")?k["bpmn:MessageEventDefinition"](t,a,n,r):tJ(o,"bpmn:TimerEventDefinition")?k["bpmn:TimerEventDefinition"](t,a,n,r):tJ(o,"bpmn:ConditionalEventDefinition")?k["bpmn:ConditionalEventDefinition"](t,a,n,r):tJ(o,"bpmn:SignalEventDefinition")?k["bpmn:SignalEventDefinition"](t,a,n,r):tJ(o,"bpmn:EscalationEventDefinition")?k["bpmn:EscalationEventDefinition"](t,a,n,r):tJ(o,"bpmn:LinkEventDefinition")?k["bpmn:LinkEventDefinition"](t,a,n,r):tJ(o,"bpmn:ErrorEventDefinition")?k["bpmn:ErrorEventDefinition"](t,a,n,r):tJ(o,"bpmn:CancelEventDefinition")?k["bpmn:CancelEventDefinition"](t,a,n,r):tJ(o,"bpmn:CompensateEventDefinition")?k["bpmn:CompensateEventDefinition"](t,a,n,r):tJ(o,"bpmn:TerminateEventDefinition")?k["bpmn:TerminateEventDefinition"](t,a,n,r):null}var R={ParticipantMultiplicityMarker:function(e,t,n={}){var o=t0(t,n),r=t1(t,n);w("participant-multiplicity",e,i.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:o,containerHeight:r,position:{mx:(o/2-6)/o,my:(r-15)/r}}),{strokeWidth:2,fill:tX(t,l,n.fill),stroke:tY(t,u,n.stroke)})},SubProcessMarker:function(e,t,n={}){eh(_(e,14,14,0,{strokeWidth:1,fill:tX(t,l,n.fill),stroke:tY(t,u,n.stroke)}),t.width/2-7.5,t.height-20),w("sub-process",e,i.getScaledPath("MARKER_SUB_PROCESS",{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2-7.5)/t.width,my:(t.height-20)/t.height}}),{fill:tX(t,l,n.fill),stroke:tY(t,u,n.stroke)})},ParallelMarker:function(e,t,n){var o=t0(t,n),r=t1(t,n);w("parallel",e,i.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:o,containerHeight:r,position:{mx:(o/2+n.parallel)/o,my:(r-20)/r}}),{fill:tX(t,l,n.fill),stroke:tY(t,u,n.stroke)})},SequentialMarker:function(e,t,n){w("sequential",e,i.getScaledPath("MARKER_SEQUENTIAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+n.seq)/t.width,my:(t.height-19)/t.height}}),{fill:tX(t,l,n.fill),stroke:tY(t,u,n.stroke)})},CompensationMarker:function(e,t,n){w("compensation",e,i.getScaledPath("MARKER_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+n.compensation)/t.width,my:(t.height-13)/t.height}}),{strokeWidth:1,fill:tX(t,l,n.fill),stroke:tY(t,u,n.stroke)})},LoopMarker:function(e,t,n){var o=t0(t,n),r=t1(t,n);w("loop",e,i.getScaledPath("MARKER_LOOP",{xScaleFactor:1,yScaleFactor:1,containerWidth:o,containerHeight:r,position:{mx:(o/2+n.loop)/o,my:(r-7)/r}}),{strokeWidth:1.5,fill:"none",stroke:tY(t,u,n.stroke),strokeMiterlimit:.5})},AdhocMarker:function(e,t,n){var o=t0(t,n),r=t1(t,n);w("adhoc",e,i.getScaledPath("MARKER_ADHOC",{xScaleFactor:1,yScaleFactor:1,containerWidth:o,containerHeight:r,position:{mx:(o/2+n.adhoc)/o,my:(r-15)/r}}),{strokeWidth:1,fill:tY(t,u,n.stroke),stroke:tY(t,u,n.stroke)})}};function P(e,t,n=[],i={}){i={fill:i.fill,stroke:i.stroke,width:t0(t,i),height:t1(t,i)};var o=tw(t),r=n.includes("SubProcessMarker");i=r?{...i,seq:-21,parallel:-22,compensation:-25,loop:-18,adhoc:10}:{...i,seq:-5,parallel:-6,compensation:-7,loop:0,adhoc:-8},o.get("isForCompensation")&&n.push("CompensationMarker"),tx(o,"bpmn:AdHocSubProcess")&&(n.push("AdhocMarker"),r||(0,a.f0)(i,{compensation:i.compensation-18}));var s=o.get("loopCharacteristics"),c=s&&s.get("isSequential");s&&((0,a.f0)(i,{compensation:i.compensation-18}),n.includes("AdhocMarker")&&(0,a.f0)(i,{seq:-23,loop:-18,parallel:-24}),void 0===c&&n.push("LoopMarker"),!1===c&&n.push("ParallelMarker"),!0===c&&n.push("SequentialMarker")),n.includes("CompensationMarker")&&1===n.length&&(0,a.f0)(i,{compensation:-8}),(0,a.Ed)(n,function(n){!function(e,t,n,i){R[e](t,n,i)}(n,e,t,i)})}function A(e,t,n={}){n=(0,a.f0)({size:{width:100}},n);var i=r.createText(t||"",n);return(0,c.Sh)(i).add("djs-label"),(0,c.R3)(e,i),i}function M(e,t,n,i={}){var o=tw(t),r=tQ({x:t.x,y:t.y,width:t.width,height:t.height},i);return A(e,o.name,{align:n,box:r,padding:7,style:{fill:tZ(t,h,u,i.stroke)}})}function T(e,t,n,i={}){var o=t$(n),r=A(e,t,{box:{height:30,width:o?t1(n,i):t0(n,i)},align:"center-middle",style:{fill:tZ(n,h,u,i.stroke)}});o&&eu(r,0,-(-1*t1(n,i)),270)}function D(e,t,n={}){var{width:i,height:o}=tQ(t,n);return _(e,i,o,10,{...n,fill:tX(t,l,n.fill),fillOpacity:.95,stroke:tY(t,u,n.stroke)})}function B(e,t,n={}){var i=tw(t),o=tX(t,l,n.fill),r=tY(t,u,n.stroke);return("One"===i.get("associationDirection")||"Both"===i.get("associationDirection"))&&(n.markerEnd=g(e,"association-end",o,r)),"Both"===i.get("associationDirection")&&(n.markerStart=g(e,"association-start",o,r)),n=t3(n,["markerStart","markerEnd"]),b(e,t.waypoints,{...n,stroke:r,strokeDasharray:"0, 5"},5)}function j(e,t,n={}){var o,r,a=tX(t,l,n.fill),s=tY(t,u,n.stroke),c=x(e,i.getScaledPath("DATA_OBJECT_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.474,my:.296}}),{fill:a,fillOpacity:.95,stroke:s});return r=(o=tw(t)).dataObjectRef,(o.isCollection||r&&r.isCollection)&&x(e,i.getScaledPath("DATA_OBJECT_COLLECTION_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.33,my:(t.height-18)/t.height}}),{strokeWidth:2,fill:a,stroke:s}),c}function N(e,t,n={}){return v(e,t.width,t.height,{fillOpacity:.95,...n,fill:tX(t,l,n.fill),stroke:tY(t,u,n.stroke)})}function O(e,t,n={}){var i,o,r,a,s,p,h;return i=t.width,o=t.height,r={fill:tX(t,l,n.fill),fillOpacity:.95,stroke:tY(t,u,n.stroke)},p=[{x:a=i/2,y:0},{x:i,y:s=o/2},{x:a,y:o},{x:0,y:s}].map(function(e){return e.x+","+e.y}).join(" "),r=d(r),h=(0,c.Ue)("polygon",{...r,points:p}),(0,c.R3)(e,h),h}function L(e,t,n={}){var i=_(e,t0(t,n),t1(t,n),0,{fill:tX(t,l,n.fill),fillOpacity:n.fillOpacity||.95,stroke:tY(t,u,n.stroke),strokeWidth:1.5}),o=tw(t);return tx(o,"bpmn:Lane")&&T(e,o.get("name"),t,n),i}function $(e,t,n={}){var i=D(e,t,n),o=tL(t);if(tI(t)&&((0,c.Lj)(i,{strokeDasharray:"0, 5.5",strokeWidth:2.5}),!o)){var r,a,s,p=(tw(t).flowElements||[]).filter(e=>tx(e,"bpmn:StartEvent"));1===p.length&&(r=p[0],a={fill:tX(t,l,n.fill),stroke:tY(t,u,n.stroke),width:22,height:22},s=tw(r).isInterrupting,v(e,20,20,{fill:a.fill,stroke:a.stroke,strokeWidth:s?1:1.2,strokeDasharray:s?0:3,transform:"translate(1,1)"}),C(r,e,a,t))}return M(e,t,o?"center-top":"center-middle",n),o?P(e,t,void 0,n):P(e,t,["SubProcessMarker"],n),i}function I(e,t,n={}){var i=D(e,t,n);return M(e,t,"center-middle",n),P(e,t,void 0,n),i}var z=this.handlers={"bpmn:AdHocSubProcess":function(e,t,n={}){return n=tL(t)?t3(n,["fill","stroke","width","height"]):t3(n,["fill","stroke"]),$(e,t,n)},"bpmn:Association":function(e,t,n={}){return B(e,t,n=t3(n,["fill","stroke"]))},"bpmn:BoundaryEvent":function(e,t,n={}){var{renderIcon:i=!0}=n;n=t3(n,["fill","stroke"]);var o=tw(t).get("cancelActivity");n={strokeWidth:1.5,fill:tX(t,l,n.fill),fillOpacity:1,stroke:tY(t,u,n.stroke)},o||(n.strokeDasharray="6");var r=N(e,t,n);return v(e,t.width,t.height,3,{...n,fill:"none"}),i&&C(t,e,n),r},"bpmn:BusinessRuleTask":function(e,t,n={}){var o=I(e,t,n=t3(n,["fill","stroke"])),r=x(e,i.getScaledPath("TASK_TYPE_BUSINESS_RULE_MAIN",{abspos:{x:8,y:8}}));(0,c.Lj)(r,{fill:tX(t,l,n.fill),stroke:tY(t,u,n.stroke),strokeWidth:1});var a=x(e,i.getScaledPath("TASK_TYPE_BUSINESS_RULE_HEADER",{abspos:{x:8,y:8}}));return(0,c.Lj)(a,{fill:tY(t,u,n.stroke),stroke:tY(t,u,n.stroke),strokeWidth:1}),o},"bpmn:CallActivity":function(e,t,n={}){return $(e,t,{strokeWidth:5,...n=t3(n,["fill","stroke"])})},"bpmn:ComplexGateway":function(e,t,n={}){var o=O(e,t,n=t3(n,["fill","stroke"]));return x(e,i.getScaledPath("GATEWAY_COMPLEX",{xScaleFactor:.5,yScaleFactor:.5,containerWidth:t.width,containerHeight:t.height,position:{mx:.46,my:.26}}),{fill:tY(t,u,n.stroke),stroke:tY(t,u,n.stroke),strokeWidth:1}),o},"bpmn:DataInput":function(e,t,n={}){n=t3(n,["fill","stroke"]);var o=i.getRawPath("DATA_ARROW"),r=j(e,t,n);return x(e,o,{fill:"none",stroke:tY(t,u,n.stroke),strokeWidth:1}),r},"bpmn:DataInputAssociation":function(e,t,n={}){return B(e,t,{...n=t3(n,["fill","stroke"]),markerEnd:g(e,"association-end",tX(t,l,n.fill),tY(t,u,n.stroke))})},"bpmn:DataObject":function(e,t,n={}){return j(e,t,n=t3(n,["fill","stroke"]))},"bpmn:DataObjectReference":S("bpmn:DataObject"),"bpmn:DataOutput":function(e,t,n={}){n=t3(n,["fill","stroke"]);var o=i.getRawPath("DATA_ARROW"),r=j(e,t,n);return x(e,o,{strokeWidth:1,fill:tX(t,l,n.fill),stroke:tY(t,u,n.stroke)}),r},"bpmn:DataOutputAssociation":function(e,t,n={}){return B(e,t,{...n=t3(n,["fill","stroke"]),markerEnd:g(e,"association-end",tX(t,l,n.fill),tY(t,u,n.stroke))})},"bpmn:DataStoreReference":function(e,t,n={}){return n=t3(n,["fill","stroke"]),x(e,i.getScaledPath("DATA_STORE",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:0,my:.133}}),{fill:tX(t,l,n.fill),fillOpacity:.95,stroke:tY(t,u,n.stroke),strokeWidth:2})},"bpmn:EndEvent":function(e,t,n={}){var{renderIcon:i=!0}=n,o=N(e,t,{...n=t3(n,["fill","stroke"]),strokeWidth:4});return i&&C(t,e,n),o},"bpmn:EventBasedGateway":function(e,t,n={}){n=t3(n,["fill","stroke"]);var o=tw(t),r=O(e,t,n);v(e,t.width,t.height,.2*t.height,{fill:tX(t,"none",n.fill),stroke:tY(t,u,n.stroke),strokeWidth:1});var a=o.get("eventGatewayType"),s=!!o.get("instantiate");return"Parallel"===a?x(e,i.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:t.width,containerHeight:t.height,position:{mx:.474,my:.296}}),{fill:"none",stroke:tY(t,u,n.stroke),strokeWidth:1}):"Exclusive"===a&&(s||v(e,t.width,t.height,.26*t.height,{fill:"none",stroke:tY(t,u,n.stroke),strokeWidth:1}),x(e,i.getScaledPath("GATEWAY_EVENT_BASED",{xScaleFactor:.18,yScaleFactor:.18,containerWidth:t.width,containerHeight:t.height,position:{mx:.36,my:.44}}),{fill:"none",stroke:tY(t,u,n.stroke),strokeWidth:2})),r},"bpmn:ExclusiveGateway":function(e,t,n={}){var o=O(e,t,n=t3(n,["fill","stroke"])),r=i.getScaledPath("GATEWAY_EXCLUSIVE",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:t.width,containerHeight:t.height,position:{mx:.32,my:.3}});return tS(t).get("isMarkerVisible")&&x(e,r,{fill:tY(t,u,n.stroke),stroke:tY(t,u,n.stroke),strokeWidth:1}),o},"bpmn:Gateway":function(e,t,n={}){return O(e,t,n=t3(n,["fill","stroke"]))},"bpmn:Group":function(e,t,n={}){return n=t3(n,["fill","stroke","width","height"]),_(e,t.width,t.height,10,{stroke:tY(t,u,n.stroke),strokeWidth:1.5,strokeDasharray:"10, 6, 0, 6",fill:"none",pointerEvents:"none",width:t0(t,n),height:t1(t,n)})},"bpmn:InclusiveGateway":function(e,t,n={}){var i=O(e,t,n=t3(n,["fill","stroke"]));return v(e,t.width,t.height,.24*t.height,{fill:tX(t,l,n.fill),stroke:tY(t,u,n.stroke),strokeWidth:2.5}),i},"bpmn:IntermediateEvent":function(e,t,n={}){var{renderIcon:i=!0}=n,o=N(e,t,{...n=t3(n,["fill","stroke"]),strokeWidth:1.5});return v(e,t.width,t.height,3,{fill:"none",stroke:tY(t,u,n.stroke),strokeWidth:1.5}),i&&C(t,e,n),o},"bpmn:IntermediateCatchEvent":S("bpmn:IntermediateEvent"),"bpmn:IntermediateThrowEvent":S("bpmn:IntermediateEvent"),"bpmn:Lane":function(e,t,n={}){return L(e,t,{...n=t3(n,["fill","stroke","width","height"]),fillOpacity:.25})},"bpmn:ManualTask":function(e,t,n={}){var o=I(e,t,n=t3(n,["fill","stroke"]));return x(e,i.getScaledPath("TASK_TYPE_MANUAL",{abspos:{x:17,y:15}}),{fill:tX(t,l,n.fill),stroke:tY(t,u,n.stroke),strokeWidth:.5}),o},"bpmn:MessageFlow":function(e,t,n={}){n=t3(n,["fill","stroke"]);var o=tw(t),r=tS(t),a=tX(t,l,n.fill),s=tY(t,u,n.stroke),c=b(e,t.waypoints,{markerEnd:g(e,"messageflow-end",a,s),markerStart:g(e,"messageflow-start",a,s),stroke:s,strokeDasharray:"10, 11",strokeWidth:1.5},5);if(o.get("messageRef")){var p=c.getPointAtLength(c.getTotalLength()/2),h=i.getScaledPath("MESSAGE_FLOW_MARKER",{abspos:{x:p.x,y:p.y}}),d={strokeWidth:1};"initiating"===r.get("messageVisibleKind")?(d.fill=a,d.stroke=s):(d.fill=s,d.stroke=a);var m=x(e,h,d),f=A(e,o.get("messageRef").get("name"),{align:"center-top",fitBox:!0,style:{fill:s}}),y=m.getBBox(),v=f.getBBox();eu(f,p.x-v.width/2,p.y+y.height/2+10,0)}return c},"bpmn:ParallelGateway":function(e,t,n={}){var o=O(e,t,n=t3(n,["fill","stroke"]));return x(e,i.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.6,yScaleFactor:.6,containerWidth:t.width,containerHeight:t.height,position:{mx:.46,my:.2}}),{fill:tY(t,u,n.stroke),stroke:tY(t,u,n.stroke),strokeWidth:1}),o},"bpmn:Participant":function(e,t,n={}){var i=L(e,t,n=t3(n,["fill","stroke","width","height"])),o=tL(t),r=t$(t),a=tw(t),s=a.get("name");if(o)b(e,r?[{x:30,y:0},{x:30,y:t1(t,n)}]:[{x:0,y:30},{x:t0(t,n),y:30}],{stroke:tY(t,u,n.stroke),strokeWidth:1.5}),T(e,s,t,n);else{var c=tQ(t,n);r||(c.height=t0(t,n),c.width=t1(t,n));var p=A(e,s,{box:c,align:"center-middle",style:{fill:tZ(t,h,u,n.stroke)}});r||eu(p,0,-(-1*t1(t,n)),270)}return a.get("participantMultiplicity")&&function(e,t,n,i){R[e](t,n,i)}("ParticipantMultiplicityMarker",e,t,n),i},"bpmn:ReceiveTask":function(e,t,n={}){n=t3(n,["fill","stroke"]);var o,r=tw(t),a=I(e,t,n);return r.get("instantiate")?(v(e,28,28,4.4,{fill:tX(t,l,n.fill),stroke:tY(t,u,n.stroke),strokeWidth:1}),o=i.getScaledPath("TASK_TYPE_INSTANTIATING_SEND",{abspos:{x:7.77,y:9.52}})):o=i.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:21,containerHeight:14,position:{mx:.3,my:.4}}),x(e,o,{fill:tX(t,l,n.fill),stroke:tY(t,u,n.stroke),strokeWidth:1}),a},"bpmn:ScriptTask":function(e,t,n={}){var o=I(e,t,n=t3(n,["fill","stroke"]));return x(e,i.getScaledPath("TASK_TYPE_SCRIPT",{abspos:{x:15,y:20}}),{fill:tX(t,l,n.fill),stroke:tY(t,u,n.stroke),strokeWidth:1}),o},"bpmn:SendTask":function(e,t,n={}){var o=I(e,t,n=t3(n,["fill","stroke"]));return x(e,i.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:1,yScaleFactor:1,containerWidth:21,containerHeight:14,position:{mx:.285,my:.357}}),{fill:tY(t,u,n.stroke),stroke:tX(t,l,n.fill),strokeWidth:1}),o},"bpmn:SequenceFlow":function(e,t,n={}){var i=tX(t,l,(n=t3(n,["fill","stroke"])).fill),o=tY(t,u,n.stroke),r=b(e,t.waypoints,{markerEnd:g(e,"sequenceflow-end",i,o),stroke:o},5),a=tw(t),{source:s}=t;if(s){var p=tw(s);a.get("conditionExpression")&&tx(p,"bpmn:Activity")&&(0,c.Lj)(r,{markerStart:g(e,"conditional-flow-marker",i,o)}),p.get("default")&&(tx(p,"bpmn:Gateway")||tx(p,"bpmn:Activity"))&&p.get("default")===a&&(0,c.Lj)(r,{markerStart:g(e,"conditional-default-flow-marker",i,o)})}return r},"bpmn:ServiceTask":function(e,t,n={}){var o=I(e,t,n=t3(n,["fill","stroke"]));return v(e,10,10,{fill:tX(t,l,n.fill),stroke:"none",transform:"translate(6, 6)"}),x(e,i.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:12,y:18}}),{fill:tX(t,l,n.fill),stroke:tY(t,u,n.stroke),strokeWidth:1}),v(e,10,10,{fill:tX(t,l,n.fill),stroke:"none",transform:"translate(11, 10)"}),x(e,i.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:17,y:22}}),{fill:tX(t,l,n.fill),stroke:tY(t,u,n.stroke),strokeWidth:1}),o},"bpmn:StartEvent":function(e,t,n={}){var{renderIcon:i=!0}=n;n=t3(n,["fill","stroke"]),tw(t).get("isInterrupting")||(n={...n,strokeDasharray:"6"});var o=N(e,t,n);return i&&C(t,e,n),o},"bpmn:SubProcess":function(e,t,n={}){return n=tL(t)?t3(n,["fill","stroke","width","height"]):t3(n,["fill","stroke"]),$(e,t,n)},"bpmn:Task":function(e,t,n={}){return I(e,t,n=t3(n,["fill","stroke"]))},"bpmn:TextAnnotation":function(e,t,n={}){var{width:o,height:r}=tQ(t,n=t3(n,["fill","stroke","width","height"])),a=_(e,o,r,0,0,{fill:"none",stroke:"none"});return x(e,i.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:o,containerHeight:r,position:{mx:0,my:0}}),{stroke:tY(t,u,n.stroke)}),A(e,tw(t).get("text")||"",{align:"left-top",box:tQ(t,n),padding:7,style:{fill:tZ(t,h,u,n.stroke)}}),a},"bpmn:Transaction":function(e,t,i={}){i=tL(t)?t3(i,["fill","stroke","width","height"]):t3(i,["fill","stroke"]);var o=$(e,t,{strokeWidth:1.5,...i}),r=n.style(["no-fill","no-events"],{stroke:tY(t,u,i.stroke),strokeWidth:1.5});return tL(t)||(i={}),_(e,t0(t,i),t1(t,i),7,3,r),o},"bpmn:UserTask":function(e,t,n={}){var o=I(e,t,n=t3(n,["fill","stroke"]));return x(e,i.getScaledPath("TASK_TYPE_USER_1",{abspos:{x:15,y:12}}),{fill:tX(t,l,n.fill),stroke:tY(t,u,n.stroke),strokeWidth:.5}),x(e,i.getScaledPath("TASK_TYPE_USER_2",{abspos:{x:15,y:12}}),{fill:tX(t,l,n.fill),stroke:tY(t,u,n.stroke),strokeWidth:.5}),x(e,i.getScaledPath("TASK_TYPE_USER_3",{abspos:{x:15,y:12}}),{fill:tY(t,u,n.stroke),stroke:tY(t,u,n.stroke),strokeWidth:.5}),o},label:function(e,t,n={}){return function(e,t,n={}){var i={width:90,height:30,x:t.width/2+t.x,y:t.height/2+t.y};return A(e,tK(t),{box:i,fitBox:!0,style:(0,a.f0)({},r.getExternalStyle(),{fill:tZ(t,h,u,n.stroke)})})}(e,t,n)}};this._drawPath=x,this._renderer=function(e){return z[e]}}function t3(e,t=[]){return t.reduce((t,n)=>(e[n]&&(t[n]=e[n]),t),{})}i(t5,y),t5.$inject=["config.bpmnRenderer","eventBus","styles","pathMap","canvas","textRenderer"],t5.prototype.canRender=function(e){return tx(e,"bpmn:BaseElement")},t5.prototype.drawShape=function(e,t,n={}){var{type:i}=t;return this._renderer(i)(e,t,n)},t5.prototype.drawConnection=function(e,t,n={}){var{type:i}=t;return this._renderer(i)(e,t,n)},t5.prototype.getShapePath=function(e){var t,n,i,o,r,a,s,c,p,l,u,h;return tx(e,"bpmn:Event")?v([["M",e.x+e.width/2,e.y+e.height/2],["m",0,-(t=e.width/2)],["a",t,t,0,1,1,0,2*t],["a",t,t,0,1,1,0,-2*t],["z"]]):tx(e,"bpmn:Activity")?(n=e.x,v([["M",n+10,e.y],["l",(i=e.width)-20,0],["a",10,10,0,0,1,10,10],["l",0,(o=e.height)-20],["a",10,10,0,0,1,-10,10],["l",20-i,0],["a",10,10,0,0,1,-10,-10],["l",0,20-o],["a",10,10,0,0,1,10,-10],["z"]])):tx(e,"bpmn:Gateway")?(r=e.width,a=e.height,s=e.x,c=e.y,v([["M",s+(p=r/2),c],["l",p,l=a/2],["l",-p,l],["l",-p,-l],["z"]])):(u=e.x,v([["M",u,e.y],["l",h=e.width,0],["l",0,e.height],["l",-h,0],["z"]]))};var t6={width:150,height:50};function t4(e){this._config=(0,a.f0)({},{size:t6,padding:0,style:{},align:"center-top"},e||{})}function t9(e){var t=(0,a.f0)({fontFamily:"Arial, sans-serif",fontSize:12,fontWeight:"normal",lineHeight:1.2},e&&e.defaultStyle||{}),n=parseInt(t.fontSize,10)-1,i=(0,a.f0)({},t,{fontSize:n},e&&e.externalStyle||{}),o=new t4({style:t});this.getExternalLabelBounds=function(e,t){var n=o.getDimensions(t,{box:{width:90,height:30},style:i});return{x:Math.round(e.x+e.width/2-n.width/2),y:Math.round(e.y),width:Math.ceil(n.width),height:Math.ceil(n.height)}},this.getTextAnnotationBounds=function(e,n){var i=o.getDimensions(n,{box:e,style:t,align:"left-top",padding:5});return{x:e.x,y:e.y,width:e.width,height:Math.max(30,Math.round(i.height))}},this.createText=function(e,t){return o.createText(e,t||{})},this.getDefaultStyle=function(){return t},this.getExternalStyle=function(){return i}}t4.prototype.createText=function(e,t){return this.layoutText(e,t).element},t4.prototype.getDimensions=function(e,t){return this.layoutText(e,t).dimensions},t4.prototype.layoutText=function(e,t){var n,i,o,r=(0,a.f0)({},this._config.size,t.box),p=(0,a.f0)({},this._config.style,t.style),l={horizontal:(n=(t.align||this._config.align).split("-"))[0]||"center",vertical:n[1]||"top"},u=(i=void 0!==t.padding?t.padding:this._config.padding,(0,a.Kn)(i)?(0,a.f0)({top:0,left:0,right:0,bottom:0},i):{top:i,left:i,right:i,bottom:i}),h=t.fitBox||!1,d=function(e){if("fontSize"in e&&"lineHeight"in e)return e.lineHeight*parseInt(e.fontSize,10)}(p),m=e.split(/\u00AD?\r?\n/),f=[],g=r.width-u.left-u.right,y=(0,c.Ue)("text");(0,c.Lj)(y,{x:0,y:0}),(0,c.Lj)(y,p);var v=((o=document.getElementById("helper-svg"))||(o=(0,c.Ue)("svg"),(0,c.Lj)(o,{id:"helper-svg"}),(0,s.i5)(o,{visibility:"hidden",position:"fixed",width:0,height:0}),document.body.appendChild(o)),o);for((0,c.R3)(v,y);m.length;)f.push(function(e,t,n){for(var i,o=e.shift(),r=o;;){if((i=function(e,t){t.textContent=e;try{var n,i,o=""===e;return t.textContent=o?"dummy":e,i={width:(n=t.getBBox()).width+2*n.x,height:n.height},o&&(i.width=0),i}catch(e){return console.log(e),{width:0,height:0}}}(r,n)).width=r?i.width:0," "===r||""===r||i.width<Math.round(t)||r.length<2)return function(e,t,n,i){if(t.length<n.length){var o=n.slice(t.length).trim();e.unshift(o)}return{width:i.width,height:i.height,text:t}}(e,r,o,i);r=function(e,t,n){var i=Math.max(e.length*(n/t),1),o=function(e,t){var n,i=e.split(/(\s|-|\u00AD)/g),o=[],r=0;if(i.length>1)for(;n=i.shift();)if(n.length+r<t)o.push(n),r+=n.length;else{("-"===n||"\xad"===n)&&o.pop();break}var a=o[o.length-1];return a&&"\xad"===a&&(o[o.length-1]="-"),o.join("")}(e,i);return o||(o=e.slice(0,Math.max(Math.round(i-1),1))),o}(r,i.width,t)}}(m,g,y));"middle"===l.vertical&&(u.top=u.bottom=0);var _=(0,a.u4)(f,function(e,t,n){return e+(d||t.height)},0)+u.top+u.bottom,b=(0,a.u4)(f,function(e,t,n){return t.width>e?t.width:e},0),x=u.top;"middle"===l.vertical&&(x+=(r.height-_)/2),x-=(d||f[0].height)/4;var E=(0,c.Ue)("text");return(0,c.Lj)(E,p),(0,a.Ed)(f,function(e){switch(x+=d||e.height,l.horizontal){case"left":t=u.left;break;case"right":t=(h?b:g)-u.right-e.width;break;default:t=Math.max(((h?b:g)-e.width)/2+u.left,0)}var t,n=(0,c.Ue)("tspan");(0,c.Lj)(n,{x:t,y:x}),n.textContent=e.text,(0,c.R3)(E,n)}),(0,c.Od)(y),{dimensions:{width:b,height:_},element:E}},t9.$inject=["config.textRenderer"];var t8=/\{([^{}]+)\}/g,t7=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,ne={translate:["value",function(e,t){return t=t||{},e.replace(/{([^}]+)}/g,function(e,n){return t[n]||"{"+n+"}"})}]};function nt(e,t,n){return(0,a.f0)({id:e.id,type:e.$type,businessObject:e,di:t},n)}function nn(e,t,n){return Error(`element ${ty(t)} referenced by ${ty(e)}#${n} not yet drawn`)}function ni(e,t,n,i,o){this._eventBus=e,this._canvas=t,this._elementFactory=n,this._elementRegistry=i,this._textRenderer=o}ni.$inject=["eventBus","canvas","elementFactory","elementRegistry","textRenderer"],ni.prototype.add=function(e,t,n){if(tx(t,"bpmndi:BPMNPlane")){var i,o,r,a=tx(e,"bpmn:SubProcess")?{id:e.id+"_plane"}:{};i=this._elementFactory.createRoot(nt(e,t,a)),this._canvas.addRootElement(i)}else if(tx(t,"bpmndi:BPMNShape")){var s,c,p,l,u=!tL(e,t),h=tx(e,"bpmn:Group");o=n&&(n.hidden||n.collapsed);var d=t.bounds;i=this._elementFactory.createShape(nt(e,t,{collapsed:u,hidden:o,x:Math.round(d.x),y:Math.round(d.y),width:Math.round(d.width),height:Math.round(d.height),isFrame:h})),tx(e,"bpmn:BoundaryEvent")&&this._attachBoundary(e,i),tx(e,"bpmn:Lane")&&(r=0),!tx(e,"bpmn:DataStoreReference")||(s=n,p=(c=(0,L.wS)(d)).x,l=c.y,p>=s.x&&p<=s.x+s.width&&l>=s.y&&l<=s.y+s.height)||(n=this._canvas.findRoot(n)),this._canvas.addShape(i,n,r)}else if(tx(t,"bpmndi:BPMNEdge")){var m,f=this._getSource(e),g=this._getTarget(e);o=n&&(n.hidden||n.collapsed),i=this._elementFactory.createConnection(nt(e,t,{hidden:o,source:f,target:g,waypoints:(m=t.waypoint)&&!(m.length<2)?m.map(function(e){return{x:e.x,y:e.y}}):[(0,L.wS)(f),(0,L.wS)(g)]})),tx(e,"bpmn:DataAssociation")&&(n=this._canvas.findRoot(n)),this._canvas.addConnection(i,n,r)}else throw Error(`unknown di ${ty(t)} for element ${ty(e)}`);return tG(e)&&tK(i)&&this.addLabel(e,t,i),this._eventBus.fire("bpmnElement.added",{element:i}),i},ni.prototype._attachBoundary=function(e,t){var n=e.attachedToRef;if(!n)throw Error(`missing ${ty(e)}#attachedToRef`);var i=this._elementRegistry.get(n.id),o=i&&i.attachers;if(!i)throw nn(e,n,"attachedToRef");t.host=i,o||(i.attachers=o=[]),-1===o.indexOf(t)&&o.push(t)},ni.prototype.addLabel=function(e,t,n){var i,o,r,s,c,p,l;return(l=t.label)&&l.bounds?(p=l.bounds,c={width:Math.max(tF.width,p.width),height:p.height},s={x:p.x+p.width/2,y:p.y+p.height/2}):(s=tV(n),c=tF),i=(0,a.f0)({x:s.x-c.width/2,y:s.y-c.height/2},c),(o=tK(n))&&(i=this._textRenderer.getExternalLabelBounds(i,o)),r=this._elementFactory.createLabel(nt(e,t,{id:e.id+"_label",labelTarget:n,type:"label",hidden:n.hidden||!tK(n),x:Math.round(i.x),y:Math.round(i.y),width:Math.round(i.width),height:Math.round(i.height)})),this._canvas.addShape(r,n.parent)},ni.prototype._getConnectedElement=function(e,t){var n,i,o=e.$type;if(i=e[t+"Ref"],"source"===t&&"bpmn:DataInputAssociation"===o&&(i=i&&i[0]),("source"===t&&"bpmn:DataOutputAssociation"===o||"target"===t&&"bpmn:DataInputAssociation"===o)&&(i=e.$parent),n=i&&this._getElement(i))return n;if(i)throw nn(e,i,t+"Ref");throw Error(`${ty(e)}#${t} Ref not specified`)},ni.prototype._getSource=function(e){return this._getConnectedElement(e,"source")},ni.prototype._getTarget=function(e){return this._getConnectedElement(e,"target")},ni.prototype._getElement=function(e){return this._elementRegistry.get(e.id)};var no=n(725),nr=new no.Z("ov");function na(e,t,n,i){var o,r;this._eventBus=t,this._canvas=n,this._elementRegistry=i,this._ids=nr,this._overlayDefaults=(0,a.f0)({show:null,scale:!0},e&&e.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=(o=n.getContainer(),r=(0,s.H6)('<div class="djs-overlay-container" />'),(0,s.i5)(r,{position:"absolute",width:0,height:0}),o.insertBefore(r,o.firstChild),r),this._init()}function ns(e,t,n){(0,s.i5)(e,{left:t+"px",top:n+"px"})}function nc(e,t){e.style.display=!1===t?"none":""}function np(e,t){e.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(n){e.style[n+"transform"]=t})}na.$inject=["config.overlays","eventBus","canvas","elementRegistry"],na.prototype.get=function(e){if((0,a.HD)(e)&&(e={id:e}),(0,a.HD)(e.element)&&(e.element=this._elementRegistry.get(e.element)),e.element){var t=this._getOverlayContainer(e.element,!0);return t?e.type?(0,a.hX)(t.overlays,(0,a.KQ)({type:e.type})):t.overlays.slice():[]}return e.type?(0,a.hX)(this._overlays,(0,a.KQ)({type:e.type})):e.id?this._overlays[e.id]:null},na.prototype.add=function(e,t,n){if((0,a.Kn)(t)&&(n=t,t=null),e.id||(e=this._elementRegistry.get(e)),!n.position)throw Error("must specifiy overlay position");if(!n.html)throw Error("must specifiy overlay html");if(!e)throw Error("invalid element specified");var i=this._ids.next();return n=(0,a.f0)({},this._overlayDefaults,n,{id:i,type:t,element:e,html:n.html}),this._addOverlay(n),i},na.prototype.remove=function(e){var t=this.get(e)||[];(0,a.kJ)(t)||(t=[t]);var n=this;(0,a.Ed)(t,function(e){var t=n._getOverlayContainer(e.element,!0);if(e&&((0,s.Od)(e.html),(0,s.Od)(e.htmlContainer),delete e.htmlContainer,delete e.element,delete n._overlays[e.id]),t){var i=t.overlays.indexOf(e);-1!==i&&t.overlays.splice(i,1)}})},na.prototype.isShown=function(){return"none"!==this._overlayRoot.style.display},na.prototype.show=function(){nc(this._overlayRoot)},na.prototype.hide=function(){nc(this._overlayRoot,!1)},na.prototype.clear=function(){this._overlays={},this._overlayContainers=[],(0,s.ZH)(this._overlayRoot)},na.prototype._updateOverlayContainer=function(e){var t=e.element,n=e.html,i=t.x,o=t.y;if(t.waypoints){var r=P(t);i=r.x,o=r.y}ns(n,i,o),(0,s.Lj)(e.html,"data-container-id",t.id)},na.prototype._updateOverlay=function(e){var t,n,i=e.position,o=e.htmlContainer,r=e.element,a=i.left,s=i.top;void 0!==i.right&&(t=r.waypoints?P(r).width:r.width,a=-1*i.right+t),void 0!==i.bottom&&(n=r.waypoints?P(r).height:r.height,s=-1*i.bottom+n),ns(o,a||0,s||0),this._updateOverlayVisibilty(e,this._canvas.viewbox())},na.prototype._createOverlayContainer=function(e){var t=(0,s.H6)('<div class="djs-overlays" />');(0,s.i5)(t,{position:"absolute"}),this._overlayRoot.appendChild(t);var n={html:t,element:e,overlays:[]};return this._updateOverlayContainer(n),this._overlayContainers.push(n),n},na.prototype._updateRoot=function(e){var t=e.scale||1,n="matrix("+[t,0,0,t,-1*e.x*t,-1*e.y*t].join(",")+")";np(this._overlayRoot,n)},na.prototype._getOverlayContainer=function(e,t){var n=(0,a.sE)(this._overlayContainers,function(t){return t.element===e});return n||t?n:this._createOverlayContainer(e)},na.prototype._addOverlay=function(e){var t,n,i=e.id,o=e.element,r=e.html;r.get&&r.constructor.prototype.jquery&&(r=r.get(0)),(0,a.HD)(r)&&(r=(0,s.H6)(r)),n=this._getOverlayContainer(o),t=(0,s.H6)('<div class="djs-overlay" data-overlay-id="'+i+'">'),(0,s.i5)(t,{position:"absolute"}),t.appendChild(r),e.type&&(0,s.Sh)(t).add("djs-overlay-"+e.type),nc(t,this._canvas.findRoot(o)===this._canvas.getRootElement()),e.htmlContainer=t,n.overlays.push(e),n.html.appendChild(t),this._overlays[i]=e,this._updateOverlay(e),this._updateOverlayVisibilty(e,this._canvas.viewbox())},na.prototype._updateOverlayVisibilty=function(e,t){var n=e.show,i=this._canvas.findRoot(e.element),o=n&&n.minZoom,r=n&&n.maxZoom,s=e.htmlContainer,c=this._canvas.getRootElement(),p=!0;i!==c?p=!1:n&&((0,a.$K)(o)&&o>t.scale||(0,a.$K)(r)&&r<t.scale)&&(p=!1),nc(s,p),this._updateOverlayScale(e,t)},na.prototype._updateOverlayScale=function(e,t){var n,i,o,r=e.scale,s=e.htmlContainer,c="";!0!==r&&(!1===r?(n=1,i=1):(n=r.min,i=r.max),(0,a.$K)(n)&&t.scale<n&&(o=(1/t.scale||1)*n),(0,a.$K)(i)&&t.scale>i&&(o=(1/t.scale||1)*i)),(0,a.$K)(o)&&(c="scale("+o+","+o+")"),np(s,c)},na.prototype._updateOverlaysVisibilty=function(e){var t=this;(0,a.Ed)(this._overlays,function(n){t._updateOverlayVisibilty(n,e)})},na.prototype._init=function(){var e=this._eventBus,t=this;e.on("canvas.viewbox.changing",function(e){t.hide()}),e.on("canvas.viewbox.changed",function(e){var n;n=e.viewbox,t._updateRoot(n),t._updateOverlaysVisibilty(n),t.show()}),e.on(["shape.remove","connection.remove"],function(e){var n=e.element,i=t.get({element:n});(0,a.Ed)(i,function(e){t.remove(e.id)});var o=t._getOverlayContainer(n);if(o){(0,s.Od)(o.html);var r=t._overlayContainers.indexOf(o);-1!==r&&t._overlayContainers.splice(r,1)}}),e.on("element.changed",500,function(e){var n=e.element,i=t._getOverlayContainer(n,!0);i&&((0,a.Ed)(i.overlays,function(e){t._updateOverlay(e)}),t._updateOverlayContainer(i))}),e.on("element.marker.update",function(e){var n=t._getOverlayContainer(e.element,!0);n&&(0,s.Sh)(n.html)[e.add?"add":"remove"](e.marker)}),e.on("root.set",function(){t._updateOverlaysVisibilty(t._canvas.viewbox())}),e.on("diagram.clear",this.clear,this)};var nl={__init__:["overlays"],overlays:["type",na]};function nu(e,t,n,i){e.on("element.changed",function(i){var o=i.element;(o.parent||o===t.getRootElement())&&(i.gfx=n.getGraphics(o)),i.gfx&&e.fire(M(o)+".changed",i)}),e.on("elements.changed",function(t){var n=t.elements;n.forEach(function(t){e.fire("element.changed",{element:t})}),i.updateContainments(n)}),e.on("shape.changed",function(e){i.update("shape",e.element,e.gfx)}),e.on("connection.changed",function(e){i.update("connection",e.element,e.gfx)})}nu.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"];var nh={__init__:["changeSupport"],changeSupport:["type",nu]};function nd(e){this._eventBus=e}function nm(e){return function(t,n,i,o,r){((0,a.mf)(t)||(0,a.hj)(t))&&(r=o,o=i,i=n,n=t,t=null),this.on(t,e,n,i,o,r)}}function nf(e,t){t.invoke(nd,this),this.executed(function(t){var n=t.context;n.rootElement?e.setRootElement(n.rootElement):n.rootElement=e.getRootElement()}),this.revert(function(t){var n=t.context;n.rootElement&&e.setRootElement(n.rootElement)})}nd.$inject=["eventBus"],nd.prototype.on=function(e,t,n,i,o,r){if(((0,a.mf)(t)||(0,a.hj)(t))&&(r=o,o=i,i=n,n=t,t=null),(0,a.mf)(n)&&(r=o,o=i,i=n,n=1e3),(0,a.Kn)(o)&&(r=o,o=!1),!(0,a.mf)(i))throw Error("handlerFn must be a function");(0,a.kJ)(e)||(e=[e]);var s=this._eventBus;(0,a.Ed)(e,function(e){var a,c,p=["commandStack",e,t].filter(function(e){return e}).join(".");s.on(p,n,o?(a=i,c=r,function(e){return a.call(c||null,e.context,e.command,e)}):i,r)})},nd.prototype.canExecute=nm("canExecute"),nd.prototype.preExecute=nm("preExecute"),nd.prototype.preExecuted=nm("preExecuted"),nd.prototype.execute=nm("execute"),nd.prototype.executed=nm("executed"),nd.prototype.postExecute=nm("postExecute"),nd.prototype.postExecuted=nm("postExecuted"),nd.prototype.revert=nm("revert"),nd.prototype.reverted=nm("reverted"),i(nf,nd),nf.$inject=["canvas","injector"];var ng=n(5694),ny="_plane";function nv(e){var t=e.id;return tx(e,"bpmn:SubProcess")?t+ny:t}function n_(e){return tx(tS(e),"bpmndi:BPMNPlane")}function nb(e){return e.replace(RegExp(ny+"$"),"")}function nx(e,t,n){var i=(0,s.H6)('<ul class="bjs-breadcrumbs"></ul>'),o=n.getContainer(),r=(0,s.Sh)(o);o.appendChild(i);var c=[];function p(e){e&&(c=function(e){for(var t=tw(e),n=[],i=t;i;i=i.$parent)(tx(i,"bpmn:SubProcess")||tx(i,"bpmn:Process"))&&n.push(i);return n.reverse()}(e));var o=c.flatMap(function(e){var i=n.findRoot(nv(e))||n.findRoot(e.id);if(!i&&tx(e,"bpmn:Process")){var o=t.find(function(t){var n=tw(t);return n&&n.get("processRef")===e});i=o&&n.findRoot(o.id)}if(!i)return[];var r=(0,ng.r)(e.name||e.id),a=(0,s.H6)('<li><span class="bjs-crumb"><a title="'+r+'">'+r+"</a></span></li>");return a.addEventListener("click",function(){n.setRootElement(i)}),a});i.innerHTML="";var a=o.length>1;r.toggle("bjs-breadcrumbs-shown",a),o.forEach(function(e){i.appendChild(e)})}e.on("element.changed",function(e){var t=tw(e.element);(0,a.sE)(c,function(e){return e===t})&&p()}),e.on("root.set",function(e){p(e.element)})}function nE(e,t){var n=null,i=new nw;e.on("root.set",function(e){var o=e.element,r=t.viewbox(),a=i.get(o);if(i.set(n,{x:r.x,y:r.y,zoom:r.scale}),n=o,tx(o,"bpmn:SubProcess")||a){a=a||{x:0,y:0,zoom:1};var s=(r.x-a.x)*r.scale,c=(r.y-a.y)*r.scale;(0!==s||0!==c)&&t.scroll({dx:s,dy:c}),a.zoom!==r.scale&&t.zoom(a.zoom,{x:0,y:0})}}),e.on("diagram.clear",function(){i.clear(),n=null})}function nw(){this._entries=[],this.set=function(e,t){var n=!1;for(var i in this._entries)if(this._entries[i][0]===e){this._entries[i][1]=t,n=!0;break}n||this._entries.push([e,t])},this.get=function(e){for(var t in this._entries)if(this._entries[t][0]===e)return this._entries[t][1];return null},this.clear=function(){this._entries.length=0},this.remove=function(e){var t=-1;for(var n in this._entries)if(this._entries[n][0]===e){t=n;break}-1!==t&&this._entries.splice(t,1)}}function nS(e,t){this._eventBus=e,this._moddle=t;var n=this;e.on("import.render.start",1500,function(e,t){n._handleImport(t.definitions)})}function nk(e,t,n,i,o){nd.call(this,t),this._canvas=e,this._eventBus=t,this._elementRegistry=n,this._overlays=i,this._translate=o;var r=this;this.executed("shape.toggleCollapse",250,function(e){var t=e.shape;r._canDrillDown(t)?r._addOverlay(t):r._removeOverlay(t)},!0),this.reverted("shape.toggleCollapse",250,function(e){var t=e.shape;r._canDrillDown(t)?r._addOverlay(t):r._removeOverlay(t)},!0),this.executed(["shape.create","shape.move","shape.delete"],250,function(e){var t=e.oldParent,n=e.newParent||e.parent,i=e.shape;r._canDrillDown(i)&&r._addOverlay(i),r._updateDrilldownOverlay(t),r._updateDrilldownOverlay(n),r._updateDrilldownOverlay(i)},!0),this.reverted(["shape.create","shape.move","shape.delete"],250,function(e){var t=e.oldParent,n=e.newParent||e.parent,i=e.shape;r._canDrillDown(i)&&r._addOverlay(i),r._updateDrilldownOverlay(t),r._updateDrilldownOverlay(n),r._updateDrilldownOverlay(i)},!0),t.on("import.render.complete",function(){n.filter(function(e){return r._canDrillDown(e)}).map(function(e){r._addOverlay(e)})})}function nC(e){e&&"function"==typeof e.stopPropagation&&e.stopPropagation()}function nR(e){return e.originalEvent||e.srcEvent}function nP(e){nC(e),nC(nR(e))}function nA(e){return e.pointers&&e.pointers.length&&(e=e.pointers[0]),e.touches&&e.touches.length&&(e=e.touches[0]),e?{x:e.clientX,y:e.clientY}:null}function nM(){return/mac/i.test(navigator.platform)}function nT(e,t){return(nR(e)||e).button===t}function nD(e){return nT(e,0)}function nB(e){var t=nR(e)||e;return!!nD(e)&&(nM()?t.metaKey:t.ctrlKey)}function nj(e){var t=nR(e)||e;return nD(e)&&t.shiftKey}function nN(e){return!0}function nO(e){return nD(e)||nT(e,1)}function nL(e,t,n){var i=this;function o(n,i,o){var r,a;(l[n]||nD)(i)&&(o?a=t.getGraphics(o):(r=i.delegateTarget||i.target)&&(a=r,o=t.get(a)),a&&o&&!1===e.fire(n,{element:o,gfx:a,originalEvent:i})&&(i.stopPropagation(),i.preventDefault()))}var r={},p={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},l={"element.contextmenu":nN,"element.mousedown":nO,"element.mouseup":nO,"element.click":nO,"element.dblclick":nO};function u(e,t,n,i){var a=r[n]=function(e){o(n,e)};i&&(l[n]=i),a.$delegate=s.cl.bind(e,"svg, .djs-element",t,a)}function h(e,t,n){var i=r[n];i&&s.cl.unbind(e,t,i.$delegate)}e.on("canvas.destroy",function(e){var t;t=e.svg,(0,a.Ed)(p,function(e,n){h(t,n,e)})}),e.on("canvas.init",function(e){var t;t=e.svg,(0,a.Ed)(p,function(e,n){u(t,n,e)})}),e.on(["shape.added","connection.added"],function(t){var n=t.element,i=t.gfx;e.fire("interactionEvents.createHit",{element:n,gfx:i})}),e.on(["shape.changed","connection.changed"],500,function(t){var n=t.element,i=t.gfx;e.fire("interactionEvents.updateHit",{element:n,gfx:i})}),e.on("interactionEvents.createHit",500,function(e){var t=e.element,n=e.gfx;i.createDefaultHit(t,n)}),e.on("interactionEvents.updateHit",function(e){var t=e.element,n=e.gfx;i.updateDefaultHit(t,n)});var d=g("djs-hit djs-hit-stroke"),m=g("djs-hit djs-hit-click-stroke"),f={all:g("djs-hit djs-hit-all"),"click-stroke":m,stroke:d,"no-move":g("djs-hit djs-hit-no-move")};function g(e,t){return t=(0,a.f0)({stroke:"white",strokeWidth:15},t||{}),n.cls(e,["no-fill","no-border"],t)}function y(e,t){var n=f[t];if(!n)throw Error("invalid hit type <"+t+">");return(0,c.Lj)(e,n),e}this.removeHits=function(e){var t=(0,s.Kt)(".djs-hit",e);(0,a.Ed)(t,c.Od)},this.createDefaultHit=function(e,t){var n,i=e.waypoints,o=e.isFrame;return i?this.createWaypointsHit(t,i):(n=o?"stroke":"all",this.createBoxHit(t,n,{width:e.width,height:e.height}))},this.createWaypointsHit=function(e,t){var n=E(t);return y(n,"stroke"),(0,c.R3)(e,n),n},this.createBoxHit=function(e,t,n){n=(0,a.f0)({x:0,y:0},n);var i=(0,c.Ue)("rect");return y(i,t),(0,c.Lj)(i,n),(0,c.R3)(e,i),i},this.updateDefaultHit=function(e,t){var n=(0,s.IO)(".djs-hit",t);if(n)return e.waypoints?w(n,e.waypoints):(0,c.Lj)(n,{width:e.width,height:e.height}),n},this.fire=o,this.triggerMouseEvent=function(e,t,n){var i=p[e];if(!i)throw Error("unmapped DOM event name <"+e+">");return o(i,t,n)},this.mouseHandler=function(e){return r[e]},this.registerEvent=u,this.unregisterEvent=h}nx.$inject=["eventBus","elementRegistry","canvas"],nE.$inject=["eventBus","canvas"],nS.prototype._handleImport=function(e){if(e.diagrams){var t=this;this._definitions=e,this._processToDiagramMap={},e.diagrams.forEach(function(e){e.plane&&e.plane.bpmnElement&&(t._processToDiagramMap[e.plane.bpmnElement.id]=e)}),e.diagrams.filter(e=>e.plane).flatMap(e=>t._createNewDiagrams(e.plane)).forEach(function(e){t._movePlaneElementsToOrigin(e.plane)})}},nS.prototype._createNewDiagrams=function(e){var t=this,n=[],i=[];e.get("planeElement").forEach(function(t){var o=t.bpmnElement;if(o){var r,a=o.$parent;tx(o,"bpmn:SubProcess")&&!t.isExpanded&&n.push(o),!tx(r=o.$parent,"bpmn:SubProcess")||r===e.bpmnElement||tE(o,["bpmn:DataInputAssociation","bpmn:DataOutputAssociation"])||i.push({diElement:t,parent:a})}});var o=[];return n.forEach(function(e){if(!t._processToDiagramMap[e.id]){var n=t._createDiagram(e);t._processToDiagramMap[e.id]=n,o.push(n)}}),i.forEach(function(e){for(var i=e.diElement,o=e.parent;o&&-1===n.indexOf(o);)o=o.$parent;if(o){var r=t._processToDiagramMap[o.id];t._moveToDiPlane(i,r.plane)}}),o},nS.prototype._movePlaneElementsToOrigin=function(e){var t,n=e.get("planeElement"),i=(t={top:1/0,right:-1/0,bottom:-1/0,left:1/0},e.planeElement.forEach(function(e){if(e.bounds){var n=(0,L.JA)(e.bounds);t.top=Math.min(n.top,t.top),t.left=Math.min(n.left,t.left)}}),(0,L.z_)(t)),o={x:i.x-180,y:i.y-160};n.forEach(function(e){e.waypoint?e.waypoint.forEach(function(e){e.x=e.x-o.x,e.y=e.y-o.y}):e.bounds&&(e.bounds.x=e.bounds.x-o.x,e.bounds.y=e.bounds.y-o.y)})},nS.prototype._moveToDiPlane=function(e,t){var n=(function e(t){return tx(t,"bpmndi:BPMNDiagram")?t:e(t.$parent)})(e).plane.get("planeElement");n.splice(n.indexOf(e),1),t.get("planeElement").push(e)},nS.prototype._createDiagram=function(e){var t=this._moddle.create("bpmndi:BPMNPlane",{bpmnElement:e}),n=this._moddle.create("bpmndi:BPMNDiagram",{plane:t});return t.$parent=n,t.bpmnElement=e,n.$parent=this._definitions,this._definitions.diagrams.push(n),n},nS.$inject=["eventBus","moddle"],i(nk,nd),nk.prototype._updateDrilldownOverlay=function(e){var t=this._canvas;if(e){var n=t.findRoot(e);n&&this._updateOverlayVisibility(n)}},nk.prototype._canDrillDown=function(e){var t=this._canvas;return tx(e,"bpmn:SubProcess")&&t.findRoot(nv(e))},nk.prototype._updateOverlayVisibility=function(e){var t=this._overlays,n=tw(e),i=t.get({element:n.id,type:"drilldown"})[0];if(i){var o=n&&n.get("flowElements")&&n.get("flowElements").length;(0,s.Sh)(i.html).toggle("bjs-drilldown-empty",!o)}},nk.prototype._addOverlay=function(e){var t=this._canvas,n=this._overlays,i=tw(e);n.get({element:e,type:"drilldown"}).length&&this._removeOverlay(e);var o=(0,s.H6)('<button type="button" class="bjs-drilldown"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.81801948,3.50735931 L10.4996894,9.1896894 L10.5,4 L12,4 L12,12 L4,12 L4,10.5 L9.6896894,10.4996894 L3.75735931,4.56801948 C3.46446609,4.27512627 3.46446609,3.80025253 3.75735931,3.50735931 C4.05025253,3.21446609 4.52512627,3.21446609 4.81801948,3.50735931 Z"/></svg></button>'),r=i.get("name")||i.get("id"),a=this._translate("Open {element}",{element:r});o.setAttribute("title",a),o.addEventListener("click",function(){t.setRootElement(t.findRoot(nv(e)))}),n.add(e,"drilldown",{position:{bottom:-7,right:-8},html:o}),this._updateOverlayVisibility(e)},nk.prototype._removeOverlay=function(e){this._overlays.remove({element:e,type:"drilldown"})},nk.$inject=["canvas","eventBus","elementRegistry","overlays","translate"],nL.$inject=["eventBus","elementRegistry","styles"];var n$={__init__:["interactionEvents"],interactionEvents:["type",nL]};function nI(e,t){this._eventBus=e,this._canvas=t,this._selectedElements=[];var n=this;e.on(["shape.remove","connection.remove"],function(e){var t=e.element;n.deselect(t)}),e.on(["diagram.clear","root.set"],function(e){n.select(null)})}nI.$inject=["eventBus","canvas"],nI.prototype.deselect=function(e){var t=this._selectedElements,n=t.indexOf(e);if(-1!==n){var i=t.slice();t.splice(n,1),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:t})}},nI.prototype.get=function(){return this._selectedElements},nI.prototype.isSelected=function(e){return -1!==this._selectedElements.indexOf(e)},nI.prototype.select=function(e,t){var n=this._selectedElements,i=n.slice();(0,a.kJ)(e)||(e=e?[e]:[]);var o=this._canvas,r=o.getRootElement();e=e.filter(function(e){return r===o.findRoot(e)}),t?(0,a.Ed)(e,function(e){-1===n.indexOf(e)&&n.push(e)}):this._selectedElements=n=e.slice(),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:n})};var nz="hover",nH="selected";function nF(e,t){function n(t,n){e.addMarker(t,n)}function i(t,n){e.removeMarker(t,n)}this._canvas=e,t.on("element.hover",function(e){n(e.element,nz)}),t.on("element.out",function(e){i(e.element,nz)}),t.on("selection.changed",function(e){var t=e.oldSelection,o=e.newSelection;(0,a.Ed)(t,function(e){-1===o.indexOf(e)&&i(e,nH)}),(0,a.Ed)(o,function(e){-1===t.indexOf(e)&&n(e,nH)})})}function nG(e,t,n,i){e.on("create.end",500,function(e){var n=e.context,i=n.canExecute,o=n.elements,r=(n.hints||{}).autoSelect;if(i){if(!1===r)return;(0,a.kJ)(r)?t.select(r):t.select(o.filter(nW))}}),e.on("connect.end",500,function(e){var n=e.context.connection;n&&t.select(n)}),e.on("shape.move.end",500,function(e){var n=e.previousSelection||[],o=i.get(e.context.shape.id);(0,a.sE)(n,function(e){return o.id===e.id})||t.select(o)}),e.on("element.click",function(e){if(nD(e)){var i=e.element;i===n.getRootElement()&&(i=null);var o=t.isSelected(i),r=t.get().length>1,a=nj(e);if(o&&r)return a?t.deselect(i):t.select(i);o?t.deselect(i):t.select(i,a)}})}function nW(e){return!e.hidden}nF.$inject=["canvas","eventBus"],nG.$inject=["eventBus","selection","canvas","elementRegistry"];var nV={__init__:["selectionVisuals","selectionBehavior"],__depends__:[n$],selection:["type",nI],selectionVisuals:["type",nF],selectionBehavior:["type",nG]};function nU(e){tD.call(this,e)}i(nU,tD),nU.prototype._modules=[{__depends__:[{__init__:["bpmnRenderer"],bpmnRenderer:["type",t5],textRenderer:["type",t9],pathMap:["type",function(){this.pathMap={EVENT_MESSAGE:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:36,width:36,heightElements:[6,14],widthElements:[10.5,21]},EVENT_SIGNAL:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z",height:36,width:36,heightElements:[18],widthElements:[10,20]},EVENT_ESCALATION:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x0},-{e.y1} l -{e.x0},{e.y1} Z",height:36,width:36,heightElements:[20,7],widthElements:[8]},EVENT_CONDITIONAL:{d:"M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z M {e.x2},{e.y3} l {e.x0},0 M {e.x2},{e.y4} l {e.x0},0 M {e.x2},{e.y5} l {e.x0},0 M {e.x2},{e.y6} l {e.x0},0 M {e.x2},{e.y7} l {e.x0},0 M {e.x2},{e.y8} l {e.x0},0 ",height:36,width:36,heightElements:[8.5,14.5,18,11.5,14.5,17.5,20.5,23.5,26.5],widthElements:[10.5,14.5,12.5]},EVENT_LINK:{d:"m {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z",height:36,width:36,heightElements:[4.4375,6.75,7.8125],widthElements:[9.84375,13.5]},EVENT_ERROR:{d:"m {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z",height:36,width:36,heightElements:[.023,8.737,8.151,16.564,10.591,8.714],widthElements:[.085,6.672,6.97,4.273,5.337,6.636]},EVENT_CANCEL_45:{d:"m {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:36,width:36,heightElements:[4.75,8.5],widthElements:[4.75,8.5]},EVENT_COMPENSATION:{d:"m {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x1},-{e.y2} {e.x2},-{e.y3} 0,{e.y1} -{e.x2},-{e.y3} z",height:36,width:36,heightElements:[6.5,13,.4,6.1],widthElements:[9,9.3,8.7]},EVENT_TIMER_WH:{d:"M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ",height:36,width:36,heightElements:[10,2],widthElements:[3,7]},EVENT_TIMER_LINE:{d:"M {mx},{my} m {e.x0},{e.y0} l -{e.x1},{e.y1} ",height:36,width:36,heightElements:[10,3],widthElements:[0,0]},EVENT_MULTIPLE:{d:"m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z",height:36,width:36,heightElements:[6.28099,12.56199],widthElements:[3.1405,9.42149,12.56198]},EVENT_PARALLEL_MULTIPLE:{d:"m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} -{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z",height:36,width:36,heightElements:[2.56228,7.68683],widthElements:[2.56228,7.68683]},GATEWAY_EXCLUSIVE:{d:"m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} {e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} {e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z",height:17.5,width:17.5,heightElements:[8.5,6.5312,-6.5312,-8.5],widthElements:[6.5,-6.5,3,-3,5,-5]},GATEWAY_PARALLEL:{d:"m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:30,width:30,heightElements:[5,12.5],widthElements:[5,12.5]},GATEWAY_EVENT_BASED:{d:"m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z",height:11,width:11,heightElements:[-6,6,12,-12],widthElements:[9,-3,-12]},GATEWAY_COMPLEX:{d:"m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} {e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} {e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} -{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z",height:17.125,width:17.125,heightElements:[4.875,3.4375,2.125,3],widthElements:[3.4375,2.125,4.875,3]},DATA_OBJECT_PATH:{d:"m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0",height:61,width:51,heightElements:[10,50,60],widthElements:[10,40,50,60]},DATA_OBJECT_COLLECTION_PATH:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},DATA_ARROW:{d:"m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z",height:61,width:51,heightElements:[],widthElements:[]},DATA_STORE:{d:"m  {mx},{my} l  0,{e.y2} c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 l  0,-{e.y2} c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0",height:61,width:61,heightElements:[7,10,45],widthElements:[2,58,60]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",height:30,width:10,heightElements:[30],widthElements:[10]},MARKER_SUB_PROCESS:{d:"m{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_PARALLEL:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},MARKER_SEQUENTIAL:{d:"m{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_COMPENSATION:{d:"m {mx},{my} 7,-5 0,10 z m 7.1,-0.3 6.9,-4.7 0,10 -6.9,-4.7 z",height:10,width:21,heightElements:[],widthElements:[]},MARKER_LOOP:{d:"m {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902",height:13.9,width:13.7,heightElements:[],widthElements:[]},MARKER_ADHOC:{d:"m {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 -3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 -2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z",height:4,width:15,heightElements:[],widthElements:[]},TASK_TYPE_SEND:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:14,width:21,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_SCRIPT:{d:"m {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z m -7,-12 l 5,0 m -4.5,3 l 4.5,0 m -3,3 l 5,0m -4,3 l 5,0",height:15,width:12.6,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_USER_1:{d:"m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5"},TASK_TYPE_USER_2:{d:"m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 "},TASK_TYPE_USER_3:{d:"m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z"},TASK_TYPE_MANUAL:{d:"m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z"},TASK_TYPE_INSTANTIATING_SEND:{d:"m {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6"},TASK_TYPE_SERVICE:{d:"m {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 -1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 -0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 -1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 -0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z m 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_SERVICE_FILL:{d:"m {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_BUSINESS_RULE_HEADER:{d:"m {mx},{my} 0,4 20,0 0,-4 z"},TASK_TYPE_BUSINESS_RULE_MAIN:{d:"m {mx},{my} 0,12 20,0 0,-12 zm 0,8 l 20,0 m -13,-4 l 0,8"},MESSAGE_FLOW_MARKER:{d:"m {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6"}},this.getRawPath=function(e){return this.pathMap[e].d},this.getScaledPath=function(e,t){var n,i,o,r,a=this.pathMap[e];t.abspos?(o=t.abspos.x,r=t.abspos.y):(o=t.containerWidth*t.position.mx,r=t.containerHeight*t.position.my);var s={};if(t.position){for(var c=t.containerHeight/a.height*t.yScaleFactor,p=t.containerWidth/a.width*t.xScaleFactor,l=0;l<a.heightElements.length;l++)s["y"+l]=a.heightElements[l]*c;for(var u=0;u<a.widthElements.length;u++)s["x"+u]=a.widthElements[u]*p}return n=a.d,i={mx:o,my:r,e:s},String(n).replace(t8,function(e,t){var n;return n=i,t.replace(t7,function(e,t,i,o,r){t=t||o,n&&(t in n&&(n=n[t]),"function"==typeof n&&r&&(n=n()))}),n=(null==n||n==i?e:n)+""})}}]},{__depends__:[ne],bpmnImporter:["type",ni]}]},{__depends__:[nl,nh,{__init__:["rootElementsBehavior"],rootElementsBehavior:["type",nf]}],__init__:["drilldownBreadcrumbs","drilldownOverlayBehavior","drilldownCentering","subprocessCompatibility"],drilldownBreadcrumbs:["type",nx],drilldownCentering:["type",nE],drilldownOverlayBehavior:["type",nk],subprocessCompatibility:["type",nS]},nl,nV,ne],nU.prototype._moddleExtensions={};var nK=["c","C"],nq=["v","V"],nJ=["y","Y"],nX=["z","Z"];function nY(e){return!e.altKey&&(e.ctrlKey||e.metaKey)}function nZ(e,t){return -1!==(e=(0,a.kJ)(e)?e:[e]).indexOf(t.key)||-1!==e.indexOf(t.code)}function nQ(e){return e.shiftKey}var n0="keyboard.keydown",n1="Keyboard binding is now implicit; explicit binding to an element got removed. For more information, see https://github.com/bpmn-io/diagram-js/issues/661";function n2(e,t){var n=this;this._config=e=e||{},this._eventBus=t,this._keydownHandler=this._keydownHandler.bind(this),this._keyupHandler=this._keyupHandler.bind(this),t.on("diagram.destroy",function(){n._fire("destroy"),n.unbind()}),e.bindTo&&console.error("unsupported configuration <keyboard.bindTo>",Error(n1));var i=e&&!1!==e.bind;t.on("canvas.init",function(e){n._target=e.svg,i&&n.bind(),n._fire("init")})}function n5(e,t){var n=this;e.on("editorActions.init",500,function(e){var i=e.editorActions;n.registerBindings(t,i)})}n2.$inject=["config.keyboard","eventBus"],n2.prototype._keydownHandler=function(e){this._keyHandler(e,n0)},n2.prototype._keyupHandler=function(e){this._keyHandler(e,"keyboard.keyup")},n2.prototype._keyHandler=function(e,t){!this._isEventIgnored(e)&&this._eventBus.fire(t||n0,{keyEvent:e})&&e.preventDefault()},n2.prototype._isEventIgnored=function(e){return!1},n2.prototype.bind=function(e){e&&console.error("unsupported argument <node>",Error(n1)),this.unbind(),e=this._node=this._target,s.B.bind(e,"keydown",this._keydownHandler),s.B.bind(e,"keyup",this._keyupHandler),this._fire("bind")},n2.prototype.getBinding=function(){return this._node},n2.prototype.unbind=function(){var e=this._node;e&&(this._fire("unbind"),s.B.unbind(e,"keydown",this._keydownHandler),s.B.unbind(e,"keyup",this._keyupHandler)),this._node=null},n2.prototype._fire=function(e){this._eventBus.fire("keyboard."+e,{node:this._node})},n2.prototype.addListener=function(e,t,n){(0,a.mf)(e)&&(n=t,t=e,e=1e3),this._eventBus.on(n||n0,e,t)},n2.prototype.removeListener=function(e,t){this._eventBus.off(t||n0,e)},n2.prototype.hasModifier=function(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey},n2.prototype.isCmd=nY,n2.prototype.isShift=nQ,n2.prototype.isKey=nZ,n5.$inject=["eventBus","keyboard"],n5.prototype.registerBindings=function(e,t){function n(n,i){t.isRegistered(n)&&e.addListener(i)}n("undo",function(e){var n;if(nY(n=e.keyEvent)&&!nQ(n)&&nZ(nX,n))return t.trigger("undo"),!0}),n("redo",function(e){var n;if(nY(n=e.keyEvent)&&(nZ(nJ,n)||nZ(nX,n)&&nQ(n)))return t.trigger("redo"),!0}),n("copy",function(e){var n;if(nY(n=e.keyEvent)&&nZ(nK,n))return t.trigger("copy"),!0}),n("paste",function(e){var n;if(nY(n=e.keyEvent)&&nZ(nq,n))return t.trigger("paste"),!0}),n("stepZoom",function(e){var n=e.keyEvent;if(nZ(["+","Add","="],n)&&nY(n))return t.trigger("stepZoom",{value:1}),!0}),n("stepZoom",function(e){var n=e.keyEvent;if(nZ(["-","Subtract"],n)&&nY(n))return t.trigger("stepZoom",{value:-1}),!0}),n("zoom",function(e){var n=e.keyEvent;if(nZ("0",n)&&nY(n))return t.trigger("zoom",{value:1}),!0}),n("removeSelection",function(e){if(nZ(["Backspace","Delete","Del"],e.keyEvent))return t.trigger("removeSelection"),!0})};var n3={__init__:["keyboard","keyboardBindings"],keyboard:["type",n2],keyboardBindings:["type",n5]},n6={moveSpeed:50,moveSpeedAccelerated:200};function n4(e,t,n){var i=this;this._config=(0,a.f0)({},n6,e||{}),t.addListener(function(e){var n=e.keyEvent,o=i._config;if(t.isCmd(n)&&t.isKey(["ArrowLeft","Left","ArrowUp","Up","ArrowDown","Down","ArrowRight","Right"],n)){var r,a=t.isShift(n)?o.moveSpeedAccelerated:o.moveSpeed;switch(n.key){case"ArrowLeft":case"Left":r="left";break;case"ArrowUp":case"Up":r="up";break;case"ArrowRight":case"Right":r="right";break;case"ArrowDown":case"Down":r="down"}return i.moveCanvas({speed:a,direction:r}),!0}}),this.moveCanvas=function(e){var t=0,i=0,o=e.speed/Math.min(Math.sqrt(n.viewbox().scale),1);switch(e.direction){case"left":t=o;break;case"up":i=o;break;case"right":t=-o;break;case"down":i=-o}n.scroll({dx:t,dy:i})}}n4.$inject=["config.keyboardMove","keyboard","canvas"];var n9={__depends__:[n3],__init__:["keyboardMove"],keyboardMove:["type",n4]},n8=/^djs-cursor-.*$/;function n7(e){var t=(0,s.Sh)(document.body);t.removeMatching(n8),e&&t.add("djs-cursor-"+e)}function ie(e,t){function n(){return!1}return t=t||"element.click",e.once(t,5e3,n),function(){e.off(t,n)}}function it(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}function ii(e,t){return{x:e.x-t.x,y:e.y-t.y}}function io(e,t){var n;function i(e){return function(e){if(!(0,s.oq)(e.target,".djs-draggable")){var t=e.button;if(!(t>=2)&&!e.ctrlKey&&!e.shiftKey&&!e.altKey)return n={button:t,start:nA(e)},s.B.bind(document,"mousemove",o),s.B.bind(document,"mouseup",r),!0}}(e.originalEvent)}function o(i){var o,r=n.start,a=n.button,s=nA(i),c=ii(s,r);!n.dragging&&Math.sqrt(Math.pow((o=c).x,2)+Math.pow(o.y,2))>15&&(n.dragging=!0,0===a&&ie(e),n7("grab")),n.dragging&&(c=ii(s,n.last||n.start),t.scroll({dx:c.x,dy:c.y}),n.last=s),i.preventDefault()}function r(e){s.B.unbind(document,"mousemove",o),s.B.unbind(document,"mouseup",r),n=null,n7(null)}e.on("canvas.focus.changed",function(t){t.focused?e.on("element.mousedown",500,i):e.off("element.mousedown",i)}),this.isActive=function(){return!!n}}io.$inject=["eventBus","canvas"];var ir={__init__:["moveCanvas"],moveCanvas:["type",io]};function ia(e){return Math.log(e)/Math.log(10)}function is(e,t){return(Math.abs(ia(e.min))+Math.abs(ia(e.max)))/t}var ic=Math.sign||function(e){return e>=0?1:-1},ip={min:.2,max:4};function il(e,t,n){e=e||{},this._enabled=!1,this._canvas=n,this._container=n._container,this._handleWheel=(0,a.ak)(this._handleWheel,this),this._totalDelta=0,this._scale=e.scale||.75;var i=this;t.on("canvas.focus.changed",function(t){i._init(t.focused&&!1!==e.enabled)})}il.$inject=["config.zoomScroll","eventBus","canvas"],il.prototype.scroll=function(e){this._canvas.scroll(e)},il.prototype.reset=function(){this._canvas.zoom("fit-viewport")},il.prototype.zoom=function(e,t){var n=is(ip,20);this._totalDelta+=e,Math.abs(this._totalDelta)>.1&&(this._zoom(e,t,n),this._totalDelta=0)},il.prototype._handleWheel=function(e){if(this._canvas.isFocused()){var t=this._container;e.preventDefault();var n,i=e.ctrlKey||nM()&&e.metaKey,o=e.shiftKey,r=-1*this._scale;if(i?r*=0===e.deltaMode?.02:.32:r*=0===e.deltaMode?1:16,i){var a=t.getBoundingClientRect(),s={x:e.clientX-a.left,y:e.clientY-a.top};n=Math.sqrt(Math.pow(e.deltaY,2)+Math.pow(e.deltaX,2))*ic(e.deltaY)*r,this.zoom(n,s)}else n=o?{dx:r*e.deltaY,dy:0}:{dx:r*e.deltaX,dy:r*e.deltaY},this.scroll(n)}},il.prototype.stepZoom=function(e,t){var n=is(ip,10);this._zoom(e,t,n)},il.prototype._zoom=function(e,t,n){var i=this._canvas,o=Math.round(ia(i.zoom())/n)*n,r=Math.pow(10,o+=n*(e>0?1:-1));i.zoom(Math.max(ip.min,Math.min(ip.max,r)),t)},il.prototype.toggle=function(e){var t=this._container,n=this._handleWheel,i=this._enabled;return void 0===e&&(e=!i),i!==e&&s.B[e?"bind":"unbind"](t,"wheel",n,!1),this._enabled=e,e},il.prototype._init=function(e){this.toggle(e)};var iu={__init__:["zoomScroll"],zoomScroll:["type",il]};function ih(e){nU.call(this,e)}function id(e){return e&&e[e.length-1]}function im(e){return e.y}function ig(e){return e.x}i(ih,nU),ih.prototype._navigationModules=[n9,ir,iu],ih.prototype._modules=[].concat(nU.prototype._modules,ih.prototype._navigationModules);var iy={left:ig,center:ig,right:function(e){return e.x+e.width},top:im,middle:im,bottom:function(e){return e.y+e.height}};function iv(e,t){this._modeling=e,this._rules=t}iv.$inject=["modeling","rules"],iv.prototype._getOrientationDetails=function(e){var t="x",n="width";return -1!==["top","bottom","middle"].indexOf(e)&&(t="y",n="height"),{axis:t,dimension:n}},iv.prototype._isType=function(e,t){return -1!==t.indexOf(e)},iv.prototype._alignmentPosition=function(e,t){var n,i,o,r,s=this._getOrientationDetails(e),c=s.axis,p=s.dimension,l={},u={},h=!1;if(this._isType(e,["left","top"]))l[e]=t[0][c];else if(this._isType(e,["right","bottom"]))r=id(t),l[e]=r[c]+r[p];else if(this._isType(e,["center","middle"])){if((0,a.Ed)(t,function(e){var t=e[c]+Math.round(e[p]/2);u[t]?u[t].elements.push(e):u[t]={elements:[e],center:t}}),i=(0,a.MR)(u,function(e){return e.elements.length>1&&(h=!0),e.elements.length}),h)return l[e]=id(i).center,l;o=t[0],r=id(t=(0,a.MR)(t,function(e){return e[c]+e[p]})),l[e]=(n=r,Math.round((o[c]+n[c]+n[p])/2))}return l},iv.prototype.trigger=function(e,t){var n,i=this._modeling,o=(0,a.hX)(e,function(e){return!(e.waypoints||e.host||e.labelTarget)});if(n=this._rules.allowed("elements.align",{elements:o}),(0,a.kJ)(n)&&(o=n),!(o.length<2)&&n){var r=iy[t],s=(0,a.MR)(o,r),c=this._alignmentPosition(t,s);i.alignElements(s,c)}};let i_=new no.Z;function ib(e){this._scheduled={},e.on("diagram.destroy",()=>{Object.keys(this._scheduled).forEach(e=>{this.cancel(e)})})}ib.$inject=["eventBus"],ib.prototype.schedule=function(e,t=i_.next()){this.cancel(t);let n=this._schedule(e,t);return this._scheduled[t]=n,n.promise},ib.prototype._schedule=function(e,t){let n=function(){let e={};return e.promise=new Promise((t,n)=>{e.resolve=t,e.reject=n}),e}();return{executionId:setTimeout(()=>{try{this._scheduled[t]=null;try{n.resolve(e())}catch(e){n.reject(e)}}catch(e){console.error("Scheduler#_schedule execution failed",e)}}),promise:n.promise}},ib.prototype.cancel=function(e){let t=this._scheduled[e];t&&(this._cancel(t),this._scheduled[e]=null)},ib.prototype._cancel=function(e){clearTimeout(e.executionId)};var ix=".entry";function iE(e,t,n,i){this._canvas=e,this._elementRegistry=t,this._eventBus=n,this._scheduler=i,this._current=null,this._init()}iE.$inject=["canvas","elementRegistry","eventBus","scheduler"],iE.prototype._init=function(){var e=this;this._eventBus.on("selection.changed",function(t){var n=t.newSelection,i=n.length?1===n.length?n[0]:n:null;i?e.open(i,!0):e.close()}),this._eventBus.on("elements.changed",function(t){var n=t.elements,i=e._current;if(i){var o=i.target,r=(0,a.kJ)(o)?o:[o];if(r.filter(function(e){return n.includes(e)}).length){e.close();var s=r.filter(function(t){return e._elementRegistry.get(t.id)});s.length&&e._updateAndOpen(s.length>1?s:s[0])}}}),this._eventBus.on("canvas.viewbox.changed",function(){e._updatePosition()}),this._eventBus.on("element.marker.update",function(t){if(e.isOpen()){var n=t.element,i=e._current;((0,a.kJ)(i.target)?i.target:[i.target]).includes(n)&&e._updateVisibility()}}),this._container=this._createContainer()},iE.prototype._createContainer=function(){var e=(0,s.H6)('<div class="djs-context-pad-parent"></div>');return this._canvas.getContainer().appendChild(e),e},iE.prototype.registerProvider=function(e,t){t||(t=e,e=1e3),this._eventBus.on("contextPad.getProviders",e,function(e){e.providers.push(t)})},iE.prototype.getEntries=function(e){var t=this._getProviders(),n=(0,a.kJ)(e)?"getMultiElementContextPadEntries":"getContextPadEntries",i={};return(0,a.Ed)(t,function(t){if((0,a.mf)(t[n])){var o=t[n](e);(0,a.mf)(o)?i=o(i):(0,a.Ed)(o,function(e,t){i[t]=e})}}),i},iE.prototype.trigger=function(e,t,n){var i,o,r=this,a=t.delegateTarget||t.target;if(!a)return t.preventDefault();if(i=(0,s.Lj)(a,"data-action"),o=t.originalEvent||t,"mouseover"===e){this._timeout=setTimeout(function(){r._mouseout=r.triggerEntry(i,"hover",o,n)},300);return}if("mouseout"===e){clearTimeout(this._timeout),this._mouseout&&(this._mouseout(),this._mouseout=null);return}return this.triggerEntry(i,e,o,n)},iE.prototype.triggerEntry=function(e,t,n,i){if(this.isShown()){var o=this._current.target,r=this._current.entries[e];if(r){var s=r.action;if(!1!==this._eventBus.fire("contextPad.trigger",{entry:r,event:n})){if((0,a.mf)(s)){if("click"===t)return s(n,o,i)}else if(s[t])return s[t](n,o,i);n.preventDefault()}}}},iE.prototype.open=function(e,t){!t&&this.isOpen(e)||(this.close(),this._updateAndOpen(e))},iE.prototype._getProviders=function(){var e=this._eventBus.createEvent({type:"contextPad.getProviders",providers:[]});return this._eventBus.fire(e),e.providers},iE.prototype._updateAndOpen=function(e){var t,n=this.getEntries(e),i=this._createHtml(e);(0,a.Ed)(n,function(e,n){var o,r=e.group||"default",c=(0,s.H6)(e.html||'<div class="entry" draggable="true"></div>');(0,s.Lj)(c,"data-action",n),(o=(0,s.IO)("[data-group="+(0,ng.D)(r)+"]",i))||(o=(0,s.H6)('<div class="group"></div>'),(0,s.Lj)(o,"data-group",r),i.appendChild(o)),o.appendChild(c),e.className&&function(e,t){var n=(0,s.Sh)(e);(t=(0,a.kJ)(t)?t:t.split(/\s+/g)).forEach(function(e){n.add(e)})}(c,e.className),e.title&&(0,s.Lj)(c,"title",e.title),e.imageUrl&&(t=(0,s.H6)("<img>"),(0,s.Lj)(t,"src",e.imageUrl),t.style.width="100%",t.style.height="100%",c.appendChild(t))}),(0,s.Sh)(i).add("open"),this._current={entries:n,html:i,target:e},this._updatePosition(),this._updateVisibility(),this._eventBus.fire("contextPad.open",{current:this._current})},iE.prototype._createHtml=function(e){var t=this,n=(0,s.H6)('<div class="djs-context-pad"></div>');return s.cl.bind(n,ix,"click",function(e){t.trigger("click",e)}),s.cl.bind(n,ix,"dragstart",function(e){t.trigger("dragstart",e)}),s.cl.bind(n,ix,"mouseover",function(e){t.trigger("mouseover",e)}),s.cl.bind(n,ix,"mouseout",function(e){t.trigger("mouseout",e)}),s.B.bind(n,"mousedown",function(e){e.stopPropagation()}),this._container.appendChild(n),this._eventBus.fire("contextPad.create",{target:e,pad:n}),n},iE.prototype.getPad=function(e){var t,n;return console.warn(Error("ContextPad#getPad is deprecated and will be removed in future library versions, cf. https://github.com/bpmn-io/diagram-js/pull/888")),{html:this.isOpen()&&(t=this._current.target,n=e,t=(0,a.kJ)(t)?t:[t],n=(0,a.kJ)(n)?n:[n],t.length===n.length&&(0,a.yW)(t,function(e){return n.includes(e)}))?this._current.html:this._createHtml(e)}},iE.prototype.close=function(){this.isOpen()&&(clearTimeout(this._timeout),this._container.innerHTML="",this._eventBus.fire("contextPad.close",{current:this._current}),this._current=null)},iE.prototype.isOpen=function(e){var t=this._current;if(!t)return!1;if(!e)return!0;var n=t.target;return(0,a.kJ)(e)===(0,a.kJ)(n)&&((0,a.kJ)(e)?e.length===n.length&&(0,a.yW)(e,function(e){return n.includes(e)}):n===e)},iE.prototype.isShown=function(){return this.isOpen()&&(0,s.Sh)(this._current.html).has("open")},iE.prototype.show=function(){this.isOpen()&&((0,s.Sh)(this._current.html).add("open"),this._updatePosition(),this._eventBus.fire("contextPad.show",{current:this._current}))},iE.prototype.hide=function(){this.isOpen()&&((0,s.Sh)(this._current.html).remove("open"),this._eventBus.fire("contextPad.hide",{current:this._current}))},iE.prototype._getPosition=function(e){if(!(0,a.kJ)(e)&&(0,tH.Ho)(e)){var t=this._canvas.viewbox(),n=e.waypoints[e.waypoints.length-1],i=n.x*t.scale-t.x*t.scale,o=n.y*t.scale-t.y*t.scale;return{left:i+8*this._canvas.zoom(),top:o}}var r=this._canvas.getContainer().getBoundingClientRect(),s=this._getTargetBounds(e);return{left:s.right-r.left+8*this._canvas.zoom(),top:s.top-r.top}},iE.prototype._updatePosition=function(){this._scheduler.schedule(()=>{if(this.isOpen()){var e=this._current.html,t=this._getPosition(this._current.target);"x"in t&&"y"in t?(e.style.left=t.x+"px",e.style.top=t.y+"px"):["top","right","bottom","left"].forEach(function(n){n in t&&(e.style[n]=t[n]+"px")})}},"ContextPad#_updatePosition")},iE.prototype._updateVisibility=function(){this._scheduler.schedule(()=>{if(this.isOpen()){var e=this,t=this._current.target;((0,a.kJ)(t)?t:[t]).some(function(t){return e._canvas.hasMarker(t,"djs-element-hidden")})?e.hide():e.show()}},"ContextPad#_updateVisibility")},iE.prototype._getTargetBounds=function(e){var t=this;return((0,a.kJ)(e)?e:[e]).map(function(e){return t._canvas.getGraphics(e)}).reduce(function(e,t){let n=t.getBoundingClientRect();return e.top=Math.min(e.top,n.top),e.right=Math.max(e.right,n.right),e.bottom=Math.max(e.bottom,n.bottom),e.left=Math.min(e.left,n.left),e.x=e.left,e.y=e.top,e.width=e.right-e.left,e.height=e.bottom-e.top,e},{top:1/0,right:-1/0,bottom:-1/0,left:1/0})};var iw,iS,ik,iC,iR,iP,iA,iM,iT,iD,iB,ij,iN,iO,iL,i$={__depends__:[n$,{scheduler:["type",ib]},nl],contextPad:["type",iE]},iI={},iz=[],iH=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,iF=Array.isArray;function iG(e,t){for(var n in t)e[n]=t[n];return e}function iW(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function iV(e,t,n){var i,o,r,a={};for(r in t)"key"==r?i=t[r]:"ref"==r?o=t[r]:a[r]=t[r];if(arguments.length>2&&(a.children=arguments.length>3?iR.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(r in e.defaultProps)void 0===a[r]&&(a[r]=e.defaultProps[r]);return iU(e,a,i,o,null)}function iU(e,t,n,i,o){var r={type:e,props:t,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==o?++iA:o,__i:-1,__u:0};return null==o&&null!=iP.vnode&&iP.vnode(r),r}function iK(e){return e.children}function iq(e,t){this.props=e,this.context=t}function iJ(e,t){if(null==t)return e.__?iJ(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?iJ(e):null}function iX(e){(!e.__d&&(e.__d=!0)&&iM.push(e)&&!iY.__r++||iT!=iP.debounceRendering)&&((iT=iP.debounceRendering)||iD)(iY)}function iY(){for(var e,t,n,i,o,r,a=1;iM.length;)iM.length>a&&iM.sort(iB),e=iM.shift(),a=iM.length,e.__d&&(t=void 0,i=(n=e.__v).__e,o=[],r=[],e.__P&&((t=iG({},n)).__v=n.__v+1,iP.vnode&&iP.vnode(t),i2(e.__P,t,n,e.__n,e.__P.namespaceURI,32&n.__u?[i]:null,o,null==i?iJ(n):i,!!(32&n.__u),r),t.__v=n.__v,t.__.__k[t.__i]=t,i3(o,t,r),t.__e!=i&&function e(t){var n,i;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,n=0;n<t.__k.length;n++)if(null!=(i=t.__k[n])&&null!=i.__e){t.__e=t.__c.base=i.__e;break}return e(t)}}(t)));iY.__r=0}function iZ(e,t,n,i,o,r,a,s,c,p,l){var u,h,d,m,f,g,y,v=i&&i.__k||iz,_=t.length;for(c=function(e,t,n,i,o){var r,a,s,c,p,l=n.length,u=l,h=0;for(e.__k=Array(o),r=0;r<o;r++)null!=(a=t[r])&&"boolean"!=typeof a&&"function"!=typeof a?(c=r+h,(a=e.__k[r]="string"==typeof a||"number"==typeof a||"bigint"==typeof a||a.constructor==String?iU(null,a,null,null,null):iF(a)?iU(iK,{children:a},null,null,null):null==a.constructor&&a.__b>0?iU(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a).__=e,a.__b=e.__b+1,s=null,-1!=(p=a.__i=function(e,t,n,i){var o,r,a,s=e.key,c=e.type,p=t[n],l=null!=p&&0==(2&p.__u);if(null===p&&null==e.key||l&&s==p.key&&c==p.type)return n;if(i>(l?1:0)){for(o=n-1,r=n+1;o>=0||r<t.length;)if(null!=(p=t[a=o>=0?o--:r++])&&0==(2&p.__u)&&s==p.key&&c==p.type)return a}return -1}(a,n,c,u))&&(u--,(s=n[p])&&(s.__u|=2)),null==s||null==s.__v?(-1==p&&(o>l?h--:o<l&&h++),"function"!=typeof a.type&&(a.__u|=4)):p!=c&&(p==c-1?h--:p==c+1?h++:(p>c?h--:h++,a.__u|=4))):e.__k[r]=null;if(u)for(r=0;r<l;r++)null!=(s=n[r])&&0==(2&s.__u)&&(s.__e==i&&(i=iJ(s)),function e(t,n,i){var o,r;if(iP.unmount&&iP.unmount(t),(o=t.ref)&&(o.current&&o.current!=t.__e||i6(o,null,n)),null!=(o=t.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(e){iP.__e(e,n)}o.base=o.__P=null}if(o=t.__k)for(r=0;r<o.length;r++)o[r]&&e(o[r],n,i||"function"!=typeof t.type);i||iW(t.__e),t.__c=t.__=t.__e=void 0}(s,s));return i}(n,t,v,c,_),u=0;u<_;u++)null!=(d=n.__k[u])&&(h=-1==d.__i?iI:v[d.__i]||iI,d.__i=u,g=i2(e,d,h,o,r,a,s,c,p,l),m=d.__e,d.ref&&h.ref!=d.ref&&(h.ref&&i6(h.ref,null,d),l.push(d.ref,d.__c||m,d)),null==f&&null!=m&&(f=m),(y=!!(4&d.__u))||h.__k===d.__k?c=function e(t,n,i,o){var r,a;if("function"==typeof t.type){for(r=t.__k,a=0;r&&a<r.length;a++)r[a]&&(r[a].__=t,n=e(r[a],n,i,o));return n}t.__e!=n&&(o&&(n&&t.type&&!n.parentNode&&(n=iJ(t)),i.insertBefore(t.__e,n||null)),n=t.__e);do n=n&&n.nextSibling;while(null!=n&&8==n.nodeType);return n}(d,c,e,y):"function"==typeof d.type&&void 0!==g?c=g:m&&(c=m.nextSibling),d.__u&=-7);return n.__e=f,c}function iQ(e,t,n){"-"==t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||iH.test(t)?n:n+"px"}function i0(e,t,n,i,o){var r,a;t:if("style"==t){if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof i&&(e.style.cssText=i=""),i)for(t in i)n&&t in n||iQ(e.style,t,"");if(n)for(t in n)i&&n[t]==i[t]||iQ(e.style,t,n[t])}}else if("o"==t[0]&&"n"==t[1])r=t!=(t=t.replace(ij,"$1")),t=(a=t.toLowerCase())in e||"onFocusOut"==t||"onFocusIn"==t?a.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+r]=n,n?i?n.u=i.u:(n.u=iN,e.addEventListener(t,r?iL:iO,r)):e.removeEventListener(t,r?iL:iO,r);else{if("http://www.w3.org/2000/svg"==o)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==n?"":n;break t}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!=t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==n?"":n))}}function i1(e){return function(t){if(this.l){var n=this.l[t.type+e];if(null==t.t)t.t=iN++;else if(t.t<n.u)return;return n(iP.event?iP.event(t):t)}}}function i2(e,t,n,i,o,r,a,s,c,p){var l,u,h,d,m,f,g,y,v,_,b,x,E,w,S,k,C,R=t.type;if(null!=t.constructor)return null;128&n.__u&&(c=!!(32&n.__u),r=[s=t.__e=n.__e]),(l=iP.__b)&&l(t);t:if("function"==typeof R)try{if(y=t.props,v="prototype"in R&&R.prototype.render,_=(l=R.contextType)&&i[l.__c],b=l?_?_.props.value:l.__:i,n.__c?g=(u=t.__c=n.__c).__=u.__E:(v?t.__c=u=new R(y,b):(t.__c=u=new iq(y,b),u.constructor=R,u.render=i4),_&&_.sub(u),u.props=y,u.state||(u.state={}),u.context=b,u.__n=i,h=u.__d=!0,u.__h=[],u._sb=[]),v&&null==u.__s&&(u.__s=u.state),v&&null!=R.getDerivedStateFromProps&&(u.__s==u.state&&(u.__s=iG({},u.__s)),iG(u.__s,R.getDerivedStateFromProps(y,u.__s))),d=u.props,m=u.state,u.__v=t,h)v&&null==R.getDerivedStateFromProps&&null!=u.componentWillMount&&u.componentWillMount(),v&&null!=u.componentDidMount&&u.__h.push(u.componentDidMount);else{if(v&&null==R.getDerivedStateFromProps&&y!==d&&null!=u.componentWillReceiveProps&&u.componentWillReceiveProps(y,b),!u.__e&&null!=u.shouldComponentUpdate&&!1===u.shouldComponentUpdate(y,u.__s,b)||t.__v==n.__v){for(t.__v!=n.__v&&(u.props=y,u.state=u.__s,u.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(e){e&&(e.__=t)}),x=0;x<u._sb.length;x++)u.__h.push(u._sb[x]);u._sb=[],u.__h.length&&a.push(u);break t}null!=u.componentWillUpdate&&u.componentWillUpdate(y,u.__s,b),v&&null!=u.componentDidUpdate&&u.__h.push(function(){u.componentDidUpdate(d,m,f)})}if(u.context=b,u.props=y,u.__P=e,u.__e=!1,E=iP.__r,w=0,v){for(u.state=u.__s,u.__d=!1,E&&E(t),l=u.render(u.props,u.state,u.context),S=0;S<u._sb.length;S++)u.__h.push(u._sb[S]);u._sb=[]}else do u.__d=!1,E&&E(t),l=u.render(u.props,u.state,u.context),u.state=u.__s;while(u.__d&&++w<25);u.state=u.__s,null!=u.getChildContext&&(i=iG(iG({},i),u.getChildContext())),v&&!h&&null!=u.getSnapshotBeforeUpdate&&(f=u.getSnapshotBeforeUpdate(d,m)),k=l,null!=l&&l.type===iK&&null==l.key&&(k=function e(t){return"object"!=typeof t||null==t||t.__b&&t.__b>0?t:iF(t)?t.map(e):iG({},t)}(l.props.children)),s=iZ(e,iF(k)?k:[k],t,n,i,o,r,a,s,c,p),u.base=t.__e,t.__u&=-161,u.__h.length&&a.push(u),g&&(u.__E=u.__=null)}catch(e){if(t.__v=null,c||null!=r){if(e.then){for(t.__u|=c?160:128;s&&8==s.nodeType&&s.nextSibling;)s=s.nextSibling;r[r.indexOf(s)]=null,t.__e=s}else{for(C=r.length;C--;)iW(r[C]);i5(t)}}else t.__e=n.__e,t.__k=n.__k,e.then||i5(t);iP.__e(e,t,n)}else null==r&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):s=t.__e=function(e,t,n,i,o,r,a,s,c){var p,l,u,h,d,m,f,g=n.props,y=t.props,v=t.type;if("svg"==v?o="http://www.w3.org/2000/svg":"math"==v?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),null!=r){for(p=0;p<r.length;p++)if((d=r[p])&&"setAttribute"in d==!!v&&(v?d.localName==v:3==d.nodeType)){e=d,r[p]=null;break}}if(null==e){if(null==v)return document.createTextNode(y);e=document.createElementNS(o,v,y.is&&y),s&&(iP.__m&&iP.__m(t,r),s=!1),r=null}if(null==v)g===y||s&&e.data==y||(e.data=y);else{if(r=r&&iR.call(e.childNodes),g=n.props||iI,!s&&null!=r)for(g={},p=0;p<e.attributes.length;p++)g[(d=e.attributes[p]).name]=d.value;for(p in g)if(d=g[p],"children"==p);else if("dangerouslySetInnerHTML"==p)u=d;else if(!(p in y)){if("value"==p&&"defaultValue"in y||"checked"==p&&"defaultChecked"in y)continue;i0(e,p,null,d,o)}for(p in y)d=y[p],"children"==p?h=d:"dangerouslySetInnerHTML"==p?l=d:"value"==p?m=d:"checked"==p?f=d:s&&"function"!=typeof d||g[p]===d||i0(e,p,d,g[p],o);if(l)s||u&&(l.__html==u.__html||l.__html==e.innerHTML)||(e.innerHTML=l.__html),t.__k=[];else if(u&&(e.innerHTML=""),iZ("template"==t.type?e.content:e,iF(h)?h:[h],t,n,i,"foreignObject"==v?"http://www.w3.org/1999/xhtml":o,r,a,r?r[0]:n.__k&&iJ(n,0),s,c),null!=r)for(p=r.length;p--;)iW(r[p]);s||(p="value","progress"==v&&null==m?e.removeAttribute("value"):null==m||m===e[p]&&("progress"!=v||m)&&("option"!=v||m==g[p])||i0(e,p,m,g[p],o),p="checked",null!=f&&f!=e[p]&&i0(e,p,f,g[p],o))}return e}(n.__e,t,n,i,o,r,a,c,p);return(l=iP.diffed)&&l(t),128&t.__u?void 0:s}function i5(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(i5)}function i3(e,t,n){for(var i=0;i<n.length;i++)i6(n[i],n[++i],n[++i]);iP.__c&&iP.__c(t,e),e.some(function(t){try{e=t.__h,t.__h=[],e.some(function(e){e.call(t)})}catch(e){iP.__e(e,t.__v)}})}function i6(e,t,n){try{if("function"==typeof e){var i="function"==typeof e.__u;i&&e.__u(),i&&null==t||(e.__u=e(t))}else e.current=t}catch(e){iP.__e(e,n)}}function i4(e,t,n){return this.constructor(e,n)}function i9(e,t,n){var i,o,r,a;t==document&&(t=document.documentElement),iP.__&&iP.__(e,t),o=(i="function"==typeof n)?null:n&&n.__k||t.__k,r=[],a=[],i2(t,e=(!i&&n||t).__k=iV(iK,null,[e]),o||iI,iI,t.namespaceURI,!i&&n?[n]:o?null:t.firstChild?iR.call(t.childNodes):null,r,!i&&n?n:o?o.__e:t.firstChild,i,a),i3(r,e,a)}iR=iz.slice,iP={__e:function(e,t,n,i){for(var o,r,a;t=t.__;)if((o=t.__c)&&!o.__)try{if((r=o.constructor)&&null!=r.getDerivedStateFromError&&(o.setState(r.getDerivedStateFromError(e)),a=o.__d),null!=o.componentDidCatch&&(o.componentDidCatch(e,i||{}),a=o.__d),a)return o.__E=o}catch(t){e=t}throw e}},iA=0,iq.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!=this.state?this.__s:this.__s=iG({},this.state),"function"==typeof e&&(e=e(iG({},n),this.props)),e&&iG(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),iX(this))},iq.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),iX(this))},iq.prototype.render=iK,iM=[],iD="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,iB=function(e,t){return e.__v.__b-t.__v.__b},iY.__r=0,ij=/(PointerCapture)$|Capture$/i,iN=0,iO=i1(!1),iL=i1(!0);var i8,i7,oe,ot,on=function(e,t,n,i){var o;t[0]=0;for(var r=1;r<t.length;r++){var a=t[r++],s=t[r]?(t[0]|=a?1:2,n[t[r++]]):t[++r];3===a?i[0]=s:4===a?i[1]=Object.assign(i[1]||{},s):5===a?(i[1]=i[1]||{})[t[++r]]=s:6===a?i[1][t[++r]]+=s+"":a?(o=e.apply(s,on(e,s,n,["",null])),i.push(o),s[0]?t[0]|=2:(t[r-2]=0,t[r]=o)):i.push(s)}return i},oi=new Map,oo=(function(e){var t=oi.get(this);return t||(t=new Map,oi.set(this,t)),(t=on(this,t.get(e)||(t.set(e,t=function(e){for(var t,n,i=1,o="",r="",a=[0],s=function(e){1===i&&(e||(o=o.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?a.push(0,e,o):3===i&&(e||o)?(a.push(3,e,o),i=2):2===i&&"..."===o&&e?a.push(4,e,0):2===i&&o&&!e?a.push(5,0,!0,o):i>=5&&((o||!e&&5===i)&&(a.push(i,0,o,n),i=6),e&&(a.push(i,e,0,n),i=6)),o=""},c=0;c<e.length;c++){c&&(1===i&&s(),s(c));for(var p=0;p<e[c].length;p++)t=e[c][p],1===i?"<"===t?(s(),a=[a],i=3):o+=t:4===i?"--"===o&&">"===t?(i=1,o=""):o=t+o[0]:r?t===r?r="":o+=t:'"'===t||"'"===t?r=t:">"===t?(s(),i=1):i&&("="===t?(i=5,n=o,o=""):"/"===t&&(i<5||">"===e[c][p+1])?(s(),3===i&&(a=a[0]),i=a,(a=a[0]).push(2,0,i),i=0):" "===t||"	"===t||"\n"===t||"\r"===t?(s(),i=2):o+=t),3===i&&"!--"===o&&(i=4,a=a[0])}return s(),a}(e)),t),arguments,[])).length>1?t:t[0]}).bind(iV),or=0,oa=[],os=iP,oc=os.__b,op=os.__r,ol=os.diffed,ou=os.__c,oh=os.unmount,od=os.__;function om(e,t){os.__h&&os.__h(i7,e,or||t),or=0;var n=i7.__H||(i7.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function of(e){return or=1,function(e,t,n){var i=om(i8++,2);if(i.t=e,!i.__c&&(i.__=[oC(void 0,t),function(e){var t=i.__N?i.__N[0]:i.__[0],n=i.t(t,e);t!==n&&(i.__N=[n,i.__[1]],i.__c.setState({}))}],i.__c=i7,!i7.__f)){var o=function(e,t,n){if(!i.__c.__H)return!0;var o=i.__c.__H.__.filter(function(e){return!!e.__c});if(o.every(function(e){return!e.__N}))return!r||r.call(this,e,t,n);var a=i.__c.props!==e;return o.forEach(function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(a=!0)}}),r&&r.call(this,e,t,n)||a};i7.__f=!0;var r=i7.shouldComponentUpdate,a=i7.componentWillUpdate;i7.componentWillUpdate=function(e,t,n){if(this.__e){var i=r;r=void 0,o(e,t,n),r=i}a&&a.call(this,e,t,n)},i7.shouldComponentUpdate=o}return i.__N||i.__}(oC,e)}function og(e,t){var n=om(i8++,3);!os.__s&&ok(n.__H,t)&&(n.__=e,n.u=t,i7.__H.__h.push(n))}function oy(e,t){var n=om(i8++,4);!os.__s&&ok(n.__H,t)&&(n.__=e,n.u=t,i7.__h.push(n))}function ov(e){return or=5,o_(function(){return{current:e}},[])}function o_(e,t){var n=om(i8++,7);return ok(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function ob(e,t){return or=8,o_(function(){return e},t)}function ox(){for(var e;e=oa.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(ow),e.__H.__h.forEach(oS),e.__H.__h=[]}catch(t){e.__H.__h=[],os.__e(t,e.__v)}}os.__b=function(e){i7=null,oc&&oc(e)},os.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),od&&od(e,t)},os.__r=function(e){op&&op(e),i8=0;var t=(i7=e.__c).__H;t&&(oe===i7?(t.__h=[],i7.__h=[],t.__.forEach(function(e){e.__N&&(e.__=e.__N),e.u=e.__N=void 0})):(t.__h.forEach(ow),t.__h.forEach(oS),t.__h=[],i8=0)),oe=i7},os.diffed=function(e){ol&&ol(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==oa.push(t)&&ot===os.requestAnimationFrame||((ot=os.requestAnimationFrame)||function(e){var t,n=function(){clearTimeout(i),oE&&cancelAnimationFrame(t),setTimeout(e)},i=setTimeout(n,35);oE&&(t=requestAnimationFrame(n))})(ox)),t.__H.__.forEach(function(e){e.u&&(e.__H=e.u),e.u=void 0})),oe=i7=null},os.__c=function(e,t){t.some(function(e){try{e.__h.forEach(ow),e.__h=e.__h.filter(function(e){return!e.__||oS(e)})}catch(n){t.some(function(e){e.__h&&(e.__h=[])}),t=[],os.__e(n,e.__v)}}),ou&&ou(e,t)},os.unmount=function(e){oh&&oh(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(e){try{ow(e)}catch(e){t=e}}),n.__H=void 0,t&&os.__e(t,n.__v))};var oE="function"==typeof requestAnimationFrame;function ow(e){var t=i7,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),i7=t}function oS(e){var t=i7;e.__c=e.__(),i7=t}function ok(e,t){return!e||e.length!==t.length||t.some(function(t,n){return t!==e[n]})}function oC(e,t){return"function"==typeof t?t(e):t}var oR=n(1994);function oP(e){let{headerEntries:t,onSelect:n,selectedEntry:i,setSelectedEntry:o,title:r}=e,a=o_(()=>t.reduce((e,t)=>{let n=t.group||"default",i=e.find(e=>e.id===n);return i?i.entries.push(t):e.push({id:n,entries:[t]}),e},[]),[t]);return oo`
    <div class="djs-popup-header">
      <h3 class="djs-popup-title" title=${r}>${r}</h3>
      ${a.map(e=>oo`
        <ul key=${e.id} class="djs-popup-header-group" data-header-group=${e.id}>

          ${e.entries.map(e=>{var t;return oo`
            <li key=${e.id}>
              <${e.action?"button":"span"}
                class=${t=e===i,(0,oR.Z)("entry",e.className,e.active?"active":"",e.disabled?"disabled":"",t?"selected":"")}
                onClick=${t=>e.action&&n(t,e)}
                title=${e.title||e.label}
                data-id=${e.id}
                onMouseEnter=${()=>e.action&&o(e)}
                onMouseLeave=${()=>e.action&&o(null)}
                onFocus=${()=>e.action&&o(e)}
                onBlur=${()=>e.action&&o(null)}
              >
                ${e.imageUrl&&oo`<img class="djs-popup-entry-icon" src=${e.imageUrl} alt="" />`||e.imageHtml&&oo`<div class="djs-popup-entry-icon" dangerouslySetInnerHTML=${{__html:e.imageHtml}} />`}
                ${e.label?oo`
                  <span class="djs-popup-label">${e.label}</span>
                `:null}
              </${e.action?"button":"span"}>
            </li>
          `})}
        </ul>
      `)}
    </div>
  `}function oA(e){let{entry:t,selected:n,onMouseEnter:i,onMouseLeave:o,onAction:r}=e;return oo`
    <li
      class=${(0,oR.Z)("entry",{selected:n})}
      data-id=${t.id}
      title=${t.title||t.label}
      tabIndex="0"
      onClick=${r}
      onFocus=${i}
      onBlur=${o}
      onMouseEnter=${i}
      onMouseLeave=${o}
      onDragStart=${e=>r(e,t,"dragstart")}
      draggable=${!0}
    >
      <div class="djs-popup-entry-content">
        <span
          class=${(0,oR.Z)("djs-popup-entry-name",t.className)}
        >
          ${t.imageUrl&&oo`<img class="djs-popup-entry-icon" src=${t.imageUrl} alt="" />`||t.imageHtml&&oo`<div class="djs-popup-entry-icon" dangerouslySetInnerHTML=${{__html:t.imageHtml}} />`}

          ${t.label?oo`
            <span class="djs-popup-label">
              ${t.label}
            </span>
          `:null}
        </span>
        ${t.description&&oo`
          <span
            class="djs-popup-entry-description"
            title=${t.description}
          >
            ${t.description}
          </span>
        `}
      </div>
      ${t.documentationRef&&oo`
        <div class="djs-popup-entry-docs">
          <a
            href="${t.documentationRef}"
            onClick=${e=>e.stopPropagation()}
            title="Open element documentation"
            target="_blank"
            rel="noopener"
          >
            <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M10.6368 10.6375V5.91761H11.9995V10.6382C11.9995 10.9973 11.8623 11.3141 11.5878 11.5885C11.3134 11.863 10.9966 12.0002 10.6375 12.0002H1.36266C0.982345 12.0002 0.660159 11.8681 0.396102 11.6041C0.132044 11.34 1.52588e-05 11.0178 1.52588e-05 10.6375V1.36267C1.52588e-05 0.98236 0.132044 0.660173 0.396102 0.396116C0.660159 0.132058 0.982345 2.95639e-05 1.36266 2.95639e-05H5.91624V1.36267H1.36266V10.6375H10.6368ZM12 0H7.2794L7.27873 1.36197H9.68701L3.06507 7.98391L4.01541 8.93425L10.6373 2.31231V4.72059H12V0Z" fill="#818798"/>
            </svg>
          </a>
        </div>
      `}
    </li>
  `}function oM(e){let{selectedEntry:t,setSelectedEntry:n,entries:i,...o}=e,r=ov(),a=o_(()=>(function(e){let t=[],n=e=>t.find(t=>e.id===t.id),i=e=>!!n(e),o=e=>"string"==typeof e?{id:e}:e;return e.forEach(e=>{let r=e.group?o(e.group):{id:"default"};i(r)?n(r).entries.push(e):t.push({...r,entries:[e]})}),t})(i),[i]);return oy(()=>{let e=r.current;if(!e)return;let t=e.querySelector(".selected");t&&("function"==typeof t.scrollIntoViewIfNeeded?t.scrollIntoViewIfNeeded():t.scrollIntoView({scrollMode:"if-needed",block:"nearest"}))},[t]),oo`
    <div class="djs-popup-results" ref=${r}>
      ${a.map(e=>oo`
        ${e.name&&oo`
          <div key=${e.id} class="entry-header" title=${e.name}>
            ${e.name}
          </div>
        `}
        <ul class="djs-popup-group" data-group=${e.id}>
          ${e.entries.map(e=>oo`
            <${oA}
              key=${e.id}
              entry=${e}
              selected=${e===t}
              onMouseEnter=${()=>n(e)}
              onMouseLeave=${()=>n(null)}
              ...${o}
            />
          `)}
        </ul>
      `)}
    </div>
  `}function oT(e){let{onClose:t,onSelect:n,className:i,headerEntries:o,position:r,title:c,width:p,scale:l,search:u,emptyPlaceholder:h,searchFn:d,entries:m,onOpened:f,onClosed:g}=e,y=o_(()=>!!(0,a.$K)(u)&&m.length>5,[u,m]),[v,_]=of(""),b=ob((e,t)=>y?t.trim()?d(e.filter(({searchable:e})=>!1!==e),t,{keys:["label","search","description"]}).map(({item:e})=>e):e.filter(({rank:e=0})=>e>=0):e,[y]),[x,E]=of(b(m,v)),[w,S]=of(x[0]),k=ob(e=>{S(e[0]),E(e)},[w,E,S]);og(()=>{k(b(m,v))},[v,m]);let C=ob(e=>{let t=x.indexOf(w)+e;t<0&&(t=x.length-1),t>=x.length&&(t=0),S(x[t])},[x,w,S]),R=ob(e=>"Enter"===e.key&&w?n(e,w):"ArrowUp"===e.key?(C(-1),e.preventDefault()):"ArrowDown"===e.key?(C(1),e.preventDefault()):void 0,[n,w,C]),P=ob(e=>{(0,s.wB)(e.target,"input")&&_(()=>e.target.value)},[_]);og(()=>(f(),()=>{g()}),[]);let A=o_(()=>c||o.length>0,[c,o]);return oo`
    <${oD}
      onClose=${t}
      onKeyup=${P}
      onKeydown=${R}
      className=${i}
      position=${r}
      width=${p}
      scale=${l}
    >
      ${A&&oo`
        <${oP}
          headerEntries=${o}
          onSelect=${n}
          selectedEntry=${w}
          setSelectedEntry=${S}
          title=${c}
        />
      `}
      ${m.length>0&&oo`
        <div class="djs-popup-body">

          ${y&&oo`
          <div class="djs-popup-search">
            <svg class="djs-popup-search-icon" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M9.0325 8.5H9.625L13.3675 12.25L12.25 13.3675L8.5 9.625V9.0325L8.2975 8.8225C7.4425 9.5575 6.3325 10 5.125 10C2.4325 10 0.25 7.8175 0.25 5.125C0.25 2.4325 2.4325 0.25 5.125 0.25C7.8175 0.25 10 2.4325 10 5.125C10 6.3325 9.5575 7.4425 8.8225 8.2975L9.0325 8.5ZM1.75 5.125C1.75 6.9925 3.2575 8.5 5.125 8.5C6.9925 8.5 8.5 6.9925 8.5 5.125C8.5 3.2575 6.9925 1.75 5.125 1.75C3.2575 1.75 1.75 3.2575 1.75 5.125Z" fill="#22242A"/>
            </svg>
            <input type="text" spellcheck=${!1} aria-label="${c}" />
          </div>
          `}

          <${oM}
            entries=${x}
            selectedEntry=${w}
            setSelectedEntry=${S}
            onAction=${n}
          />
        </div>
      `}
    ${h&&0===x.length&&oo`
      <div class="djs-popup-no-results">${(0,a.mf)(h)?h(v):h}</div>
    `}
    </${oD}>
  `}function oD(e){let{onClose:t,onKeydown:n,onKeyup:i,className:o,children:r,position:a}=e,c=ov();return oy(()=>{if("function"!=typeof a)return;let e=c.current,t=a(e);e.style.left=`${t.x}px`,e.style.top=`${t.y}px`},[c.current,a]),oy(()=>{let e=c.current;e&&(e.querySelector("input")||e).focus()},[]),og(()=>{let e=e=>{if("Escape"===e.key)return e.preventDefault(),t()},n=e=>{if(!(0,s.oq)(e.target,".djs-popup",!0))return t()};return document.documentElement.addEventListener("keydown",e),document.body.addEventListener("click",n),()=>{document.documentElement.removeEventListener("keydown",e),document.body.removeEventListener("click",n)}},[]),oo`
    <div
      class=${(0,oR.Z)("djs-popup",o)}
      style=${{transform:`scale(${e.scale})`,width:`${e.width}px`,"transform-origin":"top left"}}
      onKeydown=${n}
      onKeyup=${i}
      ref=${c}
      tabIndex="-1"
    >
      ${r}
    </div>
  `}var oB=["contextPad.close","canvas.viewbox.changing","commandStack.changed"];function oj(e,t,n,i){this._eventBus=t,this._canvas=n,this._search=i,this._current=null;var o=(0,a.$K)(e&&e.scale)?e.scale:{min:1,max:1};this._config={scale:o},t.on("diagram.destroy",()=>{this.close()}),t.on("element.changed",e=>{let t=this.isOpen()&&this._current.target;e.element===t&&this.refresh()})}function oN(e){return e.reduce((e,t)=>e+function e(t){if((0,a.kJ)(t))return Math.max(...t.map(e));let n=Math.log(t.value.length);return t.match?(t.start?t.end?131.9:7.87:t.wordStart?2.19:1)*n:-.07*n}(t),0)}function oO(e=""){return(0,a.kJ)(e)?e.join(", "):e}function oL(e,t){let n;if(!e)return{tokens:[],matchedWords:{}};let i=[],o={},r=t.map(o$),a=RegExp([`(?<all>${r.join("\\s+")})`,...r].join("|"),"ig"),s=0;for(;n=a.exec(e);){let[r]=n,a=n.index,c=n.index+r.length,p=0===a,l=c===e.length,u=!!n.groups.all,h=p||/\s/.test(e.charAt(a-1)),d=l||/\s/.test(e.charAt(c));for(let a of(n.index>s&&i.push({value:e.slice(s,n.index),index:s}),i.push({value:r,index:n.index,match:!0,wordStart:h,wordEnd:d,start:p,end:l,all:u}),u?t:[r]))o[a.toLowerCase()]=!0;s=n.index+r.length}return s<e.length&&i.push({value:e.slice(s),index:s}),{tokens:i,matchedWords:o}}function o$(e){return e.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&")}oj.$inject=["config.popupMenu","eventBus","canvas","search"],oj.prototype._render=function(){let{position:e,providerId:t,entries:n,headerEntries:i,emptyPlaceholder:o,options:r}=this._current,a=Object.entries(n).map(([e,t])=>({id:e,...t})),s=Object.entries(i).map(([e,t])=>({id:e,...t})),c=e&&(t=>this._ensureVisible(t,e)),p=this._updateScale(this._current.container);i9(oo`
      <${oT}
        onClose=${e=>this.close(e)}
        onSelect=${(e,t,n)=>this.trigger(e,t,n)}
        position=${c}
        className=${t}
        entries=${a}
        headerEntries=${s}
        emptyPlaceholder=${o}
        scale=${p}
        onOpened=${this._onOpened.bind(this)}
        onClosed=${this._onClosed.bind(this)}
        searchFn=${this._search}
        ...${{...r}}
      />
    `,this._current.container)},oj.prototype.open=function(e,t,n,i){if(!e)throw Error("target is missing");if(!t)throw Error("providers for <"+t+"> not found");if(!n)throw Error("position is missing");this.isOpen()&&this.close();let{entries:o,headerEntries:r,emptyPlaceholder:a}=this._getContext(e,t);this._current={position:n,providerId:t,target:e,entries:o,headerEntries:r,emptyPlaceholder:a,container:this._createContainer({provider:t}),options:i},this._emit("open"),this._bindAutoClose(),this._render()},oj.prototype.refresh=function(){if(!this.isOpen())return;let{target:e,providerId:t}=this._current,{entries:n,headerEntries:i,emptyPlaceholder:o}=this._getContext(e,t);this._current={...this._current,entries:n,headerEntries:i,emptyPlaceholder:o},this._emit("refresh"),this._render()},oj.prototype._getContext=function(e,t){let n=this._getProviders(t);if(!n||!n.length)throw Error("provider for <"+t+"> not found");let i=this._getEntries(e,n),o=this._getHeaderEntries(e,n);return{entries:i,headerEntries:o,emptyPlaceholder:this._getEmptyPlaceholder(n),empty:!(Object.keys(i).length||Object.keys(o).length)}},oj.prototype.close=function(){this.isOpen()&&(this._emit("close"),this.reset(),this._canvas.restoreFocus(),this._current=null)},oj.prototype.reset=function(){let e=this._current.container;i9(null,e),(0,s.Od)(e)},oj.prototype._emit=function(e,t){this._eventBus.fire(`popupMenu.${e}`,t)},oj.prototype._onOpened=function(){this._emit("opened")},oj.prototype._onClosed=function(){this._emit("closed")},oj.prototype._createContainer=function(e){var t=this._canvas.getContainer();let n=(0,s.H6)(`<div class="djs-popup-parent djs-scrollable" data-popup=${e.provider}></div>`);return t.appendChild(n),n},oj.prototype._bindAutoClose=function(){this._eventBus.once(oB,this.close,this)},oj.prototype._unbindAutoClose=function(){this._eventBus.off(oB,this.close,this)},oj.prototype._updateScale=function(){var e,t,n=this._canvas.zoom(),i=this._config.scale,o=n;return!0!==i&&(!1===i?(e=1,t=1):(e=i.min,t=i.max),(0,a.$K)(e)&&n<e&&(o=e),(0,a.$K)(t)&&n>t&&(o=t)),o},oj.prototype._ensureVisible=function(e,t){var n=document.documentElement.getBoundingClientRect(),i=e.getBoundingClientRect(),o={},r=t.x,a=t.y;return t.x+i.width>n.width&&(o.x=!0),t.y+i.height>n.height&&(o.y=!0),o.x&&o.y?(r=t.x-i.width,a=t.y-i.height):o.x?(r=t.x-i.width,a=t.y):o.y&&t.y<i.height?(r=t.x,a=10):o.y&&(r=t.x,a=t.y-i.height),t.y<n.top&&(a=t.y+i.height),{x:r,y:a}},oj.prototype.isEmpty=function(e,t){if(!e)throw Error("target is missing");if(!t)throw Error("provider ID is missing");let n=this._getProviders(t);return!n||!n.length||this._getContext(e,t).empty},oj.prototype.registerProvider=function(e,t,n){n||(n=t,t=1e3),this._eventBus.on("popupMenu.getProviders."+e,t,function(e){e.providers.push(n)})},oj.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"popupMenu.getProviders."+e,providers:[]});return this._eventBus.fire(t),t.providers},oj.prototype._getEntries=function(e,t){var n={};return(0,a.Ed)(t,function(t){if(!t.getPopupMenuEntries){(0,a.Ed)(t.getEntries(e),function(e){var t=e.id;if(!t)throw Error("entry ID is missing");n[t]=(0,a.CE)(e,["id"])});return}var i=t.getPopupMenuEntries(e);(0,a.mf)(i)?n=i(n):(0,a.Ed)(i,function(e,t){n[t]=e})}),n},oj.prototype._getHeaderEntries=function(e,t){var n={};return(0,a.Ed)(t,function(t){if(!t.getPopupMenuHeaderEntries){if(!t.getHeaderEntries)return;(0,a.Ed)(t.getHeaderEntries(e),function(e){var t=e.id;if(!t)throw Error("entry ID is missing");n[t]=(0,a.CE)(e,["id"])});return}var i=t.getPopupMenuHeaderEntries(e);(0,a.mf)(i)?n=i(n):(0,a.Ed)(i,function(e,t){n[t]=e})}),n},oj.prototype._getEmptyPlaceholder=function(e){let t=e.find(e=>(0,a.mf)(e.getEmptyPlaceholder));return t&&t.getEmptyPlaceholder()},oj.prototype.isOpen=function(){return!!this._current},oj.prototype.trigger=function(e,t,n="click"){if(e.preventDefault(),!t){let n=(0,s.oq)(e.delegateTarget||e.target,".entry",!0),i=(0,s.Lj)(n,"data-id");t={id:i,...this._getEntry(i)}}let i=t.action;if(!1!==this._emit("trigger",{entry:t,event:e})){if((0,a.mf)(i)){if("click"===n)return i(e,t)}else if(i[n])return i[n](e,t)}},oj.prototype._getEntry=function(e){var t=this._current.entries[e]||this._current.headerEntries[e];if(!t)throw Error("entry not found");return t};var oI={search:["value",function(e,t,n){let{keys:i}=n;if(!(t=t.trim().toLowerCase()))throw Error("<pattern> must not be empty");let o=t.trim().toLowerCase().split(/\s+/);return e.flatMap(e=>{let t=function(e,t,n){let{matchedWords:i,tokens:o}=n.reduce((n,i)=>{let o=e[i],{tokens:r,matchedWords:s}=(0,a.kJ)(o)?o.reduce((e,n)=>{let{tokens:i,matchedWords:o}=oL(n,t);return{tokens:[...e.tokens,i],matchedWords:{...e.matchedWords,...o}}},{matchedWords:{},tokens:[]}):oL(o,t);return{tokens:{...n.tokens,[i]:r},matchedWords:{...n.matchedWords,...s}}},{matchedWords:{},tokens:{}});return Object.keys(i).length!==t.length?null:o}(e,o,i);return t?{item:e,tokens:t}:[]}).sort((e,t)=>{let n=0,o=1;for(let c of i){var r,a,s;let i=(r=e.tokens[c],oN(t.tokens[c])-oN(r));if(0!==i){n+=i*o,o*=.9;continue}let p=(a=e.item[c],s=t.item[c],oO(a).localeCompare(oO(s)));if(0!==p){n+=p*o,o*=.9;continue}}return n})}]},oz={__depends__:[oI],__init__:["popupMenu"],popupMenu:["type",oj]},oH={align:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2000 2000">
              <line x1="200" y1="150" x2="200" y2="1850" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
              <rect x="500" y="150" width="1300" height="700" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
              <rect x="500" y="1150" width="700" height="700" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,bottom:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="1650" x2="1650" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="350" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="850" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,center:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="900" y1="150" x2="900" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="250" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="500" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,left:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="100" y1="150" x2="100" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="100" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="100" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,right:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="1650" y1="150" x2="1650" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="350" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="850" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,top:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="150" x2="1650" y2="150" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="150" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="150" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,middle:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="900" x2="1650" y2="900" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="250" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="500" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`};function oF(e,t,n,i){e.registerProvider(900,this),this._contextPad=e,this._popupMenu=t,this._translate=n,this._canvas=i}oF.$inject=["contextPad","popupMenu","translate","canvas"],oF.prototype.getMultiElementContextPadEntries=function(e){var t={};return this._isAllowed(e)&&(0,a.f0)(t,this._getEntries(e)),t},oF.prototype._isAllowed=function(e){return!this._popupMenu.isEmpty(e,"align-elements")},oF.prototype._getEntries=function(){var e=this;return{"align-elements":{group:"align-elements",title:e._translate("Align elements"),html:`<div class="entry">${oH.align}</div>`,action:{click:function(t,n){var i=e._getMenuPosition(n);(0,a.f0)(i,{cursor:{x:t.x,y:t.y}}),e._popupMenu.open(n,"align-elements",i)}}}}},oF.prototype._getMenuPosition=function(e){var t=this._contextPad.getPad(e).html.getBoundingClientRect();return{x:t.left,y:t.bottom+5}};var oG=["left","center","right","top","middle","bottom"];function oW(e,t,n,i){this._alignElements=t,this._translate=n,this._popupMenu=e,this._rules=i,e.registerProvider("align-elements",this)}function oV(e){nd.call(this,e),this.init()}function oU(e){oV.call(this,e)}function oK(e,t,n,i){for(var o,r,s,c,p;s={x:(o=n).x-t.width/2,y:o.y-t.height/2,width:t.width,height:t.height},r=oJ(e),e.host&&(r=r.concat(oJ(e.host))),e.attachers&&(r=r.concat(e.attachers.reduce(function(e,t){return e.concat(oJ(t))},[]))),c=r,p=(0,a.sE)(c,function(e){return e!==t&&"intersect"===(0,L.T8)(e,s,10)});)n=i(t,n,p);return n}function oq(e){return function(t,n,i){var o={x:n.x,y:n.y};return["x","y"].forEach(function(r){var a=e[r];if(a){var s="x"===r?"width":"height",c=a.margin,p=a.minDistance;c<0?o[r]=Math.min(i[r]+c-t[s]/2,n[r]-p+c):o[r]=Math.max(i[r]+i[s]+c+t[s]/2,n[r]+p+c)}}),o}}function oJ(e){return e.outgoing.map(function(e){return e.target}).concat(e.incoming.map(function(e){return e.source}))}function oX(){return!0}function oY(e,t,n){e.on("autoPlace",100,function(e){var t,n,i,o,r=e.shape;return t=e.source,n||(n={}),i=n.defaultDistance||50,o=(0,L.wS)(t),{x:(0,L.JA)(t).right+i+r.width/2,y:o.y}}),e.on("autoPlace.end",function(e){n.scrollToElement(e.shape)}),this.append=function(n,i,o){e.fire("autoPlace.start",{source:n,shape:i});var r=e.fire("autoPlace",{source:n,shape:i}),a=t.appendShape(n,i,r,n.parent,o);return e.fire("autoPlace.end",{source:n,shape:a}),a}}function oZ(e,t){e.on("autoPlace.end",500,function(e){t.select(e.shape)})}function oQ(e,t){for((0,a.HD)(t)&&(t=[t]);e=e.parent;)if(tE(e,t))return e;return null}function o0(e,t){var n,i=oQ(e,"bpmn:Process");if(i)return!0;var o=["bpmn:Participant","bpmn:Lane"];if(i=oQ(e,o))return t$(i);if(tE(e,o))return t$(e);for(n=tw(e);n&&!tx(n,"bpmn:Process");n=n.$parent);if(!t)return!0;var r=t.find(function(e){var t=tw(e);return t&&t.get("processRef")===n});return!r||t$(r)}function o1(e,t,n){var i,o,r,s,c,p,l,u,h,d,m,f,g,y,v,_=o0(e,n);return tx(t,"bpmn:TextAnnotation")?(i=(0,L.JA)(e),o=_?{x:i.right+t.width/2,y:i.top-50-t.height/2}:{x:i.right+50+t.width/2,y:i.bottom+t.height/2},(0,tH.Ho)(e)&&(o=(0,L.wS)(e),_?(o.x+=100,o.y-=50):(o.x+=100,o.y+=50)),r={margin:_?-30:30,minDistance:20},oK(e,t,o,oq(_?{y:r}:{x:r}))):tE(t,["bpmn:DataObjectReference","bpmn:DataStoreReference"])?(s=(0,L.JA)(e),c=_?{x:s.right-10+t.width/2,y:s.bottom+40+t.width/2}:{x:s.left-40-t.width/2,y:s.bottom-10+t.height/2},p={margin:30,minDistance:30},oK(e,t,c,oq(_?{x:p}:{y:p}))):tx(t,"bpmn:FlowNode")?(l=(0,L.JA)(e),u=(0,L.wS)(e),d=function(e,t){t||(t={});var n=t.defaultDistance||50,i=t.direction||"e",o=t.filter,r=t.getWeight||function(t){return t.source===e?1:-1},s=t.maxDistance||250,c=t.reference||"start";function p(e,t){return"n"===i?"start"===c?(0,L.JA)(e).top-(0,L.JA)(t).bottom:"center"===c?(0,L.JA)(e).top-(0,L.wS)(t).y:(0,L.JA)(e).top-(0,L.JA)(t).top:"w"===i?"start"===c?(0,L.JA)(e).left-(0,L.JA)(t).right:"center"===c?(0,L.JA)(e).left-(0,L.wS)(t).x:(0,L.JA)(e).left-(0,L.JA)(t).left:"s"===i?"start"===c?(0,L.JA)(t).top-(0,L.JA)(e).bottom:"center"===c?(0,L.wS)(t).y-(0,L.JA)(e).bottom:(0,L.JA)(t).bottom-(0,L.JA)(e).bottom:"start"===c?(0,L.JA)(t).left-(0,L.JA)(e).right:"center"===c?(0,L.wS)(t).x-(0,L.JA)(e).right:(0,L.JA)(t).right-(0,L.JA)(e).right}o||(o=oX);var l=e.incoming.filter(o).map(function(t){var n=r(t),i=n<0?p(t.source,e):p(e,t.source);return{id:t.source.id,distance:i,weight:n}}),u=e.outgoing.filter(o).map(function(t){var n=r(t),i=n>0?p(e,t.target):p(t.target,e);return{id:t.target.id,distance:i,weight:n}}),h=l.concat(u).reduce(function(e,t){return e[t.id+"__weight_"+t.weight]=t,e},{});return(0,a.u4)(h,function(e,t){var n=t.distance,i=t.weight;return n<0||n>s||(e[String(n)]||(e[String(n)]=0),e[String(n)]+=1*i,(!e.distance||e[e.distance]<e[String(n)])&&(e.distance=n)),e},{}).distance||n}(e,{filter:function(e){return tx(e,"bpmn:SequenceFlow")},direction:(h=_?{directionHint:"e",minDistance:80,baseOrientation:"left",boundaryOrientation:"top",start:"top",end:"bottom"}:{directionHint:"s",minDistance:90,baseOrientation:"top",boundaryOrientation:"left",start:"left",end:"right"}).directionHint}),m=30,f=h.minDistance,g=h.baseOrientation,tx(e,"bpmn:BoundaryEvent")&&-1!==(g=(0,L.T8)(e,e.host,-25)).indexOf(h.boundaryOrientation)&&(m*=-1),y=_?{x:l.right+d+t.width/2,y:u.y+o2(g,f,h)}:{x:u.x+o2(g,f,h),y:l.bottom+d+t.height/2},v={margin:m,minDistance:f},oK(e,t,y,oq(_?{y:v}:{x:v}))):void 0}function o2(e,t,n){return e.includes(n.start)?-1*t:e.includes(n.end)?t:0}function o5(e,t){e.on("autoPlace",function(e){var n=e.shape;return o1(e.source,n,t)})}oW.$inject=["popupMenu","alignElements","translate","rules"],oW.prototype.getPopupMenuEntries=function(e){var t={};return this._isAllowed(e)&&(0,a.f0)(t,this._getEntries(e)),t},oW.prototype._isAllowed=function(e){return this._rules.allowed("elements.align",{elements:e})},oW.prototype._getEntries=function(e){var t=this._alignElements,n=this._translate,i=this._popupMenu,o={};return(0,a.Ed)(oG,function(r){o["align-elements-"+r]={group:"align",title:n("Align elements "+r),className:"bjs-align-elements-menu-entry",imageHtml:oH[r],action:function(){t.trigger(e,r),i.close()}}}),o},oV.$inject=["eventBus"],i(oV,nd),oV.prototype.addRule=function(e,t,n){var i=this;"string"==typeof e&&(e=[e]),e.forEach(function(e){i.canExecute(e,t,function(e,t,i){return n(e)},!0)})},oV.prototype.init=function(){},oU.$inject=["eventBus"],i(oU,oV),oU.prototype.init=function(){this.addRule("elements.align",function(e){var t=e.elements,n=(0,a.hX)(t,function(e){return!(e.waypoints||e.host||e.labelTarget)});return!((n=S(n)).length<2)&&n})},oY.$inject=["eventBus","modeling","canvas"],oZ.$inject=["eventBus","selection"],o5.$inject=["eventBus","elementRegistry"];var o3={__depends__:[{__init__:["autoPlaceSelectionBehavior"],autoPlace:["type",oY],autoPlaceSelectionBehavior:["type",oZ]}],__init__:["bpmnAutoPlace"],bpmnAutoPlace:["type",o5]};function o6(e,t,n,i){nd.call(this,e),this._elementRegistry=t,this._modeling=n,this._rules=i;var o=this;this.postExecuted(["shape.create"],function(e){var t=e.context,n=t.hints||{},i=t.shape,r=t.parent||t.newParent;!1!==n.autoResize&&o._expand([i],r)}),this.postExecuted(["elements.move"],function(e){var t=e.context,n=(0,a.xH)((0,a.VO)(t.closure.topLevel)),i=t.hints,r=!i||i.autoResize;if(!1!==r){var s=(0,a.vM)(n,function(e){return e.parent.id});(0,a.Ed)(s,function(e,t){(0,a.kJ)(r)&&(e=e.filter(function(e){return(0,a.sE)(r,(0,a.KQ)({id:e.id}))})),o._expand(e,t)})}}),this.postExecuted(["shape.toggleCollapse"],function(e){var t=e.context,n=t.hints,i=t.shape;n&&!1===n.autoResize||i.collapsed||o._expand(i.children||[],i)}),this.postExecuted(["shape.resize"],function(e){var t=e.context,n=t.hints,i=t.shape,r=i.parent;(!n||!1!==n.autoResize)&&r&&o._expand([i],r)})}function o4(e){e.invoke(o6,this)}function o9(e){oV.call(this,e);var t=this;this.addRule("element.autoResize",function(e){return t.canResize(e.elements,e.target)})}function o8(e,t){o9.call(this,e),this._modeling=t}function o7(e,t,n){var i,o,r=this,a=n.get("dragging",!1);a&&t.on("drag.start",function(n){t.once("drag.move",1500,function(t){!function(t){if(!t.hover){var n=t.originalEvent,i=r._findTargetGfx(n),o=i&&e.get(i);i&&o&&(t.stopPropagation(),a.hover({element:o,gfx:i}),a.move(n))}}(t)})}),t.on("element.hover",function(e){i=e.gfx,o=e.element}),t.on("element.hover",1500,function(e){o&&t.fire("element.out",{element:o,gfx:i})}),t.on("element.out",function(){i=null,o=null}),this._findTargetGfx=function(e){var t,n;if(e instanceof MouseEvent)return t=nA(e),n=document.elementFromPoint(t.x,t.y),(0,s.oq)(n,"svg, .djs-element",!0)}}o6.$inject=["eventBus","elementRegistry","modeling","rules"],i(o6,nd),o6.prototype._getOptimalBounds=function(e,t){var n=this.getOffset(t),i=this.getPadding(t),o=(0,L.JA)(P(e)),r=(0,L.JA)(t),s={};return o.top-r.top<i.top&&(s.top=o.top-n.top),o.left-r.left<i.left&&(s.left=o.left-n.left),r.right-o.right<i.right&&(s.right=o.right+n.right),r.bottom-o.bottom<i.bottom&&(s.bottom=o.bottom+n.bottom),(0,L.z_)((0,a.f0)({},r,s))},o6.prototype._expand=function(e,t){if("string"==typeof t&&(t=this._elementRegistry.get(t)),this._rules.allowed("element.autoResize",{elements:e,target:t})){var n=this._getOptimalBounds(e,t);if(i=t,n.x!==i.x||n.y!==i.y||n.width!==i.width||n.height!==i.height){var i,o,r,s,c=(o=(0,a.ei)(t,["x","y","width","height"]),r=n,s="",o=(0,L.JA)(o),r=(0,L.JA)(r),o.top>r.top&&(s=s.concat("n")),o.right<r.right&&(s=s.concat("w")),o.bottom<r.bottom&&(s=s.concat("s")),o.left>r.left&&(s=s.concat("e")),s);this.resize(t,n,{autoResize:c});var p=t.parent;p&&this._expand([t],p)}}},o6.prototype.getOffset=function(e){return{top:60,bottom:60,left:100,right:100}},o6.prototype.getPadding=function(e){return{top:2,bottom:2,left:15,right:15}},o6.prototype.resize=function(e,t,n){this._modeling.resizeShape(e,t,null,n)},o4.$inject=["injector"],i(o4,o6),o4.prototype.resize=function(e,t,n){tx(e,"bpmn:Participant")?this._modeling.resizeLane(e,t,null,n):this._modeling.resizeShape(e,t,null,n)},o9.$inject=["eventBus"],i(o9,oV),o9.prototype.canResize=function(e,t){return!1},i(o8,o9),o8.$inject=["eventBus","modeling"],o8.prototype.canResize=function(e,t){if(tx(t.di,"bpmndi:BPMNPlane")||!tx(t,"bpmn:Participant")&&!tx(t,"bpmn:Lane")&&!tx(t,"bpmn:SubProcess"))return!1;var n=!0;return(0,a.Ed)(e,function(e){if(tx(e,"bpmn:Lane")||(0,tH.j_)(e)){n=!1;return}}),n},o7.$inject=["elementRegistry","eventBus","injector"];var re=Math.round,rt="djs-drag-active";function rn(e){e.preventDefault()}function ri(e,t,n,i){var o,r={threshold:5,trapClick:!0};function c(e){var n=t.viewbox(),i=t._container.getBoundingClientRect();return{x:n.x+(e.x-i.left)/n.scale,y:n.y+(e.y-i.top)/n.scale}}function p(t,n){n=n||o;var i=e.createEvent((0,a.f0)({},n.payload,n.data,{isTouch:n.isTouch}));return!1!==e.fire("drag."+t,i)&&e.fire(n.prefix+"."+t,i)}function l(e,i){var r=o.payload,s=o.displacement,l=o.globalStart,u=nA(e),h=ii(u,l),d=o.localStart,m=c(u),f=ii(m,d);if(!o.active&&(i||Math.sqrt(Math.pow(h.x,2)+Math.pow(h.y,2))>o.threshold)){if((0,a.f0)(r,{x:re(d.x+s.x),y:re(d.y+s.y),dx:0,dy:0},{originalEvent:e}),!1===p("start"))return y();o.active=!0,o.keepSelection||(r.previousSelection=n.get(),n.select(null)),o.cursor&&n7(o.cursor),t.addMarker(t.getRootElement(),rt)}nP(e),o.active&&((0,a.f0)(r,{x:re(m.x+s.x),y:re(m.y+s.y),dx:re(f.x),dy:re(f.y)},{originalEvent:e}),p("move"))}function u(e){var t=!0;o.active&&(e&&(o.payload.originalEvent=e,nP(e)),t=p("end")),!1===t&&p("rejected"),p("ended",v(!0!==t))}function h(e){nZ("Escape",e)&&(rn(e),y())}function d(t){o.active&&(setTimeout(ie(e),400),rn(t)),u(t)}function m(e){l(e)}function f(e){var t=o.payload;t.hoverGfx=e.gfx,t.hover=e.element,p("hover")}function g(e){p("out");var t=o.payload;t.hoverGfx=null,t.hover=null}function y(e){if(o){var t,n=o.active;n&&p("cancel"),t=v(e),n&&p("canceled",t)}}function v(r){p("cleanup"),n7(null),v=o.trapClick?d:u,s.B.unbind(document,"mousemove",l),s.B.unbind(document,"dragstart",rn),s.B.unbind(document,"selectstart",rn),s.B.unbind(document,"mousedown",v,!0),s.B.unbind(document,"mouseup",v,!0),s.B.unbind(document,"keyup",h),s.B.unbind(document,"touchstart",m,!0),s.B.unbind(document,"touchcancel",y,!0),s.B.unbind(document,"touchmove",l,!0),s.B.unbind(document,"touchend",u,!0),e.off("element.hover",f),e.off("element.out",g),t.removeMarker(t.getRootElement(),rt);var a,c,v,_=o.payload.previousSelection;return!1!==r&&_&&!n.get().length&&(a=_.filter(function(e){return i.get(e.id)})).length&&n.select(a),c=o,o=null,c}e.on("diagram.destroy",y),this.init=function(t,n,i,v){o&&y(!1),"string"==typeof n&&(v=i,i=n,n=null);var _,b,x,E,w,S,k=(v=(0,a.f0)({},r,v||{})).data||{};w=v.trapClick?d:u,t?(b=nR(t)||t,x=nA(t),nP(t),"dragstart"===b.type&&rn(b)):(b=null,x={x:0,y:0}),E=c(x),n||(n=E),_=b,S="undefined"!=typeof TouchEvent&&_ instanceof TouchEvent,o=(0,a.f0)({prefix:i,data:k,payload:{},globalStart:x,displacement:ii(n,E),localStart:E,isTouch:S},v),v.manual||(S?(s.B.bind(document,"touchstart",m,!0),s.B.bind(document,"touchcancel",y,!0),s.B.bind(document,"touchmove",l,!0),s.B.bind(document,"touchend",u,!0)):(s.B.bind(document,"mousemove",l),s.B.bind(document,"dragstart",rn),s.B.bind(document,"selectstart",rn),s.B.bind(document,"mousedown",w,!0),s.B.bind(document,"mouseup",w,!0)),s.B.bind(document,"keyup",h),e.on("element.hover",f),e.on("element.out",g)),p("init"),v.autoActivate&&l(t,!0)},this.move=l,this.hover=f,this.out=g,this.end=u,this.cancel=y,this.context=function(){return o},this.setOptions=function(e){(0,a.f0)(r,e)}}ri.$inject=["eventBus","canvas","selection","elementRegistry"];var ro={__depends__:[{__init__:["hoverFix"],hoverFix:["type",o7]},nV],dragging:["type",ri]};function rr(e,t,n){this._canvas=n,this._opts=(0,a.f0)({scrollThresholdIn:[20,20,20,20],scrollThresholdOut:[0,0,0,0],scrollRepeatTimeout:15,scrollStep:10},e);var i=this;t.on("drag.move",function(e){var t=i._toBorderPoint(e);i.startScroll(t)}),t.on(["drag.cleanup"],function(){i.stopScroll()})}function ra(e){this._commandStack=e.get("commandStack",!1)}rr.$inject=["config.autoScroll","eventBus","canvas"],rr.prototype.startScroll=function(e){var t,n,i,o=this._canvas,r=this._opts,a=this,s=o.getContainer().getBoundingClientRect(),c=[e.x,e.y,s.width-e.x,s.height-e.y];this.stopScroll();for(var p=0,l=0,u=0;u<4;u++)t=c[u],n=r.scrollThresholdOut[u],i=r.scrollThresholdIn[u],n<t&&t<i&&(0===u?p=r.scrollStep:1==u?l=r.scrollStep:2==u?p=-r.scrollStep:3==u&&(l=-r.scrollStep));(0!==p||0!==l)&&(o.scroll({dx:p,dy:l}),this._scrolling=setTimeout(function(){a.startScroll(e)},r.scrollRepeatTimeout))},rr.prototype.stopScroll=function(){clearTimeout(this._scrolling)},rr.prototype.setOptions=function(e){this._opts=(0,a.f0)({},this._opts,e)},rr.prototype._toBorderPoint=function(e){var t=this._canvas._container.getBoundingClientRect(),n=nA(e.originalEvent);return{x:n.x-t.left,y:n.y-t.top}},ra.$inject=["injector"],ra.prototype.allowed=function(e,t){var n=!0,i=this._commandStack;return i&&(n=i.canExecute(e,t)),void 0===n||n};var rs={__init__:["rules"],rules:["type",ra]},rc=n(8951),rp=n(6823),rl=Math.round,ru=Math.max;function rh(e,t){var n,i,o,r,a,s,c;return function(e,t){var n,i;for(n=0;i=e[n];n++)if(10>=(0,rc.tW)(i,t))return{point:e[n],bendpoint:!0,index:n};return null}(e,t)||(n=e,i=t,s=(a=(0,rp.Z)([["M",i.x,i.y],["m",0,-10],["a",10,10,0,1,1,0,20],["a",10,10,0,1,1,0,-20],["z"]],(o=[],n.forEach(function(e,t){o.push([0===t?"M":"L",e.x,e.y])}),o)))[0],c=a[a.length-1],s?s!==c?s.segment2!==c.segment2?{point:n[r=ru(s.segment2,c.segment2)-1],bendpoint:!0,index:r}:{point:{x:rl(s.x+c.x)/2,y:rl(s.y+c.y)/2},index:s.segment2}:{point:{x:rl(s.x),y:rl(s.y)},index:s.segment2}:null)}function rd(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function rm(e){return Math.atan((e[1].y-e[0].y)/(e[1].x-e[0].x))}function rf(e,t){var n,i,o,r,a=t[0],s=t[1],c={x:s.x-a.x,y:s.y-a.y},p=(n=[a.x,a.y],i=[c.x,c.y],o=[e.x,e.y],-((r=[{n:n[0]-o[0],lambda:i[0]},{n:n[1]-o[1],lambda:i[1]}])[0].n*i[0]+r[1].n*i[1])/(r[0].lambda*i[0]+r[1].lambda*i[1]));return{x:a.x+p*c.x,y:a.y+p*c.y}}function rg(e,t){var n=rf(e,t);return rd({x:n.x-e.x,y:n.y-e.y})}function ry(e,t){return rd({x:e.x-t.x,y:e.y-t.y})}var rv="djs-bendpoint",r_="djs-segment-dragger";function rb(e,t,n){var i,o,r,a;return rh(t,(o=nA(n),i={x:(r=e._container.getBoundingClientRect()).left,y:r.top},{x:(a=e.viewbox()).x+(o.x-i.x)/a.scale,y:a.y+(o.y-i.y)/a.scale}))}function rx(e,t){var n=(0,c.Ue)("g");(0,c.Sh)(n).add(rv),(0,c.R3)(e,n);var i=(0,c.Ue)("circle");(0,c.Lj)(i,{cx:0,cy:0,r:4}),(0,c.Sh)(i).add("djs-visual"),(0,c.R3)(n,i);var o=(0,c.Ue)("circle");return(0,c.Lj)(o,{cx:0,cy:0,r:10}),(0,c.Sh)(o).add("djs-hit"),(0,c.R3)(n,o),t&&(0,c.Sh)(n).add(t),n}function rE(e,t,n){var i,o,r,a,s,p,l=(0,c.Ue)("g"),u=(0,rc.SO)(t,n),h=(0,rc.Or)(t,n);return(0,c.R3)(e,l),r=(0,c.Ue)("g"),(0,c.R3)(l,r),i=n.x-t.x,o=n.y-t.y,a="h"===h?rw(i):rw(o),s=(0,c.Ue)("rect"),(0,c.Lj)(s,{x:-9,y:-3,width:18,height:6}),(0,c.Sh)(s).add("djs-visual"),(0,c.R3)(r,s),p=(0,c.Ue)("rect"),(0,c.Lj)(p,{x:-a/2,y:-8.5,width:a,height:17}),(0,c.Sh)(p).add("djs-hit"),(0,c.R3)(r,p),ed(r,"v"===h?90:0,0,0),(0,c.Sh)(l).add(r_),(0,c.Sh)(l).add("h"===h?"horizontal":"vertical"),eh(l,u.x,u.y),l}function rw(e){return Math.abs(Math.round(2*e/3))}function rS(e,t,n,i,o){function r(e,t,i){s.B.bind(e,t,function(e){n.triggerMouseEvent(t,e,i),e.stopPropagation()})}function p(e,n){var i=t.getLayer("overlays"),o=(0,s.IO)('.djs-bendpoints[data-element-id="'+(0,ng.D)(e.id)+'"]',i);return!o&&n&&(o=(0,c.Ue)("g"),(0,c.Lj)(o,{"data-element-id":e.id}),(0,c.Sh)(o).add("djs-bendpoints"),(0,c.R3)(i,o),r(o,"mousedown",e),r(o,"click",e),r(o,"dblclick",e)),o}function l(e,t){return(0,s.IO)('.djs-segment-dragger[data-segment-idx="'+e+'"]',t)}function u(e,t){t.waypoints.forEach(function(t,n){var i=rx(e);(0,c.R3)(e,i),eh(i,t.x,t.y)}),rx(e,"floating")}function h(e,t){for(var n,i,o,a=t.waypoints,s=1;s<a.length;s++)n=a[s-1],i=a[s],(0,rc.Or)(n,i)&&(o=rE(e,n,i),(0,c.Lj)(o,{"data-segment-idx":s}),r(o,"mousemove",t))}function d(e){var t=p(e);return t||(u(t=p(e,!0),e),h(t,e)),t}function m(e){var t=p(e);t&&((0,a.Ed)((0,s.Kt)("."+r_,t),function(e){(0,c.Od)(e)}),(0,a.Ed)((0,s.Kt)("."+rv,t),function(e){(0,c.Od)(e)}),h(t,e),u(t,e))}e.on("connection.changed",function(e){m(e.element)}),e.on("connection.remove",function(e){var t=p(e.element);t&&(0,c.Od)(t)}),e.on("element.marker.update",function(e){var t,n=e.element;n.waypoints&&(t=d(n),e.add?(0,c.Sh)(t).add(e.marker):(0,c.Sh)(t).remove(e.marker))}),e.on("element.mousemove",function(e){var n,i,o,r,a=e.element,c=a.waypoints;if(c){if(o=p(a,!0),!(r=rb(t,c,e.originalEvent)))return;n=(0,s.IO)(".floating",o),i=r.point,n&&eh(n,i.x,i.y),r.bendpoint||function(e,t,n){var i,o,r=l(t.index,e),a=n[t.index-1],c=n[t.index],p=t.point,u=(0,rc.SO)(a,c),h=(0,rc.Or)(a,c);r&&(i=(0,s.IO)(".djs-visual",r),o={x:p.x-u.x,y:p.y-u.y},"v"===h&&(o={x:o.y,y:o.x}),eh(i,o.x,o.y))}(o,r,c)}}),e.on("element.mousedown",function(e){if(nD(e)){var n=e.originalEvent,r=e.element;if(r.waypoints)return function(e,n){var r,a,s,c,p,l,u,h,d,m,f,g,y=n.waypoints,v=rb(t,y,e);if(v)return(s=n.waypoints,g=v.index<=0||v.bendpoint?null:(r={start:s[v.index-1],end:s[v.index]},a=(0,rc.Or)(r.start,r.end))?rw("h"===a?r.end.x-r.start.x:r.end.y-r.start.y)/2:null,m=v.index,f=v.point,!(m<=0)&&!v.bendpoint&&(c=y[m-1],p=y[m],l=(0,rc.SO)(c,p),u=(0,rc.Or)(c,p),h=Math.abs(f.x-l.x),d=Math.abs(f.y-l.y),u&&h<=g&&d<=g))?o.start(e,n,v.index):i.start(e,n,v.index,!v.bendpoint),!0}(n,r)}}),e.on("selection.changed",function(e){var t=e.newSelection[0];t&&t.waypoints&&d(t)}),e.on("element.hover",function(e){var t=e.element;t.waypoints&&(d(t),n.registerEvent(e.gfx,"mousemove","element.mousemove"))}),e.on("element.out",function(e){n.unregisterEvent(e.gfx,"mousemove","element.mousemove")}),e.on("element.updateId",function(e){var t=e.element,n=e.newId;if(t.waypoints){var i=p(t);i&&(0,c.Lj)(i,{"data-element-id":n})}}),this.addHandles=d,this.updateHandles=m,this.getBendpointsContainer=p,this.getSegmentDragger=l}rS.$inject=["eventBus","canvas","interactionEvents","bendpointMove","connectionSegmentMove"];var rk=Math.round,rC="reconnectStart",rR="reconnectEnd",rP="updateWaypoints";function rA(e,t,n,i,o,r){this._injector=e,this.start=function(e,t,r,a){var s,c=n.getGraphics(t),p=t.source,l=t.target,u=t.waypoints,h=(s=a||0!==r?a||r!==u.length-1?rP:rR:rC)===rP?"connection.updateWaypoints":"connection.reconnect",d=o.allowed(h,{connection:t,source:p,target:l});!1===d&&(d=o.allowed(h,{connection:t,source:l,target:p})),!1!==d&&i.init(e,"bendpoint.move",{data:{connection:t,connectionGfx:c,context:{allowed:d,bendpointIndex:r,connection:t,source:p,target:l,insert:a,type:s}}})},t.on("bendpoint.move.hover",function(e){var t,n=e.context,i=n.connection,r=i.source,a=i.target,s=e.hover,c=n.type;if(n.hover=s,s){var p=c===rP?"connection.updateWaypoints":"connection.reconnect";if(t=n.allowed=o.allowed(p,{connection:i,source:c===rC?s:r,target:c===rR?s:a})){n.source=c===rC?s:r,n.target=c===rR?s:a;return}!1===t&&(t=n.allowed=o.allowed(p,{connection:i,source:c===rR?s:a,target:c===rC?s:r})),t&&(n.source=c===rR?s:a,n.target=c===rC?s:r)}}),t.on(["bendpoint.move.out","bendpoint.move.cleanup"],function(e){var t=e.context,n=t.type;t.hover=null,t.source=null,t.target=null,n!==rP&&(t.allowed=!1)}),t.on("bendpoint.move.end",function(e){var t=e.context,n=t.allowed,i=t.bendpointIndex,o=t.connection,a=t.insert,s=o.waypoints.slice(),c=t.source,p=t.target,l=t.type,u=t.hints||{},h={x:rk(e.x),y:rk(e.y)};if(!n)return!1;l===rP?(a?s.splice(i,0,h):s[i]=h,u.bendpointMove={insert:a,bendpointIndex:i},s=this.cropWaypoints(o,s),r.updateWaypoints(o,(0,L.Re)(s),u)):(l===rC?(u.docking="source",rM(t)&&(u.docking="target",u.newWaypoints=s.reverse())):l===rR&&(u.docking="target",rM(t)&&(u.docking="source",u.newWaypoints=s.reverse())),r.reconnect(o,c,p,h,u))},this)}function rM(e){var t=e.hover,n=e.source,i=e.target,o=e.type;return o===rC?t&&i&&t===i&&n!==i:o===rR?t&&n&&t===n&&n!==i:void 0}rA.$inject=["injector","eventBus","canvas","dragging","rules","modeling"],rA.prototype.cropWaypoints=function(e,t){var n=this._injector.get("connectionDocking",!1);if(!n)return t;var i=e.waypoints;return e.waypoints=t,e.waypoints=n.getCroppedWaypoints(e),t=e.waypoints,e.waypoints=i,t};var rT="updateWaypoints",rD="connect-ok",rB="connect-not-ok",rj="connect-hover",rN="djs-updating",rO="djs-dragging";function rL(e,t,n,i){this._injector=t;var o=t.get("connectionPreview",!1);n.on("bendpoint.move.start",function(e){var t=e.context,n=t.bendpointIndex,o=t.connection,r=t.insert,a=o.waypoints,s=a.slice();t.waypoints=a,r&&s.splice(n,0,{x:e.x,y:e.y}),o.waypoints=s;var p=t.draggerGfx=rx(i.getLayer("overlays"));(0,c.Sh)(p).add("djs-dragging"),i.addMarker(o,rO),i.addMarker(o,rN)}),n.on("bendpoint.move.hover",function(e){var t=e.context,n=t.allowed,o=t.hover,r=t.type;if(o){if(i.addMarker(o,rj),r===rT)return;n?(i.removeMarker(o,rB),i.addMarker(o,rD)):!1===n&&(i.removeMarker(o,rD),i.addMarker(o,rB))}}),n.on(["bendpoint.move.out","bendpoint.move.cleanup"],1100,function(e){var t=e.context,n=t.hover,o=t.target;n&&(i.removeMarker(n,rj),i.removeMarker(n,o?rD:rB))}),n.on("bendpoint.move.move",function(t){var n=t.context,i=n.allowed,r=n.bendpointIndex,a=n.draggerGfx,s=n.hover,c=n.type,p=n.connection,l=p.source,u=p.target,h=p.waypoints.slice(),d={x:t.x,y:t.y},m=n.hints||{},f={};o&&(m.connectionStart&&(f.connectionStart=m.connectionStart),m.connectionEnd&&(f.connectionEnd=m.connectionEnd),"reconnectStart"===c?rM(n)?(f.connectionEnd=f.connectionEnd||d,f.source=u,f.target=s||l,h=h.reverse()):(f.connectionStart=f.connectionStart||d,f.source=s||l,f.target=u):"reconnectEnd"===c?rM(n)?(f.connectionStart=f.connectionStart||d,f.source=s||u,f.target=l,h=h.reverse()):(f.connectionEnd=f.connectionEnd||d,f.source=l,f.target=s||u):(f.noCropping=!0,f.noLayout=!0,h[r]=d),c===rT&&(h=e.cropWaypoints(p,h)),f.waypoints=h,o.drawPreview(n,i,f)),eh(a,t.x,t.y)},this),n.on(["bendpoint.move.end","bendpoint.move.cancel"],1100,function(e){var t=e.context,n=t.connection,r=t.draggerGfx,a=t.hover,s=t.target,p=t.waypoints;n.waypoints=p,(0,c.Od)(r),i.removeMarker(n,rN),i.removeMarker(n,rO),a&&(i.removeMarker(a,rD),i.removeMarker(a,s?rD:rB)),o&&o.cleanUp(t)})}rL.$inject=["bendpointMove","injector","eventBus","canvas"];var r$="connect-hover",rI="djs-updating";function rz(e,t,n){return{x:"x"===t?n:e.x,y:"y"===t?n:e.y}}function rH(e){return"x"===e?"y":"x"}function rF(e,t,n){var i,o;return e.original?e.original:(i=(0,L.wS)(t),rz(e,o=rH(n),i[o]))}function rG(e,t,n,i,o,r){var a=e.get("connectionDocking",!1);function s(e,t){if(!a)return t;var n,i=e.waypoints;return e.waypoints=t,n=a.getCroppedWaypoints(e),e.waypoints=i,n}function p(e){o.update("connection",e.connection,e.connectionGfx)}this.start=function(e,t,o){var r,a,s,c,p=n.getGraphics(t),l=o-1,u=t.waypoints,h=u[l],d=u[o],m=rb(n,u,e);(a=(0,rc.Or)(h,d))&&(s="v"===a?"x":"y",0===l&&(h=rF(h,t.source,s)),o===u.length-1&&(d=rF(d,t.target,s)),c=m?m.point:{x:(h.x+d.x)/2,y:(h.y+d.y)/2},r={connection:t,segmentStartIndex:l,segmentEndIndex:o,segmentStart:h,segmentEnd:d,axis:s,dragPosition:c},i.init(e,c,"connectionSegment.move",{cursor:"x"===s?"resize-ew":"resize-ns",data:{connection:t,connectionGfx:p,context:r}}))},t.on("connectionSegment.move.start",function(e){var t=e.context,i=e.connection,o=n.getLayer("overlays");t.originalWaypoints=i.waypoints.slice(),t.draggerGfx=rE(o,t.segmentStart,t.segmentEnd),(0,c.Sh)(t.draggerGfx).add("djs-dragging"),n.addMarker(i,rI)}),t.on("connectionSegment.move.move",function(e){var t,n,i,o,r,a,c,l,u,h,d,m,f=e.context,g=f.connection,y=f.segmentStartIndex,v=f.segmentEndIndex,_=f.segmentStart,b=f.segmentEnd,x=f.axis,E=f.originalWaypoints.slice(),w=(t=e["d"+x],rz(_,x,_[x]+t)),S=(n=e["d"+x],rz(b,x,b[x]+n)),k=E.length,C=0;E[y]=w,E[v]=S,y<2&&(d=(0,L.T8)(g.source,w),1===y?"intersect"===d&&(E.shift(),E[0]=w,C--):"intersect"!==d&&(E.unshift(_),C++)),v>k-3&&(m=(0,L.T8)(g.target,S),v===k-2?"intersect"===m&&(E.pop(),E[E.length-1]=S):"intersect"!==m&&E.push(b)),f.newWaypoints=g.waypoints=s(g,E),i=C,r=(o=f.newWaypoints)[f.segmentStartIndex+i],a=o[f.segmentEndIndex+i],l=Math.max(r[c=rH(f.axis)],a[c]),u=Math.min(Math.max(Math.min(r[c],a[c])+20,e[c]),l-20),h=rz(r,c,u),eh(f.draggerGfx,h.x,h.y),f.newSegmentStartIndex=y+C,p(e)}),t.on("connectionSegment.move.hover",function(e){e.context.hover=e.hover,n.addMarker(e.hover,r$)}),t.on(["connectionSegment.move.out","connectionSegment.move.cleanup"],function(e){var t=e.context.hover;t&&n.removeMarker(t,r$)}),t.on("connectionSegment.move.cleanup",function(e){var t=e.context,i=t.connection;t.draggerGfx&&(0,c.Od)(t.draggerGfx),n.removeMarker(i,rI)}),t.on(["connectionSegment.move.cancel","connectionSegment.move.end"],function(e){var t=e.context;t.connection.waypoints=t.originalWaypoints,p(e)}),t.on("connectionSegment.move.end",function(e){var t,n,i=e.context,o=i.connection,a=i.newWaypoints,c=i.newSegmentStartIndex,p=(t=a=a.map(function(e){return{original:e.original,x:Math.round(e.x),y:Math.round(e.y)}}),n=0,{waypoints:t.filter(function(e,i){return!(0,rc.ZS)(t[i-1],t[i+1],e)||(n=i<=c?n-1:n,!1)}),segmentOffset:n}),l=s(o,p.waypoints),u=p.segmentOffset,h={segmentMove:{segmentStartIndex:i.segmentStartIndex,newSegmentStartIndex:c+u}};r.updateWaypoints(o,l,h)})}rG.$inject=["injector","eventBus","canvas","dragging","graphicsFactory","modeling"];var rW=Math.abs,rV=Math.round;function rU(e){return{x:e.x,y:e.y}}function rK(e){return{x:e.x+e.width,y:e.y+e.height}}function rq(e,t){return!e||isNaN(e.x)||isNaN(e.y)?t:{x:rV(e.x+e.width/2),y:rV(e.y+e.height/2)}}function rJ(e,t){var n=e.snapped;return!!n&&("string"==typeof t?n[t]:n.x&&n.y)}function rX(e,t,n){if("string"!=typeof t)throw Error("axis must be in [x, y]");if("number"!=typeof n&&!1!==n)throw Error("value must be Number or false");var i,o=e[t],r=e.snapped=e.snapped||{};return!1===n?r[t]=!1:(r[t]=!0,i=n-o,e[t]+=i,e["d"+t]+=i),o}function rY(e){return e.children||[]}var rZ=Math.abs,rQ=Math.round;function r0(e){function t(e,t){if((0,a.kJ)(e)){for(var n=e.length;n--;)if(10>=rZ(e[n]-t))return e[n]}else{var i=t%(e=+e);if(i<10)return t-i;if(i>e-10)return t-i+e}return t}function n(e,t){if(e.waypoints){var n;return n=function(e,t){for(var n,i=t.waypoints,o=1/0,r=0;r<i.length-1;r++){var a=rg(e,[i[r],i[r+1]]);a<o&&(o=a,n=r)}return[i[n],i[n+1]]}(t,e),rf(t,n)}if(e.width)return{x:rQ(e.width/2+e.x),y:rQ(e.height/2+e.y)}}e.on("connectionSegment.move.move",1500,function(e){var i,o,r=function(e){var t=e.context,i=t.snapPoints,o=t.connection,r=o.waypoints,s=t.segmentStart,c=t.segmentStartIndex,p=t.segmentEnd,l=t.segmentEndIndex,u=t.axis;if(i)return i;var h=[r[c-1],s,p,r[l+1]];return c<2&&h.unshift(n(o.source,e)),l>r.length-3&&h.unshift(n(o.target,e)),t.snapPoints=i={horizontal:[],vertical:[]},(0,a.Ed)(h,function(e){e&&(e=e.original||e,"y"===u&&i.horizontal.push(e.y),"x"===u&&i.vertical.push(e.x))}),i}(e),s=e.x,c=e.y;if(r){i=t(r.vertical,s),o=t(r.horizontal,c);var p=s-i,l=c-o;(0,a.f0)(e,{dx:e.dx-p,dy:e.dy-l,x:i,y:o}),(p||-1!==r.vertical.indexOf(s))&&rX(e,"x",i),(l||-1!==r.horizontal.indexOf(c))&&rX(e,"y",o)}}),e.on(["connect.hover","connect.move","connect.end"],1500,function(e){var t=e.context.hover,i=t&&n(t,e);(0,tH.Ho)(t)&&i&&i.x&&i.y&&(rX(e,"x",i.x),rX(e,"y",i.y))}),e.on(["bendpoint.move.move","bendpoint.move.end"],1500,function(e){var i,o,r=e.context,s=function(e){var t=e.snapPoints,n=e.connection.waypoints,i=e.bendpointIndex;if(t)return t;var o=[n[i-1],n[i+1]];return e.snapPoints=t={horizontal:[],vertical:[]},(0,a.Ed)(o,function(e){e&&(e=e.original||e,t.horizontal.push(e.y),t.vertical.push(e.x))}),t}(r),c=r.hover,p=c&&n(c,e),l=e.x,u=e.y;if(s){i=t(p?s.vertical.concat([p.x]):s.vertical,l),o=t(p?s.horizontal.concat([p.y]):s.horizontal,u);var h=l-i,d=u-o;(0,a.f0)(e,{dx:e.dx-h,dy:e.dy-d,x:e.x-h,y:e.y-d}),(h||-1!==s.vertical.indexOf(l))&&rX(e,"x",i),(d||-1!==s.horizontal.indexOf(u))&&rX(e,"y",o)}})}function r1(e,t,n,i){function o(e,t){return i.allowed("connection.create",{source:e,target:t})}e.on("connect.hover",function(e){var t,n=e.context,i=n.start,r=e.hover;if(n.hover=r,t=n.canExecute=o(i,r),!(0,a.kK)(t)){if(!1!==t){n.source=i,n.target=r;return}t=n.canExecute=o(r,i),(0,a.kK)(t)||!1===t||(n.source=r,n.target=i)}}),e.on(["connect.out","connect.cleanup"],function(e){var t=e.context;t.hover=null,t.source=null,t.target=null,t.canExecute=!1}),e.on("connect.end",function(e){var t=e.context,i=t.canExecute,o=t.connectionStart,r={x:e.x,y:e.y},s=t.source,c=t.target;if(!i)return!1;var p=null,l={connectionStart:r2(t)?r:o,connectionEnd:r2(t)?o:r};(0,a.Kn)(i)&&(p=i),t.connection=n.connect(s,c,p,l)}),this.start=function(e,n,i,o){(0,a.Kn)(i)||(o=i,i=(0,L.wS)(n)),t.init(e,"connect",{autoActivate:o,data:{shape:n,context:{start:n,connectionStart:i}}})}}function r2(e){var t=e.hover,n=e.source,i=e.target;return t&&n&&t===n&&n!==i}r0.$inject=["eventBus"],r1.$inject=["eventBus","dragging","modeling","rules"];var r5="connect-ok",r3="connect-not-ok";function r6(e,t,n){var i=e.get("connectionPreview",!1);i&&t.on("connect.move",function(e){var t=e.context,n=t.canExecute,o=t.hover,r=t.source,a=t.start,s=t.startPosition,c=t.target,p=t.connectionStart||s,l=t.connectionEnd||{x:e.x,y:e.y},u=p,h=l;r2(t)&&(u=l,h=p),i.drawPreview(t,n,{source:r||a,target:c||o,connectionStart:u,connectionEnd:h})}),t.on("connect.hover",900,function(e){var t=e.context,i=e.hover,o=t.canExecute;null!==o&&n.addMarker(i,o?r5:r3)}),t.on(["connect.out","connect.cleanup"],1100,function(e){var t=e.hover;t&&(n.removeMarker(t,r5),n.removeMarker(t,r3))}),i&&t.on("connect.cleanup",function(e){i.cleanUp(e.context)})}r6.$inject=["injector","eventBus","canvas"];var r4={__depends__:[nV,rs,ro],__init__:["connectPreview"],connect:["type",r1],connectPreview:["type",r6]};function r9(e,t,n,i){this._canvas=t,this._graphicsFactory=n,this._elementFactory=i,this._connectionDocking=e.get("connectionDocking",!1),this._layouter=e.get("layouter",!1)}r9.$inject=["injector","canvas","graphicsFactory","elementFactory"],r9.prototype.drawPreview=function(e,t,n){n=n||{};var i,o,r,a=e.connectionPreviewGfx,s=e.getConnection,p=n.source,l=n.target,u=n.waypoints,h=n.connectionStart,d=n.connectionEnd,m=n.noLayout,f=n.noCropping,g=n.noNoop,y=this;if(a||(a=e.connectionPreviewGfx=this.createConnectionPreviewGfx()),(0,c.ZH)(a),s||(s=e.getConnection=(i=function(e,t,n){return y.getConnection(e,t,n)},o={},function(e){var t=JSON.stringify(e),n=o[t];return n||(n=o[t]=i.apply(null,arguments)),n})),t&&(r=s(t,p,l)),!r){g||this.drawNoopPreview(a,n);return}r.waypoints=u||[],this._layouter&&!m&&(r.waypoints=this._layouter.layoutConnection(r,{source:p,target:l,connectionStart:h,connectionEnd:d,waypoints:n.waypoints||r.waypoints})),r.waypoints&&r.waypoints.length||(r.waypoints=[p?(0,L.wS)(p):h,l?(0,L.wS)(l):d]),this._connectionDocking&&(p||l)&&!f&&(r.waypoints=this._connectionDocking.getCroppedWaypoints(r,p,l)),this._graphicsFactory.drawConnection(a,r,{stroke:"var(--element-dragger-color)"})},r9.prototype.drawNoopPreview=function(e,t){var n=t.source,i=t.target,o=t.connectionStart||(0,L.wS)(n),r=t.connectionEnd||(0,L.wS)(i),a=this.cropWaypoints(o,r,n,i),s=this.createNoopConnection(a[0],a[1]);(0,c.R3)(e,s)},r9.prototype.cropWaypoints=function(e,t,n,i){var o=this._graphicsFactory,r=n&&o.getShapePath(n),a=i&&o.getShapePath(i),s=o.getConnectionPath({waypoints:[e,t]});return[e=n&&(0,L.Hz)(r,s,!0)||e,t=i&&(0,L.Hz)(a,s,!1)||t]},r9.prototype.cleanUp=function(e){e&&e.connectionPreviewGfx&&(0,c.Od)(e.connectionPreviewGfx)},r9.prototype.getConnection=function(e){var t=(0,a.Kn)(e)?e:{};return this._elementFactory.createConnection(t)},r9.prototype.createConnectionPreviewGfx=function(){var e=(0,c.Ue)("g");return(0,c.Lj)(e,{pointerEvents:"none"}),(0,c.Sh)(e).add("djs-dragger"),(0,c.R3)(this._canvas.getActiveLayer(),e),e},r9.prototype.createNoopConnection=function(e,t){return E([e,t],{stroke:"#333",strokeDasharray:[1],strokeWidth:2,"pointer-events":"none"})};let r8=new no.Z("ps");var r7=["marker-start","marker-mid","marker-end"],ae=["circle","ellipse","line","path","polygon","polyline","path","rect"];function at(e,t,n,i){this._elementRegistry=e,this._canvas=n,this._styles=i}at.$inject=["elementRegistry","eventBus","canvas","styles"],at.prototype.cleanUp=function(){console.warn("PreviewSupport#cleanUp is deprecated and will be removed in future versions. You do not need to manually clean up previews anymore. cf. https://github.com/bpmn-io/diagram-js/pull/906")},at.prototype.getGfx=function(e){return this._elementRegistry.getGraphics(e)},at.prototype.addDragger=function(e,t,n,i="djs-dragger"){n=n||this.getGfx(e);var o=(0,c.d9)(n),r=n.getBoundingClientRect();return this._cloneMarkers((0,el.s)(o),i),(0,c.Lj)(o,this._styles.cls(i,[],{x:r.top,y:r.left})),(0,c.R3)(t,o),(0,c.Lj)(o,"data-preview-support-element-id",e.id),o},at.prototype.addFrame=function(e,t){var n=(0,c.Ue)("rect",{class:"djs-resize-overlay",width:e.width,height:e.height,x:e.x,y:e.y});return(0,c.R3)(t,n),(0,c.Lj)(n,"data-preview-support-element-id",e.id),n},at.prototype._cloneMarkers=function(e,t="djs-dragger",n=e){var i=this;e.childNodes&&e.childNodes.forEach(e=>{i._cloneMarkers(e,t,n)}),-1!==ae.indexOf(e.nodeName)&&r7.forEach(function(o){if((0,c.Lj)(e,o)){var r,a,p=(r=i._canvas.getContainer(),a=(0,c.Lj)(e,o).match(/url\(['"]?#([^'"]*)['"]?\)/)[1],(0,s.IO)("marker#"+a,r||document));p&&i._cloneMarker(n,e,p,o,t)}})},at.prototype._cloneMarker=function(e,t,n,i,o="djs-dragger"){var r=[n.id,o,r8.next()].join("-"),a=(0,s.IO)("marker#"+n.id,e);e=e||this._canvas._svg;var p=a||(0,c.d9)(n);p.id=r,(0,c.Sh)(p).add(o);var l=(0,s.IO)(":scope > defs",e);l||(l=(0,c.Ue)("defs"),(0,c.R3)(e,l)),(0,c.R3)(l,p);var u="url(#"+p.id+")";(0,c.Lj)(t,i,u)};var an={__init__:["previewSupport"],previewSupport:["type",at]};let ai="complex-preview";class ao{constructor(e,t,n){this._canvas=e,this._graphicsFactory=t,this._previewSupport=n,this._markers=[]}create(e){this.cleanUp();let{created:t=[],moved:n=[],removed:i=[],resized:o=[]}=e,r=this._canvas.getLayer(ai);t.filter(e=>!e.hidden).forEach(e=>{let t;(0,tH.Ho)(e)?(t=this._graphicsFactory._createContainer("connection",(0,c.Ue)("g")),this._graphicsFactory.drawConnection((0,el.s)(t),e)):(t=this._graphicsFactory._createContainer("shape",(0,c.Ue)("g")),this._graphicsFactory.drawShape((0,el.s)(t),e),eh(t,e.x,e.y)),this._previewSupport.addDragger(e,r,t)}),n.forEach(({element:e,delta:t})=>{this._previewSupport.addDragger(e,r,void 0,"djs-dragging"),this._canvas.addMarker(e,"djs-element-hidden"),this._markers.push([e,"djs-element-hidden"]);let n=this._previewSupport.addDragger(e,r);(0,tH.Ho)(e)?eh(n,t.x,t.y):eh(n,e.x+t.x,e.y+t.y)}),i.forEach(e=>{this._previewSupport.addDragger(e,r,void 0,"djs-dragging"),this._canvas.addMarker(e,"djs-element-hidden"),this._markers.push([e,"djs-element-hidden"])}),o.forEach(({shape:e,bounds:t})=>{this._canvas.addMarker(e,"djs-hidden"),this._markers.push([e,"djs-hidden"]),this._previewSupport.addDragger(e,r,void 0,"djs-dragging");let n=this._graphicsFactory._createContainer("shape",(0,c.Ue)("g"));this._graphicsFactory.drawShape((0,el.s)(n),e,{width:t.width,height:t.height}),eh(n,t.x,t.y),this._previewSupport.addDragger(e,r,n)})}cleanUp(){(0,c.ZH)(this._canvas.getLayer(ai)),this._markers.forEach(([e,t])=>this._canvas.removeMarker(e,t)),this._markers=[]}show(){this._canvas.showLayer(ai)}hide(){this._canvas.hideLayer(ai)}}ao.$inject=["canvas","graphicsFactory","previewSupport"];var ar=["top","bottom","left","right"];function aa(e,t){function n(e){if(!(!tW(e)||(0,tH.Ho)(e))){var n=function(e){var t=(0,L.wS)(e.label),n=as((0,L.wS)(e),t);if(-1!==ar.indexOf(n)){var i=(o=(0,L.wS)(e),[].concat(e.incoming.map(function(e){return e.waypoints[e.waypoints.length-2]}),e.outgoing.map(function(e){return e.waypoints[1]})).map(function(e){return as(o,e)}));if(e.host){var o,r,a,s,c,p=(a=e.host,s=(0,L.wS)(e),r=(c=(0,L.T8)(s,a)).indexOf("-")>=0?c.split("-"):[c],ar.filter(function(e){return -1===r.indexOf(e)}));i=i.concat(p)}var l=ar.filter(function(e){return -1===i.indexOf(e)});if(-1===l.indexOf(n))return l[0]}}(e);n&&function(e,n){var i,o=(0,L.wS)(e),r=e.label,a=(0,L.wS)(r);if(r.parent){var s=(0,L.JA)(e);switch(n){case"top":i={x:o.x,y:s.top-10-r.height/2};break;case"left":i={x:s.left-10-r.width/2,y:o.y};break;case"bottom":i={x:o.x,y:s.bottom+10+r.height/2};break;case"right":i={x:s.right+10+r.width/2,y:o.y}}var c=ii(i,a);t.moveShape(r,c)}}(e,n)}}nd.call(this,e),this.postExecuted(["connection.create","connection.layout","connection.updateWaypoints"],function(e){var t=e.context,i=t.connection,o=i.source,r=i.target;!1!==(t.hints||{}).createElementsBehavior&&(n(o),n(r))}),this.postExecuted(["label.create"],function(e){var t=e.context,i=t.shape;!1!==(t.hints||{}).createElementsBehavior&&n(i.labelTarget)}),this.postExecuted(["elements.create"],function(e){var t=e.context,i=t.elements;!1!==(t.hints||{}).createElementsBehavior&&i.forEach(function(e){n(e)})})}function as(e,t){return(0,L.T8)(t,e,5)}function ac(e){nd.call(this,e),this.preExecute("shape.append",function(e){var t=e.source,n=e.shape;e.position||(tx(n,"bpmn:TextAnnotation")?e.position={x:t.x+t.width/2+75,y:t.y-50-n.height/2}:e.position={x:t.x+t.width+80+n.width/2,y:t.y+t.height/2})},!0)}function ap(e,t){e.invoke(nd,this),this.postExecute("shape.move",function(e){var n=e.newParent,i=e.shape,o=(0,a.hX)(i.incoming.concat(i.outgoing),function(e){return tx(e,"bpmn:Association")});(0,a.Ed)(o,function(e){t.moveConnection(e,{x:0,y:0},n)})},!0)}function al(e,t){t.invoke(nd,this),this._bpmnReplace=e;var n=this;this.postExecuted("elements.create",500,function(e){var t=e.elements;1===(t=t.filter(function(e){var t=e.host;return au(e,t)})).length&&t.map(function(e){return t.indexOf(e)}).forEach(function(i){var o=t[i];e.elements[i]=n._replaceShape(t[i],o)})},!0),this.preExecute("elements.move",500,function(e){var t=e.shapes,i=e.newHost;if(1===t.length){var o=t[0];au(o,i)&&(e.shapes=[n._replaceShape(o,i)])}},!0)}function au(e,t){return!(0,tH.j_)(e)&&tE(e,["bpmn:IntermediateThrowEvent","bpmn:IntermediateCatchEvent"])&&!!t}function ah(e,t){function n(e){return(0,a.hX)(e.attachers,function(e){return tx(e,"bpmn:BoundaryEvent")})}nd.call(this,e),this.postExecute("connection.create",function(e){var i=e.context.source,o=e.context.target,r=n(o);tx(i,"bpmn:EventBasedGateway")&&tx(o,"bpmn:ReceiveTask")&&r.length>0&&t.removeElements(r)}),this.postExecute("connection.reconnect",function(e){var i=e.context.oldSource,o=e.context.newSource;tx(i,"bpmn:Gateway")&&tx(o,"bpmn:EventBasedGateway")&&(0,a.Ed)(o.outgoing,function(e){var i=e.target,o=n(i);tx(i,"bpmn:ReceiveTask")&&o.length>0&&t.removeElements(o)})})}function ad(e,t,n){function i(e){t.updateProperties(e,{isForCompensation:!0})}function o(e){t.updateProperties(e,{isForCompensation:void 0})}nd.call(this,e),this.preExecute("shape.replace",function(e){let{newData:n,oldShape:i}=e;if(af(e.oldShape)&&"bpmn:CompensateEventDefinition"!==n.eventDefinitionType||"bpmn:BoundaryEvent"!==n.type){let t=i.outgoing.find(({target:e})=>am(e));t&&t.target&&(e._connectionTarget=t.target)}else if(!af(e.oldShape)&&"bpmn:CompensateEventDefinition"===n.eventDefinitionType&&"bpmn:BoundaryEvent"===n.type){let n=i.outgoing.find(({target:e})=>ag(e));n&&n.target&&(e._connectionTarget=n.target),function(e){let n=e.outgoing.filter(e=>tx(e,"bpmn:SequenceFlow"));t.removeElements(n)}(i)}},!0),this.postExecuted("shape.replace",function(e){let{_connectionTarget:n,newShape:i}=e;n&&t.connect(i,n)},!0),this.preExecute("connection.create",function(e){let n=e.connection,o=e.source,r=e.target;af(o)&&ag(r)&&(i(r),function(e,n){e.outgoing.filter(e=>tx(e,"bpmn:Association")).filter(e=>am(e.target)&&!n.includes(e)).forEach(e=>t.removeConnection(e))}(o,[n]))},!0),this.postExecuted("connection.delete",function(e){let t=e.source,n=e.target;af(t)&&am(n)&&o(n)},!0),this.postExecuted("connection.reconnect",function(e){let t=e.newTarget,n=e.oldSource,r=e.oldTarget;r!==t&&(am(r)&&o(r),af(n)&&ag(t)&&i(t))},!0),this.postExecuted("element.updateProperties",function(e){let{element:i}=e;am(i)?(function(e){for(let i of e.incoming)n.canConnect(i.source,e)||t.removeConnection(i);for(let i of e.outgoing)n.canConnect(e,i.target)||t.removeConnection(i)}(i),function(e){let n=e.attachers.slice();n.length&&t.removeElements(n)}(i)):ag(i)&&function(e){let n=e.incoming.filter(e=>af(e.source));t.removeElements(n)}(i)},!0)}function am(e){let t=tw(e);return t&&t.get("isForCompensation")}function af(e){return e&&tx(e,"bpmn:BoundaryEvent")&&tz(e,"bpmn:CompensateEventDefinition")}function ag(e){return e&&tx(e,"bpmn:Activity")&&!tI(e)}function ay(e){e.invoke(nd,this),this.preExecute("shape.create",1500,function(e){var t=e.context,n=t.parent,i=t.shape;tx(n,"bpmn:Lane")&&!tx(i,"bpmn:Lane")&&(t.parent=oQ(n,"bpmn:Participant"))})}function av(e,t){nd.call(this,e),this.preExecute("shape.create",function(e){var n=e.context.shape;if(tx(n,"bpmn:DataObjectReference")&&"label"!==n.type){var i=t.create("bpmn:DataObject");n.businessObject.dataObjectRef=i}})}function a_(e,t,n){function i(){var t=e.getRootElement();return tx(t,"bpmn:Collaboration")?t:n.makeCollaboration()}nd.call(this,t),t.on(["create.start","shape.move.start"],2e3,function(t){var n=t.context,i=n.shape,o=e.getRootElement();if(tx(i,"bpmn:Participant")&&tx(o,"bpmn:Process")&&o.children.length){var r=o.children.filter(function(e){return!tx(e,"bpmn:Group")&&!(0,tH.j_)(e)&&!(0,tH.Ho)(e)});if(r.length){var s,c,p,l,u=P(r),h=(s={width:(s=u).width+40+30,height:s.height+40},{x:-(c=Math.max(i.width,s.width))/2,y:-(p=Math.max(i.height,s.height))/2,width:c,height:p});(0,a.f0)(i,h),n.createConstraints=(l=u,{bottom:(l=(0,L.JA)(l)).top+i.height/2-20,left:l.right-i.width/2+20,top:l.bottom-i.height/2+20,right:l.left+i.width/2-20-30})}}}),t.on("create.start",2e3,function(n){var i=n.context.shape,o=e.getRootElement(),r=e.getGraphics(o);function a(e){e.element=o,e.gfx=r}tx(i,"bpmn:Participant")&&tx(o,"bpmn:Process")&&(t.on("element.hover",2e3,a),t.once("create.cleanup",function(){t.off("element.hover",a)}))}),this.preExecute("elements.create",2e3,function(e){var t,n=e.elements,o=e.parent,r=(0,a.sE)(n,function(e){return tx(e,"bpmn:Participant")});r&&tx(o,"bpmn:Process")&&(e.parent=i(),(t=e.hints=e.hints||{}).participant=r,t.process=o,t.processRef=tw(r).get("processRef"))},!0),this.preExecute("shape.create",function(e){var t=e.parent,n=e.shape;tx(n,"bpmn:Participant")&&tx(t,"bpmn:Process")&&(e.parent=i(),e.process=t,e.processRef=tw(n).get("processRef"))},!0),this.execute("shape.create",function(e){var t=e.hints||{},n=e.process||t.process,i=e.shape,o=t.participant;n&&(!o||i===o)&&tw(i).set("processRef",tw(n))},!0),this.revert("shape.create",function(e){var t=e.hints||{},n=e.process||t.process,i=e.processRef||t.processRef,o=e.shape,r=t.participant;n&&(!r||o===r)&&tw(o).set("processRef",i)},!0),this.postExecute("shape.create",function(e){var t=e.hints||{},i=e.process||e.hints.process,o=e.shape,r=t.participant;if(i){var a=i.children.slice();r?o===r&&n.moveElements(a,{x:0,y:0},r):n.moveElements(a,{x:0,y:0},o)}},!0)}i(aa,nd),aa.$inject=["eventBus","modeling"],i(ac,nd),ac.$inject=["eventBus"],i(ap,nd),ap.$inject=["injector","modeling"],al.$inject=["bpmnReplace","injector"],i(al,nd),al.prototype._replaceShape=function(e,t){var n,i=(n=tw(e).eventDefinitions)&&n[0],o={type:"bpmn:BoundaryEvent",host:t};return i&&(o.eventDefinitionType=i.$type),this._bpmnReplace.replaceElement(e,o,{layoutConnection:!1})},ah.$inject=["eventBus","modeling"],i(ah,nd),i(ad,nd),ad.$inject=["eventBus","modeling","bpmnRules"],ay.$inject=["injector"],i(ay,nd),av.$inject=["eventBus","bpmnFactory"],i(av,nd),a_.$inject=["canvas","eventBus","modeling"],i(a_,nd);var ab="__targetRef_placeholder";function ax(e,t){function n(e,n){var i=e.get("properties"),o=(0,a.sE)(i,function(e){return e.name===ab});return!o&&n&&N(i,o=t.create("bpmn:Property",{name:ab})),o}function i(e,t){var i,o=n(e);o&&(i=e.get("dataInputAssociations"),(0,a.sE)(i,function(e){return e!==t&&e.targetRef===o})||j(e.get("properties"),o))}function o(e){var t,o=e.context,r=o.connection,a=r.businessObject,s=r.target,c=s&&s.businessObject,p=o.newTarget,l=p&&p.businessObject,u=o.oldTarget||o.target,h=u&&u.businessObject,d=r.businessObject;h&&h!==c&&i(h,a),l&&l!==c&&i(l,a),c?(t=n(c,!0),d.targetRef=t):d.targetRef=null}nd.call(this,e),this.executed(["connection.create","connection.delete","connection.move","connection.reconnect"],aE(o)),this.reverted(["connection.create","connection.delete","connection.move","connection.reconnect"],aE(o))}function aE(e){return function(t){if(tx(t.context.connection,"bpmn:DataInputAssociation"))return e(t)}}function aw(e){this._bpmnUpdater=e}function aS(e,t,n,i){function o(e){return e.children.filter(function(e){return tx(e,"bpmn:DataStoreReference")&&!e.labelTarget})}function r(e,i){var o=e.businessObject||e;if(i=i||n.filter(function(e){return tx(e,"bpmn:Participant")&&tw(e).processRef})[0]){var r=i.businessObject||i;t.execute("dataStore.updateContainment",{dataStoreBo:o,dataStoreDi:tS(e),newSemanticParent:r.processRef||r,newDiParent:tS(i)})}}nd.call(this,i),t.registerHandler("dataStore.updateContainment",aw),this.preExecute("shape.create",function(e){var t=e.context,n=t.shape;tx(n,"bpmn:DataStoreReference")&&"label"!==n.type&&(t.hints||(t.hints={}),t.hints.autoResize=!1)}),this.preExecute("elements.move",function(e){var t=e.context,n=t.shapes;n.filter(function(e){return tx(e,"bpmn:DataStoreReference")}).length&&(t.hints||(t.hints={}),t.hints.autoResize=n.filter(function(e){return!tx(e,"bpmn:DataStoreReference")}))}),this.postExecute("shape.create",function(e){var t=e.context.shape,n=t.parent;tx(t,"bpmn:DataStoreReference")&&"label"!==t.type&&tx(n,"bpmn:Collaboration")&&r(t)}),this.postExecute("shape.move",function(e){var t=e.context,n=t.shape,i=t.oldParent,o=n.parent;!tx(i,"bpmn:Collaboration")&&tx(n,"bpmn:DataStoreReference")&&"label"!==n.type&&tx(o,"bpmn:Collaboration")&&r(n,tx(i,"bpmn:Participant")?i:function(e,t){for(;e.parent;){if(tx(e.parent,t))return e.parent;e=e.parent}}(i,"bpmn:Participant"))}),this.postExecute("shape.delete",function(t){var n=t.context.shape,i=e.getRootElement();tE(n,["bpmn:Participant","bpmn:SubProcess"])&&tx(i,"bpmn:Collaboration")&&o(i).filter(function(e){return function(e,t){for(var n=e.businessObject||e,i=t.businessObject||t;n.$parent;){if(n.$parent===i.processRef||i)return!0;n=n.$parent}return!1}(e,n)}).forEach(function(e){r(e)})}),this.postExecute("canvas.updateRoot",function(e){var t=e.context,n=t.oldRoot,i=t.newRoot;o(n).forEach(function(e){tx(i,"bpmn:Process")&&r(e,i)})})}ax.$inject=["eventBus","bpmnFactory"],i(ax,nd),aw.$inject=["bpmnUpdater"],aw.prototype.execute=function(e){var t=e.dataStoreBo,n=e.dataStoreDi,i=e.newSemanticParent,o=e.newDiParent;return e.oldSemanticParent=t.$parent,e.oldDiParent=n.$parent,this._bpmnUpdater.updateSemanticParent(t,i),this._bpmnUpdater.updateDiParent(n,o),[]},aw.prototype.revert=function(e){var t=e.dataStoreBo,n=e.dataStoreDi,i=e.oldSemanticParent,o=e.oldDiParent;return this._bpmnUpdater.updateSemanticParent(t,i),this._bpmnUpdater.updateDiParent(n,o),[]},aS.$inject=["canvas","commandStack","elementRegistry","eventBus"],i(aS,nd);var ak=Math.max,aC=Math.min;function aR(e,t){return{top:e.top-t.top,right:e.right-t.right,bottom:e.bottom-t.bottom,left:e.left-t.left}}function aP(e,t,n){var i=t[e],o=n.min&&n.min[e],r=n.max&&n.max[e];return(0,a.hj)(o)&&(i=(/top|left/.test(e)?aC:ak)(i,o)),(0,a.hj)(r)&&(i=(/top|left/.test(e)?ak:aC)(i,r)),i}function aA(e,t){return void 0!==e?e:20}function aM(e){return!e.waypoints&&"label"!==e.type}function aT(e,t){var n,i,o,r,s,c;if((n=void 0===e.length?(0,a.hX)(e.children,aM):e).length)return i=P(n),"object"==typeof t?(o=aA(t.left),r=aA(t.right),s=aA(t.top),c=aA(t.bottom)):o=r=s=c=aA(t),{x:i.x-o,y:i.y-s,width:i.width+o+r,height:i.height+s+c}}var aD=Math.abs,aB=["bpmn:Participant","bpmn:Process","bpmn:SubProcess"];function aj(e,t){return t=t||[],e.children.filter(function(e){tx(e,"bpmn:Lane")&&(aj(e,t),t.push(e))}),t}function aN(e){return e.children.filter(function(e){return tx(e,"bpmn:Lane")})}function aO(e){return oQ(e,aB)||e}function aL(e,t){nd.call(this,e),this.postExecuted("shape.delete",500,function(e){var n,i,o,r,a,s,c,p,l,u,h,d=e.context,m=d.hints,f=d.shape,g=d.oldParent;tx(f,"bpmn:Lane")&&(!m||!m.nested)&&(s=t$(f),c=aN(g),p=[],l=[],u=[],h=[],C(c,function(e){return s?e.y>f.y?l.push(e):p.push(e):e.x>f.x?h.push(e):u.push(e),e.children}),c.length&&(n=s?l.length&&p.length?f.height/2:f.height:h.length&&u.length?f.width/2:f.width,p.length&&(i=t.calculateAdjustments(p,"y",n,f.y-10),t.makeSpace(i.movingShapes,i.resizingShapes,{x:0,y:n},"s")),l.length&&(o=t.calculateAdjustments(l,"y",-n,f.y+f.height+10),t.makeSpace(o.movingShapes,o.resizingShapes,{x:0,y:-n},"n")),u.length&&(r=t.calculateAdjustments(u,"x",n,f.x-10),t.makeSpace(r.movingShapes,r.resizingShapes,{x:n,y:0},"e")),h.length&&(a=t.calculateAdjustments(h,"x",-n,f.x+f.width+10),t.makeSpace(a.movingShapes,a.resizingShapes,{x:-n,y:0},"w"))))})}function a$(e,t){t.invoke(nd,this),this._bpmnReplace=e;var n=this;this.postExecuted("elements.create",500,function(e){var t=e.elements;t.filter(function(e){var t=e.host;return aI(e,t)}).map(function(e){return t.indexOf(e)}).forEach(function(i){e.elements[i]=n._replaceShape(t[i])})},!0),this.preExecute("elements.move",500,function(e){var t=e.shapes,i=e.newHost;t.forEach(function(e,o){var r=e.host;aI(e,-1!==t.indexOf(r)?r:i)&&(t[o]=n._replaceShape(e))})},!0)}function aI(e,t){return!(0,tH.j_)(e)&&tx(e,"bpmn:BoundaryEvent")&&!t}function az(e,t,n){function i(e,i,o){var r,s,c,p,l,u,h,d,m=i.waypoints,f=e.outgoing.slice(),g=e.incoming.slice(),y=rh(m,r=(0,a.hj)(o.width)?(0,L.wS)(o):o);if(y){if(s=m.slice(0,y.index),c=m.slice(y.index+(y.bendpoint?1:0)),!s.length||!c.length)return;p=y.bendpoint?m[y.index]:r,1!==s.length&&aH(e,s[s.length-1])||s.push(aF(p)),1!==c.length&&aH(e,c[0])||c.unshift(aF(p))}l=i.source,u=i.target,t.canConnect(l,e,i)&&(n.reconnectEnd(i,e,s||r),h=i),t.canConnect(e,u,i)&&(h?d=n.connect(e,u,{type:i.type,waypoints:c}):(n.reconnectStart(i,e,c||r),d=i));var v=[].concat(h&&(0,a.hX)(g,function(e){return e.source===h.source})||[],d&&(0,a.hX)(f,function(e){return e.target===d.target})||[]);v.length&&n.removeElements(v)}nd.call(this,e),this.preExecute("elements.move",function(e){var n=e.newParent,i=e.shapes,o=e.delta,r=i[0];if(r&&n){n&&n.waypoints&&(e.newParent=n=n.parent);var s=(0,L.wS)(r),c={x:s.x+o.x,y:s.y+o.y},p=(0,a.sE)(n.children,function(e){return t.canInsert(i,e)&&rh(e.waypoints,c)});p&&(e.targetFlow=p,e.position=c)}},!0),this.postExecuted("elements.move",function(e){var t=e.shapes,n=e.targetFlow,o=e.position;n&&i(t[0],n,o)},!0),this.preExecute("shape.create",function(e){var n=e.parent,i=e.shape;t.canInsert(i,n)&&(e.targetFlow=n,e.parent=n.parent)},!0),this.postExecuted("shape.create",function(e){var t=e.shape,n=e.targetFlow,o=e.position;n&&i(t,n,o)},!0)}function aH(e,t){var n=t.x,i=t.y;return n>=e.x&&n<=e.x+e.width&&i>=e.y&&i<=e.y+e.height}function aF(e){return(0,a.f0)({},e)}function aG(e,t){nd.call(this,e),this.preExecuted("connection.create",function(e){var n=e.context,i=n.connection,o=n.source,r=n.target,a=n.hints;(!a||!1!==a.createElementsBehavior)&&aW(i)&&(tx(o,"bpmn:EventBasedGateway")?r.incoming.filter(e=>e!==i&&aW(e)):r.incoming.filter(e=>e!==i&&aW(e)&&tx(e.source,"bpmn:EventBasedGateway"))).forEach(function(e){t.removeConnection(e)})}),this.preExecuted("shape.replace",function(e){var n=e.context.newShape;tx(n,"bpmn:EventBasedGateway")&&n.outgoing.filter(aW).reduce(function(e,t){return e.includes(t.target)?e:e.concat(t.target)},[]).forEach(function(e){e.incoming.filter(aW).forEach(function(i){let o=e.incoming.filter(aW).filter(function(e){return e.source===n});(i.source!==n||o.length>1)&&t.removeConnection(i)})})})}function aW(e){return tx(e,"bpmn:SequenceFlow")}function aV(e,t,n){t.on(["create.hover","create.move","create.out","create.end","shape.move.hover","shape.move.move","shape.move.out","shape.move.end"],1500,function(t){var i=t.context.shape||t.shape,o=t.hover;tx(o,"bpmn:Lane")&&!tE(i,["bpmn:Lane","bpmn:Participant"])&&(t.hover=aO(o),t.hoverGfx=e.getGraphics(t.hover));var r=n.getRootElement();o!==r&&(i.labelTarget||tE(i,["bpmn:Group","bpmn:TextAnnotation"]))&&(t.hover=r,t.hoverGfx=e.getGraphics(t.hover))}),t.on(["connect.hover","connect.out","connect.end","connect.cleanup","global-connect.hover","global-connect.out","global-connect.end","global-connect.cleanup"],1500,function(t){var n=t.hover;tx(n,"bpmn:Lane")&&(t.hover=aO(n)||n,t.hoverGfx=e.getGraphics(t.hover))}),t.on(["bendpoint.move.hover"],1500,function(t){var n=t.context,i=t.hover,o=n.type;tx(i,"bpmn:Lane")&&/reconnect/.test(o)&&(t.hover=aO(i)||i,t.hoverGfx=e.getGraphics(t.hover))}),t.on(["connect.start"],1500,function(e){var t=e.context,n=t.start;tx(n,"bpmn:Lane")&&(t.start=aO(n)||n)}),t.on("shape.move.start",2e3,function(e){var t=e.shape;tx(t,"bpmn:Lane")&&(e.shape=aO(t)||t)}),t.on("spaceTool.move",2e3,function(e){var t=e.hover;t&&tx(t,"bpmn:Lane")&&(e.hover=aO(t))})}function aU(e,t,n,i,o,r){function a(e,t,i){var o,r,a=n.filter(function(e){return tx(e,"bpmn:Group")}).filter(function(e){return e.businessObject!==i});t&&!a.some(function(e){var n=tw(e);return(n.categoryValueRef&&n.categoryValueRef.$parent)===t})&&(o=t.$parent)&&(j(o.get("rootElements"),t),t.$parent=null),e&&!a.some(function(t){return tw(t).categoryValueRef===e})&&(r=e.$parent)&&(j(r.get("categoryValue"),e),e.$parent=null)}function s(e,n){var i;return i=t.getDefinitions(),N(n.get("categoryValue"),e),e.$parent=n,N(i.get("rootElements"),n),n.$parent=i,e}function c(n,i){var o=tw(n),r=o.categoryValueRef;r||(r=o.categoryValueRef=i.categoryValue=i.categoryValue||e.create("bpmn:CategoryValue"));var a=r.$parent;a||(a=r.$parent=i.category=i.category||e.create("bpmn:Category")),s(r,a,t.getDefinitions())}function p(e,t){var n=t.category,i=t.categoryValue,o=tw(e);i?(o.categoryValueRef=null,a(i,n,o)):a(null,o.categoryValueRef.$parent,o)}function l(t,n){var i=e.create(t.$type);return r.copyElement(t,i,null,n)}o.invoke(nd,this),this.execute("label.create",function(e){var t=e.context,n=t.labelTarget;tx(n,"bpmn:Group")&&c(n,t)}),this.revert("label.create",function(e){var t=e.context,n=t.labelTarget;tx(n,"bpmn:Group")&&p(n,t)}),this.execute("shape.delete",function(e){var t=e.context,n=t.shape,i=tw(n);if(tx(n,"bpmn:Group")&&!n.labelTarget){var o,r=t.categoryValue=i.categoryValueRef;r&&(o=t.category=r.$parent,a(r,o,i),i.categoryValueRef=null)}}),this.reverted("shape.delete",function(e){var t=e.context,n=t.shape;if(tx(n,"bpmn:Group")&&!n.labelTarget){var i=t.category,o=t.categoryValue,r=tw(n);o&&(r.categoryValueRef=o,s(o,i))}}),this.execute("shape.create",function(e){var t=e.context,n=t.shape;tx(n,"bpmn:Group")&&!n.labelTarget&&tw(n).categoryValueRef&&c(n,t)}),this.reverted("shape.create",function(e){var t=e.context,n=t.shape;tx(n,"bpmn:Group")&&!n.labelTarget&&tw(n).categoryValueRef&&p(n,t)}),i.on("copyPaste.copyElement",770,function(e){var t=e.descriptor,n=e.element;if(tx(n,"bpmn:Group")&&!n.labelTarget){var i=tw(n);if(i.categoryValueRef){var o=i.categoryValueRef;t.categoryValue=l(o,!0),o.$parent&&(t.category=l(o.$parent,!0))}}}),i.on("copyPaste.pasteElement",770,function(e){var t=e.descriptor,n=t.businessObject,i=t.categoryValue,o=t.category;i&&(i=n.categoryValueRef=l(i)),o&&(i.$parent=l(o)),delete t.category,delete t.categoryValue})}function aK(e,t,n,i){var o,r,a,s;return 0==(o=(i.y-n.y)*(t.x-e.x)-(i.x-n.x)*(t.y-e.y))?null:(r=e.y-n.y,a=e.x-n.x,s=((i.x-n.x)*r-(i.y-n.y)*a)/o,{x:Math.round(e.x+s*(t.x-e.x)),y:Math.round(e.y+s*(t.y-e.y))})}function aq(e){function t(e,t,n){var i,o={x:n.x,y:n.y-50},r={x:n.x-50,y:n.y},a=aK(e,t,n,o),s=aK(e,t,n,r);i=a&&s?aJ(a,n)>aJ(s,n)?s:a:a||s,e.original=i}e.on("bpmnElement.added",function(e){var n,i=e.element;i.waypoints&&(t((n=i.waypoints)[0],n[1],(0,L.wS)(i.source)),t(n[n.length-1],n[n.length-2],(0,L.wS)(i.target)))})}function aJ(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function aX(e){nd.call(this,e);var t=["bpmn:Participant","bpmn:Lane"];this.executed(["shape.move","shape.create","shape.resize"],function(e){var n=e.context.shape,i=tw(n),o=tS(n);if(tE(i,t)){var r=o.get("isHorizontal");void 0===r&&(r=!0),o.set("isHorizontal",r)}})}aL.$inject=["eventBus","spaceTool"],i(aL,nd),a$.$inject=["bpmnReplace","injector"],i(a$,nd),a$.prototype._replaceShape=function(e){var t,n,i=(t=tw(e).eventDefinitions)&&t[0];return n=i?{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:i.$type}:{type:"bpmn:IntermediateThrowEvent"},this._bpmnReplace.replaceElement(e,n,{layoutConnection:!1})},i(az,nd),az.$inject=["eventBus","bpmnRules","modeling"],aG.$inject=["eventBus","modeling"],i(aG,nd),aV.$inject=["elementRegistry","eventBus","canvas"],aU.$inject=["bpmnFactory","bpmnjs","elementRegistry","eventBus","injector","moddleCopy"],i(aU,nd),aq.$inject=["eventBus"],aX.$inject=["eventBus"],i(aX,nd);var aY=Math.sqrt,aZ=Math.min,aQ=Math.max,a0=Math.abs;function a1(e){return Math.pow(e,2)}function a2(e,t){return aY(a1(e.x-t.x)+a1(e.y-t.y))}function a5(e,t,n){return e>=aZ(t,n)-a3&&e<=aQ(t,n)+a3}var a3=.1;function a6(e,t){return a0(e.x-t.x)<=a3&&a0(e.y-t.y)<=a3}function a4(e,t,n,i){var o,r,a,s,c=0,p=0,l={point:e,delta:{x:0,y:0}},u=function(e,t){var n,i,o,r,a,s,c,p,l,u,h,d=0;for(d=0;d<t.length-1;d++){if(a6(o=t[d],r=t[d+1])?c=[o]:(s=aZ(a2(e,o),a2(e,r)),c=function(e,t,n,i){var o=t.x-e.x,r=t.y-e.y,a=n.x-e.x,s=n.y-e.y,c=o*o+r*r,p=(o*a+r*s)/c,l=p*p-(a*a+s*s-i*i)/c;if(l<0&&l>-.000001&&(l=0),l<0)return[];var u=aY(l),h=-p+u,d=-p-u,m={x:e.x-o*h,y:e.y-r*h};return 0===l?[m]:[m,{x:e.x-o*d,y:e.y-r*d}].filter(function(n){return a5(n.x,e.x,t.x)&&a5(n.y,e.y,t.y)})}(o,r,e,s)),c.length<1)throw Error("expected between [1, 2] circle -> line intersections");1===c.length&&(p={type:"bendpoint",position:c[0],segmentIndex:d,bendpointIndex:a6(o,c[0])?d:d+1}),2===c.length&&(p={type:"segment",position:(n=c[0],i=c[1],a={x:(n.x+i.x)/2,y:(n.y+i.y)/2}),segmentIndex:d,relativeLocation:a2(o,a)/a2(o,r)}),l=a2(p.position,e),(!h||u>l)&&(h=p,u=l)}return h}(e,n),h=u.segmentIndex,d=function(e,t,n,i){var o=n.segmentIndex,r=t.length-e.length;if(i.segmentMove){var a=i.segmentMove.segmentStartIndex,s=i.segmentMove.newSegmentStartIndex;return o===a?s:o>=s?o+r<s?s:o+r:o}if(i.bendpointMove){var c,p=i.bendpointMove.insert,l=i.bendpointMove.bendpointIndex;return 0===r?o:(o>=l&&(c=p?o+1:o-1),o<l&&(c=o,p&&"bendpoint"!==n.type&&l-1===o&&a9(t,l)<n.relativeLocation&&c++),c)}return 0===r?o:i.connectionStart&&0===o?0:i.connectionEnd&&o===e.length-2?t.length-2:Math.floor((t.length-2)/2)}(n,t,u,i);if(d<0||d>t.length-2||null===d)return l;var m=[n[h],n[h+1]],f=[t[d],t[d+1]],g=u.position,y=(o=ry(m[0],m[1]),r=ry(m[0],g),0===o?0:r/o),v=(a=rm(m),rm(f)-a);if("bendpoint"===u.type){var _=t.length-n.length,b=u.bendpointIndex,x=n[b];if(-1!==t.indexOf(x))return l;if(0===_){var E=t[b];return{delta:{x:c=E.x-u.position.x,y:p=E.y-u.position.y},point:{x:e.x+c,y:e.y+p}}}_<0&&0!==b&&b<n.length-1&&(y=a9(n,b))}var w={x:(f[1].x-f[0].x)*y+f[0].x,y:(f[1].y-f[0].y)*y+f[0].y},S=(s={x:e.x-g.x,y:e.y-g.y},v?{x:Math.cos(v)*s.x-Math.sin(v)*s.y,y:Math.sin(v)*s.x+Math.cos(v)*s.y}:s);return c=w.x+S.x-e.x,p=w.y+S.y-e.y,{point:(0,L.ex)(w),delta:(0,L.ex)({x:c,y:p})}}function a9(e,t){var n=ry(e[t-1],e[t]);return n/(n+ry(e[t],e[t+1]))}function a8(e,t,n){var i=it(t),o=it(n),r=ii(e,i),a={x:r.x*(n.width/t.width),y:r.y*(n.height/t.height)};return(0,L.ex)({x:o.x+a.x,y:o.y+a.y})}function a7(e,t,n){var i=it(e),o=it(t),r=it(n),a=ii(e,i),s=ii(i,o),c=function(e,t,n){var i=(0,L.JA)(t),o=(0,L.JA)(n);if(i.right!==o.right&&i.left!==o.left||i.top!==o.top&&i.bottom!==o.bottom)return null;var r,a,s=(0,L.T8)(t,e);if("top"===s)r={x:0,y:o.bottom-i.bottom};else if("bottom"===s)r={x:0,y:o.top-i.top};else if("right"===s)r={x:o.left-i.left,y:0};else{if("left"!==s)return null;r={x:o.right-i.right,y:0}}return(a={x:e.x+r.x,y:e.y+r.y},(0,L.T8)(n,a)!==s)?null:r}(i,t,n);if(c)return c;var p={x:s.x*(n.width/t.width),y:s.y*(n.height/t.height)},l={x:r.x+p.x,y:r.y+p.y};return(0,L.ex)({x:l.x+a.x-e.x,y:l.y+a.y-e.y})}var se="name",st="text";function sn(e,t,n,i){function o(e){var n=e.context,o=n.element,r=n.properties;if(se in r&&t.updateLabel(o,r[se]),st in r&&tx(o,"bpmn:TextAnnotation")){var a=i.getTextAnnotationBounds({x:o.x,y:o.y,width:o.width,height:o.height},r[st]||"");t.updateLabel(o,r.text,a)}}nd.call(this,e),this.postExecute("element.updateProperties",o),this.postExecute("element.updateModdleProperties",e=>{tw(e.context.element)===e.context.moddleElement&&o(e)}),this.postExecute(["shape.create","connection.create"],function(e){var n=e.context;if(!1!==(n.hints||{}).createElementsBehavior){var i=n.shape||n.connection;!(0,tH.j_)(i)&&tG(i)&&tK(i)&&t.updateLabel(i,tK(i))}}),this.postExecute("shape.delete",function(e){var n=e.context,i=n.labelTarget,o=n.hints||{};i&&!1!==o.unsetLabel&&t.updateLabel(i,null,null,{removeShape:!1})}),this.postExecute(["connection.layout","connection.updateWaypoints"],function(e){var n,i,o,r,s,c,p=e.context;if(!1!==(p.hints||{}).labelBehavior){var l,u=p.connection.label;u&&u.parent&&(o=(i=(n=e.context).connection).label,r=(0,a.f0)({},n.hints),s=n.newWaypoints||i.waypoints,c=n.oldWaypoints,void 0===r.startChanged&&(r.startChanged=!!r.connectionStart),void 0===r.endChanged&&(r.endChanged=!!r.connectionEnd),l=a4((0,L.wS)(o),s,c,r).delta,t.moveShape(u,l))}}),this.postExecute(["shape.replace"],function(e){var t=e.context,n=t.newShape,i=t.oldShape,o=tw(n);o&&tG(o)&&i.label&&n.label&&(n.label.x=i.label.x,n.label.y=i.label.y)}),this.postExecute("shape.resize",function(e){var n=e.context,i=n.shape,o=n.newBounds,r=n.oldBounds;if(tW(i)){var s,c,p=i.label,l=(c=a8(s=function(e,t){if(t.length){var n,i=(n=t.map(function(t){return{line:t,distance:rg(e,t)}}),(0,a.MR)(n,"distance")[0].line);return rf(e,i)}}((0,L.wS)(p),[[{x:r.x,y:r.y},{x:r.x+(r.width||0),y:r.y}],[{x:r.x+(r.width||0),y:r.y},{x:r.x+(r.width||0),y:r.y+(r.height||0)}],[{x:r.x,y:r.y+(r.height||0)},{x:r.x+(r.width||0),y:r.y+(r.height||0)}],[{x:r.x,y:r.y},{x:r.x,y:r.y+(r.height||0)}]]),r,o),(0,L.ex)(ii(c,s)));t.moveShape(p,l)}})}function si(e,t){function n(e,t){var n=e.context,i=n.connection,o=(0,a.f0)({},n.hints),r=n.newWaypoints||i.waypoints,s=n.oldWaypoints;return void 0===o.startChanged&&(o.startChanged=!!o.connectionStart),void 0===o.endChanged&&(o.endChanged=!!o.connectionEnd),a4(t,r,s,o).point}nd.call(this,e),this.postExecute(["connection.layout","connection.updateWaypoints"],function(e){var i=e.context.connection,o=i.outgoing;i.incoming.forEach(function(i){var o=n(e,i.waypoints[i.waypoints.length-1]),r=[].concat(i.waypoints.slice(0,-1),[o]);t.updateWaypoints(i,r)}),o.forEach(function(i){var o=[].concat([n(e,i.waypoints[0])],i.waypoints.slice(1));t.updateWaypoints(i,o)})}),this.postExecute(["connection.move"],function(e){var n=e.context,i=n.connection,o=i.outgoing,r=i.incoming,a=n.delta;r.forEach(function(e){var n=e.waypoints[e.waypoints.length-1],i={x:n.x+a.x,y:n.y+a.y},o=[].concat(e.waypoints.slice(0,-1),[i]);t.updateWaypoints(e,o)}),o.forEach(function(e){var n=e.waypoints[0],i=[].concat([{x:n.x+a.x,y:n.y+a.y}],e.waypoints.slice(1));t.updateWaypoints(e,i)})})}function so(e,t,n){var i=sp(e),o=sl(i,t),r=i[0];return o.length?o[o.length-1]:a8(r.original||r,n,t)}function sr(e,t,n){var i=sp(e),o=sl(i,t),r=i[i.length-1];return o.length?o[0]:a8(r.original||r,n,t)}function sa(e,t,n){var i=sp(e),o=sc(t,n),r=i[0];return a8(r.original||r,o,t)}function ss(e,t,n){var i=sp(e),o=sc(t,n),r=i[i.length-1];return a8(r.original||r,o,t)}function sc(e,t){return{x:e.x-t.x,y:e.y-t.y,width:e.width,height:e.height}}function sp(e){var t=e.waypoints;if(!t.length)throw Error("connection#"+e.id+": no waypoints");return t}function sl(e,t){var n=(0,a.UI)(e,su);return(0,a.hX)(n,function(e){return"intersect"===(0,L.T8)(t,e,1)})}function su(e){return e.original||e}function sh(e,t){nd.call(this,e),this.postExecute("shape.replace",function(e){var n=e.oldShape,i=e.newShape;if(!(!(tx(n,"bpmn:Participant")&&tL(n)&&tx(i,"bpmn:Participant"))||tL(i))){var o,r,a,s=(o=R([n],!1),r=[],a=[],o.forEach(function(e){e!==n&&(e.incoming.forEach(function(e){tx(e,"bpmn:MessageFlow")&&r.push(e)}),e.outgoing.forEach(function(e){tx(e,"bpmn:MessageFlow")&&a.push(e)}))},[]),{incoming:r,outgoing:a});s.incoming.forEach(function(e){var o=sr(e,i,n);t.reconnectEnd(e,i,o)}),s.outgoing.forEach(function(e){var o=so(e,i,n);t.reconnectStart(e,i,o)})}},!0)}i(sn,nd),sn.$inject=["eventBus","modeling","bpmnFactory","textRenderer"],i(si,nd),si.$inject=["eventBus","modeling"],sh.$inject=["eventBus","modeling"],i(sh,nd);let sd=["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:EscalationEventDefinition","bpmn:ConditionalEventDefinition","bpmn:SignalEventDefinition"];function sm(e){let t=tw(e);if(!tx(t,"bpmn:BoundaryEvent")&&!(tx(t,"bpmn:StartEvent")&&tI(t.$parent)))return!1;let n=t.get("eventDefinitions");return!!n&&!!n.length&&sd.some(e=>tx(n[0],e))}function sf(e){return tx(e,"bpmn:BoundaryEvent")?"cancelActivity":"isInterrupting"}function sg(e,t){e.invoke(nd,this),this.postExecuted("shape.replace",function(e){let n=e.context.oldShape,i=e.context.newShape,o=e.context.hints;if(!sm(i))return;let r=sf(i);if(o.targetElement&&void 0!==o.targetElement[r])return;let a=tw(n).get(r);a!==tw(i).get(r)&&t.updateProperties(i,{[r]:a})})}function sy(e,t){nd.call(this,e),this.preExecute("shape.resize",function(e){var n=e.shape,i=tS(n),o=i&&i.get("label");o&&o.get("bounds")&&t.updateModdleProperties(n,o,{bounds:void 0})},!0)}function sv(e,t,n){nd.call(this,e),this.preExecute("shape.delete",function(e){var i=e.context.shape;if(1===i.incoming.length&&1===i.outgoing.length){var o=i.incoming[0],r=i.outgoing[0];if(tx(o,"bpmn:SequenceFlow")&&tx(r,"bpmn:SequenceFlow")&&t.canConnect(o.source,r.target,o)){var a,s,c,p=(a=o.waypoints,s=r.waypoints,(c=aK(s_(a[a.length-2]),s_(a[a.length-1]),s_(s[1]),s_(s[0])))?[].concat(a.slice(0,a.length-1),[c],s.slice(1)):[s_(a[0]),s_(s[s.length-1])]);n.reconnectEnd(o,r.target,p)}}})}function s_(e){return e.original||e}function sb(e,t){nd.call(this,e),this.preExecute("shape.delete",function(e){var t=e.shape,n=t.parent;tx(t,"bpmn:Participant")&&(e.collaborationRoot=n)},!0),this.postExecute("shape.delete",function(e){var n=e.collaborationRoot;if(n&&!n.businessObject.participants.length){var i=t.makeProcess(),o=n.children.slice();t.moveElements(o,{x:0,y:0},i)}},!0)}function sx(e,t,n,i){nd.call(this,e);var o=i.get("dragging",!1);function r(e){var i,o,r=e.source,a=e.target;e.parent&&(tx(e,"bpmn:SequenceFlow")&&(n.canConnectSequenceFlow(r,a)||(o=!0),n.canConnectMessageFlow(r,a)&&(i="bpmn:MessageFlow")),tx(e,"bpmn:MessageFlow")&&(n.canConnectMessageFlow(r,a)||(o=!0),n.canConnectSequenceFlow(r,a)&&(i="bpmn:SequenceFlow")),o&&t.removeConnection(e),i&&t.connect(r,a,{type:i,waypoints:e.waypoints.slice()}))}this.postExecuted("elements.move",function(e){var t=e.closure.allConnections;(0,a.Ed)(t,r)},!0),this.preExecute("connection.reconnect",function(e){var i,r,a,s,c,p=e.context,l=p.connection,u=p.newSource||l.source,h=p.newTarget||l.target;(s=n.canConnect(u,h))&&s.type!==l.type&&(c=t.connect(u,h,{type:s.type,associationDirection:s.associationDirection,waypoints:l.waypoints.slice()}),l.parent&&t.removeConnection(l),p.connection=c,!o||(a=(r=o.context())&&r.payload.previousSelection)&&a.length&&-1!==(i=a.indexOf(l))&&a.splice(i,1,c))}),this.postExecuted("element.updateProperties",function(e){var n,i=e.context,o=i.properties,r=i.element,s=r.businessObject;o.default&&(n=(0,a.sE)(r.outgoing,(0,a.KQ)({id:r.businessObject.default.id})))&&t.updateProperties(n,{conditionExpression:void 0}),o.conditionExpression&&s.sourceRef.default===s&&t.updateProperties(r.source,{default:void 0})})}function sE(e,t,n,i,o,r){i.invoke(nd,this),this._bpmnReplace=e,this._elementRegistry=n,this._selection=r,this.postExecuted(["elements.create"],500,function(e){var n=e.context,i=n.parent,o=n.elements,r=(0,a.u4)(o,function(e,n){var o=t.canReplace([n],n.host||n.parent||i);return o?e.concat(o.replacements):e},[]);r.length&&this._replaceElements(o,r)},this),this.postExecuted(["elements.move"],500,function(e){var n=e.context,i=n.newParent,o=n.newHost,r=[];(0,a.Ed)(n.closure.topLevel,function(e){r=tI(e)?r.concat(e.children):r.concat(e)}),1===r.length&&o&&(i=o);var s=t.canReplace(r,i);s&&this._replaceElements(r,s.replacements,o)},this),this.postExecute(["shape.replace"],1500,function(e){var n,i=e.context,o=i.oldShape,r=i.newShape,a=o.attachers;a&&a.length&&(n=t.canReplace(a,r),this._replaceElements(a,n.replacements))},this),this.postExecuted(["shape.replace"],1500,function(e){var t=e.context,n=t.oldShape,i=t.newShape;o.unclaimId(n.businessObject.id,n.businessObject),o.updateProperties(i,{id:n.id})})}sg.$inject=["injector","modeling"],i(sg,nd),i(sy,nd),sy.$inject=["eventBus","modeling"],i(sv,nd),sv.$inject=["eventBus","bpmnRules","modeling"],sb.$inject=["eventBus","modeling"],i(sb,nd),i(sx,nd),sx.$inject=["eventBus","modeling","bpmnRules","injector"],i(sE,nd),sE.prototype._replaceElements=function(e,t){var n=this._elementRegistry,i=this._bpmnReplace,o=this._selection;(0,a.Ed)(t,function(t){var o={type:t.newElementType},r=n.get(t.oldElementId),a=e.indexOf(r);e[a]=i.replaceElement(r,o,{select:!1})}),t&&o.select(e)},sE.$inject=["bpmnReplace","bpmnRules","elementRegistry","injector","modeling","selection"];var sw={width:140,height:120},sS={width:300,height:60},sk={width:60,height:300},sC={width:300,height:150},sR={width:150,height:300},sP={width:140,height:120},sA={width:50,height:30};function sM(e){e.on("resize.start",1500,function(e){var t,n,i,o,r,a,s,c,p,l,u,h=e.context,d=h.shape,m=h.direction,f=h.balanced;(tx(d,"bpmn:Lane")||tx(d,"bpmn:Participant"))&&(h.resizeConstraints=(t=aO(d),n=!0,i=!0,o=aj(t,[t]),r=(0,L.JA)(d),a={},s={},p=(c=t$(d))?sS:sk,/n/.test(m)?s.top=r.bottom-p.height:/e/.test(m)?s.right=r.left+p.width:/s/.test(m)?s.bottom=r.top+p.height:/w/.test(m)&&(s.left=r.right-p.width),o.forEach(function(e){var t=(0,L.JA)(e);c?(t.top<r.top-10&&(n=!1),t.bottom>r.bottom+10&&(i=!1)):(t.left<r.left-10&&(n=!1),t.right>r.right+10&&(i=!1)),/n/.test(m)&&(f&&10>sT(r.top-t.bottom)&&sj(a,"top",t.top+p.height,sB),5>sT(r.top-t.top)&&sj(s,"top",t.bottom-p.height,sD)),/e/.test(m)&&(f&&10>sT(r.right-t.left)&&sj(a,"right",t.right-p.width,sD),5>sT(r.right-t.right)&&sj(s,"right",t.left+p.width,sB)),/s/.test(m)&&(f&&10>sT(r.bottom-t.top)&&sj(a,"bottom",t.bottom-p.height,sD),5>sT(r.bottom-t.bottom)&&sj(s,"bottom",t.top+p.height,sB)),/w/.test(m)&&(f&&10>sT(r.left-t.right)&&sj(a,"left",t.left+p.width,sB),5>sT(r.left-t.left)&&sj(s,"left",t.right-p.width,sD))}),l=t.children.filter(function(e){return!e.hidden&&!e.waypoints&&(tx(e,"bpmn:FlowElement")||tx(e,"bpmn:Artifact"))}),u=c?sN:sO,l.forEach(function(e){var t=(0,L.JA)(e);/n/.test(m)&&(!c||n)&&sj(s,"top",t.top-u.top,sD),/e/.test(m)&&(c||i)&&sj(s,"right",t.right+u.right,sB),/s/.test(m)&&(!c||i)&&sj(s,"bottom",t.bottom+u.bottom,sB),/w/.test(m)&&(c||n)&&sj(s,"left",t.left-u.left,sD)}),{min:s,max:a})),tx(d,"bpmn:SubProcess")&&tL(d)&&(h.minDimensions=sP),tx(d,"bpmn:TextAnnotation")&&(h.minDimensions=sA)})}sM.$inject=["eventBus"];var sT=Math.abs,sD=Math.min,sB=Math.max;function sj(e,t,n,i){var o=e[t];e[t]=void 0===o?n:i(n,o)}var sN={top:20,left:50,right:20,bottom:20},sO={top:50,left:20,right:20,bottom:20};function sL(e,t){e.on("resize.start",1501,function(e){var t=e.context,n=t.shape;(tx(n,"bpmn:Lane")||tx(n,"bpmn:Participant"))&&(t.balanced=!nB(e))}),e.on("resize.end",1001,function(e){var n=e.context,i=n.shape,o=n.canExecute,r=n.newBounds;if(tx(i,"bpmn:Lane")||tx(i,"bpmn:Participant"))return o&&(r=(0,L.aR)(r),t.resizeLane(i,r,n.balanced)),!1})}function s$(e,t,n,i,o){function r(e){var t;return tE(e,["bpmn:ReceiveTask","bpmn:SendTask"])||(t=["bpmn:ErrorEventDefinition","bpmn:EscalationEventDefinition","bpmn:MessageEventDefinition","bpmn:SignalEventDefinition"],(0,a.kJ)(t)||(t=[t]),(0,a.G)(t,function(t){return tz(e,t)}))}function s(t){var n=e.getDefinitions().get("rootElements");return!!(0,a.sE)(n,(0,a.KQ)({id:t.id}))}function c(e){return tx(e,"bpmn:ErrorEventDefinition")?"errorRef":tx(e,"bpmn:EscalationEventDefinition")?"escalationRef":tx(e,"bpmn:MessageEventDefinition")?"messageRef":tx(e,"bpmn:SignalEventDefinition")?"signalRef":void 0}function p(e){if(tE(e,["bpmn:ReceiveTask","bpmn:SendTask"]))return e.get("messageRef");var t=e.get("eventDefinitions")[0];return t.get(c(t))}n.invoke(nd,this),this.executed(["shape.create","element.updateProperties","element.updateModdleProperties"],function(t){var n=t.shape||t.element;if(r(n)){var i=p(tw(n));i&&!s(i)&&(N(e.getDefinitions().get("rootElements"),i),t.addedRootElement=i)}},!0),this.reverted(["shape.create","element.updateProperties","element.updateModdleProperties"],function(t){var n=t.addedRootElement;n&&j(e.getDefinitions().get("rootElements"),n)},!0),t.on("copyPaste.copyElement",function(e){var t=e.descriptor,n=e.element;if(!n.labelTarget&&r(n)){var i=p(tw(n));i&&(t.referencedRootElement=i)}}),t.on("copyPaste.pasteElement",500,function(e){var t=e.descriptor,n=t.businessObject,r=t.referencedRootElement;r&&(s(r)||(r=i.copyElement(r,o.create(r.$type))),function(e,t){if(tE(e,["bpmn:ReceiveTask","bpmn:SendTask"]))return e.set("messageRef",t);var n=e.get("eventDefinitions")[0];n.set(c(n),t)}(n,r),delete t.referencedRootElement)})}sL.$inject=["eventBus","modeling"],s$.$inject=["bpmnjs","eventBus","injector","moddleCopy","bpmnFactory"],i(s$,nd);var sI=Math.max;function sz(e){e.on("spaceTool.getMinDimensions",function(e){var t=e.shapes,n=e.axis,i=e.start,o={};return(0,a.Ed)(t,function(e){var t=e.id;tx(e,"bpmn:Participant")&&(o[t]=function(e,t,n){var i,o,r,a,s=t$(e);if(!aN(e).length)return s?sC:sR;var c="x"===t;return c?s?sC:{width:(o=sH(aN(e),n,c),i=e.width-o.width+sk.width,sI(sR.width,i)),height:sR.height}:s?{width:sC.width,height:(a=sH(aN(e),n,c),r=e.height-a.height+sS.height,sI(sC.height,r))}:sR}(e,n,i)),tx(e,"bpmn:Lane")&&(o[t]=t$(e)?sS:sk),tx(e,"bpmn:SubProcess")&&tL(e)&&(o[t]=sP),tx(e,"bpmn:TextAnnotation")&&(o[t]=sA),tx(e,"bpmn:Group")&&(o[t]=sw)}),o})}function sH(e,t,n){var i,o,r;for(i=0;i<e.length;i++)if(o=e[i],!n&&t>=o.y&&t<=o.y+o.height||n&&t>=o.x&&t<=o.x+o.width){if((r=aN(o)).length)return sH(r,t,n);return o}}sz.$inject=["eventBus"];var sF={x:180,y:160};function sG(e,t,n,i,o,r,s){nd.call(this,t),this._canvas=e,this._eventBus=t,this._modeling=n,this._elementFactory=i,this._bpmnFactory=o,this._bpmnjs=r,this._elementRegistry=s;var c=this;function p(e){return tx(e,"bpmn:SubProcess")&&!tL(e)}function l(t){var n=t.shape,i=t.newRootElement,o=tw(n);i=c._addDiagram(i||o),t.newRootElement=e.addRootElement(i)}function u(t){var n=tw(t.shape);c._removeDiagram(n);var i=t.newRootElement=s.get(nv(n));e.removeRootElement(i)}this.executed("shape.create",function(e){p(e.shape)&&l(e)},!0),this.postExecuted("shape.create",function(e){var t=e.shape,n=e.newRootElement;n&&t.children&&(c._showRecursively(t.children),c._moveChildrenToShape(t,n))},!0),this.reverted("shape.create",function(e){p(e.shape)&&u(e)},!0),this.preExecuted("shape.delete",function(e){var t=e.shape;if(p(t)){var i=s.get(nv(t));i&&n.removeElements(i.children.slice())}},!0),this.executed("shape.delete",function(e){p(e.shape)&&u(e)},!0),this.reverted("shape.delete",function(e){p(e.shape)&&l(e)},!0),this.preExecuted("shape.replace",function(t){var n=t.oldShape,i=t.newShape;p(n)&&p(i)&&(t.oldRoot=e.removeRootElement(nv(n)))},!0),this.postExecuted("shape.replace",function(t){var i=t.newShape,o=t.oldRoot,r=e.findRoot(nv(i));if(o&&r){var a=o.children;n.moveElements(a,{x:0,y:0},r)}},!0),this.executed("element.updateProperties",function(e){var t=e.element;if(tx(t,"bpmn:SubProcess")){var n=e.properties,i=e.oldProperties.id,o=n.id;if(i!==o){if(n_(t)){s.updateId(t,o+ny),s.updateId(i,o);return}s.get(i+ny)&&s.updateId(i+ny,o+ny)}}},!0),this.reverted("element.updateProperties",function(e){var t=e.element;if(tx(t,"bpmn:SubProcess")){var n=e.properties,i=e.oldProperties.id,o=n.id;if(i!==o){if(n_(t)){s.updateId(t,i+ny),s.updateId(o,i);return}var r=s.get(o+ny);r&&s.updateId(r,i+ny)}}},!0),t.on("element.changed",function(e){var n=e.element;if(n_(n)){var i=s.get(nb(n.id));i&&i!==n&&t.fire("element.changed",{element:i})}}),this.executed("shape.toggleCollapse",400,function(e){var t=e.shape;tx(t,"bpmn:SubProcess")&&(tL(t)?u(e):(l(e),c._showRecursively(t.children)))},!0),this.reverted("shape.toggleCollapse",400,function(e){var t=e.shape;tx(t,"bpmn:SubProcess")&&(tL(t)?u(e):(l(e),c._showRecursively(t.children)))},!0),this.postExecuted("shape.toggleCollapse",600,function(e){var t=e.shape;if(tx(t,"bpmn:SubProcess")){var n=e.newRootElement;n&&(tL(t)?c._moveChildrenToShape(n,t):c._moveChildrenToShape(t,n))}},!0),t.on("copyPaste.createTree",function(e){var t=e.element,n=e.children;if(p(t)){var i=nv(t),o=s.get(i);o&&n.push.apply(n,o.children)}}),t.on("copyPaste.copyElement",function(e){var t=e.descriptor,n=e.element,i=e.elements,o=n.parent;if(tx(tS(o),"bpmndi:BPMNPlane")){var r=nb(o.id),s=(0,a.sE)(i,function(e){return e.id===r});s&&(t.parent=s.id)}}),t.on("copyPaste.pasteElement",function(e){var t=e.descriptor;t.parent&&(p(t.parent)||t.parent.hidden)&&(t.hidden=!0)})}function sW(e,t){e.invoke(nd,this),this.postExecuted("shape.replace",function(e){var n=e.context.oldShape,i=e.context.newShape;if(!(!tx(i,"bpmn:SubProcess")||tx(i,"bpmn:AdHocSubProcess"))&&(tx(n,"bpmn:Task")||tx(n,"bpmn:CallActivity"))&&tL(i)){var o={x:i.x+i.width/6,y:i.y+i.height/2};t.createShape({type:"bpmn:StartEvent"},o,i)}})}function sV(e){nd.call(this,e),this.preExecute("connection.create",function(e){let{target:t}=e;tx(t,"bpmn:TextAnnotation")&&(e.parent=t.parent)},!0),this.preExecute(["shape.create","shape.resize","elements.move"],function(e){let t=e.shapes||[e.shape];1===t.length&&tx(t[0],"bpmn:TextAnnotation")&&(e.hints=e.hints||{},e.hints.autoResize=!1)},!0)}function sU(e,t){nd.call(this,e),this.postExecuted("shape.toggleCollapse",1500,function(e){var n=e.shape;if(!tL(n)){var i=R(n);i.forEach(function(e){var t=e.incoming.slice(),n=e.outgoing.slice();(0,a.Ed)(t,function(e){o(e,!0)}),(0,a.Ed)(n,function(e){o(e,!1)})})}function o(e,o){(-1===i.indexOf(e.source)||-1===i.indexOf(e.target))&&(o?t.reconnectEnd(e,n,(0,L.wS)(n)):t.reconnectStart(e,n,(0,L.wS)(n)))}},!0)}function sK(e,t,n){nd.call(this,e),this.executed(["shape.toggleCollapse"],500,function(e){var t,n=e.context.shape;tx(n,"bpmn:SubProcess")&&(n.collapsed?tS(n).isExpanded=!1:((t=n.children).length&&t.forEach(function(e){"label"!==e.type||e.businessObject.name||(e.hidden=!0)}),tS(n).isExpanded=!0))}),this.reverted(["shape.toggleCollapse"],500,function(e){var t=e.context.shape;t.collapsed?tS(t).isExpanded=!1:tS(t).isExpanded=!0}),this.postExecuted(["shape.toggleCollapse"],500,function(e){var i,o,r=e.context.shape,a=t.getDefaultSize(r);r.collapsed?o={x:r.x+(r.width-a.width)/2,y:r.y+(r.height-a.height)/2,width:a.width,height:a.height}:((i=aT(r.children.filter(function(e){return!e.hidden}).concat([r])))?(a.width=Math.max(i.width,a.width),a.height=Math.max(i.height,a.height),a.x=i.x+(i.width-a.width)/2,a.y=i.y+(i.height-a.height)/2):(a.x=r.x+(r.width-a.width)/2,a.y=r.y+(r.height-a.height)/2),o=a),n.resizeShape(r,o,null,{autoResize:!r.collapsed&&"nwse"})})}function sq(e,t,n,i){t.invoke(nd,this),this.preExecute("shape.delete",function(e){var t=e.context.shape,o=t.businessObject;(0,tH.j_)(t)||(tx(t,"bpmn:Participant")&&tL(t)&&n.ids.unclaim(o.processRef.id),i.unclaimId(o.id,o))}),this.preExecute("connection.delete",function(e){var t=e.context.connection.businessObject;i.unclaimId(t.id,t)}),this.preExecute("canvas.updateRoot",function(){var t=e.getRootElement(),i=t.businessObject;tx(t,"bpmn:Collaboration")&&n.ids.unclaim(i.id)})}function sJ(e,t){nd.call(this,e),this.preExecute("connection.delete",function(e){var n=e.context.connection,i=n.source;(function(e,t){if(!tx(e,"bpmn:SequenceFlow"))return!1;var n=tw(t),i=tw(e);return n.get("default")===i})(n,i)&&t.updateProperties(i,{default:null})})}function sX(e,t){nd.call(this,e);var n,i=["spaceTool","lane.add","lane.resize","lane.split","elements.create","elements.delete","elements.move","shape.create","shape.delete","shape.move","shape.resize"];this.preExecute(i,5e3,function(e){(n=n||new sY).enter()}),this.postExecuted(i,500,function(e){!function(){if(!n)throw Error("out of bounds release");n.leave()&&(t.updateLaneRefs(n.flowNodes,n.lanes),n=null)}()}),this.preExecute(["shape.create","shape.move","shape.delete","shape.resize"],function(e){var t=e.context.shape,i=function(){if(!n)throw Error("out of bounds release");return n}();!t.labelTarget&&(tx(t,"bpmn:Lane")&&i.addLane(t),tx(t,"bpmn:FlowNode")&&i.addFlowNode(t))})}function sY(){this.flowNodes=[],this.lanes=[],this.counter=0,this.addLane=function(e){this.lanes.push(e)},this.addFlowNode=function(e){this.flowNodes.push(e)},this.enter=function(){this.counter++},this.leave=function(){return this.counter--,!this.counter}}function sZ(e,t){nd.call(this,e),this.postExecuted("elements.create",function(e){for(let n of e.context.elements)(function(e){let t=tw(e);return t&&t.isForCompensation})(n)&&!(n.incoming.filter(e=>{var t;return(t=e.source)&&tx(t,"bpmn:BoundaryEvent")&&tz(t,"bpmn:CompensateEventDefinition")}).length>0)&&t.updateProperties(n,{isForCompensation:void 0})})}function sQ(e,t){var n=(0,L.T8)(e,t,-15);return"intersect"!==n?n:null}function s0(e){oV.call(this,e)}function s1(e){return!e||(0,tH.j_)(e)}function s2(e){do{if(tx(e,"bpmn:Process"))return tw(e);if(tx(e,"bpmn:Participant"))return tw(e).processRef||tw(e)}while(e=e.parent)}function s5(e){return tx(e,"bpmn:TextAnnotation")}function s3(e){return tx(e,"bpmn:Group")&&!e.labelTarget}function s6(e){return tx(e,"bpmn:BoundaryEvent")&&s8(e,"bpmn:CompensateEventDefinition")}function s4(e){return tw(e).isForCompensation}function s9(e){for(var t=e;t=t.parent;){if(tx(t,"bpmn:FlowElementsContainer"))return tw(t);if(tx(t,"bpmn:Participant"))return tw(t).processRef}return null}function s8(e,t){var n=tw(e);return!!(0,a.sE)(n.eventDefinitions||[],function(e){return tx(e,t)})}function s7(e,t){return(tw(e).eventDefinitions||[]).every(function(e){return tx(e,t)})}function ce(e,t){return -1!==(function(e){for(var t=[];e;)(e=e.parent)&&t.push(e);return t})(t).indexOf(e)}function ct(e,t,n){if(s1(e)||s1(t))return null;if(!tx(n,"bpmn:DataAssociation")){if(cm(e,t))return{type:"bpmn:MessageFlow"};if(cf(e,t))return{type:"bpmn:SequenceFlow"}}return cg(e,t)||(cd(e,t)?{type:"bpmn:Association",associationDirection:"One"}:!!ch(e,t)&&{type:"bpmn:Association",associationDirection:"None"})}function cn(e,t){return!!((0,tH.j_)(e)||s3(e))||(!tx(t,"bpmn:Participant")||!!tL(t))&&(tx(e,"bpmn:Participant")?tx(t,"bpmn:Process")||tx(t,"bpmn:Collaboration"):tE(e,["bpmn:DataInput","bpmn:DataOutput"])&&e.parent?t===e.parent:tx(e,"bpmn:Lane")?tx(t,"bpmn:Participant")||tx(t,"bpmn:Lane"):(!tx(e,"bpmn:BoundaryEvent")||!!(tw(e).cancelActivity&&(co(e)||cr(e))))&&(tx(e,"bpmn:FlowElement")&&!tx(e,"bpmn:DataStoreReference")?tx(t,"bpmn:FlowElementsContainer")?tL(t):tE(t,["bpmn:Participant","bpmn:Lane"]):tx(e,"bpmn:DataStoreReference")&&tx(t,"bpmn:Collaboration")?(0,a.G)(tw(t).get("participants"),function(e){return!!e.get("processRef")}):tE(e,["bpmn:Artifact","bpmn:DataAssociation","bpmn:DataStoreReference"])?tE(t,["bpmn:Collaboration","bpmn:Lane","bpmn:Participant","bpmn:Process","bpmn:SubProcess"]):!!tx(e,"bpmn:MessageFlow")&&(tx(t,"bpmn:Collaboration")||e.source.parent==t||e.target.parent==t)))}function ci(e){return tx(e,"bpmn:Lane")}function co(e){var t=tw(e);return t&&!(t.eventDefinitions&&t.eventDefinitions.length)}function cr(e){return ca(e,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])}function ca(e,t){return t.some(function(t){return s8(e,t)})}function cs(e,t,n,i){if(Array.isArray(e)||(e=[e]),1!==e.length)return!1;var o=e[0];return!((0,tH.j_)(o)||!(!(0,tH.j_)(o)&&tx(o,"bpmn:BoundaryEvent")||tx(o,"bpmn:IntermediateThrowEvent")&&co(o)||tx(o,"bpmn:IntermediateCatchEvent")&&cr(o))||tI(t)||!tx(t,"bpmn:Activity")||s4(t)||i&&!sQ(i,t))&&!(tx(t,"bpmn:ReceiveTask")&&(0,a.sE)(t.incoming,function(e){return tx(e.source,"bpmn:EventBasedGateway")}))&&"attach"}function cc(e,t,n){if(!t)return!1;var i={replacements:[]};return(0,a.Ed)(e,function(e){!tI(t)&&tx(e,"bpmn:StartEvent")&&"label"!==e.type&&cn(e,t)&&(e&&!1!==tw(e).isInterrupting||i.replacements.push({oldElementId:e.id,newElementType:"bpmn:StartEvent"}),(tz(e,"bpmn:ErrorEventDefinition")||tz(e,"bpmn:EscalationEventDefinition")||tz(e,"bpmn:CompensateEventDefinition"))&&i.replacements.push({oldElementId:e.id,newElementType:"bpmn:StartEvent"}),ca(e,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])&&tx(t,"bpmn:SubProcess")&&i.replacements.push({oldElementId:e.id,newElementType:"bpmn:StartEvent"})),!tx(t,"bpmn:Transaction")&&s8(e,"bpmn:CancelEventDefinition")&&"label"!==e.type&&(tx(e,"bpmn:EndEvent")&&cn(e,t)&&i.replacements.push({oldElementId:e.id,newElementType:"bpmn:EndEvent"}),tx(e,"bpmn:BoundaryEvent")&&cs(e,t,null,n)&&i.replacements.push({oldElementId:e.id,newElementType:"bpmn:BoundaryEvent"}))}),!!i.replacements.length&&i}function cp(e,t){return!(0,a.G)(e,ci)&&(!t||e.every(function(e){return cn(e,t)}))}function cl(e,t,n,i){return!!t&&(!!((0,tH.j_)(e)||s3(e))||!(n===t||n&&ce(n,t))&&(cn(e,t,i)||cy(e,t,i)))}function cu(e,t){return tx(e,"bpmn:SubProcess")?tL(e)&&(!t||t.width>=100&&t.height>=80):!!(tx(e,"bpmn:Lane")||tx(e,"bpmn:Participant")||s5(e)||s3(e))}function ch(e,t){var n,i;return!(ce(t,e)||ce(e,t))&&(n=s5(e),i=s5(t),(!!n||!!i)&&n!==i||!!cg(e,t))}function cd(e,t){return s9(e)===s9(t)&&s6(e)&&tx(t,"bpmn:Activity")&&!t.attachers.includes(e)&&!tI(t)}function cm(e,t){var n;return(!c_(e)||!!c_(t))&&tx(e,"bpmn:InteractionNode")&&!tx(e,"bpmn:BoundaryEvent")&&(!tx(e,"bpmn:Event")||tx(e,"bpmn:ThrowEvent")&&s7(e,"bpmn:MessageEventDefinition"))&&tx(n=t,"bpmn:InteractionNode")&&!s4(n)&&(!tx(n,"bpmn:Event")||tx(n,"bpmn:CatchEvent")&&s7(n,"bpmn:MessageEventDefinition"))&&!(tx(n,"bpmn:BoundaryEvent")&&!s8(n,"bpmn:MessageEventDefinition"))&&s2(e)!==s2(t)}function cf(e,t){var n;return tx(e,"bpmn:FlowNode")&&!tx(e,"bpmn:EndEvent")&&!tI(e)&&!(tx(e,"bpmn:IntermediateThrowEvent")&&s8(e,"bpmn:LinkEventDefinition"))&&!s6(e)&&!s4(e)&&tx(n=t,"bpmn:FlowNode")&&!tx(n,"bpmn:StartEvent")&&!tx(n,"bpmn:BoundaryEvent")&&!tI(n)&&!(tx(n,"bpmn:IntermediateCatchEvent")&&s8(n,"bpmn:LinkEventDefinition"))&&!s4(n)&&s9(e)===s9(t)&&!(tx(e,"bpmn:EventBasedGateway")&&!(tx(t,"bpmn:ReceiveTask")||tx(t,"bpmn:IntermediateCatchEvent")&&(s8(t,"bpmn:MessageEventDefinition")||s8(t,"bpmn:TimerEventDefinition")||s8(t,"bpmn:ConditionalEventDefinition")||s8(t,"bpmn:SignalEventDefinition"))))}function cg(e,t){return tE(e,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&tE(t,["bpmn:Activity","bpmn:ThrowEvent"])?{type:"bpmn:DataInputAssociation"}:!!(tE(t,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&tE(e,["bpmn:Activity","bpmn:CatchEvent"]))&&{type:"bpmn:DataOutputAssociation"}}function cy(e,t,n){if(!t)return!1;if(Array.isArray(e)){if(1!==e.length)return!1;e=e[0]}return t.source!==e&&t.target!==e&&tE(t,["bpmn:SequenceFlow","bpmn:MessageFlow"])&&!(0,tH.j_)(t)&&tx(e,"bpmn:FlowNode")&&!tx(e,"bpmn:BoundaryEvent")&&cn(e,t.parent,n)}function cv(e,t){var n;return!!(0,tH.j_)(t)||!tx(t,"bpmn:Lane")||(n=t.parent,!!e&&!!n&&-1!==e.indexOf(n))}function c_(e){return oQ(e,"bpmn:Process")||oQ(e,"bpmn:Collaboration")}function cb(e,t){e.on("saveXML.start",2e3,function(){var e=t.getRootElements();(0,a.Ed)(e,function(e){var t,n,i=tS(e);t=R([e],!1),t=(0,a.hX)(t,function(t){return t!==e&&!t.labelTarget}),n=(0,a.UI)(t,tS),i.set("planeElement",n)})})}function cx(e){nd.call(this,e);var t=this;this.preExecute(["shape.create","connection.create"],function(e){var n=e.context,i=n.shape||n.connection,o=n.parent,r=t.getOrdering(i,o);r&&(void 0!==r.parent&&(n.parent=r.parent),n.parentIndex=r.index)}),this.preExecute(["shape.move","connection.move"],function(e){var n=e.context,i=n.shape||n.connection,o=n.newParent||i.parent,r=t.getOrdering(i,o);r&&(void 0!==r.parent&&(n.newParent=r.parent),n.newParentIndex=r.index)})}function cE(e,t){cx.call(this,e);var n=[{type:"bpmn:SubProcess",order:{level:6}},{type:"bpmn:SequenceFlow",order:{level:9,containers:["bpmn:Participant","bpmn:FlowElementsContainer"]}},{type:"bpmn:DataAssociation",order:{level:9,containers:["bpmn:Collaboration","bpmn:FlowElementsContainer"]}},{type:"bpmn:TextAnnotation",order:{level:9}},{type:"bpmn:MessageFlow",order:{level:9,containers:["bpmn:Collaboration"]}},{type:"bpmn:Association",order:{level:6,containers:["bpmn:Participant","bpmn:FlowElementsContainer","bpmn:Collaboration"]}},{type:"bpmn:BoundaryEvent",order:{level:8}},{type:"bpmn:Group",order:{level:10,containers:["bpmn:Collaboration","bpmn:FlowElementsContainer"]}},{type:"bpmn:FlowElement",order:{level:5}},{type:"bpmn:Participant",order:{level:-2}},{type:"bpmn:Lane",order:{level:-1}}];function i(e){var t=e.order;if(t||(e.order=t=function(e){if(e.labelTarget)return{level:10};var t=(0,a.sE)(n,function(t){return tE(e,[t.type])});return t&&t.order||{level:1}}(e)),!t)throw Error(`no order for <${e.id}>`);return t}this.getOrdering=function(e,n){if(e.labelTarget||tx(e,"bpmn:TextAnnotation"))return{parent:t.findRoot(n)||t.getRootElement(),index:-1};var o=i(e);o.containers&&(n=function(e,t,n){for(var i=t;i&&!tE(i,n);)i=i.parent;if(!i)throw Error(`no parent for <${e.id}> in <${t&&t.id}>`);return i}(e,n,o.containers));var r=n.children.indexOf(e),s=(0,a.cx)(n.children,function(t){return(!!e.labelTarget||!t.labelTarget)&&o.level<i(t).level});return -1!==s&&-1!==r&&r<s&&(s-=1),{index:s,parent:n}}}function cw(){}i(sG,nd),sG.prototype._moveChildrenToShape=function(e,t){var n,i=this._modeling,o=e.children;if(o){var r=(o=o.concat(o.reduce(function(t,n){return n.label&&n.label.parent!==e?t.concat(n.label):t},[]))).filter(function(e){return!e.hidden});if(!r.length){i.moveElements(o,{x:0,y:0},t,{autoResize:!1});return}var a=P(r);if(t.x){var s=(0,L.wS)(t),c=(0,L.wS)(a);n={x:s.x-c.x,y:s.y-c.y}}else n={x:sF.x-a.x,y:sF.y-a.y};i.moveElements(o,n,t,{autoResize:!1})}},sG.prototype._showRecursively=function(e,t){var n=this,i=[];return e.forEach(function(e){e.hidden=!!t,i=i.concat(e),e.children&&(i=i.concat(n._showRecursively(e.children,e.collapsed||t)))}),i},sG.prototype._addDiagram=function(e){var t=this._bpmnjs.getDefinitions().diagrams;return e.businessObject||(e=this._createNewDiagram(e)),t.push(e.di.$parent),e},sG.prototype._createNewDiagram=function(e){var t=this._bpmnFactory,n=this._elementFactory,i=t.create("bpmndi:BPMNPlane",{bpmnElement:e}),o=t.create("bpmndi:BPMNDiagram",{plane:i});return i.$parent=o,n.createRoot({id:nv(e),type:e.$type,di:i,businessObject:e,collapsed:!0})},sG.prototype._removeDiagram=function(e){var t=this._bpmnjs.getDefinitions().diagrams,n=(0,a.sE)(t,function(t){return t.plane.bpmnElement.id===e.id});return t.splice(t.indexOf(n),1),n},sG.$inject=["canvas","eventBus","modeling","elementFactory","bpmnFactory","bpmnjs","elementRegistry"],sW.$inject=["injector","modeling"],i(sW,nd),i(sV,nd),sV.$inject=["eventBus"],i(sU,nd),sU.$inject=["eventBus","modeling"],i(sK,nd),sK.$inject=["eventBus","elementFactory","modeling"],i(sq,nd),sq.$inject=["canvas","injector","moddle","modeling"],i(sJ,nd),sJ.$inject=["eventBus","modeling"],sX.$inject=["eventBus","modeling"],i(sX,nd),i(sZ,nd),sZ.$inject=["eventBus","modeling"],i(s0,oV),s0.$inject=["eventBus"],s0.prototype.init=function(){this.addRule("connection.start",function(e){var t;return s1(t=e.source)?null:tE(t,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference","bpmn:Group","bpmn:TextAnnotation"])}),this.addRule("connection.create",function(e){var t=e.source,n=e.target,i=e.hints||{},o=i.targetParent;if(i.targetAttach)return!1;o&&(n.parent=o);try{return ct(t,n)}finally{o&&(n.parent=null)}}),this.addRule("connection.reconnect",function(e){var t=e.connection;return ct(e.source,e.target,t)}),this.addRule("connection.updateWaypoints",function(e){return{type:e.connection.type}}),this.addRule("shape.resize",function(e){return cu(e.shape,e.newBounds)}),this.addRule("elements.create",function(e){var t=e.elements,n=e.position,i=e.target;return(!(0,tH.Ho)(i)||!!cy(t,i,n))&&(0,a.yW)(t,function(e){return(0,tH.Ho)(e)?ct(e.source,e.target,e):e.host?cs(e,e.host,null,n):cl(e,i,null,n)})}),this.addRule("elements.move",function(e){var t=e.target,n=e.shapes,i=e.position;return cs(n,t,null,i)||cc(n,t,i)||cp(n,t,i)||cy(n,t,i)}),this.addRule("shape.create",function(e){return cl(e.shape,e.target,e.source,e.position)}),this.addRule("shape.attach",function(e){return cs(e.shape,e.target,null,e.position)}),this.addRule("element.copy",function(e){var t=e.element;return cv(e.elements,t)})},s0.prototype.canConnectMessageFlow=cm,s0.prototype.canConnectSequenceFlow=cf,s0.prototype.canConnectDataAssociation=cg,s0.prototype.canConnectAssociation=ch,s0.prototype.canConnectCompensationAssociation=cd,s0.prototype.canMove=cp,s0.prototype.canAttach=cs,s0.prototype.canReplace=cc,s0.prototype.canDrop=cn,s0.prototype.canInsert=cy,s0.prototype.canCreate=cl,s0.prototype.canConnect=ct,s0.prototype.canResize=cu,s0.prototype.canCopy=cv,cb.$inject=["eventBus","canvas"],cx.prototype.getOrdering=function(e,t){return null},i(cx,nd),cE.$inject=["eventBus","canvas"],i(cE,cx),cw.prototype.get=function(){return this._data},cw.prototype.set=function(e){this._data=e},cw.prototype.clear=function(){var e=this._data;return delete this._data,e},cw.prototype.isEmpty=function(){return!this._data};var cS="drop-not-ok",ck="attach-ok",cC="new-parent",cR="create";function cP(e,t,n,i,o){function r(t,n){[ck,"drop-ok",cS,cC].forEach(function(i){i===n?e.addMarker(t,i):e.removeMarker(t,i)})}function s(){var e=t.context();e&&e.prefix===cR&&t.cancel()}n.on(["create.move","create.hover"],function(e){var t=e.context,n=t.elements,i=e.hover,s=t.source,c=t.hints||{};if(!i){t.canExecute=!1,t.target=null;return}cA(e);var p={x:e.x,y:e.y},l=t.canExecute=i&&function(e,t,n,i,r){if(!t)return!1;e=(0,a.hX)(e,function(t){var n=t.labelTarget;return!t.parent&&!((0,tH.j_)(t)&&-1!==e.indexOf(n))});var s=(0,a.sE)(e,function(e){return!(0,tH.Ho)(e)}),c=!1,p=!1,l=!1;cM(e)&&(c=o.allowed("shape.attach",{position:n,shape:s,target:t})),c||(l=cM(e)?o.allowed("shape.create",{position:n,shape:s,source:i,target:t}):o.allowed("elements.create",{elements:e,position:n,target:t}));var u=r.connectionTarget;return l||c?(s&&i&&(p=o.allowed("connection.create",{source:u===i?s:i,target:u===i?i:s,hints:{targetParent:t,targetAttach:c}})),{attach:c,connect:p}):(null===l||null===c)&&null}(n,i,p,s,c);i&&null!==l&&(t.target=i,l&&l.attach?r(i,ck):r(i,l?cC:cS))}),n.on(["create.end","create.out","create.cleanup"],function(e){var t=e.hover;t&&r(t,null)}),n.on("create.end",function(e){var t=e.context,n=t.source,o=t.shape,r=t.elements,s=t.target,c=t.canExecute,p=c&&c.attach,l=c&&c.connect,u=t.hints||{};if(!1===c||!s)return!1;cA(e);var h={x:e.x,y:e.y};l?o=i.appendShape(n,o,h,s,{attach:p,connection:!0===l?{}:l,connectionTarget:u.connectionTarget}):(r=i.createElements(r,h,s,(0,a.f0)({},u,{attach:p})),o=(0,a.sE)(r,function(e){return!(0,tH.Ho)(e)})),(0,a.f0)(t,{elements:r,shape:o}),(0,a.f0)(e,{elements:r,shape:o})}),n.on("create.init",function(){n.on("elements.changed",s),n.once(["create.cancel","create.end"],2e3,function(){n.off("elements.changed",s)})}),this.start=function(e,n,i){(0,a.kJ)(n)||(n=[n]);var o=(0,a.sE)(n,function(e){return!(0,tH.Ho)(e)});if(o){i=(0,a.f0)({elements:n,hints:{},shape:o},i||{}),(0,a.Ed)(n,function(e){(0,a.hj)(e.x)||(e.x=0),(0,a.hj)(e.y)||(e.y=0)});var r=P((0,a.hX)(n,function(e){return!e.hidden}));(0,a.Ed)(n,function(e){(0,tH.Ho)(e)&&(e.waypoints=(0,a.UI)(e.waypoints,function(e){return{x:e.x-r.x-r.width/2,y:e.y-r.y-r.height/2}})),(0,a.f0)(e,{x:e.x-r.x-r.width/2,y:e.y-r.y-r.height/2})}),t.init(e,cR,{cursor:"grabbing",autoActivate:!0,data:{shape:o,elements:n,context:i}})}}}function cA(e){var t=e.context.createConstraints;t&&(t.left&&(e.x=Math.max(e.x,t.left)),t.right&&(e.x=Math.min(e.x,t.right)),t.top&&(e.y=Math.max(e.y,t.top)),t.bottom&&(e.y=Math.min(e.y,t.bottom)))}function cM(e){return e&&1===e.length&&!(0,tH.Ho)(e[0])}function cT(e,t,n,i,o){t.on("create.move",750,function(t){var r,a,s,p=t.hover,l=t.context,u=l.elements,h=l.dragGroup;h||(h=l.dragGroup=(r=(0,c.Ue)("g"),(0,c.Lj)(r,o.cls("djs-drag-group",["no-events"])),a=(0,c.Ue)("g"),u.forEach(function(e){var t;e.hidden||(e.waypoints?(t=n._createContainer("connection",a),n.drawConnection((0,el.s)(t),e)):(t=n._createContainer("shape",a),n.drawShape((0,el.s)(t),e),eh(t,e.x,e.y)),i.addDragger(e,r,t))}),r)),p?(h.parentNode||(s=e.getActiveLayer(),(0,c.R3)(s,h)),eh(h,t.x,t.y)):(0,c.Od)(h)}),t.on("create.cleanup",function(e){var t=e.context.dragGroup;t&&(0,c.Od)(t)})}cP.$inject=["canvas","dragging","eventBus","modeling","rules"],cT.$inject=["canvas","eventBus","graphicsFactory","previewSupport","styles"];var cD={__depends__:[ro,an,rs,nV],__init__:["create","createPreview"],create:["type",cP],createPreview:["type",cT]};function cB(e){var t=this;function n(e){t._lastMoveEvent=e}this._lastMoveEvent=null,e.on("canvas.init",function(e){(t._svg=e.svg).addEventListener("mousemove",n)}),e.on("canvas.destroy",function(){t._lastMouseEvent=null,t._svg.removeEventListener("mousemove",n)})}cB.$inject=["eventBus"],cB.prototype.getLastMoveEvent=function(){var e;return this._lastMoveEvent||((e=document.createEvent("MouseEvent")).initMouseEvent&&e.initMouseEvent("mousemove",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e)};var cj={__init__:["mouse"],mouse:["type",cB]};function cN(e,t,n,i,o,r,s,c){this._canvas=e,this._create=t,this._clipboard=n,this._elementFactory=i,this._eventBus=o,this._modeling=r,this._mouse=s,this._rules=c,o.on("copyPaste.copyElement",function(e){var t=e.descriptor,n=e.element,i=e.elements;t.priority=1,t.id=n.id,(0,a.sE)(i,function(e){return e===n.parent})&&(t.parent=n.parent.id),n.host&&(t.priority=2,t.host=n.host.id),(0,tH.Ho)(n)&&(t.priority=3,t.source=n.source.id,t.target=n.target.id,t.waypoints=(0,a.UI)(n.waypoints,function(e){return(e=cO(e)).original&&(e.original=cO(e.original)),e})),(0,tH.j_)(n)&&(t.priority=4,t.labelTarget=n.labelTarget.id),(0,a.Ed)(["x","y","width","height"],function(e){(0,a.hj)(n[e])&&(t[e]=n[e])}),t.hidden=n.hidden,t.collapsed=n.collapsed}),o.on("copyPaste.pasteElements",function(e){var t=e.hints;(0,a.f0)(t,{createElementsBehavior:!1})})}function cO(e){return(0,a.f0)({},e)}function cL(e,t,n){(0,a.kJ)(n)||(n=[n]),(0,a.Ed)(n,function(n){(0,a.o8)(e[n])||(t[n]=e[n])})}function c$(e,t,n){function i(t,i){var o=e.create(t.$type);return n.copyElement(t,o,null,i)}t.on("copyPaste.copyElement",750,function(e){var t=e.descriptor,n=e.element,o=tw(n);if((0,tH.j_)(n))return t;var r=t.businessObject=i(o,!0),a=t.di=i(tS(n),!0);a.bpmnElement=r,cL(r,t,"name"),cL(a,t,"isExpanded"),o.default&&(t.default=o.default.id)});var o="-bpmn-js-refs";t.on("copyPaste.pasteElement",function(e){var t=e.cache,n=e.descriptor,o=n.businessObject,r=n.di;if((0,tH.j_)(n)){n.businessObject=tw(t[n.labelTarget]),n.di=tS(t[n.labelTarget]);return}o=n.businessObject=i(o),(r=n.di=i(r)).bpmnElement=o,cL(n,o,["isExpanded","name"]),n.type=o.$type}),t.on("copyPaste.copyElement",750,function(e){var t=e.descriptor,n=e.element;if(tx(n,"bpmn:Participant")){var o=tw(n);o.processRef&&(t.processRef=i(o.processRef,!0))}}),t.on("copyPaste.pasteElement",function(e){var t=e.descriptor,n=t.processRef;n&&(t.processRef=i(n))}),t.on("copyPaste.pasteElement",750,function(e){var t,n,i,r=e.cache,s=e.descriptor;t=r[o]=r[o]||{},n=tw(s),s.default&&(t[s.default]={element:n,property:"default"}),s.host&&(tw(s).attachedToRef=tw(r[s.host])),i=(0,a.CE)(t,(0,a.u4)(t,function(e,t,i){var o=t.element,r=t.property;return i===s.id&&(o.set(r,n),e.push(s.id)),e},[])),r[o]=i})}cN.$inject=["canvas","create","clipboard","elementFactory","eventBus","modeling","mouse","rules"],cN.prototype.copy=function(e){var t,n;return(0,a.kJ)(e)||(e=e?[e]:[]),n=!1===(t=this._eventBus.fire("copyPaste.canCopyElements",{elements:e}))?{}:this.createTree((0,a.kJ)(t)?t:e),this._clipboard.set(n),this._eventBus.fire("copyPaste.elementsCopied",{elements:e,tree:n}),n},cN.prototype.paste=function(e){var t=this._clipboard.get();if(!this._clipboard.isEmpty()){var n=e&&e.hints||{};this._eventBus.fire("copyPaste.pasteElements",{hints:n});var i=this._createElements(t);if(e&&e.element&&e.point)return this._paste(i,e.element,e.point,n);this._create.start(this._mouse.getLastMoveEvent(),i,{hints:n||{}})}},cN.prototype._paste=function(e,t,n,i){(0,a.Ed)(e,function(e){(0,a.hj)(e.x)||(e.x=0),(0,a.hj)(e.y)||(e.y=0)});var o=P(e);return(0,a.Ed)(e,function(e){(0,tH.Ho)(e)&&(e.waypoints=(0,a.UI)(e.waypoints,function(e){return{x:e.x-o.x-o.width/2,y:e.y-o.y-o.height/2}})),(0,a.f0)(e,{x:e.x-o.x-o.width/2,y:e.y-o.y-o.height/2})}),this._modeling.createElements(e,n,t,(0,a.f0)({},i))},cN.prototype._createElements=function(e){var t=this,n=this._eventBus,i={},o=[];return(0,a.Ed)(e,function(e,r){r=parseInt(r,10),e=(0,a.MR)(e,"priority"),(0,a.Ed)(e,function(e){var r,s=(0,a.f0)({},(0,a.CE)(e,["priority"]));if(i[e.parent]?s.parent=i[e.parent]:delete s.parent,n.fire("copyPaste.pasteElement",{cache:i,descriptor:s}),(0,tH.Ho)(s)){s.source=i[e.source],s.target=i[e.target],r=i[e.id]=t.createConnection(s),o.push(r);return}if((0,tH.j_)(s)){s.labelTarget=i[s.labelTarget],r=i[e.id]=t.createLabel(s),o.push(r);return}s.host&&(s.host=i[s.host]),r=i[e.id]=t.createShape(s),o.push(r)})}),o},cN.prototype.createConnection=function(e){return this._elementFactory.createConnection((0,a.CE)(e,["id"]))},cN.prototype.createLabel=function(e){return this._elementFactory.createLabel((0,a.CE)(e,["id"]))},cN.prototype.createShape=function(e){return this._elementFactory.createShape((0,a.CE)(e,["id"]))},cN.prototype.hasRelations=function(e,t){var n,i;return!((0,tH.Ho)(e)&&(n=(0,a.sE)(t,(0,a.KQ)({id:e.source.id})),i=(0,a.sE)(t,(0,a.KQ)({id:e.target.id})),!n||!i)||(0,tH.j_)(e)&&!(0,a.sE)(t,(0,a.KQ)({id:e.labelTarget.id})))},cN.prototype.createTree=function(e){var t=this._rules,n=this,i={},o=[];function r(e,t){var n,i,r=(0,a.sE)(o,function(t){return e===t.element});if(!r){o.push({element:e,depth:t});return}r.depth<t&&(-1!==(i=(n=o).indexOf(r))&&n.splice(i,1),o=n).push({element:r.element,depth:t})}return C(S(e),function(e,t,i){if(!(0,tH.j_)(e)){(0,a.Ed)(e.labels,function(e){r(e,i)}),(0,a.Ed)([e.attachers,e.incoming,e.outgoing],function(e){e&&e.length&&(0,a.Ed)(e,function(e){(0,a.Ed)(e.labels,function(e){r(e,i)}),r(e,i)})}),r(e,i);var o=[];return e.children&&(o=e.children.slice()),n._eventBus.fire("copyPaste.createTree",{element:e,children:o}),o}}),e=(0,a.UI)(o,function(e){return e.element}),o=(0,a.UI)(o,function(t){return t.descriptor={},n._eventBus.fire("copyPaste.copyElement",{descriptor:t.descriptor,element:t.element,elements:e}),t}),o=(0,a.MR)(o,function(e){return e.descriptor.priority}),e=(0,a.UI)(o,function(e){return e.element}),(0,a.Ed)(o,function(o){var r,a,s,c,p,l=o.depth;if(!n.hasRelations(o.element,e)||(c=o.element,p=e,!t.allowed("element.copy",{element:c,elements:p}))){r=o.element,-1===(s=(a=e).indexOf(r))||a.splice(s,1);return}i[l]||(i[l]=[]),i[l].push(o.descriptor)}),i},c$.$inject=["bpmnFactory","eventBus","moddleCopy"];let cI=["artifacts","dataInputAssociations","dataOutputAssociations","default","flowElements","lanes","incoming","outgoing","categoryValue"],cz=["errorRef","escalationRef","messageRef","signalRef"];function cH(e,t,n){this._bpmnFactory=t,this._eventBus=e,this._moddle=n,e.on("moddleCopy.canCopyProperties",e=>{let{propertyNames:t}=e;if(t&&t.length)return(0,a.MR)(t,e=>"extensionElements"===e)}),e.on("moddleCopy.canCopyProperty",e=>{let{parent:t,property:n,propertyName:i}=e,o=(0,a.Kn)(t)&&t.$descriptor;return i&&cz.includes(i)?n:!(i&&cI.includes(i))&&(!i||!o||!!(0,a.sE)(o.properties,(0,a.KQ)({name:i})))&&void 0}),e.on("moddleCopy.canSetCopiedProperty",e=>{let{property:t}=e;if(tx(t,"bpmn:ExtensionElements")&&(!t.values||!t.values.length))return!1})}function cF(e,t){return(0,a.u4)(e.properties,(e,n)=>t&&n.default?e:e.concat(n.name),[])}cH.$inject=["eventBus","bpmnFactory","moddle"],cH.prototype.copyElement=function(e,t,n,i=!1){n&&!(0,a.kJ)(n)&&(n=[n]),n=n||cF(e.$descriptor);let o=this._eventBus.fire("moddleCopy.canCopyProperties",{propertyNames:n,sourceElement:e,targetElement:t,clone:i});return!1===o||((0,a.kJ)(o)&&(n=o),(0,a.Ed)(n,n=>{let o;(0,a.e$)(e,n)&&(o=e.get(n));let r=this.copyProperty(o,t,n,i);(0,a.$K)(r)&&!1!==this._eventBus.fire("moddleCopy.canSetCopiedProperty",{parent:t,property:r,propertyName:n})&&t.set(n,r)})),t},cH.prototype.copyProperty=function(e,t,n,i=!1){let o=this._eventBus.fire("moddleCopy.canCopyProperty",{parent:t,property:e,propertyName:n,clone:i});if(!1===o)return;if(o)return(0,a.Kn)(o)&&o.$type&&!o.$parent&&(o.$parent=t),o;let r=this._moddle.getPropertyDescriptor(t,n);if(!r.isReference){if(r.isId)return e&&this._copyId(e,t,i);if((0,a.kJ)(e))return(0,a.u4)(e,(e,o)=>{let r=this.copyProperty(o,t,n,i);return r?e.concat(r):e},[]);if((0,a.Kn)(e)&&e.$type){if(this._moddle.getElementDescriptor(e).isGeneric)return;return(o=this._bpmnFactory.create(e.$type)).$parent=t,o=this.copyElement(e,o,null,i)}return e}},cH.prototype._copyId=function(e,t,n=!1){return n?e:this._moddle.ids.assigned(e)?void 0:(this._moddle.ids.claim(e,t),e)};var cG={__depends__:[{__depends__:[{clipboard:["type",cw]},cD,cj,rs],__init__:["copyPaste"],copyPaste:["type",cN]}],__init__:["bpmnCopyPaste","moddleCopy"],bpmnCopyPaste:["type",c$],moddleCopy:["type",cH]},cW=Math.round;function cV(e,t){this._modeling=e,this._eventBus=t}function cU(e,t){t.on("replace.end",500,function(t){let{newElement:n,hints:i={}}=t;!1!==i.select&&e.select(n)})}cV.$inject=["modeling","eventBus"],cV.prototype.replaceElement=function(e,t,n){if(e.waypoints)return null;var i=this._modeling,o=this._eventBus;o.fire("replace.start",{element:e,attrs:t,hints:n});var r=t.width||e.width,s=t.height||e.height,c=t.x||e.x,p=t.y||e.y,l=cW(c+r/2),u=cW(p+s/2),h=i.replaceShape(e,(0,a.f0)({},t,{x:l,y:u,width:r,height:s}),n);return o.fire("replace.end",{element:e,newElement:h,hints:n}),h},cU.$inject=["selection","eventBus"];var cK=["cancelActivity","instantiate","eventGatewayType","triggeredByEvent","isInterrupting"];function cq(e,t,n,i,o,r){this.replaceElement=function(s,c,p){p=p||{};var l,u,h,d,m,f,g,y=c.type,v=s.businessObject;if(cJ(v)&&("bpmn:SubProcess"===y||"bpmn:AdHocSubProcess"===y)&&(d=s&&(0,a.e$)(s,"collapsed")?s.collapsed:!tL(s),h=c&&((0,a.e$)(c,"collapsed")||(0,a.e$)(c,"isExpanded"))?(0,a.e$)(c,"collapsed")?c.collapsed:!c.isExpanded:d,d!==h))return i.toggleCollapse(s),s;var _=e.create(y),b={type:y,businessObject:_};b.di={},"bpmn:ExclusiveGateway"===y&&(b.di.isMarkerVisible=!0),m=s.di,f=b.di,g=["fill","stroke","background-color","border-color","color"],(0,a.kJ)(g)||(g=[g]),(0,a.Ed)(g,function(e){(0,a.o8)(m[e])||(f[e]=m[e])});var x=(l=cF(v.$descriptor),u=cF(_.$descriptor,!0),l.filter(function(e){return u.includes(e)}));(0,a.f0)(_,(0,a.ei)(c,cK));var E=(0,a.hX)(x,function(e){return"eventDefinitions"===e?cX(s,c.eventDefinitionType):"loopCharacteristics"===e?!tI(_):!(0,a.e$)(_,e)&&("processRef"!==e||!1!==c.isExpanded)&&"triggeredByEvent"!==e&&("isForCompensation"!==e||!tI(_))});if(_=n.copyElement(v,_,E),c.eventDefinitionType&&!cX(_,c.eventDefinitionType)&&(b.eventDefinitionType=c.eventDefinitionType,b.eventDefinitionAttrs=c.eventDefinitionAttrs),tx(v,"bpmn:Activity")){if(cJ(v))b.isExpanded=tL(s);else if(c&&(0,a.e$)(c,"isExpanded")){b.isExpanded=c.isExpanded;var w=t.getDefaultSize(_,{isExpanded:b.isExpanded});b.width=w.width,b.height=w.height,b.x=s.x-(b.width-s.width)/2,b.y=s.y-(b.height-s.height)/2}tL(s)&&!tx(v,"bpmn:Task")&&b.isExpanded&&(b.width=s.width,b.height=s.height)}if(cJ(v)&&!cJ(_)&&(p.moveChildren=!1),tx(v,"bpmn:Participant")){!0===c.isExpanded?_.processRef=e.create("bpmn:Process"):p.moveChildren=!1;var S=t$(s);tS(s).isHorizontal||(tS(b).isHorizontal=S),b.width=S?s.width:t.getDefaultSize(b).width,b.height=S?t.getDefaultSize(b).height:s.height}return r.allowed("shape.resize",{shape:_})||(b.height=t.getDefaultSize(b).height,b.width=t.getDefaultSize(b).width),_.name=v.name,tE(v,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&tE(_,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&(_.default=v.default),c.host&&!tx(v,"bpmn:BoundaryEvent")&&tx(_,"bpmn:BoundaryEvent")&&(b.host=c.host),("bpmn:DataStoreReference"===b.type||"bpmn:DataObjectReference"===b.type)&&(b.x=s.x+(s.width-b.width)/2),o.replaceElement(s,b,{...p,targetElement:c})}}function cJ(e){return tx(e,"bpmn:SubProcess")}function cX(e,t){var n=tw(e);return t&&n.get("eventDefinitions").some(function(e){return tx(e,t)})}cq.$inject=["bpmnFactory","elementFactory","moddleCopy","modeling","replace","rules"];var cY={__depends__:[cG,{__init__:["replace","replaceSelectionBehavior"],replaceSelectionBehavior:["type",cU],replace:["type",cV]},nV],bpmnReplace:["type",cq]};function cZ(e){this._eventBus=e,this._tools=[],this._active=null}cZ.$inject=["eventBus"],cZ.prototype.registerTool=function(e,t){var n=this._tools;if(!t)throw Error('A tool has to be registered with it\'s "events"');n.push(e),this.bindEvents(e,t)},cZ.prototype.isActive=function(e){return e&&this._active===e},cZ.prototype.length=function(e){return this._tools.length},cZ.prototype.setActive=function(e){var t=this._eventBus;this._active!==e&&(this._active=e,t.fire("tool-manager.update",{tool:e}))},cZ.prototype.bindEvents=function(e,t){var n=this._eventBus,i=[];n.on(t.tool+".init",function(t){if(!t.context.reactivate&&this.isActive(e)){this.setActive(null);return}this.setActive(e)},this),(0,a.Ed)(t,function(e){i.push(e+".ended"),i.push(e+".canceled")}),n.on(i,250,function(e){var t;!(!this._active||(t=e.originalEvent&&e.originalEvent.target)&&(0,s.oq)(t,'.group[data-group="tools"]'))&&this.setActive(null)},this)};var cQ={__depends__:[ro],__init__:["toolManager"],toolManager:["type",cZ]};function c0(e,t){return -1!==e.indexOf(t)}var c1=Math.abs,c2=Math.round,c5={x:"width",y:"height"},c3="crosshair",c6={n:"top",w:"left",s:"bottom",e:"right"},c4={n:"s",w:"e",s:"n",e:"w"};function c9(e,t,n,i,o,r,a){this._canvas=e,this._dragging=t,this._eventBus=n,this._modeling=i,this._rules=o,this._toolManager=r,this._mouse=a;var s=this;r.registerTool("space",{tool:"spaceTool.selection",dragging:"spaceTool"}),n.on("spaceTool.selection.end",function(e){n.once("spaceTool.selection.ended",function(){s.activateMakeSpace(e.originalEvent)})}),n.on("spaceTool.move",1500,function(e){var t=e.context,n=t.initialized;n||(n=t.initialized=s.init(e,t)),n&&c7(e)}),n.on("spaceTool.end",function(e){var t=e.context,i=t.axis,o=t.direction,r=t.movingShapes,a=t.resizingShapes,c=t.start;if(t.initialized){c7(e);var p={x:0,y:0};p[i]=c2(e["d"+i]),s.makeSpace(r,a,p,o,c),n.once("spaceTool.ended",function(e){s.activateSelection(e.originalEvent,!0,!0)})}})}function c8(e){return{top:e.top-20,right:e.right+20,bottom:e.bottom+20,left:e.left-20}}function c7(e){var t,n,i=e.context.spaceToolConstraints;i&&((0,a.hj)(i.left)&&(t=Math.max(e.x,i.left),e.dx=e.dx+t-e.x,e.x=t),(0,a.hj)(i.right)&&(t=Math.min(e.x,i.right),e.dx=e.dx+t-e.x,e.x=t),(0,a.hj)(i.top)&&(n=Math.max(e.y,i.top),e.dy=e.dy+n-e.y,e.y=n),(0,a.hj)(i.bottom)&&(n=Math.min(e.y,i.bottom),e.dy=e.dy+n-e.y,e.y=n))}function pe(e,t){return -1!==e.indexOf(t)}c9.$inject=["canvas","dragging","eventBus","modeling","rules","toolManager","mouse"],c9.prototype.activateSelection=function(e,t,n){this._dragging.init(e,"spaceTool.selection",{autoActivate:t,cursor:c3,data:{context:{reactivate:n}},trapClick:!1})},c9.prototype.activateMakeSpace=function(e){this._dragging.init(e,"spaceTool",{autoActivate:!0,cursor:c3,data:{context:{}}})},c9.prototype.makeSpace=function(e,t,n,i,o){return this._modeling.createSpace(e,t,n,i,o)},c9.prototype.init=function(e,t){var n=c1(e.dx)>c1(e.dy)?"x":"y",i=e["d"+n],o=e[n]-i;if(5>c1(i))return!1;i<0&&(i*=-1),nB(e)&&(i*=-1);var r=function(e,t){if("x"===e){if(t>0)return"e";if(t<0)return"w"}if("y"===e){if(t>0)return"s";if(t<0)return"n"}return null}(n,i),s=this._canvas.getRootElement();!nj(e)&&e.hover&&(s=e.hover);var c=[...R(s,!0),...s.attachers||[]],p=this.calculateAdjustments(c,n,i,o),l=this._eventBus.fire("spaceTool.getMinDimensions",{axis:n,direction:r,shapes:p.resizingShapes,start:o}),u=function(e,t,n,i,o){var r=e.movingShapes,s=e.resizingShapes;if(s.length){var c,p,l={};return(0,a.Ed)(s,function(e){var u,h,d,m,f,g=e.attachers,y=e.children,v=(0,L.JA)(e),_=(0,a.hX)(y,function(e){return!(0,tH.Ho)(e)&&!(0,tH.j_)(e)&&!pe(r,e)&&!pe(s,e)}),b=(0,a.hX)(y,function(e){return!(0,tH.Ho)(e)&&!(0,tH.j_)(e)&&pe(r,e)}),x=[],E=[];_.length&&(h=c8((0,L.JA)(P(_))),u=i-v[c6[n]]+h[c6[n]],"n"===n?l.bottom=p=(0,a.hj)(p)?Math.min(p,u):u:"w"===n?l.right=p=(0,a.hj)(p)?Math.min(p,u):u:"s"===n?l.top=c=(0,a.hj)(c)?Math.max(c,u):u:"e"===n&&(l.left=c=(0,a.hj)(c)?Math.max(c,u):u)),b.length&&(u=i-c8((0,L.JA)(P(b)))[c6[c4[n]]]+v[c6[c4[n]]],"n"===n?l.bottom=p=(0,a.hj)(p)?Math.min(p,u):u:"w"===n?l.right=p=(0,a.hj)(p)?Math.min(p,u):u:"s"===n?l.top=c=(0,a.hj)(c)?Math.max(c,u):u:"e"===n&&(l.left=c=(0,a.hj)(c)?Math.max(c,u):u)),g&&g.length&&(g.forEach(function(e){pe(r,e)?x.push(e):E.push(e)}),x.length&&(d=(0,L.JA)(P(x.map(L.wS))),m=v[c6[c4[n]]]-(d[c6[c4[n]]]-i)),E.length&&(f=(0,L.JA)(P(E.map(L.wS)))[c6[n]]-(v[c6[n]]-i)),"n"===n?(u=Math.min(m||1/0,f||1/0),l.bottom=p=(0,a.hj)(p)?Math.min(p,u):u):"w"===n?(u=Math.min(m||1/0,f||1/0),l.right=p=(0,a.hj)(p)?Math.min(p,u):u):"s"===n?(u=Math.max(m||-1/0,f||-1/0),l.top=c=(0,a.hj)(c)?Math.max(c,u):u):"e"===n&&(u=Math.max(m||-1/0,f||-1/0),l.left=c=(0,a.hj)(c)?Math.max(c,u):u));var w=o&&o[e.id];w&&("n"===n?(u=i+e[c5[t]]-w[c5[t]],l.bottom=p=(0,a.hj)(p)?Math.min(p,u):u):"w"===n?(u=i+e[c5[t]]-w[c5[t]],l.right=p=(0,a.hj)(p)?Math.min(p,u):u):"s"===n?(u=i-e[c5[t]]+w[c5[t]],l.top=c=(0,a.hj)(c)?Math.max(c,u):u):"e"===n&&(u=i-e[c5[t]]+w[c5[t]],l.left=c=(0,a.hj)(c)?Math.max(c,u):u))}),l}}(p,n,r,o,l);return(0,a.f0)(t,p,{axis:n,direction:r,spaceToolConstraints:u,start:o}),n7("resize-"+("x"===n?"ew":"ns")),!0},c9.prototype.calculateAdjustments=function(e,t,n,i){var o=this._rules,r=[],s=[],c=[],p=[];function l(e){r.includes(e)||r.push(e);var t=e.label;t&&!r.includes(t)&&r.push(t)}(0,a.Ed)(e,function(e){if(!(!e.parent||(0,tH.j_)(e))){if((0,tH.Ho)(e)){p.push(e);return}var r=e[t],a=r+e[c5[t]];if(e.host&&(n>0&&(0,L.wS)(e)[t]>i||n<0&&(0,L.wS)(e)[t]<i)){c.push(e);return}if(n>0&&r>i||n<0&&a<i){l(e);return}if(r<i&&a>i&&o.allowed("shape.resize",{shape:e})){s.includes(e)||s.push(e);return}}}),(0,a.Ed)(r,function(e){var t=e.attachers;t&&(0,a.Ed)(t,function(e){l(e)})});var u=r.concat(s);return(0,a.Ed)(c,function(e){var t=e.host;pe(u,t)&&l(e)}),u=r.concat(s),(0,a.Ed)(p,function(e){var t=e.source,n=e.target,i=e.label;pe(u,t)&&pe(u,n)&&i&&l(i)}),{movingShapes:r,resizingShapes:s}},c9.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateSelection(e,!!e)},c9.prototype.isActive=function(){var e=this._dragging.context();return!!e&&/^spaceTool/.test(e.prefix)};var pt="djs-dragging",pn="djs-resizing",pi=Math.max;function po(e,t,n,i,o){function r(e,t){(0,a.Ed)(e,function(e){o.addDragger(e,t),n.addMarker(e,pt)})}e.on("spaceTool.selection.start",function(e){var t=n.getLayer("space"),o=e.context,r=(0,c.Ue)("g");(0,c.Lj)(r,i.cls("djs-crosshair-group",["no-events"])),(0,c.R3)(t,r);var a=(0,c.Ue)("path");(0,c.Lj)(a,"d","M 0,-10000 L 0,10000"),(0,c.Sh)(a).add("djs-crosshair"),(0,c.R3)(r,a);var s=(0,c.Ue)("path");(0,c.Lj)(s,"d","M -10000,0 L 10000,0"),(0,c.Sh)(s).add("djs-crosshair"),(0,c.R3)(r,s),o.crosshairGroup=r}),e.on("spaceTool.selection.move",function(e){eh(e.context.crosshairGroup,e.x,e.y)}),e.on("spaceTool.selection.cleanup",function(e){var t=e.context.crosshairGroup;t&&(0,c.Od)(t)}),e.on("spaceTool.move",250,function(e){var s=e.context,p=s.line,l=s.axis,u=s.movingShapes,h=s.resizingShapes;if(s.initialized){if(!s.dragGroup){var d=n.getLayer("space");p=(0,c.Ue)("path"),(0,c.Lj)(p,"d","M0,0 L0,0"),(0,c.Sh)(p).add("djs-crosshair"),(0,c.R3)(d,p),s.line=p;var m=(0,c.Ue)("g");(0,c.Lj)(m,i.cls("djs-drag-group",["no-events"])),(0,c.R3)(n.getActiveLayer(),m),r(u,m),r(s.movingConnections=t.filter(function(e){var t=!1;(0,a.Ed)(u,function(n){(0,a.Ed)(n.outgoing,function(n){e===n&&(t=!0)})});var n=!1;(0,a.Ed)(u,function(t){(0,a.Ed)(t.incoming,function(t){e===t&&(n=!0)})});var i=!1;(0,a.Ed)(h,function(t){(0,a.Ed)(t.outgoing,function(t){e===t&&(i=!0)})});var o=!1;return(0,a.Ed)(h,function(t){(0,a.Ed)(t.incoming,function(t){e===t&&(o=!0)})}),(0,tH.Ho)(e)&&(t||i)&&(n||o)}),m),s.dragGroup=m}if(!s.frameGroup){var f=(0,c.Ue)("g");(0,c.Lj)(f,i.cls("djs-frame-group",["no-events"])),(0,c.R3)(n.getActiveLayer(),f);var g=[];(0,a.Ed)(h,function(e){var t=o.addFrame(e,f),i=t.getBBox();g.push({element:t,initialBounds:i}),n.addMarker(e,pn)}),s.frameGroup=f,s.frames=g}var y={x:"M"+e.x+", -10000 L"+e.x+", 10000",y:"M -10000, "+e.y+" L 10000, "+e.y};(0,c.Lj)(p,{d:y[l]});var v={x:e.dx,y:e.dy};v[({x:"y",y:"x"})[s.axis]]=0,eh(s.dragGroup,v.x,v.y),(0,a.Ed)(s.frames,function(e){var t,n,i=e.element,o=e.initialBounds;"e"===s.direction?(0,c.Lj)(i,{width:pi(o.width+v.x,5)}):(t=pi(o.width-v.x,5),(0,c.Lj)(i,{width:t,x:o.x+o.width-t})),"s"===s.direction?(0,c.Lj)(i,{height:pi(o.height+v.y,5)}):(n=pi(o.height-v.y,5),(0,c.Lj)(i,{height:n,y:o.y+o.height-n}))})}}),e.on("spaceTool.cleanup",function(e){var t=e.context,i=t.movingShapes,o=t.movingConnections,r=t.resizingShapes,s=t.line,p=t.dragGroup,l=t.frameGroup;(0,a.Ed)(i,function(e){n.removeMarker(e,pt)}),(0,a.Ed)(o,function(e){n.removeMarker(e,pt)}),p&&((0,c.Od)(s),(0,c.Od)(p)),(0,a.Ed)(r,function(e){n.removeMarker(e,pn)}),l&&(0,c.Od)(l)})}function pr(e,t){e.invoke(c9,this),this._canvas=t}po.$inject=["eventBus","elementRegistry","canvas","styles","previewSupport"],pr.$inject=["injector","canvas"],i(pr,c9),pr.prototype.calculateAdjustments=function(e,t,n,i){var o=this._canvas.getRootElement(),r=e[0]===o?null:e[0],s=[];r&&(s=(0,a.VO)(A(o.children.filter(e=>tx(e,"bpmn:Artifact")),P(r))));let c=[...e,...s];var p=c9.prototype.calculateAdjustments.call(this,c,t,n,i);return p.resizingShapes=p.resizingShapes.filter(function(e){return!(tx(e,"bpmn:TextAnnotation")||tx(e,"bpmn:Participant")&&!tw(e).processRef&&("y"===t&&t$(e)||"x"===t&&!t$(e)))}),p};var pa={__depends__:[{__init__:["spaceToolPreview"],__depends__:[ro,rs,cQ,an,cj],spaceTool:["type",c9],spaceToolPreview:["type",po]}],spaceTool:["type",pr]};function ps(e,t){this._handlerMap={},this._stack=[],this._stackIdx=-1,this._currentExecution={actions:[],dirty:[],trigger:null},this._injector=t,this._eventBus=e,this._uid=1,e.on(["diagram.destroy","diagram.clear"],function(){this.clear(!1)},this)}function pc(e,t){var n;if("function"!=typeof t)throw Error("removeFn iterator must be a function");if(e){for(;n=e[0];)t(n);return e}}function pp(e,t,n){nd.call(this,t);var i=e.get("movePreview",!1);t.on("shape.move.start",1400,function(e){var t=e.context,n=t.shapes,i=t.validatedShapes;t.shapes=pl(n),t.validatedShapes=pl(i)}),i&&t.on("shape.move.start",250,function(e){var t=e.context,n=t.shapes,o=[];(0,a.Ed)(n,function(e){(0,a.Ed)(e.labels,function(n){n.hidden||-1!==t.shapes.indexOf(n)||o.push(n),e.labelTarget&&o.push(e)})}),(0,a.Ed)(o,function(e){i.makeDraggable(t,e,!0)})}),this.preExecuted("elements.move",1400,function(e){var t=e.context.closure,n=t.enclosedElements,i=[];(0,a.Ed)(n,function(e){(0,a.Ed)(e.labels,function(e){n[e.id]||i.push(e)})}),t.addAll(i)}),this.preExecute(["connection.delete","shape.delete"],function(e){var t=e.context;pc((t.connection||t.shape).labels,function(e){n.removeShape(e,{nested:!0})})}),this.execute("shape.delete",function(e){var t=e.context,n=t.shape,i=n.labelTarget;i&&(t.labelTargetIndex=O(i.labels,n),t.labelTarget=i,n.labelTarget=null)}),this.revert("shape.delete",function(e){var t=e.context,n=t.shape,i=t.labelTarget,o=t.labelTargetIndex;i&&(N(i.labels,n,o),n.labelTarget=i)})}function pl(e){return(0,a.hX)(e,function(t){return -1===e.indexOf(t.labelTarget)})}ps.$inject=["eventBus","injector"],ps.prototype.execute=function(e,t){if(!e)throw Error("command required");this._currentExecution.trigger="execute";let n={command:e,context:t};this._pushAction(n),this._internalExecute(n),this._popAction()},ps.prototype.canExecute=function(e,t){let n=this._getHandler(e),i=this._fire(e,"canExecute",{command:e,context:t});if(void 0===i){if(!n)return!1;n.canExecute&&(i=n.canExecute(t))}return i},ps.prototype.clear=function(e){this._stack.length=0,this._stackIdx=-1,!1!==e&&this._fire("changed",{trigger:"clear"})},ps.prototype.undo=function(){let e=this._getUndoAction(),t;if(e){for(this._currentExecution.trigger="undo",this._pushAction(e);e&&(this._internalUndo(e),(t=this._getUndoAction())&&t.id===e.id);)e=t;this._popAction()}},ps.prototype.redo=function(){let e=this._getRedoAction(),t;if(e){for(this._currentExecution.trigger="redo",this._pushAction(e);e&&(this._internalExecute(e,!0),(t=this._getRedoAction())&&t.id===e.id);)e=t;this._popAction()}},ps.prototype.register=function(e,t){this._setHandler(e,t)},ps.prototype.registerHandler=function(e,t){if(!e||!t)throw Error("command and handlerCls must be defined");let n=this._injector.instantiate(t);this.register(e,n)},ps.prototype.canUndo=function(){return!!this._getUndoAction()},ps.prototype.canRedo=function(){return!!this._getRedoAction()},ps.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]},ps.prototype._getUndoAction=function(){return this._stack[this._stackIdx]},ps.prototype._internalUndo=function(e){let t=e.command,n=e.context,i=this._getHandler(t);this._atomicDo(()=>{this._fire(t,"revert",e),i.revert&&this._markDirty(i.revert(n)),this._revertedAction(e),this._fire(t,"reverted",e)})},ps.prototype._fire=function(e,t,n){let i;arguments.length<3&&(n=t,t=null);let o=t?[e+"."+t,t]:[e];for(let e of(n=this._eventBus.createEvent(n),o))if(i=this._eventBus.fire("commandStack."+e,n),n.cancelBubble)break;return i},ps.prototype._createId=function(){return this._uid++},ps.prototype._atomicDo=function(e){let t=this._currentExecution;t.atomic=!0;try{e()}finally{t.atomic=!1}},ps.prototype._internalExecute=function(e,t){let n=e.command,i=e.context,o=this._getHandler(n);if(!o)throw Error("no command handler registered for <"+n+">");this._pushAction(e),t||(this._fire(n,"preExecute",e),o.preExecute&&o.preExecute(i),this._fire(n,"preExecuted",e)),this._atomicDo(()=>{this._fire(n,"execute",e),o.execute&&this._markDirty(o.execute(i)),this._executedAction(e,t),this._fire(n,"executed",e)}),t||(this._fire(n,"postExecute",e),o.postExecute&&o.postExecute(i),this._fire(n,"postExecuted",e)),this._popAction()},ps.prototype._pushAction=function(e){let t=this._currentExecution,n=t.actions,i=n[0];if(t.atomic)throw Error("illegal invocation in <execute> or <revert> phase (action: "+e.command+")");e.id||(e.id=i&&i.id||this._createId()),n.push(e)},ps.prototype._popAction=function(){let e=this._currentExecution,t=e.trigger,n=e.actions,i=e.dirty;n.pop(),n.length||(this._eventBus.fire("elements.changed",{elements:(0,a.uw)("id",i.reverse())}),i.length=0,this._fire("changed",{trigger:t}),e.trigger=null)},ps.prototype._markDirty=function(e){let t=this._currentExecution;e&&(e=(0,a.kJ)(e)?e:[e],t.dirty=t.dirty.concat(e))},ps.prototype._executedAction=function(e,t){let n=++this._stackIdx;t||this._stack.splice(n,this._stack.length,e)},ps.prototype._revertedAction=function(e){this._stackIdx--},ps.prototype._getHandler=function(e){return this._handlerMap[e]},ps.prototype._setHandler=function(e,t){if(!e||!t)throw Error("command and handler required");if(this._handlerMap[e])throw Error("overriding handler for command <"+e+">");this._handlerMap[e]=t},i(pp,nd),pp.$inject=["injector","eventBus","modeling"];var pu="attach-ok";function ph(e,t,n,i,o){nd.call(this,t);var r=e.get("movePreview",!1);t.on("shape.move.start",1401,function(e){var t,n,i=e.context,o=i.shapes,r=i.validatedShapes;i.shapes=(t=pd(o),(0,a.qZ)("id",o,t)),i.validatedShapes=(n=(0,a.vM)(r,"id"),(0,a.hX)(r,function(e){for(;e;){if(e.host&&n[e.host.id])return!1;e=e.parent}return!0}))}),r&&t.on("shape.move.start",251,function(e){var t=e.context,n=pd(t.shapes);(0,a.Ed)(n,function(e){r.makeDraggable(t,e,!0),(0,a.Ed)(e.labels,function(e){r.makeDraggable(t,e,!0)})})}),r&&t.on("shape.move.start",function(e){var i=e.context.shapes;if(1===i.length){var o=i[0].host;o&&(n.addMarker(o,pu),t.once(["shape.move.out","shape.move.cleanup"],function(){n.removeMarker(o,pu)}))}}),this.preExecuted("elements.move",1401,function(e){var t=e.context,n=t.closure,i=pd(t.shapes);(0,a.Ed)(i,function(e){n.add(e,n.topLevel[e.host.id])})}),this.postExecuted("elements.move",function(e){var t,n=e.context,i=n.shapes,r=n.newHost;r&&1!==i.length||(t=r?i:(0,a.hX)(i,function(e){var t=e.host;return!!e.host&&-1===i.indexOf(t)}),(0,a.Ed)(t,function(e){o.updateAttachment(e,r)}))}),this.postExecuted("elements.move",function(e){var t=e.context.shapes;(0,a.Ed)(t,function(e){(0,a.Ed)(e.attachers,function(e){(0,a.Ed)(e.outgoing.slice(),function(e){i.allowed("connection.reconnect",{connection:e,source:e.source,target:e.target})||o.removeConnection(e)}),(0,a.Ed)(e.incoming.slice(),function(e){i.allowed("connection.reconnect",{connection:e,source:e.source,target:e.target})||o.removeConnection(e)})})})}),this.postExecute("shape.create",function(e){var t=e.context,n=t.shape,i=t.host;i&&o.updateAttachment(n,i)}),this.postExecute("shape.replace",function(e){var t=e.context,n=t.oldShape,r=t.newShape;pc(n.attachers,function(e){"attach"===i.allowed("elements.move",{target:r,shapes:[e]})?o.updateAttachment(e,r):o.removeShape(e)}),r.attachers.length&&(0,a.Ed)(r.attachers,function(e){var t=a7(e,n,r);o.moveShape(e,t,e.parent)})}),this.postExecute("shape.resize",function(e){var t=e.context,n=t.shape,i=t.oldBounds,r=t.newBounds,s=n.attachers;!1!==(t.hints||{}).attachSupport&&(0,a.Ed)(s,function(e){var t=a7(e,i,r);o.moveShape(e,t,e.parent),(0,a.Ed)(e.labels,function(e){o.moveShape(e,t,e.parent)})})}),this.preExecute("shape.delete",function(e){var t=e.context.shape;pc(t.attachers,function(e){o.removeShape(e)}),t.host&&o.updateAttachment(t,null)})}function pd(e){return(0,a.xH)((0,a.UI)(e,function(e){return e.attachers||[]}))}function pm(e){this._model=e}function pf(e,t,n){nd.call(this,e),this._bpmnFactory=t;var i=this;function o(e){var t=e.context.oldRoot.children;(0,a.Ed)(t,function(e){tx(e,"bpmn:BaseElement")&&i.updateParent(e)})}function r(e){var t=e.context.shape;tx(t,"bpmn:BaseElement")&&i.updateBounds(t)}function s(e){i.updateConnection(e.context)}function c(e){i.updateConnectionWaypoints(e.context.connection)}function p(e){i.updateAttachment(e.context)}function l(e){let{element:n}=e.context,i=tK(n),o=tS(n),r=o&&o.get("label");tG(n)||n_(n)||(i&&!r?o.set("label",t.create("bpmndi:BPMNLabel")):!i&&r&&o.set("label",void 0))}this.executed(["connection.layout","connection.create"],function(e){var t,i=e.context,o=i.hints||{};i.cropped||!1===o.createElementsBehavior||((t=i.connection).waypoints=n.getCroppedWaypoints(t),i.cropped=!0)}),this.reverted(["connection.layout"],function(e){delete e.context.cropped}),this.executed(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],pg(function(e){var t=e.context;i.updateParent(t.shape||t.connection,t.oldParent)})),this.reverted(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],pg(function(e){var t=e.context,n=t.shape||t.connection,o=t.parent||t.newParent;i.updateParent(n,o)})),this.executed(["canvas.updateRoot"],o),this.reverted(["canvas.updateRoot"],o),this.executed(["shape.move","shape.create","shape.resize"],pg(function(e){"label"!==e.context.shape.type&&r(e)})),this.reverted(["shape.move","shape.create","shape.resize"],pg(function(e){"label"!==e.context.shape.type&&r(e)})),e.on("shape.changed",function(e){"label"===e.element.type&&r({context:{shape:e.element}})}),this.executed(["connection.create","connection.move","connection.delete","connection.reconnect"],pg(s)),this.reverted(["connection.create","connection.move","connection.delete","connection.reconnect"],pg(s)),this.executed(["connection.layout","connection.move","connection.updateWaypoints"],pg(c)),this.reverted(["connection.layout","connection.move","connection.updateWaypoints"],pg(c)),this.executed("connection.reconnect",pg(function(e){var t=e.context,n=t.connection,i=t.oldSource,o=t.newSource,r=tw(n),a=tw(i),s=tw(o);r.conditionExpression&&!tE(s,["bpmn:Activity","bpmn:ExclusiveGateway","bpmn:InclusiveGateway"])&&(t.oldConditionExpression=r.conditionExpression,delete r.conditionExpression),i!==o&&a.default===r&&(t.oldDefault=a.default,delete a.default)})),this.reverted("connection.reconnect",pg(function(e){var t=e.context,n=t.connection,i=t.oldSource,o=t.newSource,r=tw(n),a=tw(i),s=tw(o);t.oldConditionExpression&&(r.conditionExpression=t.oldConditionExpression),t.oldDefault&&(a.default=t.oldDefault,delete s.default)})),this.executed(["element.updateAttachment"],pg(p)),this.reverted(["element.updateAttachment"],pg(p)),this.executed("element.updateLabel",pg(l)),this.reverted("element.updateLabel",pg(l))}function pg(e){return function(t){var n=t.context;tx(n.shape||n.connection||n.element,"bpmn:BaseElement")&&e(t)}}function py(e,t){er.call(this),this._bpmnFactory=e,this._moddle=t}function pv(e,t,n){return void 0===t[n]?t:(e[n]=t[n],(0,a.CE)(t,[n]))}function p_(e,t){this._modeling=e,this._canvas=t}function pb(e){this._modeling=e}function px(e,t){this._canvas=e,this._layouter=t}i(ph,nd),ph.$inject=["injector","eventBus","canvas","rules","modeling"],pm.$inject=["moddle"],pm.prototype._needsId=function(e){return tE(e,["bpmn:RootElement","bpmn:FlowElement","bpmn:MessageFlow","bpmn:DataAssociation","bpmn:Artifact","bpmn:Participant","bpmn:Lane","bpmn:LaneSet","bpmn:Process","bpmn:Collaboration","bpmndi:BPMNShape","bpmndi:BPMNEdge","bpmndi:BPMNDiagram","bpmndi:BPMNPlane","bpmn:Property","bpmn:CategoryValue"])},pm.prototype._ensureId=function(e){var t;if(e.id){this._model.ids.claim(e.id,e);return}t=(tx(e,"bpmn:Activity")?"Activity":tx(e,"bpmn:Event")?"Event":tx(e,"bpmn:Gateway")?"Gateway":tE(e,["bpmn:SequenceFlow","bpmn:MessageFlow"])?"Flow":(e.$type||"").replace(/^[^:]*:/g,""))+"_",!e.id&&this._needsId(e)&&(e.id=this._model.ids.nextPrefixed(t,e))},pm.prototype.create=function(e,t){var n=this._model.create(e,t||{});return this._ensureId(n),n},pm.prototype.createDiLabel=function(){return this.create("bpmndi:BPMNLabel",{bounds:this.createDiBounds()})},pm.prototype.createDiShape=function(e,t){return this.create("bpmndi:BPMNShape",(0,a.f0)({bpmnElement:e,bounds:this.createDiBounds()},t))},pm.prototype.createDiBounds=function(e){return this.create("dc:Bounds",e)},pm.prototype.createDiWaypoints=function(e){var t=this;return(0,a.UI)(e,function(e){return t.createDiWaypoint(e)})},pm.prototype.createDiWaypoint=function(e){return this.create("dc:Point",(0,a.ei)(e,["x","y"]))},pm.prototype.createDiEdge=function(e,t){return this.create("bpmndi:BPMNEdge",(0,a.f0)({bpmnElement:e,waypoint:this.createDiWaypoints([])},t))},pm.prototype.createDiPlane=function(e,t){return this.create("bpmndi:BPMNPlane",(0,a.f0)({bpmnElement:e},t))},i(pf,nd),pf.$inject=["eventBus","bpmnFactory","connectionDocking"],pf.prototype.updateAttachment=function(e){var t=e.shape,n=t.businessObject,i=t.host;n.attachedToRef=i&&i.businessObject},pf.prototype.updateParent=function(e,t){if(!((0,tH.j_)(e)||tx(e,"bpmn:DataStoreReference")&&e.parent&&tx(e.parent,"bpmn:Collaboration"))){var n=e.parent,i=e.businessObject,o=tS(e),r=n&&n.businessObject,a=tS(n);tx(e,"bpmn:FlowNode")&&this.updateFlowNodeRefs(i,r,t&&t.businessObject),tx(e,"bpmn:DataOutputAssociation")&&(r=e.source?e.source.businessObject:null),tx(e,"bpmn:DataInputAssociation")&&(r=e.target?e.target.businessObject:null),this.updateSemanticParent(i,r),tx(e,"bpmn:DataObjectReference")&&i.dataObjectRef&&this.updateSemanticParent(i.dataObjectRef,r),this.updateDiParent(o,a)}},pf.prototype.updateBounds=function(e){var t=tS(e),n=function(e){if(tx(e,"bpmn:Activity")){var t=tS(e);if(t){var n=t.get("label");if(n)return n.get("bounds")}}}(e);if(n){var i=ii(n,t.get("bounds"));(0,a.f0)(n,{x:e.x+i.x,y:e.y+i.y})}var o=(0,tH.j_)(e)?this._getLabel(t):t,r=o.bounds;r||(r=this._bpmnFactory.createDiBounds(),o.set("bounds",r)),(0,a.f0)(r,{x:e.x,y:e.y,width:e.width,height:e.height})},pf.prototype.updateFlowNodeRefs=function(e,t,n){n!==t&&(tx(n,"bpmn:Lane")&&j(n.get("flowNodeRef"),e),tx(t,"bpmn:Lane")&&N(t.get("flowNodeRef"),e))},pf.prototype.updateDiConnection=function(e,t,n){var i=tS(e),o=tS(t),r=tS(n);i.sourceElement&&i.sourceElement.bpmnElement!==tw(t)&&(i.sourceElement=t&&o),i.targetElement&&i.targetElement.bpmnElement!==tw(n)&&(i.targetElement=n&&r)},pf.prototype.updateDiParent=function(e,t){if(t&&!tx(t,"bpmndi:BPMNPlane")&&(t=t.$parent),e.$parent!==t){var n=(t||e.$parent).get("planeElement");t?(n.push(e),e.$parent=t):(j(n,e),e.$parent=null)}},pf.prototype.getLaneSet=function(e){var t,n;return tx(e,"bpmn:Lane")?(t=e.childLaneSet)||(t=this._bpmnFactory.create("bpmn:LaneSet"),e.childLaneSet=t,t.$parent=e):(tx(e,"bpmn:Participant")&&(e=e.processRef),(t=(n=e.get("laneSets"))[0])||((t=this._bpmnFactory.create("bpmn:LaneSet")).$parent=e,n.push(t))),t},pf.prototype.updateSemanticParent=function(e,t,n){if(!(e.$parent===t||(tx(e,"bpmn:DataInput")||tx(e,"bpmn:DataOutput"))&&(tx(t,"bpmn:Participant")&&"processRef"in t&&(t=t.processRef),"ioSpecification"in t&&t.ioSpecification===e.$parent))){if(tx(e,"bpmn:Lane"))t&&(t=this.getLaneSet(t)),o="lanes";else if(tx(e,"bpmn:FlowElement")){if(t){if(tx(t,"bpmn:Participant"))t=t.processRef;else if(tx(t,"bpmn:Lane"))do t=t.$parent.$parent;while(tx(t,"bpmn:Lane"))}o="flowElements"}else if(tx(e,"bpmn:Artifact")){for(;t&&!tx(t,"bpmn:Process")&&!tx(t,"bpmn:SubProcess")&&!tx(t,"bpmn:Collaboration");){if(tx(t,"bpmn:Participant")){t=t.processRef;break}t=t.$parent}o="artifacts"}else if(tx(e,"bpmn:MessageFlow"))o="messageFlows";else if(tx(e,"bpmn:Participant")){o="participants";var i,o,r,a=e.processRef;a&&(r=function(e){for(;e&&!tx(e,"bpmn:Definitions");)e=e.$parent;return e}(e.$parent||t),e.$parent&&(j(r.get("rootElements"),a),a.$parent=null),t&&(N(r.get("rootElements"),a),a.$parent=r))}else tx(e,"bpmn:DataOutputAssociation")?o="dataOutputAssociations":tx(e,"bpmn:DataInputAssociation")&&(o="dataInputAssociations");if(!o)throw Error(`no parent for <${e.id}> in <${t.id}>`);if(e.$parent&&j(i=e.$parent.get(o),e),t?((i=t.get(o)).push(e),e.$parent=t):e.$parent=null,n){var s=n.get(o);j(i,e),t&&(s||(s=[],t.set(o,s)),s.push(e))}}},pf.prototype.updateConnectionWaypoints=function(e){tS(e).set("waypoint",this._bpmnFactory.createDiWaypoints(e.waypoints))},pf.prototype.updateConnection=function(e){var t,n=e.connection,i=tw(n),o=n.source,r=tw(o),a=n.target,s=tw(n.target);if(tx(i,"bpmn:DataAssociation"))tx(i,"bpmn:DataInputAssociation")?(i.get("sourceRef")[0]=r,t=e.parent||e.newParent||s,this.updateSemanticParent(i,s,t)):tx(i,"bpmn:DataOutputAssociation")&&(t=e.parent||e.newParent||r,this.updateSemanticParent(i,r,t),i.targetRef=s);else{var c=tx(i,"bpmn:SequenceFlow");i.sourceRef!==r&&(c&&(j(i.sourceRef&&i.sourceRef.get("outgoing"),i),r&&r.get("outgoing")&&r.get("outgoing").push(i)),i.sourceRef=r),i.targetRef!==s&&(c&&(j(i.targetRef&&i.targetRef.get("incoming"),i),s&&s.get("incoming")&&s.get("incoming").push(i)),i.targetRef=s)}this.updateConnectionWaypoints(n),this.updateDiConnection(n,o,a)},pf.prototype._getLabel=function(e){return e.label||(e.label=this._bpmnFactory.createDiLabel()),e.label},i(py,er),py.$inject=["bpmnFactory","moddle"],py.prototype._baseCreate=er.prototype.create,py.prototype.create=function(e,t){if("label"===e){var n=t.di||this._bpmnFactory.createDiLabel();return this._baseCreate(e,(0,a.f0)({type:"label",di:n},tF,t))}return this.createElement(e,t)},py.prototype.createElement=function(e,t){var n,i,o,r,s,c,p=(t=(0,a.f0)({},t||{})).businessObject,l=t.di;if(!p){if(!t.type)throw Error("no shape type specified");tv(p=this._bpmnFactory.create(t.type))}if(!tE(l,["bpmndi:BPMNShape","bpmndi:BPMNEdge","bpmndi:BPMNDiagram","bpmndi:BPMNPlane"])){var u=(0,a.f0)({},l||{},{id:p.id+"_di"});l="root"===e?this._bpmnFactory.createDiPlane(p,u):"connection"===e?this._bpmnFactory.createDiEdge(p,u):this._bpmnFactory.createDiShape(p,u)}return tx(p,"bpmn:Group")&&(t=(0,a.f0)({isFrame:!0},t)),(n=p,i=t,o=["processRef","isInterrupting","associationDirection","isForCompensation"],(0,a.Ed)(o,function(e){i=pv(n,i,e)}),t=i).isExpanded&&(t=pv(l,t,"isExpanded")),tE(p,["bpmn:Lane","bpmn:Participant"])&&(t=pv(l,t,"isHorizontal")),tx(p,"bpmn:SubProcess")&&(t.collapsed=!tL(p,l)),tx(p,"bpmn:ExclusiveGateway")&&((0,a.e$)(l,"isMarkerVisible")?void 0===l.isMarkerVisible&&(l.isMarkerVisible=!1):l.isMarkerVisible=!0),(0,a.$K)(t.triggeredByEvent)&&(p.triggeredByEvent=t.triggeredByEvent,delete t.triggeredByEvent),(0,a.$K)(t.cancelActivity)&&(p.cancelActivity=t.cancelActivity,delete t.cancelActivity),t.eventDefinitionType&&(s=p.get("eventDefinitions")||[],c=this._bpmnFactory.create(t.eventDefinitionType,t.eventDefinitionAttrs),"bpmn:ConditionalEventDefinition"===t.eventDefinitionType&&(c.condition=this._bpmnFactory.create("bpmn:FormalExpression")),s.push(c),c.$parent=p,p.eventDefinitions=s,delete t.eventDefinitionType),r=this.getDefaultSize(p,l),t=(0,a.f0)({id:p.id},r,t,{businessObject:p,di:l}),this._baseCreate(e,t)},py.prototype.getDefaultSize=function(e,t){var n=tw(e);if(t=t||tS(e),tx(n,"bpmn:SubProcess"))return tL(n,t)?{width:350,height:200}:{width:100,height:80};if(tx(n,"bpmn:Task"))return{width:100,height:80};if(tx(n,"bpmn:Gateway"))return{width:50,height:50};if(tx(n,"bpmn:Event"))return{width:36,height:36};if(tx(n,"bpmn:Participant")){var i=void 0===t.isHorizontal||!0===t.isHorizontal;return tL(n,t)?i?{width:600,height:250}:{width:250,height:600}:i?{width:400,height:60}:{width:60,height:400}}return tx(n,"bpmn:Lane")?{width:400,height:100}:tx(n,"bpmn:DataObjectReference")?{width:36,height:50}:tx(n,"bpmn:DataStoreReference")?{width:50,height:50}:tx(n,"bpmn:TextAnnotation")?{width:100,height:30}:tx(n,"bpmn:Group")?{width:300,height:300}:{width:100,height:80}},py.prototype.createParticipantShape=function(e){return(0,a.Kn)(e)||(e={isExpanded:e}),!1!==(e=(0,a.f0)({type:"bpmn:Participant"},e||{})).isExpanded&&(e.processRef=this._bpmnFactory.create("bpmn:Process")),this.createShape(e)},p_.$inject=["modeling","canvas"],p_.prototype.preExecute=function(e){var t=this._modeling,n=e.elements,i=e.alignment;(0,a.Ed)(n,function(e){var n={x:0,y:0};(0,a.$K)(i.left)?n.x=i.left-e.x:(0,a.$K)(i.right)?n.x=i.right-e.width-e.x:(0,a.$K)(i.center)?n.x=i.center-Math.round(e.width/2)-e.x:(0,a.$K)(i.top)?n.y=i.top-e.y:(0,a.$K)(i.bottom)?n.y=i.bottom-e.height-e.y:(0,a.$K)(i.middle)&&(n.y=i.middle-Math.round(e.height/2)-e.y),t.moveElements([e],n,e.parent)})},p_.prototype.postExecute=function(e){},pb.$inject=["modeling"],pb.prototype.preExecute=function(e){var t=e.source;if(!t)throw Error("source required");var n=e.target||t.parent,i=e.shape,o=e.hints||{};i=e.shape=this._modeling.createShape(i,e.position,n,{attach:o.attach}),e.shape=i},pb.prototype.postExecute=function(e){var t,n,i=e.hints||{};t=e.source,n=e.shape,(0,a.G)(t.outgoing,function(e){return e.target===n})||(i.connectionTarget===e.source?this._modeling.connect(e.shape,e.source,e.connection):this._modeling.connect(e.source,e.shape,e.connection))},px.$inject=["canvas","layouter"],px.prototype.execute=function(e){var t=e.connection,n=e.source,i=e.target,o=e.parent,r=e.parentIndex,a=e.hints;if(!n||!i)throw Error("source and target required");if(!o)throw Error("parent required");return t.source=n,t.target=i,t.waypoints||(t.waypoints=this._layouter.layoutConnection(t,a)),this._canvas.addConnection(t,o,r),t},px.prototype.revert=function(e){var t=e.connection;return this._canvas.removeConnection(t),t.source=null,t.target=null,t};var pE=Math.round;function pw(e){this._modeling=e}pw.$inject=["modeling"],pw.prototype.preExecute=function(e){var t=e.elements,n=e.parent,i=e.parentIndex,o=e.position,r=e.hints,s=this._modeling;(0,a.Ed)(t,function(e){(0,a.hj)(e.x)||(e.x=0),(0,a.hj)(e.y)||(e.y=0)});var c=P((0,a.hX)(t,function(e){return!e.hidden}));(0,a.Ed)(t,function(e){(0,tH.Ho)(e)&&(e.waypoints=(0,a.UI)(e.waypoints,function(e){return{x:pE(e.x-c.x-c.width/2+o.x),y:pE(e.y-c.y-c.height/2+o.y)}})),(0,a.f0)(e,{x:pE(e.x-c.x-c.width/2+o.x),y:pE(e.y-c.y-c.height/2+o.y)})});var p=S(t),l={};(0,a.Ed)(t,function(e){if((0,tH.Ho)(e)){l[e.id]=(0,a.hj)(i)?s.createConnection(l[e.source.id],l[e.target.id],i,e,e.parent||n,r):s.createConnection(l[e.source.id],l[e.target.id],e,e.parent||n,r);return}var t=(0,a.f0)({},r);-1===p.indexOf(e)&&(t.autoResize=!1),(0,tH.j_)(e)&&(t=(0,a.CE)(t,["attach"])),l[e.id]=(0,a.hj)(i)?s.createShape(e,(0,a.ei)(e,["x","y","width","height"]),e.parent||n,i,t):s.createShape(e,(0,a.ei)(e,["x","y","width","height"]),e.parent||n,t)}),e.elements=(0,a.VO)(l)};var pS=Math.round;function pk(e){this._canvas=e}function pC(e){pk.call(this,e)}pk.$inject=["canvas"],pk.prototype.execute=function(e){var t=e.shape,n=e.position,i=e.parent,o=e.parentIndex;if(!i)throw Error("parent required");if(!n)throw Error("position required");return void 0!==n.width?(0,a.f0)(t,n):(0,a.f0)(t,{x:n.x-pS(t.width/2),y:n.y-pS(t.height/2)}),this._canvas.addShape(t,i,o),t},pk.prototype.revert=function(e){var t=e.shape;return this._canvas.removeShape(t),t},i(pC,pk),pC.$inject=["canvas"];var pR=pk.prototype.execute;pC.prototype.execute=function(e){var t=e.shape;return["width","height"].forEach(function(e){void 0===t[e]&&(t[e]=0)}),t.labelTarget=e.labelTarget,pR.call(this,e)};var pP=pk.prototype.revert;function pA(e,t){this._canvas=e,this._modeling=t}function pM(e,t){this._modeling=e,this._elementRegistry=t}function pT(e,t){this._canvas=e,this._modeling=t}function pD(e){this._modeling=e}pC.prototype.revert=function(e){return e.shape.labelTarget=null,pP.call(this,e)},pA.$inject=["canvas","modeling"],pA.prototype.preExecute=function(e){var t=this._modeling,n=e.connection;pc(n.incoming,function(e){t.removeConnection(e,{nested:!0})}),pc(n.outgoing,function(e){t.removeConnection(e,{nested:!0})})},pA.prototype.execute=function(e){var t=e.connection,n=t.parent;return e.parent=n,e.parentIndex=O(n.children,t),e.source=t.source,e.target=t.target,this._canvas.removeConnection(t),t.source=null,t.target=null,t},pA.prototype.revert=function(e){var t=e.connection,n=e.parent,i=e.parentIndex;return t.source=e.source,t.target=e.target,N(n.children,t,i),this._canvas.addConnection(t,n),t},pM.$inject=["modeling","elementRegistry"],pM.prototype.postExecute=function(e){var t=this._modeling,n=this._elementRegistry,i=e.elements;(0,a.Ed)(i,function(e){n.get(e.id)&&(e.waypoints?t.removeConnection(e):t.removeShape(e))})},pT.$inject=["canvas","modeling"],pT.prototype.preExecute=function(e){var t=this._modeling,n=e.shape;pc(n.incoming,function(e){t.removeConnection(e,{nested:!0})}),pc(n.outgoing,function(e){t.removeConnection(e,{nested:!0})}),pc(n.children,function(e){(0,tH.Ho)(e)?t.removeConnection(e,{nested:!0}):t.removeShape(e,{nested:!0})})},pT.prototype.execute=function(e){var t=this._canvas,n=e.shape,i=n.parent;return e.oldParent=i,e.oldParentIndex=O(i.children,n),t.removeShape(n),n},pT.prototype.revert=function(e){var t=this._canvas,n=e.shape,i=e.oldParent,o=e.oldParentIndex;return N(i.children,n,o),t.addShape(n,i),n},pD.$inject=["modeling"];var pB={x:"y",y:"x"};function pj(e,t){this._layouter=e,this._canvas=t}function pN(){}function pO(){this.allShapes={},this.allConnections={},this.enclosedElements={},this.enclosedConnections={},this.topLevel={}}function pL(e){this._modeling=e}function p$(e){this._helper=new pL(e)}function pI(e){this._modeling=e,this._helper=new pL(e)}function pz(e){this._modeling=e}function pH(e){return e.original||e}function pF(e,t){this._modeling=e,this._rules=t}function pG(e){this._modeling=e}function pW(e){this._modeling=e}function pV(e){return(0,a.f0)({},e)}function pU(e){switch(e){case"n":case"s":return"y";case"w":case"e":return"x"}}function pK(e,t,n){var i=pU(n);return/e|s/.test(n)?e[i]>t:/n|w/.test(n)?e[i]<t:void 0}function pq(e,t){return -1!==e.indexOf(t)}function pJ(e){this._modeling=e}function pX(e){this._modeling=e}function pY(e,t){return j(e&&e.attachers,t)}function pZ(e,t,n){if(e){var i=e.attachers;i||(e.attachers=i=[]),N(i,t,n)}}function pQ(){}function p0(e,t,n){this._eventBus=e,this._elementFactory=t,this._commandStack=n;var i=this;e.on("diagram.init",function(){i.registerHandlers(n)})}function p1(e){this._elementRegistry=e}function p2(e,t){(0,a.Ed)(t,function(t,n){e.set(n,t)})}pD.prototype.preExecute=function(e){var t=this._modeling,n=e.groups,i=e.axis,o=e.dimension;function r(e,t){e.range.min=Math.min(t[i],e.range.min),e.range.max=Math.max(t[i]+t[o],e.range.max)}function s(e){return e[i]+e[o]/2}var c,p=n[0],l=n.length-1,u=n[l],h=0;(0,a.Ed)(n,function(e,c){var p,u,d,m,f;if(e.elements.length<2){c&&c!==n.length-1&&(r(e,e.elements[0]),h+=(m=e.range).max-m.min);return}u=(p=(0,a.MR)(e.elements,i))[0],c===l&&(u=p[p.length-1]),d=s(u),e.range=null,(0,a.Ed)(p,function(n){var a;if((a={y:0})[i]=d-s(n),a[i]&&(a[pB[i]]=0,t.moveElements([n],a,n.parent)),null===e.range){e.range={min:n[i],max:n[i]+n[o]};return}r(e,n)}),c&&c!==n.length-1&&(h+=(f=e.range).max-f.min)}),(c=Math.round((Math.abs(u.range.min-p.range.max)-h)/(n.length-1)))<n.length-1||(0,a.Ed)(n,function(e,r){var s,l={};e!==p&&e!==u&&(s=n[r-1],e.range.max=0,(0,a.Ed)(e.elements,function(n,r){l[pB[i]]=0,l[i]=s.range.max-n[i]+c,e.range.min!==n[i]&&(l[i]+=n[i]-e.range.min),l[i]&&t.moveElements([n],l,n.parent),e.range.max=Math.max(n[i]+n[o],r?e.range.max:0)}))})},pD.prototype.postExecute=function(e){},pj.$inject=["layouter","canvas"],pj.prototype.execute=function(e){var t=e.connection,n=t.waypoints;return(0,a.f0)(e,{oldWaypoints:n}),t.waypoints=this._layouter.layoutConnection(t,e.hints),t},pj.prototype.revert=function(e){var t=e.connection;return t.waypoints=e.oldWaypoints,t},pN.prototype.execute=function(e){var t=e.connection,n=e.delta,i=e.newParent||t.parent,o=e.newParentIndex,r=t.parent;return e.oldParent=r,e.oldParentIndex=j(r.children,t),N(i.children,t,o),t.parent=i,(0,a.Ed)(t.waypoints,function(e){e.x+=n.x,e.y+=n.y,e.original&&(e.original.x+=n.x,e.original.y+=n.y)}),t},pN.prototype.revert=function(e){var t=e.connection,n=t.parent,i=e.oldParent,o=e.oldParentIndex,r=e.delta;return j(n.children,t),N(i.children,t,o),t.parent=i,(0,a.Ed)(t.waypoints,function(e){e.x-=r.x,e.y-=r.y,e.original&&(e.original.x-=r.x,e.original.y-=r.y)}),t},pO.prototype.add=function(e,t){return this.addAll([e],t)},pO.prototype.addAll=function(e,t){var n=function(e,t,n){(0,a.o8)(t)&&(t=!0),(0,a.Kn)(t)&&(n=t,t=!0);var i=D((n=n||{}).allShapes),o=D(n.allConnections),r=D(n.enclosedElements),s=D(n.enclosedConnections),c=D(n.topLevel,t&&(0,a.vM)(e,function(e){return e.id}));function p(e){c[e.source.id]&&c[e.target.id]&&(c[e.id]=[e]),i[e.source.id]&&i[e.target.id]&&(s[e.id]=r[e.id]=e),o[e.id]=e}return C(e,function(e){if(r[e.id]=e,!e.waypoints)return i[e.id]=e,(0,a.Ed)(e.incoming,p),(0,a.Ed)(e.outgoing,p),e.children;s[e.id]=o[e.id]=e}),{allShapes:i,allConnections:o,topLevel:c,enclosedConnections:s,enclosedElements:r}}(e,!!t,this);return(0,a.f0)(this,n),this},pL.prototype.moveRecursive=function(e,t,n){return e?this.moveClosure(this.getClosure(e),t,n):[]},pL.prototype.moveClosure=function(e,t,n,i,o){var r=this._modeling,s=e.allShapes,c=e.allConnections,p=e.enclosedConnections,l=e.topLevel,u=!1;o&&o.parent===n&&(u=!0),(0,a.Ed)(s,function(e){r.moveShape(e,t,l[e.id]&&!u&&n,{recurse:!1,layout:!1})}),(0,a.Ed)(c,function(e){var i=!!s[e.source.id],o=!!s[e.target.id];p[e.id]&&i&&o?r.moveConnection(e,t,l[e.id]&&!u&&n):r.layoutConnection(e,{connectionStart:i&&sa(e,e.source,t),connectionEnd:o&&ss(e,e.target,t)})})},pL.prototype.getClosure=function(e){return new pO().addAll(e,!0)},p$.$inject=["modeling"],p$.prototype.preExecute=function(e){e.closure=this._helper.getClosure(e.shapes)},p$.prototype.postExecute=function(e){var t,n=e.hints;n&&n.primaryShape&&(t=n.primaryShape,n.oldParent=t.parent),this._helper.moveClosure(e.closure,e.delta,e.newParent,e.newHost,t)},pI.$inject=["modeling"],pI.prototype.execute=function(e){var t=e.shape,n=e.delta,i=e.newParent||t.parent,o=e.newParentIndex,r=t.parent;return e.oldBounds=(0,a.ei)(t,["x","y","width","height"]),e.oldParent=r,e.oldParentIndex=j(r.children,t),N(i.children,t,o),(0,a.f0)(t,{parent:i,x:t.x+n.x,y:t.y+n.y}),t},pI.prototype.postExecute=function(e){var t=e.shape,n=e.delta,i=e.hints,o=this._modeling;!1!==i.layout&&((0,a.Ed)(t.incoming,function(e){o.layoutConnection(e,{connectionEnd:ss(e,t,n)})}),(0,a.Ed)(t.outgoing,function(e){o.layoutConnection(e,{connectionStart:sa(e,t,n)})})),!1!==i.recurse&&this.moveChildren(e)},pI.prototype.revert=function(e){var t=e.shape,n=e.oldParent,i=e.oldParentIndex,o=e.delta;return N(n.children,t,i),(0,a.f0)(t,{parent:n,x:t.x-o.x,y:t.y-o.y}),t},pI.prototype.moveChildren=function(e){var t=e.delta,n=e.shape;this._helper.moveRecursive(n.children,t,null)},pI.prototype.getNewParent=function(e){return e.newParent||e.shape.parent},pz.$inject=["modeling"],pz.prototype.execute=function(e){var t=e.newSource,n=e.newTarget,i=e.connection,o=e.dockingOrPoints;if(!t&&!n)throw Error("newSource or newTarget required");return(0,a.kJ)(o)&&(e.oldWaypoints=i.waypoints,i.waypoints=o),t&&(e.oldSource=i.source,i.source=t),n&&(e.oldTarget=i.target,i.target=n),i},pz.prototype.postExecute=function(e){var t=e.connection,n=e.newSource,i=e.newTarget,o=e.dockingOrPoints,r=e.hints||{},s={};r.connectionStart&&(s.connectionStart=r.connectionStart),r.connectionEnd&&(s.connectionEnd=r.connectionEnd),!1!==r.layoutConnection&&(n&&(!i||"source"===r.docking)&&(s.connectionStart=s.connectionStart||pH((0,a.kJ)(o)?o[0]:o)),i&&(!n||"target"===r.docking)&&(s.connectionEnd=s.connectionEnd||pH((0,a.kJ)(o)?o[o.length-1]:o)),r.newWaypoints&&(s.waypoints=r.newWaypoints),this._modeling.layoutConnection(t,s))},pz.prototype.revert=function(e){var t=e.oldSource,n=e.oldTarget,i=e.oldWaypoints,o=e.connection;return t&&(o.source=t),n&&(o.target=n),i&&(o.waypoints=i),o},pF.$inject=["modeling","rules"],pF.prototype.preExecute=function(e){var t,n,i=this,o=this._modeling,r=this._rules,s=e.oldShape,c=e.newData,p=e.hints||{};function l(e,t,n){return r.allowed("connection.reconnect",{connection:n,source:e,target:t})}var u={x:c.x,y:c.y},h={x:s.x,y:s.y,width:s.width,height:s.height};n=e.newShape=e.newShape||i.createShape(c,u,s.parent,p),s.host&&o.updateAttachment(n,s.host),!1!==p.moveChildren&&(t=s.children.slice(),o.moveElements(t,{x:0,y:0},n,p));var d=s.incoming.slice(),m=s.outgoing.slice();(0,a.Ed)(d,function(e){l(e.source,n,e)&&i.reconnectEnd(e,n,sr(e,n,h),p)}),(0,a.Ed)(m,function(e){l(n,e.target,e)&&i.reconnectStart(e,n,so(e,n,h),p)})},pF.prototype.postExecute=function(e){var t=e.oldShape;this._modeling.removeShape(t)},pF.prototype.execute=function(e){},pF.prototype.revert=function(e){},pF.prototype.createShape=function(e,t,n,i){return this._modeling.createShape(e,t,n,i)},pF.prototype.reconnectStart=function(e,t,n,i){this._modeling.reconnectStart(e,t,n,i)},pF.prototype.reconnectEnd=function(e,t,n,i){this._modeling.reconnectEnd(e,t,n,i)},pG.$inject=["modeling"],pG.prototype.execute=function(e){var t=e.shape,n=e.newBounds,i=e.minBounds;if(void 0===n.x||void 0===n.y||void 0===n.width||void 0===n.height)throw Error("newBounds must have {x, y, width, height} properties");if(i&&(n.width<i.width||n.height<i.height))throw Error("width and height cannot be less than minimum height and width");if(!i&&n.width<10||n.height<10)throw Error("width and height cannot be less than 10px");return e.oldBounds={width:t.width,height:t.height,x:t.x,y:t.y},(0,a.f0)(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t},pG.prototype.postExecute=function(e){var t=this._modeling,n=e.shape,i=e.oldBounds;!1!==(e.hints||{}).layout&&((0,a.Ed)(n.incoming,function(e){t.layoutConnection(e,{connectionEnd:sr(e,n,i)})}),(0,a.Ed)(n.outgoing,function(e){t.layoutConnection(e,{connectionStart:so(e,n,i)})}))},pG.prototype.revert=function(e){var t=e.shape,n=e.oldBounds;return(0,a.f0)(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t},pW.$inject=["modeling"],pW.prototype.preExecute=function(e){var t,n=e.delta,i=e.direction,o=e.movingShapes,r=e.resizingShapes,s=e.start,c={};this.moveShapes(o,n),(0,a.Ed)(r,function(e){c[e.id]={x:e.x,y:e.y,height:e.height,width:e.width}}),this.resizeShapes(r,n,i),this.updateConnectionWaypoints((t=[],(0,a.Ed)(o.concat(r),function(e){var n=e.incoming,i=e.outgoing;(0,a.Ed)(n.concat(i),function(e){var n=e.source,i=e.target;(c0(o,n)||c0(o,i)||c0(r,n)||c0(r,i))&&!c0(t,e)&&t.push(e)})}),t),n,i,s,o,r,c)},pW.prototype.execute=function(){},pW.prototype.revert=function(){},pW.prototype.moveShapes=function(e,t){var n=this;(0,a.Ed)(e,function(e){n._modeling.moveShape(e,t,null,{autoResize:!1,layout:!1,recurse:!1})})},pW.prototype.resizeShapes=function(e,t,n){var i=this;(0,a.Ed)(e,function(e){var o=function(e,t,n){var i=e.x,o=e.y,r=e.width,a=e.height,s=n.x,c=n.y;switch(t){case"n":return{x:i,y:o+c,width:r,height:a-c};case"s":return{x:i,y:o,width:r,height:a+c};case"w":return{x:i+s,y:o,width:r-s,height:a};case"e":return{x:i,y:o,width:r+s,height:a};default:throw Error("unknown direction: "+t)}}(e,n,t);i._modeling.resizeShape(e,o,null,{attachSupport:!1,autoResize:!1,layout:!1})})},pW.prototype.updateConnectionWaypoints=function(e,t,n,i,o,r,s){var c=this,p=o.concat(r);(0,a.Ed)(e,function(e){var l=e.source,u=e.target,h=(0,a.UI)(e.waypoints,function(e){return(e=pV(e)).original&&(e.original=pV(e.original)),e}),d=pU(n),m={};pq(p,l)&&pq(p,u)?(h=(0,a.UI)(h,function(e){return pK(e,i,n)&&(e[d]=e[d]+t[d]),e.original&&pK(e.original,i,n)&&(e.original[d]=e.original[d]+t[d]),e}),c._modeling.updateWaypoints(e,h,{labelBehavior:!1})):(pq(p,l)||pq(p,u))&&(pq(o,l)?m.connectionStart=sa(e,l,t):pq(o,u)?m.connectionEnd=ss(e,u,t):pq(r,l)?m.connectionStart=so(e,l,s[l.id]):pq(r,u)&&(m.connectionEnd=sr(e,u,s[u.id])),c._modeling.layoutConnection(e,m))})},pJ.$inject=["modeling"],pJ.prototype.execute=function(e){var t=e.shape,n=t.children;e.oldChildrenVisibility=function e(t){var n={};return(0,a.Ed)(t,function(t){n[t.id]=t.hidden,t.children&&(n=(0,a.f0)({},n,e(t.children)))}),n}(n),t.collapsed=!t.collapsed;var i=function e(t,n){var i=[];return(0,a.Ed)(t,function(t){t.hidden=n,i=i.concat(t),t.children&&(i=i.concat(e(t.children,t.collapsed||n)))}),i}(n,t.collapsed);return[t].concat(i)},pJ.prototype.revert=function(e){var t=e.shape,n=e.oldChildrenVisibility,i=function e(t,n){var i=[];return(0,a.Ed)(t,function(t){t.hidden=n[t.id],i=i.concat(t),t.children&&(i=i.concat(e(t.children,n)))}),i}(t.children,n);return t.collapsed=!t.collapsed,[t].concat(i)},pX.$inject=["modeling"],pX.prototype.execute=function(e){var t=e.shape,n=e.newHost,i=t.host;return e.oldHost=i,e.attacherIdx=pY(i,t),pZ(n,t),t.host=n,t},pX.prototype.revert=function(e){var t=e.shape,n=e.newHost,i=e.oldHost,o=e.attacherIdx;return t.host=i,pY(n,t),pZ(i,t,o),t},pQ.prototype.execute=function(e){var t=e.connection,n=e.newWaypoints;return e.oldWaypoints=t.waypoints,t.waypoints=n,t},pQ.prototype.revert=function(e){var t=e.connection,n=e.oldWaypoints;return t.waypoints=n,t},p0.$inject=["eventBus","elementFactory","commandStack"],p0.prototype.getHandlers=function(){return{"shape.append":pb,"shape.create":pk,"shape.delete":pT,"shape.move":pI,"shape.resize":pG,"shape.replace":pF,"shape.toggleCollapse":pJ,spaceTool:pW,"label.create":pC,"connection.create":px,"connection.delete":pA,"connection.move":pN,"connection.layout":pj,"connection.updateWaypoints":pQ,"connection.reconnect":pz,"elements.create":pw,"elements.move":p$,"elements.delete":pM,"elements.distribute":pD,"elements.align":p_,"element.updateAttachment":pX}},p0.prototype.registerHandlers=function(e){(0,a.Ed)(this.getHandlers(),function(t,n){e.registerHandler(n,t)})},p0.prototype.moveShape=function(e,t,n,i,o){"object"==typeof i&&(o=i,i=null);var r={shape:e,delta:t,newParent:n,newParentIndex:i,hints:o||{}};this._commandStack.execute("shape.move",r)},p0.prototype.updateAttachment=function(e,t){this._commandStack.execute("element.updateAttachment",{shape:e,newHost:t})},p0.prototype.moveElements=function(e,t,n,i){var o,r=(i=i||{}).attach,a=n;!0===r?(o=n,a=n.parent):!1===r&&(o=null);var s={shapes:e,delta:t,newParent:a,newHost:o,hints:i};this._commandStack.execute("elements.move",s)},p0.prototype.moveConnection=function(e,t,n,i,o){"object"==typeof i&&(o=i,i=void 0);var r={connection:e,delta:t,newParent:n,newParentIndex:i,hints:o||{}};this._commandStack.execute("connection.move",r)},p0.prototype.layoutConnection=function(e,t){this._commandStack.execute("connection.layout",{connection:e,hints:t||{}})},p0.prototype.createConnection=function(e,t,n,i,o,r){"object"==typeof n&&(r=o,o=i,i=n,n=void 0);var a={source:e,target:t,parent:o,parentIndex:n,connection:i=this._create("connection",i),hints:r};return this._commandStack.execute("connection.create",a),a.connection},p0.prototype.createShape=function(e,t,n,i,o){"number"!=typeof i&&(o=i,i=void 0);var r,a,s=(o=o||{}).attach;e=this._create("shape",e),s?(r=n.parent,a=n):r=n;var c={position:t,shape:e,parent:r,parentIndex:i,host:a,hints:o};return this._commandStack.execute("shape.create",c),c.shape},p0.prototype.createElements=function(e,t,n,i,o){(0,a.kJ)(e)||(e=[e]),"number"!=typeof i&&(o=i,i=void 0);var r={position:t,elements:e,parent:n,parentIndex:i,hints:o=o||{}};return this._commandStack.execute("elements.create",r),r.elements},p0.prototype.createLabel=function(e,t,n,i){n=this._create("label",n);var o={labelTarget:e,position:t,parent:i||e.parent,shape:n};return this._commandStack.execute("label.create",o),o.shape},p0.prototype.appendShape=function(e,t,n,i,o){o=o||{};var r={source:e,position:n,target:i,shape:t=this._create("shape",t),connection:o.connection,connectionParent:o.connectionParent,hints:o};return this._commandStack.execute("shape.append",r),r.shape},p0.prototype.removeElements=function(e){this._commandStack.execute("elements.delete",{elements:e})},p0.prototype.distributeElements=function(e,t,n){this._commandStack.execute("elements.distribute",{groups:e,axis:t,dimension:n})},p0.prototype.removeShape=function(e,t){this._commandStack.execute("shape.delete",{shape:e,hints:t||{}})},p0.prototype.removeConnection=function(e,t){this._commandStack.execute("connection.delete",{connection:e,hints:t||{}})},p0.prototype.replaceShape=function(e,t,n){var i={oldShape:e,newData:t,hints:n||{}};return this._commandStack.execute("shape.replace",i),i.newShape},p0.prototype.alignElements=function(e,t){this._commandStack.execute("elements.align",{elements:e,alignment:t})},p0.prototype.resizeShape=function(e,t,n,i){this._commandStack.execute("shape.resize",{shape:e,newBounds:t,minBounds:n,hints:i})},p0.prototype.createSpace=function(e,t,n,i,o){this._commandStack.execute("spaceTool",{delta:n,direction:i,movingShapes:e,resizingShapes:t,start:o})},p0.prototype.updateWaypoints=function(e,t,n){this._commandStack.execute("connection.updateWaypoints",{connection:e,newWaypoints:t,hints:n||{}})},p0.prototype.reconnect=function(e,t,n,i,o){this._commandStack.execute("connection.reconnect",{connection:e,newSource:t,newTarget:n,dockingOrPoints:i,hints:o||{}})},p0.prototype.reconnectStart=function(e,t,n,i){i||(i={}),this.reconnect(e,t,e.target,n,(0,a.f0)(i,{docking:"source"}))},p0.prototype.reconnectEnd=function(e,t,n,i){i||(i={}),this.reconnect(e,e.source,t,n,(0,a.f0)(i,{docking:"target"}))},p0.prototype.connect=function(e,t,n,i){return this.createConnection(e,t,n||{},e.parent,i)},p0.prototype._create=function(e,t){return t instanceof Q?t:this._elementFactory.create(e,t)},p0.prototype.toggleCollapse=function(e,t){this._commandStack.execute("shape.toggleCollapse",{shape:e,hints:t||{}})},p1.$inject=["elementRegistry"],p1.prototype.execute=function(e){var t,n=e.element,i=e.moddleElement,o=e.properties;if(!i)throw Error("<moddleElement> required");var r=e.changed||this._getVisualReferences(i).concat(n),s=e.oldProperties||(t=(0,a.XP)(o),(0,a.u4)(t,function(e,t){return e[t]=i.get(t),e},{}));return p2(i,o),e.oldProperties=s,e.changed=r,r},p1.prototype.revert=function(e){var t=e.oldProperties,n=e.moddleElement,i=e.changed;return p2(n,t),i},p1.prototype._getVisualReferences=function(e){var t=this._elementRegistry;return tx(e,"bpmn:DataObject")?t.filter(function(t){return tx(t,"bpmn:DataObjectReference")&&tw(t).dataObjectRef===e}):[]};var p5="default",p3={width:0,height:0};function p6(e,t,n,i){this._elementRegistry=e,this._moddle=t,this._modeling=n,this._textRenderer=i}function p4(e,t){return"id"in e&&e.id!==t.id}function p9(e,t){var n=e.businessObject,i=tS(e);(0,a.Ed)(t,function(e,t){"di"!==t?n.set(t,e):i&&(0,a.Ed)(e,function(e,t){i.set(t,e)})})}p6.$inject=["elementRegistry","moddle","modeling","textRenderer"],p6.prototype.execute=function(e){var t,n,i,o,r,s=e.element,c=[s];if(!s)throw Error("element required");var p=this._elementRegistry,l=this._moddle.ids,u=s.businessObject,h=(t=e.properties,n=(0,a.f0)({},t),p8.forEach(function(e){e in t&&(n[e]=tw(n[e]))}),n),d=e.oldProperties||(i=(0,a.XP)(h),o=s.businessObject,r=tS(s),(0,a.u4)(i,function(e,t){var n;return"di"!==t?e[t]=o.get(t):e[t]=(n=(0,a.XP)(h.di),(0,a.u4)(n,function(e,t){return e[t]=r&&r.get(t),e},{})),e},{}));return p4(h,u)&&(l.unclaim(u.id),p.updateId(s,h.id),l.claim(h.id,u)),p5 in h&&(h[p5]&&c.push(p.get(h[p5].id)),u[p5]&&c.push(p.get(u[p5].id))),p9(s,h),e.oldProperties=d,e.changed=c,c},p6.prototype.postExecute=function(e){var t=e.element.label,n=t&&tw(t).name;if(n){var i=this._textRenderer.getExternalLabelBounds(t,n);this._modeling.resizeShape(t,i,p3)}},p6.prototype.revert=function(e){var t=e.element,n=e.properties,i=e.oldProperties,o=t.businessObject,r=this._elementRegistry,a=this._moddle.ids;return p9(t,i),p4(n,o)&&(a.unclaim(n.id),r.updateId(t,i.id),a.claim(i.id,o)),e.changed};var p8=["default"];function p7(e,t){this._canvas=e,this._modeling=t}function le(e,t){this._modeling=e,this._spaceTool=t}function lt(e){this._modeling=e}function ln(e,t){this._modeling=e,this._spaceTool=t}p7.$inject=["canvas","modeling"],p7.prototype.execute=function(e){var t=this._canvas,n=e.newRoot,i=n.businessObject,o=t.getRootElement(),r=o.businessObject,a=r.$parent,s=tS(o);return t.setRootElement(n),t.removeRootElement(o),N(a.rootElements,i),i.$parent=a,j(a.rootElements,r),r.$parent=null,o.di=null,s.bpmnElement=i,n.di=s,e.oldRoot=o,[]},p7.prototype.revert=function(e){var t=this._canvas,n=e.newRoot,i=n.businessObject,o=e.oldRoot,r=o.businessObject,a=i.$parent,s=tS(n);return t.setRootElement(o),t.removeRootElement(n),j(a.rootElements,i),i.$parent=null,N(a.rootElements,r),r.$parent=a,n.di=null,s.bpmnElement=r,o.di=s,[]},le.$inject=["modeling","spaceTool"],le.prototype.preExecute=function(e){var t,n,i,o,r,s=this._spaceTool,c=this._modeling,p=e.shape,l=e.location,u=aO(p),h=u===p,d=h?p:p.parent,m=aN(d),f=t$(p);if(f?"left"===l?l="top":"right"===l&&(l="bottom"):"top"===l?l="left":"bottom"===l&&(l="right"),!m.length){var g=f?{x:p.x+30,y:p.y,width:p.width-30,height:p.height}:{x:p.x,y:p.y+30,width:p.width,height:p.height-30};c.createShape({type:"bpmn:Lane",isHorizontal:f},g,d)}var y=[];C(u,function(e){return(y.push(e),e.label&&y.push(e.label),e===p)?[]:(0,a.hX)(e.children,function(e){return e!==p})}),"top"===l?(t=-120,i=(n=p.y)+10,o="n",r="y"):"left"===l?(t=-120,i=(n=p.x)+10,o="w",r="x"):"bottom"===l?(t=120,i=(n=p.y+p.height)-10,o="s",r="y"):"right"===l&&(t=120,i=(n=p.x+p.width)-10,o="e",r="x");var v=s.calculateAdjustments(y,r,t,i),_=f?{x:0,y:t}:{x:t,y:0};s.makeSpace(v.movingShapes,v.resizingShapes,_,o,i);var b=f?{x:p.x+(h?30:0),y:n-("top"===l?120:0),width:p.width-(h?30:0),height:120}:{x:n-("left"===l?120:0),y:p.y+(h?30:0),width:120,height:p.height-(h?30:0)};e.newLane=c.createShape({type:"bpmn:Lane",isHorizontal:f},b,d)},lt.$inject=["modeling"],lt.prototype.preExecute=function(e){var t,n,i,o,r=this._modeling,a=e.shape,s=e.count,c=aN(a),p=c.length;if(p>s)throw Error(`more than <${s}> child lanes`);var l=t$(a),u=l?a.height:a.width,h=Math.round(u/s);for(o=0;o<s;o++)t=o===s-1?u-h*o:h,n=l?{x:a.x+30,y:a.y+o*h,width:a.width-30,height:t}:{x:a.x+o*h,y:a.y+30,width:t,height:a.height-30},o<p?r.resizeShape(c[o],n):(i={type:"bpmn:Lane",isHorizontal:l},r.createShape(i,n,a))},ln.$inject=["modeling","spaceTool"],ln.prototype.preExecute=function(e){var t=e.shape,n=e.newBounds;!1!==e.balanced?this.resizeBalanced(t,n):this.resizeSpace(t,n)},ln.prototype.resizeBalanced=function(e,t){var n,i,o,r,a,s,c,p,l=this._modeling,u=(i=tx(n=aO(e),"bpmn:Process")?[]:[n],o=aj(n,i),r=(0,L.JA)(e),a=(0,L.JA)(t),s=aR((0,L.JA)(t),(0,L.JA)(e)),c=[],p=t$(e),o.forEach(function(t){if(t!==e){var n,i=p?0:s.top,o=p?s.right:0,l=p?0:s.bottom,u=p?s.left:0,h=(0,L.JA)(t);s.top&&(10>aD(h.bottom-r.top)&&(l=a.top-h.bottom),5>aD(h.top-r.top)&&(i=a.top-h.top)),s.left&&(10>aD(h.right-r.left)&&(o=a.left-h.right),5>aD(h.left-r.left)&&(u=a.left-h.left)),s.bottom&&(10>aD(h.top-r.bottom)&&(i=a.bottom-h.top),5>aD(h.bottom-r.bottom)&&(l=a.bottom-h.bottom)),s.right&&(10>aD(h.left-r.right)&&(u=a.right-h.left),5>aD(h.right-r.right)&&(o=a.right-h.right)),(i||o||l||u)&&c.push({shape:t,newBounds:(n={top:i,right:o,bottom:l,left:u},{x:t.x+(n.left||0),y:t.y+(n.top||0),width:t.width-(n.left||0)+(n.right||0),height:t.height-(n.top||0)+(n.bottom||0)})})}}),c);l.resizeShape(e,t),u.forEach(function(e){l.resizeShape(e.shape,e.newBounds)})},ln.prototype.resizeSpace=function(e,t){var n,i,o,r,a,s=this._spaceTool,c=(0,L.JA)(e),p=aR((0,L.JA)(t),c),l=aO(e),u=[],h=[];C(l,function(e){return u.push(e),(tx(e,"bpmn:Lane")||tx(e,"bpmn:Participant"))&&h.push(e),e.children}),(p.bottom||p.top)&&(n=p.bottom||p.top,i=e.y+(p.bottom?e.height:0)+(p.bottom?-10:10),o=p.bottom?"s":"n",r=p.top>0||p.bottom<0?-n:n,a=s.calculateAdjustments(u,"y",r,i),s.makeSpace(a.movingShapes,a.resizingShapes,{x:0,y:n},o)),(p.left||p.right)&&(n=p.right||p.left,i=e.x+(p.right?e.width:0)+(p.right?-10:100),o=p.right?"e":"w",r=p.left>0||p.right<0?-n:n,a=s.calculateAdjustments(h,"x",r,i),s.makeSpace(a.movingShapes,a.resizingShapes,{x:n,y:0},o))};var li="flowNodeRef",lo="lanes";function lr(e){this._elementRegistry=e}function la(e){this._moddle=e}lr.$inject=["elementRegistry"],lr.prototype._computeUpdates=function(e,t){var n=[],i=[],o={},r=[];function a(e){-1===n.indexOf(e)&&(r.push(e),n.push(e))}return t.forEach(function(e){var t=aO(e);t&&-1===n.indexOf(t)&&(t.children.filter(function(e){return tx(e,"bpmn:FlowNode")}).forEach(a),n.push(t))}),e.forEach(a),r.forEach(function(e){var t,n=e.businessObject,r=n.get(lo).slice(),a=e.parent?(o[(t=aO(e)).id]||(o[t.id]=aj(t)),o[t.id]).filter(function(t){var n,i;return n=(0,L.JA)(t),(i={x:e.x+e.width/2,y:e.y+e.height/2}).x>n.left&&i.x<n.right&&i.y>n.top&&i.y<n.bottom}).map(function(e){return e.businessObject}):[];i.push({flowNode:n,remove:r,add:a})}),t.forEach(function(e){var t=e.businessObject;e.parent||t.get(li).forEach(function(e){i.push({flowNode:e,remove:[t],add:[]})})}),i},lr.prototype.execute=function(e){var t=e.updates;return t||(t=e.updates=this._computeUpdates(e.flowNodeShapes,e.laneShapes)),t.forEach(function(e){var t=e.flowNode,n=t.get(lo);e.remove.forEach(function(e){j(n,e),j(e.get(li),t)}),e.add.forEach(function(e){N(n,e),N(e.get(li),t)})}),[]},lr.prototype.revert=function(e){return e.updates.forEach(function(e){var t=e.flowNode,n=t.get(lo);e.add.forEach(function(e){j(n,e),j(e.get(li),t)}),e.remove.forEach(function(e){N(n,e),N(e.get(li),t)})}),[]},la.$inject=["moddle"],la.prototype.execute=function(e){var t=this._moddle.ids,n=e.id,i=e.element;return e.claiming?t.claim(n,i):t.unclaim(n),[]},la.prototype.revert=function(e){var t=this._moddle.ids,n=e.id,i=e.element;return e.claiming?t.unclaim(n):t.claim(n,i),[]};var ls={fill:void 0,stroke:void 0};function lc(e){this._commandStack=e,this._normalizeColor=function(e){if(e){if((0,a.HD)(e)){var t,n=((t=document.createElement("canvas").getContext("2d")).fillStyle="transparent",t.fillStyle=e,/^#[0-9a-fA-F]{6}$/.test(t.fillStyle)?t.fillStyle:null);if(n)return n}throw Error(`invalid color value: ${e}`)}}}lc.$inject=["commandStack"],lc.prototype.postExecute=function(e){var t=e.elements,n=e.colors||ls,i=this,o={};"fill"in n&&(0,a.f0)(o,{"background-color":this._normalizeColor(n.fill)}),"stroke"in n&&(0,a.f0)(o,{"border-color":this._normalizeColor(n.stroke)}),(0,a.Ed)(t,function(e){var t=(0,tH.Ho)(e)?(0,a.ei)(o,["border-color"]):o,n=tS(e);if("border-color"in t&&(t.stroke=t["border-color"]),"background-color"in t&&(t.fill=t["background-color"]),(0,tH.j_)(e))i._commandStack.execute("element.updateModdleProperties",{element:e,moddleElement:n.label,properties:{color:o["border-color"]}});else{if(!tE(n,["bpmndi:BPMNEdge","bpmndi:BPMNShape"]))return;i._commandStack.execute("element.updateProperties",{element:e,properties:{di:t}})}})};var lp={width:0,height:0};function ll(e,t,n){function i(e,t){var n=e.label||e,i=e.labelTarget||e;return!function(e,t){var n=e.businessObject,i=tU(n);if(i){if("categoryValueRef"===i){if(!n[i])return;n[i].value=t}else n[i]=t}}(n,t,i!==n),[n,i]}this.preExecute=function(t){var n=t.element,i=n.businessObject,o=t.newLabel;if(!(0,tH.j_)(n)&&tG(n)&&!tW(n)&&!lu(o)){var r=tV(n);r={x:r.x,y:r.y+7},e.createLabel(n,r,{id:i.id+"_label",businessObject:i,di:n.di})}},this.execute=function(e){return e.oldLabel=tK(e.element),i(e.element,e.newLabel)},this.revert=function(e){return i(e.element,e.oldLabel)},this.postExecute=function(n){var i=n.element,o=i.label||i,r=n.newLabel,a=n.newBounds,s=n.hints||{};if((0,tH.j_)(o)||tx(o,"bpmn:TextAnnotation")){if((0,tH.j_)(o)&&lu(r)){!1!==s.removeShape&&e.removeShape(o,{unsetLabel:!1});return}var c=tK(i);void 0===a&&(a=t.getExternalLabelBounds(o,c)),a&&e.resizeShape(o,a,lp)}}}function lu(e){return!e||!e.trim()}function lh(e,t,n,i){p0.call(this,e,t,n),this._bpmnRules=i}function ld(){}ll.$inject=["modeling","textRenderer","bpmnFactory"],i(lh,p0),lh.$inject=["eventBus","elementFactory","commandStack","bpmnRules"],lh.prototype.getHandlers=function(){var e=p0.prototype.getHandlers.call(this);return e["element.updateModdleProperties"]=p1,e["element.updateProperties"]=p6,e["canvas.updateRoot"]=p7,e["lane.add"]=le,e["lane.resize"]=ln,e["lane.split"]=lt,e["lane.updateRefs"]=lr,e["id.updateClaim"]=la,e["element.setColor"]=lc,e["element.updateLabel"]=ll,e},lh.prototype.updateLabel=function(e,t,n,i){this._commandStack.execute("element.updateLabel",{element:e,newLabel:t,newBounds:n,hints:i||{}})},lh.prototype.connect=function(e,t,n,i){var o=this._bpmnRules;if(n||(n=o.canConnect(e,t)),n)return this.createConnection(e,t,n,e.parent,i)},lh.prototype.updateModdleProperties=function(e,t,n){this._commandStack.execute("element.updateModdleProperties",{element:e,moddleElement:t,properties:n})},lh.prototype.updateProperties=function(e,t){this._commandStack.execute("element.updateProperties",{element:e,properties:t})},lh.prototype.resizeLane=function(e,t,n){this._commandStack.execute("lane.resize",{shape:e,newBounds:t,balanced:n})},lh.prototype.addLane=function(e,t){var n={shape:e,location:t};return this._commandStack.execute("lane.add",n),n.newLane},lh.prototype.splitLane=function(e,t){this._commandStack.execute("lane.split",{shape:e,count:t})},lh.prototype.makeCollaboration=function(){var e=this._create("root",{type:"bpmn:Collaboration"});return this._commandStack.execute("canvas.updateRoot",{newRoot:e}),e},lh.prototype.makeProcess=function(){var e=this._create("root",{type:"bpmn:Process"});return this._commandStack.execute("canvas.updateRoot",{newRoot:e}),e},lh.prototype.updateLaneRefs=function(e,t){this._commandStack.execute("lane.updateRefs",{flowNodeShapes:e,laneShapes:t})},lh.prototype.claimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t,claiming:!0})},lh.prototype.unclaimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t})},lh.prototype.setColor=function(e,t){e.length||(e=[e]),this._commandStack.execute("element.setColor",{elements:e,colors:t})},ld.prototype.layoutConnection=function(e,t){return[(t=t||{}).connectionStart||(0,L.wS)(t.source||e.source),t.connectionEnd||(0,L.wS)(t.target||e.target)]};var lm=Math.round,lf={"h:h":20,"v:v":20,"h:v":-10,"v:h":-10};function lg(e,t,n){var i,o,r=(0,L.T8)(t,e,5),a=n.split(":")[0],s=lm((t.x-e.x)/2+e.x),c=lm((t.y-e.y)/2+e.y),p=({t:/top/,r:/right/,b:/bottom/,l:/left/,h:/left|right/,v:/top|bottom/})[a].test(r),l=/h|r|l/.test(a),u=!1,h=!1;return p?(i=l?{x:s,y:e.y}:{x:e.x,y:c},o=l?"h:h":"v:v"):(u=!({t:/top/,r:/right/,b:/bottom/,l:/left/,h:/./,v:/./})[a].test(r),o=l?"h:v":"v:h",u?l?(h=c===e.y,i={x:e.x+20*(/l/.test(a)?-1:1),y:h?c+20:c}):i={x:(h=s===e.x)?s+20:s,y:e.y+20*(/t/.test(a)?-1:1)}:i={x:s,y:c}),{waypoints:lv(e,i,o).concat(i),directions:o,turnNextDirections:h}}function ly(e){return e.split(":").reverse().join(":")}function lv(e,t,n){var i;if(i=n=n||"h:h",!/^h|v|t|r|b|l:h|v|t|r|b|l$/.test(i))throw Error("unknown directions: <"+n+">: must be specified as <start>:<end> with start/end in { h,v,t,r,b,l }");if(lx(n)){var o,r,a,s,c=lg(e,t,n),p={waypoints:(o=lg(t,e,ly(n))).waypoints.slice().reverse(),directions:ly(o.directions),turnNextDirections:o.turnNextDirections},l=(r=c.directions.split(":")[1],a=p.directions.split(":")[0],c.turnNextDirections&&(r="h"==r?"v":"h"),p.turnNextDirections&&(a="h"==a?"v":"h"),s=r+":"+a,{waypoints:lv(c.waypoints[c.waypoints.length-1],p.waypoints[0],s),directions:s});return[].concat(c.waypoints,l.waypoints,p.waypoints)}return function(e,t,n){var i=lm((t.x-e.x)/2+e.x),o=lm((t.y-e.y)/2+e.y);if("h:v"===n)return[{x:t.x,y:e.y}];if("v:h"===n)return[{x:e.x,y:t.y}];if("h:h"===n)return[{x:i,y:e.y},{x:i,y:t.y}];if("v:v"===n)return[{x:e.x,y:o},{x:t.x,y:o}];throw Error("invalid directions: can only handle varians of [hv]:[hv]")}(e,t,n)}function l_(e,t,n){var i,o,r;return i=t[e],o=n[e],r=n[e]+n[({x:"width",y:"height"})[e]],i>=o&&i<=r}function lb(e,t,n,i){if(i.length<3||!(i.length>4)&&(0,a.sE)(i,function(e,t){var n=i[t-1];return n&&3>(0,rc.tW)(e,n)}))return null;var o,r=i[0],s=i.slice();return(s[0]=n,s[1]=function(e,t,n){switch((0,rc.Or)(t,e)){case"v":return{x:n.x,y:e.y};case"h":return{x:e.x,y:n.y}}return{x:e.x,y:e.y}}(s[1],r,n),(o=function(e,t,n){var i;for(i=e.length-2;0!==i;i--)if((0,rc.qr)(e[i],t,20)||(0,rc.qr)(e[i],n,20))return e.slice(i);return e}(s,e,t))!==s&&(s=lb(e,t,n,o)),s&&(0,rc.Or)(s))?null:s}function lx(e){return e&&/t|r|b|l/.test(e)}function lE(e,t,n,i){if("h"===n&&(n=/left/.test(i)?"l":"r"),"v"===n&&(n=/top/.test(i)?"t":"b"),"t"===n)return{original:e,x:e.x,y:t.y};if("r"===n)return{original:e,x:t.x+t.width,y:e.y};if("b"===n)return{original:e,x:e.x,y:t.y+t.height};if("l"===n)return{original:e,x:t.x,y:e.y};throw Error("unexpected dockingDirection: <"+n+">")}function lw(e){return e.reduce(function(t,n,i){var o=t[t.length-1],r=e[i+1];return(0,rc.ZS)(o,r,n,0)||t.push(n),t},[])}var lS={default:["h:h"],fromGateway:["v:h"],toGateway:["h:v"],loop:{fromTop:["t:r"],fromRight:["r:b"],fromLeft:["l:t"],fromBottom:["b:l"]},boundaryLoop:{alternateHorizontalSide:"b",alternateVerticalSide:"l",default:"v"},messageFlow:["straight","v:v"],subProcess:["straight","h:h"],isHorizontal:!0},lk={default:["v:v"],fromGateway:["h:v"],toGateway:["v:h"],loop:{fromTop:["t:l"],fromRight:["r:t"],fromLeft:["l:b"],fromBottom:["b:r"]},boundaryLoop:{alternateHorizontalSide:"t",alternateVerticalSide:"r",default:"h"},messageFlow:["straight","h:h"],subProcess:["straight","v:v"],isHorizontal:!1},lC={top:"bottom","top-right":"bottom-left","top-left":"bottom-right",right:"left",bottom:"top","bottom-right":"top-left","bottom-left":"top-right",left:"right"},lR={top:"t",right:"r",bottom:"b",left:"l"};function lP(e){this._elementRegistry=e}function lA(e,t){return e?e.original||e:(0,L.wS)(t)}function lM(e,t){return tx(t,"bpmn:Activity")&&tx(e,"bpmn:BoundaryEvent")&&t.businessObject.isForCompensation}function lT(e){return tx(e,"bpmn:SubProcess")&&tL(e)}function lD(e){var t=/right|left/.exec(e);return t&&t[0]}function lB(e){var t=/top|bottom/.exec(e);return t&&t[0]}function lj(e){return"right"===e||"left"===e}function lN(e,t,n,i){return!(lO(e,i,n,40)||lO(e,i,{x:n.x+n.width,y:n.y+n.height},40)||lO(e,i,(0,L.wS)(t),40))}function lO(e,t,n,i){return Math.abs(t[e]-n[e])<i}function lL(e){return(0,a.f0)({original:e.point.original||e.point},e.actual)}function l$(e,t){this._elementRegistry=e,this._graphicsFactory=t}i(lP,ld),lP.prototype.layoutConnection=function(e,t){t||(t={});var n,i,o,r,s=t.source||e.source,c=t.target||e.target,p=t.waypoints||e.waypoints,l=t.connectionStart,u=t.connectionEnd,h=this._elementRegistry;if(l||(l=lA(p&&p[0],s)),u||(u=lA(p&&p[p.length-1],c)),(tx(e,"bpmn:Association")||tx(e,"bpmn:DataAssociation"))&&p&&!lM(s,c))return[].concat([l],p.slice(1,-1),[u]);var d=o0(s,h)?lS:lk;return tx(e,"bpmn:MessageFlow")?o={preferredLayouts:d.messageFlow,preserveDocking:tx(c,"bpmn:Participant")?"source":tx(s,"bpmn:Participant")?"target":lT(c)?"source":lT(s)||tx(c,"bpmn:Event")?"target":tx(s,"bpmn:Event")?"source":null}:(tx(e,"bpmn:SequenceFlow")||lM(s,c))&&(o=s===c?{preferredLayouts:"top"===(i=(n=e.waypoints)&&n.length&&(0,L.T8)(n[0],s))?d.loop.fromTop:"right"===i?d.loop.fromRight:"left"===i?d.loop.fromLeft:d.loop.fromBottom}:tx(s,"bpmn:BoundaryEvent")?{preferredLayouts:function(e,t,n,i){var o,r,a,s,c,p,l,u=(0,L.wS)(e),h=(0,L.wS)(t),d=(l=e.host,(0,L.T8)((0,L.wS)(e),l,-10)),m=e.host===t,f=-1!==["top","right","bottom","left"].indexOf(d),g=(0,L.T8)(h,u,{x:e.width/2+t.width/2,y:e.height/2+t.height/2});return m?[lR[f?d:i.isHorizontal?lB(d):lD(d)]+":"+(f?lj(d)?lN("y",e,t,n)?"h":i.boundaryLoop.alternateHorizontalSide:lN("x",e,t,n)?"v":i.boundaryLoop.alternateVerticalSide:i.boundaryLoop.default)]:[function(e,t,n,i){if(n)return lR[e];var o=lB(e),r=lD(e),a=lB(t),s=lD(t);if(i){if(o===a||lC[r]===s)return lR[o]}else if(r===s||lC[o]===a)return lR[r];return lR[i?r:o]}(d,g,f,i.isHorizontal)+":"+(o=d,r=g,a=f,s=i.isHorizontal,a?lj(o)?(c=lC[lD(o)],-1!==r.indexOf(c)||o===r)?"h":"v":(p=lC[lB(o)],-1!==r.indexOf(p)||o===r)?"v":"h":s?lB(o)===lB(r)?"h":"v":lD(o)===lD(r)?"v":"h")]}(s,c,u,d)}:lT(s)||lT(c)?{preferredLayouts:d.subProcess,preserveDocking:lT(s)?"target":"source"}:tx(s,"bpmn:Gateway")?{preferredLayouts:d.fromGateway}:tx(c,"bpmn:Gateway")?{preferredLayouts:d.toGateway}:{preferredLayouts:d.default}),o&&(r=lw(function(e,t,n,i,o,r){var s,c,p,l,u,h,d,m,f,g,y,v,_,b,x,E,w,S,k,C;return((0,a.kJ)(n)&&(o=n,r=i,n=(0,L.wS)(e),i=(0,L.wS)(t)),r=(0,a.f0)({preferredLayouts:[]},r),o=o||[],(s=-1!==r.preferredLayouts.indexOf("straight")&&(b=n,x=i,E=r,k={},(S=(0,L.T8)(e,t),/^(top|bottom|left|right)$/.test(S))?(/top|bottom/.test(S)&&(w="x"),/left|right/.test(S)&&(w="y"),"target"===E.preserveDocking)?l_(w,x,e)?(k[w]=x[w],[{x:void 0!==k.x?k.x:b.x,y:void 0!==k.y?k.y:b.y,original:{x:void 0!==k.x?k.x:b.x,y:void 0!==k.y?k.y:b.y}},{x:x.x,y:x.y}]):null:l_(w,b,t)?(k[w]=b[w],[{x:b.x,y:b.y},{x:void 0!==k.x?k.x:x.x,y:void 0!==k.y?k.y:x.y,original:{x:void 0!==k.x?k.x:x.x,y:void 0!==k.y?k.y:x.y}}]):null:null))||(s=r.connectionEnd&&((C=lb(t,e,i,C=o.slice().reverse()))?C.reverse():null))||(s=r.connectionStart&&lb(e,t,n,o)))?s:!r.connectionStart&&!r.connectionEnd&&o&&o.length?o:(c=n,p=i,u=(l=r)&&l.preferredLayouts||[],d=lf[h=(0,a.zu)(u,"straight")[0]||"h:h"]||0,f=function(e,t){if(lx(t))return t;switch(e){case"intersect":return"t:t";case"top":case"bottom":return"v:v";case"left":case"right":return"h:h";default:return t}}(m=(0,L.T8)(e,t,d),h),c=c||(0,L.wS)(e),p=p||(0,L.wS)(t),(_=lv(y=lE(c,e,(g=f.split(":"))[0],{top:"bottom",bottom:"top",left:"right",right:"left","top-left":"bottom-right","bottom-right":"top-left","top-right":"bottom-left","bottom-left":"top-right"}[m]),v=lE(p,t,g[1],m),f)).unshift(y),_.push(v),lw(_))}(s,c,l,u,p,o=(0,a.f0)(o,t)))),r||[l,u]},lP.$inject=["elementRegistry"],l$.$inject=["elementRegistry","graphicsFactory"],l$.prototype.getCroppedWaypoints=function(e,t,n){t=t||e.source,n=n||e.target;var i=this.getDockingPoint(e,t,!0),o=this.getDockingPoint(e,n),r=e.waypoints.slice(i.idx+1,o.idx);return r.unshift(lL(i)),r.push(lL(o)),r},l$.prototype.getDockingPoint=function(e,t,n){var i,o,r=e.waypoints;return i=n?0:r.length-1,{point:o=r[i],actual:this._getIntersection(t,e,n)||o,idx:i}},l$.prototype._getIntersection=function(e,t,n){var i=this._getShapePath(e),o=this._getConnectionPath(t);return(0,L.Hz)(i,o,n)},l$.prototype._getConnectionPath=function(e){return this._graphicsFactory.getConnectionPath(e)},l$.prototype._getShapePath=function(e){return this._graphicsFactory.getShapePath(e)},l$.prototype._getGfx=function(e){return this._elementRegistry.getGraphics(e)};var lI={__init__:["modeling","bpmnUpdater"],__depends__:[{__init__:["adaptiveLabelPositioningBehavior","appendBehavior","associationBehavior","attachEventBehavior","boundaryEventBehavior","compensateBoundaryEventBehaviour","createBehavior","createDataObjectBehavior","createParticipantBehavior","dataInputAssociationBehavior","dataStoreBehavior","deleteLaneBehavior","detachEventBehavior","dropOnFlowBehavior","eventBasedGatewayBehavior","fixHoverBehavior","groupBehavior","importDockingFix","isHorizontalFix","labelBehavior","layoutConnectionBehavior","messageFlowBehavior","nonInterruptingBehavior","removeElementBehavior","removeEmbeddedLabelBoundsBehavior","removeParticipantBehavior","replaceConnectionBehavior","replaceElementBehaviour","resizeBehavior","resizeLaneBehavior","rootElementReferenceBehavior","spaceToolBehavior","subProcessPlaneBehavior","subProcessStartEventBehavior","textAnnotationBehavior","toggleCollapseConnectionBehaviour","toggleElementCollapseBehaviour","unclaimIdBehavior","updateFlowNodeRefsBehavior","unsetDefaultFlowBehavior","setCompensationActivityAfterPasteBehavior"],adaptiveLabelPositioningBehavior:["type",aa],appendBehavior:["type",ac],associationBehavior:["type",ap],attachEventBehavior:["type",al],boundaryEventBehavior:["type",ah],compensateBoundaryEventBehaviour:["type",ad],createBehavior:["type",ay],createDataObjectBehavior:["type",av],createParticipantBehavior:["type",a_],dataInputAssociationBehavior:["type",ax],dataStoreBehavior:["type",aS],deleteLaneBehavior:["type",aL],detachEventBehavior:["type",a$],dropOnFlowBehavior:["type",az],eventBasedGatewayBehavior:["type",aG],fixHoverBehavior:["type",aV],groupBehavior:["type",aU],importDockingFix:["type",aq],isHorizontalFix:["type",aX],labelBehavior:["type",sn],layoutConnectionBehavior:["type",si],messageFlowBehavior:["type",sh],nonInterruptingBehavior:["type",sg],removeElementBehavior:["type",sv],removeEmbeddedLabelBoundsBehavior:["type",sy],removeParticipantBehavior:["type",sb],replaceConnectionBehavior:["type",sx],replaceElementBehaviour:["type",sE],resizeBehavior:["type",sM],resizeLaneBehavior:["type",sL],rootElementReferenceBehavior:["type",s$],spaceToolBehavior:["type",sz],subProcessPlaneBehavior:["type",sG],subProcessStartEventBehavior:["type",sW],textAnnotationBehavior:["type",sV],toggleCollapseConnectionBehaviour:["type",sU],toggleElementCollapseBehaviour:["type",sK],unclaimIdBehavior:["type",sq],unsetDefaultFlowBehavior:["type",sJ],updateFlowNodeRefsBehavior:["type",sX],setCompensationActivityAfterPasteBehavior:["type",sZ]},{__depends__:[rs],__init__:["bpmnRules"],bpmnRules:["type",s0]},{__init__:["bpmnDiOrdering"],bpmnDiOrdering:["type",cb]},{__init__:["bpmnOrderingProvider"],bpmnOrderingProvider:["type",cE]},cY,{commandStack:["type",ps]},{__init__:["labelSupport"],labelSupport:["type",pp]},{__depends__:[rs],__init__:["attachSupport"],attachSupport:["type",ph]},nV,nh,pa],bpmnFactory:["type",pm],bpmnUpdater:["type",pf],elementFactory:["type",py],modeling:["type",lh],layouter:["type",lP],connectionDocking:["type",l$]};let lz=Math.round;function lH(e,t,n,i,o,r){this._complexPreview=e,this._connectionDocking=t,this._elementFactory=n,this._eventBus=i,this._layouter=o,this._rules=r}lH.prototype.create=function(e,t,n){let i=this._complexPreview,o=this._connectionDocking,r=this._elementFactory,s=this._eventBus,c=this._layouter,p=this._rules,l=r.createShape((0,a.f0)({type:t},n)),u=s.fire("autoPlace",{source:e,shape:l});if(!u)return;(0,a.f0)(l,{x:u.x-lz(l.width/2),y:u.y-lz(l.height/2)});let h=p.allowed("connection.create",{source:e,target:l,hints:{targetParent:e.parent}}),d=null;h&&((d=r.createConnection(h)).waypoints=c.layoutConnection(d,{source:e,target:l}),d.waypoints=o.getCroppedWaypoints(d,e,l)),i.create({created:[l,d].filter(e=>!(0,a.kK)(e))})},lH.prototype.cleanUp=function(){this._complexPreview.cleanUp()},lH.$inject=["complexPreview","connectionDocking","elementFactory","eventBus","layouter","rules"];var lF=Math.min,lG=Math.max;function lW(e){e.preventDefault()}function lV(e){e.stopPropagation()}function lU(e){this.container=e.container,this.parent=(0,s.H6)('<div class="djs-direct-editing-parent"><div class="djs-direct-editing-content" contenteditable="true"></div></div>'),this.content=(0,s.IO)("[contenteditable]",this.parent),this.keyHandler=e.keyHandler||function(){},this.resizeHandler=e.resizeHandler||function(){},this.autoResize=(0,a.ak)(this.autoResize,this),this.handlePaste=(0,a.ak)(this.handlePaste,this)}function lK(e,t){this._eventBus=e,this._canvas=t,this._providers=[],this._textbox=new lU({container:t.getContainer(),keyHandler:(0,a.ak)(this._handleKey,this),resizeHandler:(0,a.ak)(this._handleResize,this)})}lU.prototype.create=function(e,t,n,i){var o=this.parent,r=this.content,c=this.container;i=this.options=i||{},t=this.style=t||{};var p=(0,a.ei)(t,["width","height","maxWidth","maxHeight","minWidth","minHeight","left","top","backgroundColor","position","overflow","border","wordWrap","textAlign","outline","transform"]);(0,a.f0)(o.style,{width:e.width+"px",height:e.height+"px",maxWidth:e.maxWidth+"px",maxHeight:e.maxHeight+"px",minWidth:e.minWidth+"px",minHeight:e.minHeight+"px",left:e.x+"px",top:e.y+"px",backgroundColor:"#ffffff",position:"absolute",overflow:"visible",border:"1px solid #ccc",boxSizing:"border-box",wordWrap:"normal",textAlign:"center",outline:"none"},p);var l=(0,a.ei)(t,["fontFamily","fontSize","fontWeight","lineHeight","padding","paddingTop","paddingRight","paddingBottom","paddingLeft"]);return(0,a.f0)(r.style,{boxSizing:"border-box",width:"100%",outline:"none",wordWrap:"break-word"},l),i.centerVertically&&(0,a.f0)(r.style,{position:"absolute",top:"50%",transform:"translate(0, -50%)"},l),r.innerText=n,s.B.bind(r,"keydown",this.keyHandler),s.B.bind(r,"mousedown",lV),s.B.bind(r,"paste",this.handlePaste),i.autoResize&&s.B.bind(r,"input",this.autoResize),i.resizable&&this.resizable(t),c.appendChild(o),this.setSelection(r.lastChild,r.lastChild&&r.lastChild.length),o},lU.prototype.handlePaste=function(e){var t,n=this.options,i=this.style;if(e.preventDefault(),t=e.clipboardData?e.clipboardData.getData("text/plain"):window.clipboardData.getData("Text"),this.insertText(t),n.autoResize){var o=this.autoResize(i);o&&this.resizeHandler(o)}},lU.prototype.insertText=function(e){e=e.replace(/\r\n|\r|\n/g,"\n"),!document.execCommand("insertText",!1,e)&&this._insertTextIE(e)},lU.prototype._insertTextIE=function(e){var t,n,i,o=this.getSelection(),r=o.startContainer,a=o.endContainer,c=o.startOffset,p=o.endOffset,l=o.commonAncestorContainer,u=(t=l.childNodes,[].slice.call(t));if(l.nodeType===Node.TEXT_NODE){var h=r.textContent;r.textContent=h.substring(0,c)+e+h.substring(p),n=r,i=c+e.length}else if(r===this.content&&a===this.content){var d=document.createTextNode(e);this.content.insertBefore(d,u[c]),n=d,i=d.textContent.length}else{var m=u.indexOf(r),f=u.indexOf(a);u.forEach(function(t,n){n===m?t.textContent=r.textContent.substring(0,c)+e+a.textContent.substring(p):n>m&&n<=f&&(0,s.Od)(t)}),n=r,i=c+e.length}n&&void 0!==i&&setTimeout(function(){self.setSelection(n,i)})},lU.prototype.autoResize=function(){var e=this.parent,t=this.content,n=parseInt(this.style.fontSize)||12;if(t.scrollHeight>e.offsetHeight||t.scrollHeight<e.offsetHeight-n){var i=e.getBoundingClientRect(),o=t.scrollHeight;e.style.height=o+"px",this.resizeHandler({width:i.width,height:i.height,dx:0,dy:o-i.height})}},lU.prototype.resizable=function(){var e=this,t=this.parent,n=this.resizeHandle,i=parseInt(this.style.minWidth)||0,o=parseInt(this.style.minHeight)||0,r=parseInt(this.style.maxWidth)||1/0,c=parseInt(this.style.maxHeight)||1/0;if(!n){n=this.resizeHandle=(0,s.H6)('<div class="djs-direct-editing-resize-handle"></div>');var p,l,u,h,d=function(n){lW(n),lV(n);var a=lF(lG(u+n.clientX-p,i),r),s=lF(lG(h+n.clientY-l,o),c);t.style.width=a+"px",t.style.height=s+"px",e.resizeHandler({width:u,height:h,dx:n.clientX-p,dy:n.clientY-l})},m=function(e){lW(e),lV(e),s.B.unbind(document,"mousemove",d,!1),s.B.unbind(document,"mouseup",m,!1)};s.B.bind(n,"mousedown",function(e){lW(e),lV(e),p=e.clientX,l=e.clientY;var n=t.getBoundingClientRect();u=n.width,h=n.height,s.B.bind(document,"mousemove",d),s.B.bind(document,"mouseup",m)})}(0,a.f0)(n.style,{position:"absolute",bottom:"0px",right:"0px",cursor:"nwse-resize",width:"0",height:"0",borderTop:(parseInt(this.style.fontSize)/4||3)+"px solid transparent",borderRight:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderBottom:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderLeft:(parseInt(this.style.fontSize)/4||3)+"px solid transparent"}),t.appendChild(n)},lU.prototype.destroy=function(){var e=this.parent,t=this.content,n=this.resizeHandle;t.innerText="",e.removeAttribute("style"),t.removeAttribute("style"),s.B.unbind(t,"keydown",this.keyHandler),s.B.unbind(t,"mousedown",lV),s.B.unbind(t,"input",this.autoResize),s.B.unbind(t,"paste",this.handlePaste),n&&(n.removeAttribute("style"),(0,s.Od)(n)),(0,s.Od)(e)},lU.prototype.getValue=function(){return this.content.innerText.trim()},lU.prototype.getSelection=function(){return window.getSelection().getRangeAt(0)},lU.prototype.setSelection=function(e,t){var n=document.createRange();null===e?n.selectNodeContents(this.content):(n.setStart(e,t),n.setEnd(e,t));var i=window.getSelection();i.removeAllRanges(),i.addRange(n)},lK.$inject=["eventBus","canvas"],lK.prototype.registerProvider=function(e){this._providers.push(e)},lK.prototype.isActive=function(e){return!!(this._active&&(!e||this._active.element===e))},lK.prototype.cancel=function(){this._active&&(this._fire("cancel"),this.close())},lK.prototype._fire=function(e,t){this._eventBus.fire("directEditing."+e,t||{active:this._active})},lK.prototype.close=function(){this._textbox.destroy(),this._fire("deactivate"),this._active=null,this.resizable=void 0,this._canvas.restoreFocus&&this._canvas.restoreFocus()},lK.prototype.complete=function(){var e=this._active;if(e){var t,n=e.context.bounds,i=this.$textbox.getBoundingClientRect(),o=this.getValue();(o!==e.context.text||i.height!==n.height||i.width!==n.width)&&(t=this._textbox.container.getBoundingClientRect(),e.provider.update(e.element,o,e.context.text,{x:i.left-t.left,y:i.top-t.top,width:i.width,height:i.height})),this._fire("complete"),this.close()}},lK.prototype.getValue=function(){return this._textbox.getValue()},lK.prototype._handleKey=function(e){e.stopPropagation();var t=e.keyCode||e.charCode;return 27===t?(e.preventDefault(),this.cancel()):13!==t||e.shiftKey?void 0:(e.preventDefault(),this.complete())},lK.prototype._handleResize=function(e){this._fire("resize",e)},lK.prototype.activate=function(e){this.isActive()&&this.cancel();var t,n=(0,a.sE)(this._providers,function(n){return(t=n.activate(e))?n:null});return t&&(this.$textbox=this._textbox.create(t.bounds,t.style,t.text,t.options),this._active={element:e,context:t,provider:n},t.options&&t.options.resizable&&(this.resizable=!0),this._fire("activate")),!!t};var lq={__depends__:[n$],__init__:["directEditing"],directEditing:["type",lK]},lJ=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message start event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer start event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Conditional start event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Signal start event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],lX=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}}],lY=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message intermediate catch event",actionName:"replace-with-message-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message intermediate throw event",actionName:"replace-with-message-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-message",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer intermediate catch event",actionName:"replace-with-timer-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation intermediate throw event",actionName:"replace-with-escalation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-escalation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional intermediate catch event",actionName:"replace-with-conditional-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Link intermediate catch event",actionName:"replace-with-link-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-link",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Link intermediate throw event",actionName:"replace-with-link-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-link",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Compensation intermediate throw event",actionName:"replace-with-compensation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-compensation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal intermediate catch event",actionName:"replace-with-signal-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal intermediate throw event",actionName:"replace-with-signal-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-signal",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],lZ=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message end event",actionName:"replace-with-message-end",className:"bpmn-icon-end-event-message",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Escalation end event",actionName:"replace-with-escalation-end",className:"bpmn-icon-end-event-escalation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Error end event",actionName:"replace-with-error-end",className:"bpmn-icon-end-event-error",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel end event",actionName:"replace-with-cancel-end",className:"bpmn-icon-end-event-cancel",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Compensation end event",actionName:"replace-with-compensation-end",className:"bpmn-icon-end-event-compensation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal end event",actionName:"replace-with-signal-end",className:"bpmn-icon-end-event-signal",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Terminate end event",actionName:"replace-with-terminate-end",className:"bpmn-icon-end-event-terminate",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:TerminateEventDefinition"}}],lQ=[{label:"Exclusive gateway",actionName:"replace-with-exclusive-gateway",className:"bpmn-icon-gateway-xor",target:{type:"bpmn:ExclusiveGateway"}},{label:"Parallel gateway",actionName:"replace-with-parallel-gateway",className:"bpmn-icon-gateway-parallel",target:{type:"bpmn:ParallelGateway"}},{label:"Inclusive gateway",actionName:"replace-with-inclusive-gateway",className:"bpmn-icon-gateway-or",target:{type:"bpmn:InclusiveGateway"}},{label:"Complex gateway",actionName:"replace-with-complex-gateway",className:"bpmn-icon-gateway-complex",target:{type:"bpmn:ComplexGateway"}},{label:"Event-based gateway",actionName:"replace-with-event-based-gateway",className:"bpmn-icon-gateway-eventbased",target:{type:"bpmn:EventBasedGateway",instantiate:!1,eventGatewayType:"Exclusive"}}],l0=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Event sub-process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}},{label:"Ad-hoc sub-process",actionName:"replace-with-ad-hoc-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:AdHocSubProcess",isExpanded:!0}},{label:"Sub-process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}}],l1=[{label:"Sub-process",actionName:"replace-with-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Event sub-process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}},{label:"Ad-hoc sub-process (collapsed)",actionName:"replace-with-collapsed-ad-hoc-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:AdHocSubProcess",isExpanded:!1}}],l2=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Sub-process",actionName:"replace-with-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Ad-hoc sub-process",actionName:"replace-with-ad-hoc-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:AdHocSubProcess",isExpanded:!0}},{label:"Event sub-process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}}],l5=[{label:"Task",actionName:"replace-with-task",className:"bpmn-icon-task",target:{type:"bpmn:Task"}},{label:"User task",actionName:"replace-with-user-task",className:"bpmn-icon-user",target:{type:"bpmn:UserTask"}},{label:"Service task",actionName:"replace-with-service-task",className:"bpmn-icon-service",target:{type:"bpmn:ServiceTask"}},{label:"Send task",actionName:"replace-with-send-task",className:"bpmn-icon-send",target:{type:"bpmn:SendTask"}},{label:"Receive task",actionName:"replace-with-receive-task",className:"bpmn-icon-receive",target:{type:"bpmn:ReceiveTask"}},{label:"Manual task",actionName:"replace-with-manual-task",className:"bpmn-icon-manual",target:{type:"bpmn:ManualTask"}},{label:"Business rule task",actionName:"replace-with-rule-task",className:"bpmn-icon-business-rule",target:{type:"bpmn:BusinessRuleTask"}},{label:"Script task",actionName:"replace-with-script-task",className:"bpmn-icon-script",target:{type:"bpmn:ScriptTask"}},{label:"Call activity",actionName:"replace-with-call-activity",className:"bpmn-icon-call-activity",target:{type:"bpmn:CallActivity"}},{label:"Sub-process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}},{label:"Sub-process (expanded)",actionName:"replace-with-expanded-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Ad-hoc sub-process (collapsed)",actionName:"replace-with-collapsed-ad-hoc-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:AdHocSubProcess",isExpanded:!1}},{label:"Ad-hoc sub-process (expanded)",actionName:"replace-with-ad-hoc-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:AdHocSubProcess",isExpanded:!0}}],l3=[{label:"Data store reference",actionName:"replace-with-data-store-reference",className:"bpmn-icon-data-store",target:{type:"bpmn:DataStoreReference"}}],l6=[{label:"Data object reference",actionName:"replace-with-data-object-reference",className:"bpmn-icon-data-object",target:{type:"bpmn:DataObjectReference"}}],l4=[{label:"Message boundary event",actionName:"replace-with-message-boundary",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!0}},{label:"Timer boundary event",actionName:"replace-with-timer-boundary",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!0}},{label:"Escalation boundary event",actionName:"replace-with-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!0}},{label:"Conditional boundary event",actionName:"replace-with-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!0}},{label:"Error boundary event",actionName:"replace-with-error-boundary",className:"bpmn-icon-intermediate-event-catch-error",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ErrorEventDefinition",cancelActivity:!0}},{label:"Cancel boundary event",actionName:"replace-with-cancel-boundary",className:"bpmn-icon-intermediate-event-catch-cancel",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CancelEventDefinition",cancelActivity:!0}},{label:"Signal boundary event",actionName:"replace-with-signal-boundary",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!0}},{label:"Compensation boundary event",actionName:"replace-with-compensation-boundary",className:"bpmn-icon-intermediate-event-catch-compensation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CompensateEventDefinition",cancelActivity:!0}},{label:"Message boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-message-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!1}},{label:"Timer boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!1}},{label:"Escalation boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!1}},{label:"Conditional boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!1}},{label:"Signal boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!1}}],l9=[{label:"Message start event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!0}},{label:"Timer start event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!0}},{label:"Conditional start event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!0}},{label:"Signal start event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!0}},{label:"Error start event",actionName:"replace-with-error-start",className:"bpmn-icon-start-event-error",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ErrorEventDefinition",isInterrupting:!0}},{label:"Escalation start event",actionName:"replace-with-escalation-start",className:"bpmn-icon-start-event-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!0}},{label:"Compensation start event",actionName:"replace-with-compensation-start",className:"bpmn-icon-start-event-compensation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:CompensateEventDefinition",isInterrupting:!0}},{label:"Message start event (non-interrupting)",actionName:"replace-with-non-interrupting-message-start",className:"bpmn-icon-start-event-non-interrupting-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!1}},{label:"Timer start event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-start",className:"bpmn-icon-start-event-non-interrupting-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!1}},{label:"Conditional start event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-start",className:"bpmn-icon-start-event-non-interrupting-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!1}},{label:"Signal start event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-start",className:"bpmn-icon-start-event-non-interrupting-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!1}},{label:"Escalation start event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-start",className:"bpmn-icon-start-event-non-interrupting-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!1}}],l8=[{label:"Sequence flow",actionName:"replace-with-sequence-flow",className:"bpmn-icon-connection"},{label:"Default flow",actionName:"replace-with-default-flow",className:"bpmn-icon-default-flow"},{label:"Conditional flow",actionName:"replace-with-conditional-flow",className:"bpmn-icon-conditional-flow"}],l7=[{label:"Expanded pool/participant",actionName:"replace-with-expanded-pool",className:"bpmn-icon-participant",target:{type:"bpmn:Participant",isExpanded:!0}},{label:function(e){var t="Empty pool/participant";return e.children&&e.children.length&&(t+=" (removes content)"),t},actionName:"replace-with-collapsed-pool",className:"bpmn-icon-lane",target:{type:"bpmn:Participant",isExpanded:!1}}],ue={"bpmn:MessageEventDefinition":[{label:"Message start event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message intermediate catch event",actionName:"replace-with-message-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message intermediate throw event",actionName:"replace-with-message-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-message",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message end event",actionName:"replace-with-message-end",className:"bpmn-icon-end-event-message",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}}],"bpmn:TimerEventDefinition":[{label:"Timer start event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Timer intermediate catch event",actionName:"replace-with-timer-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}}],"bpmn:ConditionalEventDefinition":[{label:"Conditional start event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Conditional intermediate catch event",actionName:"replace-with-conditional-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}}],"bpmn:SignalEventDefinition":[{label:"Signal start event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal intermediate catch event",actionName:"replace-with-signal-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal intermediate throw event",actionName:"replace-with-signal-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-signal",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal end event",actionName:"replace-with-signal-end",className:"bpmn-icon-end-event-signal",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],"bpmn:ErrorEventDefinition":[{label:"Error start event",actionName:"replace-with-error-start",className:"bpmn-icon-start-event-error",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Error end event",actionName:"replace-with-error-end",className:"bpmn-icon-end-event-error",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}}],"bpmn:EscalationEventDefinition":[{label:"Escalation start event",actionName:"replace-with-escalation-start",className:"bpmn-icon-start-event-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Escalation intermediate throw event",actionName:"replace-with-escalation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-escalation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Escalation end event",actionName:"replace-with-escalation-end",className:"bpmn-icon-end-event-escalation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}}],"bpmn:CompensateEventDefinition":[{label:"Compensation start event",actionName:"replace-with-compensation-start",className:"bpmn-icon-start-event-compensation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Compensation intermediate throw event",actionName:"replace-with-compensation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-compensation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Compensation end event",actionName:"replace-with-compensation-end",className:"bpmn-icon-end-event-compensation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}}]},ut={"start-event-non-interrupting":`
  <svg viewBox="0 0 2048 2048" xmlns="http://www.w3.org/2000/svg">
    <g transform="translate(0 995.64)">
      <path d="m1899 28.357c21.545 567.43-598.38 1023.5-1133.6 835.92-548.09-147.21-801.57-873.95-463.59-1330 302.62-480.3 1071.7-507.54 1407.6-49.847 122.14 153.12 190.07 348.07 189.59 543.91z" fill="none" stroke="currentColor" stroke-dasharray="418.310422, 361.2328165" stroke-linecap="round" stroke-width="100"/>
    </g>
  </svg>`,"intermediate-event-non-interrupting":`
  <svg viewBox="0 0 2048 2048" xmlns="http://www.w3.org/2000/svg">
     <g transform="translate(0 995.64)" fill="none" stroke="currentColor" stroke-linecap="round">
        <circle cx="1024" cy="28.357" r="875" stroke-dasharray="418.310422, 361.2328165" stroke-width="100"/>
        <circle cx="1024" cy="28.357" r="685" stroke-dasharray="348.31044857,261.23283643" stroke-dashoffset="500" stroke-width="100"/>
     </g>
  </svg>`};function un(e,t,n,i,o,r,a,s){this._bpmnFactory=e,this._popupMenu=t,this._modeling=n,this._moddle=i,this._bpmnReplace=o,this._rules=r,this._translate=a,this._moddleCopy=s,this._register()}function ui(e,t,n,i,o,r,a,s,c,p,l,u,h){e=e||{},i.registerProvider(this),this._contextPad=i,this._modeling=o,this._elementFactory=r,this._connect=a,this._create=s,this._popupMenu=c,this._canvas=p,this._rules=l,this._translate=u,this._eventBus=n,this._appendPreview=h,!1!==e.autoPlace&&(this._autoPlace=t.get("autoPlace",!1)),n.on("create.end",250,function(e){var t=e.context.shape;if(nB(e)&&i.isOpen(t)){var n=i.getEntries(t);n.replace&&n.replace.action.click(e,t)}}),n.on("contextPad.close",function(){h.cleanUp()})}function uo(e,t,n){var i=e.$instanceOf(t),o=!1,r=e.eventDefinitions||[];return(0,a.Ed)(r,function(e){e.$type===n&&(o=!0)}),i&&o}un.$inject=["bpmnFactory","popupMenu","modeling","moddle","bpmnReplace","rules","translate","moddleCopy"],un.prototype._register=function(){this._popupMenu.registerProvider("bpmn-replace",this)},un.prototype.getPopupMenuEntries=function(e){var t=e.businessObject,n=this._rules,i=[],o=[];if((0,a.kJ)(e)||!n.allowed("shape.replace",{element:e}))return{};var r=function(t){var n=t.target,i=tw(e),o=i.eventDefinitions&&i.eventDefinitions[0],r=i.$type===n.type,a=(o&&o.$type)===n.eventDefinitionType,s=!!n.triggeredByEvent==!!i.triggeredByEvent,c=void 0===n.isExpanded||n.isExpanded===tL(e);return!r||!a||!s||!c};return tx(t,"bpmn:DataObjectReference")?this._createEntries(e,l3):tx(t,"bpmn:DataStoreReference")&&!tx(e.parent,"bpmn:Collaboration")?this._createEntries(e,l6):(tx(t,"bpmn:Event")&&!tx(t,"bpmn:BoundaryEvent")&&(i=ue[t.get("eventDefinitions")[0]?.$type]||[],!tI(t.$parent)&&tx(t.$parent,"bpmn:SubProcess")&&(i=(0,a.hX)(i,function(e){return"bpmn:StartEvent"!==e.target.type}))),tx(t,"bpmn:StartEvent")&&!tx(t.$parent,"bpmn:SubProcess"))?(o=(0,a.hX)(lJ.concat(i),r),this._createEntries(e,o)):tx(t,"bpmn:Participant")?(o=(0,a.hX)(l7,function(t){return tL(e)!==t.target.isExpanded}),this._createEntries(e,o)):tx(t,"bpmn:StartEvent")&&tI(t.$parent)?(o=(0,a.hX)(l9.concat(i),function(e){var n=!1!==e.target.isInterrupting,i=t.isInterrupting===n;return r(e)||!r(e)&&!i}),this._createEntries(e,o)):tx(t,"bpmn:StartEvent")&&!tI(t.$parent)&&tx(t.$parent,"bpmn:SubProcess")?(o=(0,a.hX)(lX.concat(i),r),this._createEntries(e,o)):tx(t,"bpmn:EndEvent")?(o=(0,a.hX)(lZ.concat(i),function(e){return!!("bpmn:CancelEventDefinition"!=e.target.eventDefinitionType||tx(t.$parent,"bpmn:Transaction"))&&r(e)}),this._createEntries(e,o)):tx(t,"bpmn:BoundaryEvent")?(o=(0,a.hX)(l4,function(e){var n=e.target;if("bpmn:CancelEventDefinition"==n.eventDefinitionType&&!tx(t.attachedToRef,"bpmn:Transaction"))return!1;var i=!1!==n.cancelActivity,o=t.cancelActivity==i;return r(e)||!r(e)&&!o}),this._createEntries(e,o)):tx(t,"bpmn:IntermediateCatchEvent")||tx(t,"bpmn:IntermediateThrowEvent")?(o=(0,a.hX)(lY.concat(i),r),this._createEntries(e,o)):tx(t,"bpmn:Gateway")?(o=(0,a.hX)(lQ,r),this._createEntries(e,o)):tx(t,"bpmn:Transaction")||tI(t)&&tL(e)?(o=(0,a.hX)(l2,r),this._createEntries(e,o)):tx(t,"bpmn:AdHocSubProcess")&&tL(e)?(o=(0,a.hX)(l1,r),this._createEntries(e,o)):tx(t,"bpmn:SubProcess")&&tL(e)?(o=(0,a.hX)(l0,r),this._createEntries(e,o)):tx(t,"bpmn:SubProcess")&&!tL(e)?(o=(0,a.hX)(l5,function(t){return t.target.type===e.type==(!0===t.target.isExpanded)}),this._createEntries(e,o)):tx(t,"bpmn:SequenceFlow")?this._createSequenceFlowEntries(e,l8):tx(t,"bpmn:FlowNode")?(o=(0,a.hX)(l5,r),this._createEntries(e,o)):{}},un.prototype.getPopupMenuHeaderEntries=function(e){var t={};return tx(e,"bpmn:Activity")&&!tI(e)&&(t={...t,...this._getLoopCharacteristicsHeaderEntries(e)}),tx(e,"bpmn:DataObjectReference")&&(t={...t,...this._getCollectionHeaderEntries(e)}),tx(e,"bpmn:Participant")&&(t={...t,...this._getParticipantMultiplicityHeaderEntries(e)}),sm(e)&&(t={...t,...this._getNonInterruptingHeaderEntries(e)}),t},un.prototype._createEntries=function(e,t){var n={},i=this;return(0,a.Ed)(t,function(t){n[t.actionName]=i._createEntry(t,e)}),n},un.prototype._createSequenceFlowEntries=function(e,t){var n=tw(e),i={},o=this._modeling,r=this._moddle,s=this;return(0,a.Ed)(t,function(t){switch(t.actionName){case"replace-with-default-flow":n.sourceRef.default!==n&&(tx(n.sourceRef,"bpmn:ExclusiveGateway")||tx(n.sourceRef,"bpmn:InclusiveGateway")||tx(n.sourceRef,"bpmn:ComplexGateway")||tx(n.sourceRef,"bpmn:Activity"))&&(i={...i,[t.actionName]:s._createEntry(t,e,function(){o.updateProperties(e.source,{default:n})})});break;case"replace-with-conditional-flow":!n.conditionExpression&&tx(n.sourceRef,"bpmn:Activity")&&(i={...i,[t.actionName]:s._createEntry(t,e,function(){var t=r.create("bpmn:FormalExpression",{body:""});o.updateProperties(e,{conditionExpression:t})})});break;default:tx(n.sourceRef,"bpmn:Activity")&&n.conditionExpression&&(i={...i,[t.actionName]:s._createEntry(t,e,function(){o.updateProperties(e,{conditionExpression:void 0})})}),(tx(n.sourceRef,"bpmn:ExclusiveGateway")||tx(n.sourceRef,"bpmn:InclusiveGateway")||tx(n.sourceRef,"bpmn:ComplexGateway")||tx(n.sourceRef,"bpmn:Activity"))&&n.sourceRef.default===n&&(i={...i,[t.actionName]:s._createEntry(t,e,function(){o.updateProperties(e.source,{default:void 0})})})}}),i},un.prototype._createEntry=function(e,t,n){var i=this._translate,o=this._bpmnReplace.replaceElement,r=e.label;return r&&"function"==typeof r&&(r=r(t)),n=n||function(){return o(t,e.target)},{label:i(r),className:e.className,action:n}},un.prototype._getLoopCharacteristicsHeaderEntries=function(e){var t,n,i,o=this,r=this._translate;function a(t,n){if(n.active){o._modeling.updateProperties(e,{loopCharacteristics:void 0});return}var i=e.businessObject.get("loopCharacteristics");i&&tx(i,n.options.loopCharacteristics)?o._modeling.updateModdleProperties(e,i,{isSequential:n.options.isSequential}):(i=o._moddle.create(n.options.loopCharacteristics,{isSequential:n.options.isSequential}),o._modeling.updateProperties(e,{loopCharacteristics:i}))}var s=tw(e).loopCharacteristics;return s&&(t=s.isSequential,n=void 0===s.isSequential,i=void 0!==s.isSequential&&!s.isSequential),{"toggle-parallel-mi":{className:"bpmn-icon-parallel-mi-marker",title:r("Parallel multi-instance"),active:i,action:a,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!1}},"toggle-sequential-mi":{className:"bpmn-icon-sequential-mi-marker",title:r("Sequential multi-instance"),active:t,action:a,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!0}},"toggle-loop":{className:"bpmn-icon-loop-marker",title:r("Loop"),active:n,action:a,options:{loopCharacteristics:"bpmn:StandardLoopCharacteristics"}}}},un.prototype._getCollectionHeaderEntries=function(e){var t=this,n=this._translate,i=e.businessObject.dataObjectRef;if(!i)return{};var o=i.isCollection;return{"toggle-is-collection":{className:"bpmn-icon-parallel-mi-marker",title:n("Collection"),active:o,action:function(n,o){t._modeling.updateModdleProperties(e,i,{isCollection:!o.active})}}}},un.prototype._getParticipantMultiplicityHeaderEntries=function(e){var t=this,n=this._bpmnFactory,i=this._translate,o=e.businessObject.participantMultiplicity;return{"toggle-participant-multiplicity":{className:"bpmn-icon-parallel-mi-marker",title:i("Participant multiplicity"),active:!!o,action:function(i,o){var r;o.active||(r=n.create("bpmn:ParticipantMultiplicity")),t._modeling.updateProperties(e,{participantMultiplicity:r})}}}},un.prototype._getNonInterruptingHeaderEntries=function(e){let t=this._translate,n=tw(e),i=this,o=sf(e),r=tx(e,"bpmn:BoundaryEvent")?ut["intermediate-event-non-interrupting"]:ut["start-event-non-interrupting"],a=!n[o];return{"toggle-non-interrupting":{imageHtml:r,title:t("Toggle non-interrupting"),active:a,action:function(){i._modeling.updateProperties(e,{[o]:!!a})}}}},ui.$inject=["config.contextPad","injector","eventBus","contextPad","modeling","elementFactory","connect","create","popupMenu","canvas","rules","translate","appendPreview"],ui.prototype.getMultiElementContextPadEntries=function(e){var t=this._modeling,n={};return this._isDeleteAllowed(e)&&(0,a.f0)(n,{delete:{group:"edit",className:"bpmn-icon-trash",title:this._translate("Delete"),action:{click:function(e,n){t.removeElements(n.slice())}}}}),n},ui.prototype._isDeleteAllowed=function(e){var t=this._rules.allowed("elements.delete",{elements:e});return(0,a.kJ)(t)?(0,a.yW)(e,e=>t.includes(e)):t},ui.prototype.getContextPadEntries=function(e){var t=this._contextPad,n=this._modeling,i=this._elementFactory,o=this._connect,r=this._create,s=this._popupMenu,c=this._autoPlace,p=this._translate,l=this._appendPreview,u={};if("label"===e.type)return this._isDeleteAllowed([e])&&(0,a.f0)(u,f()),u;var h=e.businessObject;function d(e,t){o.start(e,t)}function m(e,t){n.removeElements([t])}function f(){return{delete:{group:"edit",className:"bpmn-icon-trash",title:p("Delete"),action:{click:m}}}}function g(e,t,n,o){function s(t,n){var s=i.createShape((0,a.f0)({type:e},o));r.start(t,s,{source:n})}var p=c?function(t,n){var r=i.createShape((0,a.f0)({type:e},o));c.append(n,r)}:s;return{group:"model",className:t,title:n,action:{dragstart:s,click:p,hover:c?function(t,n){return l.create(n,e,o),()=>{l.cleanUp()}}:null}}}function y(e){return function(i,o){n.splitLane(o,e),t.open(o,!0)}}if(tE(h,["bpmn:Lane","bpmn:Participant"])&&tL(e)){var v=aN(e);(0,a.f0)(u,{"lane-insert-above":{group:"lane-insert-above",className:"bpmn-icon-lane-insert-above",title:p("Add lane above"),action:{click:function(e,t){n.addLane(t,"top")}}}}),v.length<2&&((t$(e)?e.height>=120:e.width>=120)&&(0,a.f0)(u,{"lane-divide-two":{group:"lane-divide",className:"bpmn-icon-lane-divide-two",title:p("Divide into two lanes"),action:{click:y(2)}}}),(t$(e)?e.height>=180:e.width>=180)&&(0,a.f0)(u,{"lane-divide-three":{group:"lane-divide",className:"bpmn-icon-lane-divide-three",title:p("Divide into three lanes"),action:{click:y(3)}}})),(0,a.f0)(u,{"lane-insert-below":{group:"lane-insert-below",className:"bpmn-icon-lane-insert-below",title:p("Add lane below"),action:{click:function(e,t){n.addLane(t,"bottom")}}}})}return!tx(h,"bpmn:FlowNode")||(tx(h,"bpmn:EventBasedGateway")?(0,a.f0)(u,{"append.receive-task":g("bpmn:ReceiveTask","bpmn-icon-receive-task",p("Append receive task")),"append.message-intermediate-event":g("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-message",p("Append message intermediate catch event"),{eventDefinitionType:"bpmn:MessageEventDefinition"}),"append.timer-intermediate-event":g("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-timer",p("Append timer intermediate catch event"),{eventDefinitionType:"bpmn:TimerEventDefinition"}),"append.condition-intermediate-event":g("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-condition",p("Append conditional intermediate catch event"),{eventDefinitionType:"bpmn:ConditionalEventDefinition"}),"append.signal-intermediate-event":g("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-signal",p("Append signal intermediate catch event"),{eventDefinitionType:"bpmn:SignalEventDefinition"})}):uo(h,"bpmn:BoundaryEvent","bpmn:CompensateEventDefinition")?(0,a.f0)(u,{"append.compensation-activity":g("bpmn:Task","bpmn-icon-task",p("Append compensation activity"),{isForCompensation:!0})}):tx(h,"bpmn:EndEvent")||h.isForCompensation||uo(h,"bpmn:IntermediateThrowEvent","bpmn:LinkEventDefinition")||tI(h)||(0,a.f0)(u,{"append.end-event":g("bpmn:EndEvent","bpmn-icon-end-event-none",p("Append end event")),"append.gateway":g("bpmn:ExclusiveGateway","bpmn-icon-gateway-none",p("Append gateway")),"append.append-task":g("bpmn:Task","bpmn-icon-task",p("Append task")),"append.intermediate-event":g("bpmn:IntermediateThrowEvent","bpmn-icon-intermediate-event-none",p("Append intermediate/boundary event"))})),s.isEmpty(e,"bpmn-replace")||(0,a.f0)(u,{replace:{group:"edit",className:"bpmn-icon-screw-wrench",title:p("Change element"),action:{click:function(e,n){var i,o=(0,a.f0)({x:(i=t.getPad(n).html.getBoundingClientRect()).left,y:i.bottom+5},{cursor:{x:e.x,y:e.y}});s.open(n,"bpmn-replace",o,{title:p("Change element"),width:300,search:!0})}}}}),tx(h,"bpmn:SequenceFlow")&&(0,a.f0)(u,{"append.text-annotation":g("bpmn:TextAnnotation","bpmn-icon-text-annotation",p("Add text annotation"))}),tx(h,"bpmn:MessageFlow")&&(0,a.f0)(u,{"append.text-annotation":g("bpmn:TextAnnotation","bpmn-icon-text-annotation",p("Add text annotation"))}),tE(h,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference"])&&(0,a.f0)(u,{"append.text-annotation":g("bpmn:TextAnnotation","bpmn-icon-text-annotation",p("Add text annotation")),connect:{group:"connect",className:"bpmn-icon-connection-multi",title:p("Connect to other element"),action:{click:d,dragstart:d}}}),tx(h,"bpmn:TextAnnotation")&&(0,a.f0)(u,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:p("Connect using association"),action:{click:d,dragstart:d}}}),tE(h,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&(0,a.f0)(u,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:p("Connect using data input association"),action:{click:d,dragstart:d}}}),tx(h,"bpmn:Group")&&(0,a.f0)(u,{"append.text-annotation":g("bpmn:TextAnnotation","bpmn-icon-text-annotation",p("Add text annotation"))}),this._isDeleteAllowed([e])&&(0,a.f0)(u,f()),u};var ur={horizontal:["x","width"],vertical:["y","height"]};function ua(e,t){this._modeling=e,this._filters=[],this.registerFilter(function(e){var n=t.allowed("elements.distribute",{elements:e});return(0,a.kJ)(n)?n:n?e:[]})}function us(e){oV.call(this,e)}ua.$inject=["modeling","rules"],ua.prototype.registerFilter=function(e){if("function"!=typeof e)throw Error("the filter has to be a function");this._filters.push(e)},ua.prototype.trigger=function(e,t){var n,i,o=this._modeling;if(!(e.length<3)&&(this._setOrientation(t),i=this._filterElements(e),!((n=this._createGroups(i)).length<=2)))return o.distributeElements(n,this._axis,this._dimension),n},ua.prototype._filterElements=function(e){var t=this._filters,n=this._axis,i=this._dimension,o=[].concat(e);return t.length?((0,a.Ed)(t,function(e){o=e(o,n,i)}),o):e},ua.prototype._createGroups=function(e){var t=[],n=this,i=this._axis,o=this._dimension;if(!i)throw Error('must have a defined "axis" and "dimension"');var r=(0,a.MR)(e,i);return(0,a.Ed)(r,function(e,r){var a,s=n._findRange(e,i,o),c=t[t.length-1];c&&n._hasIntersection(c.range,s)?t[t.length-1].elements.push(e):(a={range:s,elements:[e]},t.push(a))}),t},ua.prototype._setOrientation=function(e){var t=ur[e];this._axis=t[0],this._dimension=t[1]},ua.prototype._hasIntersection=function(e,t){return Math.max(e.min,e.max)>=Math.min(t.min,t.max)&&Math.min(e.min,e.max)<=Math.max(t.min,t.max)},ua.prototype._findRange=function(e){var t=e[this._axis];return{min:t+5,max:t+e[this._dimension]-5}},us.$inject=["eventBus"],i(us,oV),us.prototype.init=function(){this.addRule("elements.distribute",function(e){var t=e.elements;return!((t=S(t=(0,a.hX)(t,function(e){var t=tE(e,["bpmn:Association","bpmn:BoundaryEvent","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:Lane","bpmn:MessageFlow","bpmn:SequenceFlow","bpmn:TextAnnotation"]);return!(e.labelTarget||t)}))).length<3)&&t})};var uc={horizontal:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
                <polyline points="450 400 450 150 1350 150 1350 400" style="fill:none;stroke:currentColor;stroke-width:100;stroke-linejoin:round;"/>
                <rect x="150" y="450" width="600" height="1200" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
                <rect x="1050" y="450" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
              </svg>`,vertical:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
              <polyline points="400 1350 150 1350 150 450 400 450" style="fill:none;stroke:currentColor;stroke-width:100;stroke-linejoin:round;"/>
              <rect x="450" y="150" width="1200" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
              <rect x="450" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
            </svg>`};function up(e,t,n,i){this._distributeElements=t,this._translate=n,this._popupMenu=e,this._rules=i,e.registerProvider("align-elements",900,this)}up.$inject=["popupMenu","distributeElements","translate","rules"],up.prototype.getPopupMenuEntries=function(e){var t={};return this._isAllowed(e)&&(0,a.f0)(t,this._getEntries(e)),t},up.prototype._isAllowed=function(e){return this._rules.allowed("elements.distribute",{elements:e})},up.prototype._getEntries=function(e){var t=this._distributeElements,n=this._translate,i=this._popupMenu;return{"distribute-elements-horizontal":{group:"distribute",title:n("Distribute elements horizontally"),className:"bjs-align-elements-menu-entry",imageHtml:uc.horizontal,action:function(n,o){t.trigger(e,"horizontal"),i.close()}},"distribute-elements-vertical":{group:"distribute",title:n("Distribute elements vertically"),imageHtml:uc.vertical,action:function(n,o){t.trigger(e,"vertical"),i.close()}}}};var ul="is not a registered action";function uu(e,t){this._actions={};var n=this;e.on("diagram.init",function(){n._registerDefaultActions(t),e.fire("editorActions.init",{editorActions:n})})}function uh(e,t){return Error(e+" "+t)}function ud(e){e.invoke(uu,this)}function um(e){e.on(["create.init","shape.move.init"],function(e){var t=e.context;tE(e.shape,["bpmn:Participant","bpmn:SubProcess","bpmn:TextAnnotation"])&&(t.gridSnappingContext||(t.gridSnappingContext={}),t.gridSnappingContext.snapLocation="top-left")})}uu.$inject=["eventBus","injector"],uu.prototype._registerDefaultActions=function(e){var t=e.get("commandStack",!1),n=e.get("modeling",!1),i=e.get("selection",!1),o=e.get("zoomScroll",!1),r=e.get("copyPaste",!1),s=e.get("canvas",!1),c=e.get("rules",!1),p=e.get("keyboardMove",!1),l=e.get("keyboardMoveSelection",!1);t&&(this.register("undo",function(){t.undo()}),this.register("redo",function(){t.redo()})),r&&i&&this.register("copy",function(){var e=i.get();if(e.length)return r.copy(e)}),r&&this.register("paste",function(){r.paste()}),o&&this.register("stepZoom",function(e){o.stepZoom(e.value)}),s&&this.register("zoom",function(e){s.zoom(e.value)}),n&&i&&c&&this.register("removeSelection",function(){var e=i.get();if(e.length){var t,o=c.allowed("elements.delete",{elements:e});!1!==o&&(t=(0,a.kJ)(o)?o:e).length&&n.removeElements(t.slice())}}),p&&this.register("moveCanvas",function(e){p.moveCanvas(e)}),l&&this.register("moveSelection",function(e){l.moveSelection(e.direction,e.accelerated)})},uu.prototype.trigger=function(e,t){if(!this._actions[e])throw uh(e,ul);return this._actions[e](t)},uu.prototype.register=function(e,t){var n=this;if("string"==typeof e)return this._registerAction(e,t);(0,a.Ed)(e,function(e,t){n._registerAction(t,e)})},uu.prototype._registerAction=function(e,t){if(this.isRegistered(e))throw uh(e,"is already registered");this._actions[e]=t},uu.prototype.unregister=function(e){if(!this.isRegistered(e))throw uh(e,ul);this._actions[e]=void 0},uu.prototype.getActions=function(){return Object.keys(this._actions)},uu.prototype.isRegistered=function(e){return!!this._actions[e]},i(ud,uu),ud.$inject=["injector"],ud.prototype._registerDefaultActions=function(e){uu.prototype._registerDefaultActions.call(this,e);var t=e.get("canvas",!1),n=e.get("elementRegistry",!1),i=e.get("selection",!1),o=e.get("spaceTool",!1),r=e.get("lassoTool",!1),s=e.get("handTool",!1),c=e.get("globalConnect",!1),p=e.get("distributeElements",!1),l=e.get("alignElements",!1),u=e.get("directEditing",!1),h=e.get("searchPad",!1),d=e.get("modeling",!1),m=e.get("contextPad",!1);t&&n&&i&&this._registerAction("selectElements",function(){var e=t.getRootElement(),o=n.filter(function(t){return t!==e});return i.select(o),o}),o&&this._registerAction("spaceTool",function(){o.toggle()}),r&&this._registerAction("lassoTool",function(){r.toggle()}),s&&this._registerAction("handTool",function(){s.toggle()}),c&&this._registerAction("globalConnectTool",function(){c.toggle()}),i&&p&&this._registerAction("distributeElements",function(e){var t=i.get(),n=e.type;t.length&&p.trigger(t,n)}),i&&l&&this._registerAction("alignElements",function(e){var t=i.get(),n=[],o=e.type;t.length&&(n=(0,a.hX)(t,function(e){return!tx(e,"bpmn:Lane")}),l.trigger(n,o))}),i&&d&&this._registerAction("setColor",function(e){var t=i.get();t.length&&d.setColor(t,e)}),i&&u&&this._registerAction("directEditing",function(){var e=i.get();e.length&&u.activate(e[0])}),h&&this._registerAction("find",function(){h.toggle()}),t&&d&&this._registerAction("moveToOrigin",function(){var e,i,o=t.getRootElement();e=P(i=tx(o,"bpmn:Collaboration")?n.filter(function(e){return tx(e.parent,"bpmn:Collaboration")}):n.filter(function(e){return e!==o&&!tx(e.parent,"bpmn:SubProcess")})),d.moveElements(i,{x:-e.x,y:-e.y},o)}),i&&m&&this._registerAction("replaceElement",function(e){m.triggerEntry("replace","click",e)})},um.$inject=["eventBus"];var uf=n(3630);function ug(e,t,n){var i=!n||!1!==n.active;this._eventBus=t;var o=this;t.on("diagram.init",800,function(){o.setActive(i)}),t.on(["create.move","create.end","bendpoint.move.move","bendpoint.move.end","connect.move","connect.end","connectionSegment.move.move","connectionSegment.move.end","resize.move","resize.end","shape.move.move","shape.move.end"],1200,function(t){var n=t.originalEvent;if(!(!o.active||n&&nY(n))){var i=t.context,r=i.gridSnappingContext;r||(r=i.gridSnappingContext={}),["x","y"].forEach(function(n){var i,r,s,c,p,l={},u=(i=t.context,r=t.shape,c=(s=i.gridSnappingContext).snapLocation,(p=s.snapOffset)&&(0,a.hj)(p[n])||(p||(p=s.snapOffset={}),(0,a.hj)(p[n])||(p[n]=0),r&&(e.get(r.id)||("x"===n?p[n]+=r[n]+r.width/2:p[n]+=r[n]+r.height/2),c&&("x"===n?/left/.test(c)?p[n]-=r.width/2:/right/.test(c)&&(p[n]+=r.width/2):/top/.test(c)?p[n]-=r.height/2:/bottom/.test(c)&&(p[n]+=r.height/2)))),p[n]);u&&(l.offset=u);var h=function(e,t){var n=e.context,i=n.createConstraints,o=n.resizeConstraints||{},r=n.gridSnappingContext,a=r.snapConstraints;if(a&&a[t])return a[t];a||(a=r.snapConstraints={}),a[t]||(a[t]={});var s=n.direction;i&&("x"===t?(a.x.min=i.left,a.x.max=i.right):(a.y.min=i.top,a.y.max=i.bottom));var c=o.min,p=o.max;return c&&("x"===t?uv(s)?a.x.max=c.left:a.x.min=c.right:uy(s)?a.y.max=c.top:a.y.min=c.bottom),p&&("x"===t?uv(s)?a.x.min=p.left:a.x.max=p.right:uy(s)?a.y.min=p.top:a.y.max=p.bottom),a[t]}(t,n);h&&(0,a.f0)(l,h),rJ(t,n)||o.snapEvent(t,n,l)})}})}function uy(e){return -1!==e.indexOf("n")}function uv(e){return -1!==e.indexOf("w")}function u_(e,t){nd.call(this,e),this._gridSnapping=t;var n=this;this.preExecute("shape.resize",function(e){var t=e.context,i=(t.hints||{}).autoResize;if(i){var o=t.shape,r=t.newBounds;(0,a.HD)(i)?t.newBounds=n.snapComplex(r,i):t.newBounds=n.snapSimple(o,r)}})}function ub(e,t){e.on(["spaceTool.move","spaceTool.end"],2e3,function(e){var n,i=e.context;i.initialized&&("x"===i.axis?(n=t.snapValue(e.dx),e.x=e.x+n-e.dx,e.dx=n):(n=t.snapValue(e.dy),e.y=e.y+n-e.dy,e.dy=n))})}function ux(e,t,n){e.on("autoPlace",2e3,function(e){var i=e.source,o=(0,L.wS)(i),r=e.shape,a=o1(i,r,n);return["x","y"].forEach(function(e){var n={};a[e]!==o[e]&&(a[e]>o[e]?n.min=a[e]:n.max=a[e],tx(r,"bpmn:TextAnnotation")&&("x"===e?n.offset=-r.width/2:n.offset=-r.height/2),a[e]=t.snapValue(a[e],n))}),a})}function uE(e,t,n){t.on(["create.start","shape.move.start"],1750,function(t){var i=t.context,o=i.shape,r=e.getRootElement();tx(o,"bpmn:Participant")&&tx(r,"bpmn:Process")&&r.children.length&&i.createConstraints&&(o.width=n.snapValue(o.width,{min:o.width}),o.height=n.snapValue(o.height,{min:o.height}))})}function uw(e,t,n){nd.call(this,e),this._gridSnapping=t;var i=this;this.postExecuted(["connection.create","connection.layout"],3e3,function(e){var t=e.context,o=t.connection,r=t.hints||{},a=o.waypoints;!r.connectionStart&&!r.connectionEnd&&!1!==r.createElementsBehavior&&a.length>3&&n.updateWaypoints(o,i.snapMiddleSegments(a))})}function uS(e,t){this._interactionEvents=t;var n=this;e.on(["interactionEvents.createHit","interactionEvents.updateHit"],function(e){var t=e.element,i=e.gfx;return tx(t,"bpmn:Lane")?n._createParticipantHit(t,i):tx(t,"bpmn:Participant")?tL(t)?n._createParticipantHit(t,i):n._createDefaultHit(t,i):tx(t,"bpmn:SubProcess")?tL(t)?n._createSubProcessHit(t,i):n._createDefaultHit(t,i):void 0})}function uk(e){e.invoke(n5,this)}ug.prototype.snapEvent=function(e,t,n){var i=this.snapValue(e[t],n);rX(e,t,i)},ug.prototype.getGridSpacing=function(){return uf.N},ug.prototype.snapValue=function(e,t){var n,i,o=0;return t&&t.offset&&(o=t.offset),e+=o,e=(0,uf.q)(e,uf.N),t&&t.min&&(n=t.min,(0,a.hj)(n)&&(e=Math.max(e,n=(0,uf.q)(n+o,uf.N,"ceil")))),t&&t.max&&(i=t.max,(0,a.hj)(i)&&(e=Math.min(e,i=(0,uf.q)(i+o,uf.N,"floor")))),e-=o},ug.prototype.isActive=function(){return this.active},ug.prototype.setActive=function(e){this.active=e,this._eventBus.fire("gridSnapping.toggle",{active:e})},ug.prototype.toggleActive=function(){this.setActive(!this.active)},ug.$inject=["elementRegistry","eventBus","config.gridSnapping"],u_.$inject=["eventBus","gridSnapping","modeling"],i(u_,nd),u_.prototype.snapSimple=function(e,t){var n=this._gridSnapping;return t.width=n.snapValue(t.width,{min:t.width}),t.height=n.snapValue(t.height,{min:t.height}),t.x=e.x+e.width/2-t.width/2,t.y=e.y+e.height/2-t.height/2,t},u_.prototype.snapComplex=function(e,t){return/w|e/.test(t)&&(e=this.snapHorizontally(e,t)),/n|s/.test(t)&&(e=this.snapVertically(e,t)),e},u_.prototype.snapHorizontally=function(e,t){var n=this._gridSnapping,i=/w/.test(t),o=/e/.test(t),r={};return r.width=n.snapValue(e.width,{min:e.width}),o&&(i?(r.x=n.snapValue(e.x,{max:e.x}),r.width+=n.snapValue(e.x-r.x,{min:e.x-r.x})):e.x=e.x+e.width-r.width),(0,a.f0)(e,r),e},u_.prototype.snapVertically=function(e,t){var n=this._gridSnapping,i=/n/.test(t),o=/s/.test(t),r={};return r.height=n.snapValue(e.height,{min:e.height}),i&&(o?(r.y=n.snapValue(e.y,{max:e.y}),r.height+=n.snapValue(e.y-r.y,{min:e.y-r.y})):e.y=e.y+e.height-r.height),(0,a.f0)(e,r),e},ub.$inject=["eventBus","gridSnapping"],ux.$inject=["eventBus","gridSnapping","elementRegistry"],uE.$inject=["canvas","eventBus","gridSnapping"],uw.$inject=["eventBus","gridSnapping","modeling"],i(uw,nd),uw.prototype.snapMiddleSegments=function(e){var t,n=this._gridSnapping;e=e.slice();for(var i=1;i<e.length-2;i++)t=function(e,t,n){var i=(0,rc.Or)(t,n),o={};return"h"===i&&(o.y=e.snapValue(t.y)),"v"===i&&(o.x=e.snapValue(t.x)),("x"in o||"y"in o)&&(t=(0,a.f0)({},t,o),n=(0,a.f0)({},n,o)),[t,n]}(n,e[i],e[i+1]),e[i]=t[0],e[i+1]=t[1];return e},uS.$inject=["eventBus","interactionEvents"],uS.prototype._createDefaultHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createDefaultHit(e,t),!0},uS.prototype._createParticipantHit=function(e,t){this._interactionEvents.removeHits(t),this._interactionEvents.createBoxHit(t,"no-move",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"click-stroke",{width:e.width,height:e.height});var n=t$(e)?{width:30,height:e.height}:{width:e.width,height:30};return this._interactionEvents.createBoxHit(t,"all",n),!0},uS.prototype._createSubProcessHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createBoxHit(t,"no-move",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"click-stroke",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"all",{width:e.width,height:30}),!0},i(uk,n5),uk.$inject=["injector"],uk.prototype.registerBindings=function(e,t){function n(n,i){t.isRegistered(n)&&e.addListener(i)}n5.prototype.registerBindings.call(this,e,t),n("selectElements",function(n){var i=n.keyEvent;if(e.isKey(["a","A"],i)&&e.isCmd(i))return t.trigger("selectElements"),!0}),n("find",function(n){var i=n.keyEvent;if(e.isKey(["f","F"],i)&&e.isCmd(i))return t.trigger("find"),!0}),n("spaceTool",function(n){var i=n.keyEvent;if(!e.hasModifier(i)&&e.isKey(["s","S"],i))return t.trigger("spaceTool"),!0}),n("lassoTool",function(n){var i=n.keyEvent;if(!e.hasModifier(i)&&e.isKey(["l","L"],i))return t.trigger("lassoTool"),!0}),n("handTool",function(n){var i=n.keyEvent;if(!e.hasModifier(i)&&e.isKey(["h","H"],i))return t.trigger("handTool"),!0}),n("globalConnectTool",function(n){var i=n.keyEvent;if(!e.hasModifier(i)&&e.isKey(["c","C"],i))return t.trigger("globalConnectTool"),!0}),n("directEditing",function(n){var i=n.keyEvent;if(!e.hasModifier(i)&&e.isKey(["e","E"],i))return t.trigger("directEditing"),!0}),n("replaceElement",function(n){var i=n.keyEvent;if(!e.hasModifier(i)&&e.isKey(["r","R"],i))return t.trigger("replaceElement",i),!0})};var uC={moveSpeed:1,moveSpeedAccelerated:10},uR="left",uP="right",uA="down",uM={ArrowLeft:uR,Left:uR,ArrowUp:"up",Up:"up",ArrowRight:uP,Right:uP,ArrowDown:uA,Down:uA},uT={left:function(e){return{x:-e,y:0}},up:function(e){return{x:0,y:-e}},right:function(e){return{x:e,y:0}},down:function(e){return{x:0,y:e}}};function uD(e,t,n,i,o){var r=this;this._config=(0,a.f0)({},uC,e||{}),t.addListener(1500,function(e){var n=e.keyEvent,i=uM[n.key];if(!(!i||t.isCmd(n))){var o=t.isShift(n);return r.moveSelection(i,o),!0}}),this.moveSelection=function(e,t){var r=o.get();if(r.length){var a=this._config[t?"moveSpeedAccelerated":"moveSpeed"],s=uT[e](a);i.allowed("elements.move",{shapes:r})&&n.moveElements(r,s)}}}function uB(e,t,n,i){this._dragging=i,this._rules=t;var o=this;e.on("resize.start",function(e){var t,n,i;n=(t=e.context).resizeConstraints,i=t.minBounds,void 0===n&&(void 0===i&&(i=o.computeMinResizeBox(t)),t.resizeConstraints={min:(0,L.JA)(i)})}),e.on("resize.move",function(e){var t,n,i,r,a,s,c,p={x:e.dx,y:e.dy};n=(t=e.context).shape,i=t.direction,r=t.resizeConstraints,t.delta=p,a=p.x,s=p.y,c={x:n.x,y:n.y,width:n.width,height:n.height},-1!==i.indexOf("n")?(c.y=n.y+s,c.height=n.height-s):-1!==i.indexOf("s")&&(c.height=n.height+s),-1!==i.indexOf("e")?c.width=n.width+a:-1!==i.indexOf("w")&&(c.x=n.x+a,c.width=n.width-a),t.newBounds=function(e,t){if(!t)return e;var n=(0,L.JA)(e);return(0,L.z_)({top:aP("top",n,t),right:aP("right",n,t),bottom:aP("bottom",n,t),left:aP("left",n,t)})}(c,r),t.canExecute=o.canResize(t)}),e.on("resize.end",function(e){!function(e){var t,i=e.shape,o=e.canExecute,r=e.newBounds;if(o){if(t=r=(0,L.aR)(r),i.x===t.x&&i.y===t.y&&i.width===t.width&&i.height===t.height)return;n.resizeShape(i,r)}}(e.context)})}function uj(e,t){var n=(0,L.wS)(e),i=(0,L.JA)(e),o={x:n.x,y:n.y};return -1!==t.indexOf("n")?o.y=i.top:-1!==t.indexOf("s")&&(o.y=i.bottom),-1!==t.indexOf("e")?o.x=i.right:-1!==t.indexOf("w")&&(o.x=i.left),o}uD.$inject=["config.keyboardMoveSelection","keyboard","modeling","rules","selection"],uB.prototype.canResize=function(e){var t=this._rules,n=(0,a.ei)(e,["newBounds","shape","delta","direction"]);return t.allowed("shape.resize",n)},uB.prototype.activate=function(e,t,n){var i,o,r,s=this._dragging;if("string"==typeof n&&(n={direction:n}),!(r=(o=(0,a.f0)({shape:t},n)).direction))throw Error("must provide a direction (n|w|s|e|nw|se|ne|sw)");s.init(e,uj(t,r),"resize",{autoActivate:!0,cursor:(i="resize-","n"===r||"s"===r?i+"ns":"e"===r||"w"===r?i+"ew":"nw"===r||"se"===r?i+"nwse":i+"nesw"),data:{shape:t,context:o}})},uB.prototype.computeMinResizeBox=function(e){var t,n,i,o,r,a,s=e.shape,c=e.direction;return r=e.minDimensions||{width:10,height:10},a=aT(s,e.childrenBoxPadding),t=(0,L.JA)(s),n={top:/n/.test(c)?t.bottom-r.height:t.top,left:/w/.test(c)?t.right-r.width:t.left,bottom:/s/.test(c)?t.top+r.height:t.bottom,right:/e/.test(c)?t.left+r.width:t.right},i=a?(0,L.JA)(a):n,o={top:aC(n.top,i.top),left:aC(n.left,i.left),bottom:ak(n.bottom,i.bottom),right:ak(n.right,i.right)},(0,L.z_)(o)},uB.$inject=["eventBus","rules","modeling","dragging"];var uN="djs-resizing",uO="resize-not-ok";function uL(e,t,n){e.on("resize.move",500,function(e){var i,o,r,a;o=(i=e.context).shape,r=i.newBounds,(a=i.frame)||(a=i.frame=n.addFrame(o,t.getActiveLayer()),t.addMarker(o,uN)),r.width>5&&(0,c.Lj)(a,{x:r.x,width:r.width}),r.height>5&&(0,c.Lj)(a,{y:r.y,height:r.height}),i.canExecute?(0,c.Sh)(a).remove(uO):(0,c.Sh)(a).add(uO)}),e.on("resize.cleanup",function(e){var n,i;i=(n=e.context).shape,n.frame&&(0,c.Od)(n.frame),t.removeMarker(i,uN)})}uL.$inject=["eventBus","canvas","previewSupport"];var u$="djs-resizer",uI=["n","w","s","e","nw","ne","se","sw"];function uz(e,t,n,i){this._resize=i,this._canvas=t;var o=this;e.on("selection.changed",function(e){var t=e.newSelection;o.removeResizers(),1===t.length&&(0,a.Ed)(t,(0,a.ak)(o.addResizer,o))}),e.on("shape.changed",function(e){var t=e.element;n.isSelected(t)&&(o.removeResizers(),o.addResizer(t))})}uz.prototype.makeDraggable=function(e,t,n){var i=this._resize;function o(t){nD(t)&&i.activate(t,e,n)}s.B.bind(t,"mousedown",o),s.B.bind(t,"touchstart",o)},uz.prototype._createResizer=function(e,t,n,i){var o,r=this._getResizersParent(),a=(o={x:0,y:0},-1!==i.indexOf("e")?o.x=6:-1!==i.indexOf("w")&&(o.x=-6),-1!==i.indexOf("s")?o.y=6:-1!==i.indexOf("n")&&(o.y=-6),o),s=(0,c.Ue)("g");(0,c.Sh)(s).add(u$),(0,c.Sh)(s).add(u$+"-"+e.id),(0,c.Sh)(s).add(u$+"-"+i),(0,c.R3)(r,s);var p=(0,c.Ue)("rect");(0,c.Lj)(p,{x:-4+a.x,y:-4+a.y,width:8,height:8}),(0,c.Sh)(p).add(u$+"-visual"),(0,c.R3)(s,p);var l=(0,c.Ue)("rect");return(0,c.Lj)(l,{x:-10+a.x,y:-10+a.y,width:20,height:20}),(0,c.Sh)(l).add(u$+"-hit"),(0,c.R3)(s,l),eu(s,t,n),s},uz.prototype.createResizer=function(e,t){var n=uj(e,t),i=this._createResizer(e,n.x,n.y,t);this.makeDraggable(e,i,t)},uz.prototype.addResizer=function(e){var t=this;!(0,tH.Ho)(e)&&this._resize.canResize({shape:e})&&(0,a.Ed)(uI,function(n){t.createResizer(e,n)})},uz.prototype.removeResizers=function(){var e=this._getResizersParent();(0,c.ZH)(e)},uz.prototype._getResizersParent=function(){return this._canvas.getLayer("resizers")},uz.$inject=["eventBus","canvas","selection","resize"];var uH={__depends__:[rs,ro,an],__init__:["resize","resizePreview","resizeHandles"],resize:["type",uB],resizePreview:["type",uL],resizeHandles:["type",uz]};function uF(e,t,n,i,o,r,a){function s(e,t){(t||tE(e,["bpmn:Task","bpmn:TextAnnotation","bpmn:Participant"])||uG(e))&&i.activate(e)}this._bpmnFactory=t,this._canvas=n,this._modeling=o,this._textRenderer=a,i.registerProvider(this),e.on("element.dblclick",function(e){s(e.element,!0)}),e.on(["autoPlace.start","canvas.viewbox.changing","drag.init","element.mousedown","popupMenu.open","root.set","selection.changed"],function(){i.isActive()&&i.complete()}),e.on(["shape.remove","connection.remove"],2e3,function(e){i.isActive(e.element)&&i.cancel()}),e.on(["commandStack.changed"],function(e){i.isActive()&&i.cancel()}),e.on("directEditing.activate",function(e){r.removeResizers()}),e.on("create.end",500,function(e){var t=e.context,n=t.shape,i=e.context.canExecute;e.isTouch||!i||t.hints&&!1===t.hints.createElementsBehavior||s(n)}),e.on("autoPlace.end",500,function(e){s(e.shape)})}function uG(e){return tx(e,"bpmn:SubProcess")&&!tL(e)}uF.$inject=["eventBus","bpmnFactory","canvas","directEditing","modeling","resizeHandles","textRenderer"],uF.prototype.activate=function(e){var t=tK(e);if(void 0!==t){var n={text:t},i=this.getEditingBBox(e);(0,a.f0)(n,i);var o={},r=n.style||{};return(0,a.f0)(r,{backgroundColor:null,border:null}),(tE(e,["bpmn:Task","bpmn:Participant","bpmn:Lane","bpmn:CallActivity"])||uG(e))&&(0,a.f0)(o,{centerVertically:!0}),tG(e)&&((0,a.f0)(o,{autoResize:!0}),(0,a.f0)(r,{backgroundColor:"#ffffff",border:"1px solid #ccc"})),tx(e,"bpmn:TextAnnotation")&&((0,a.f0)(o,{resizable:!0,autoResize:!0}),(0,a.f0)(r,{backgroundColor:"#ffffff",border:"1px solid #ccc"})),(0,a.f0)(n,{options:o,style:r}),n}},uF.prototype.getEditingBBox=function(e){var t=this._canvas,n=e.label||e,i=t.getAbsoluteBBox(n),o={x:i.x+i.width/2,y:i.y+i.height/2},r={x:i.x,y:i.y},s=t.zoom(),c=this._textRenderer.getDefaultStyle(),p=this._textRenderer.getExternalStyle(),l=p.fontSize*s,u=p.lineHeight,h=c.fontSize*s,d=c.lineHeight,m={fontFamily:this._textRenderer.getDefaultStyle().fontFamily,fontWeight:this._textRenderer.getDefaultStyle().fontWeight};if(tx(e,"bpmn:Lane")||tx(e,"bpmn:Participant")&&tL(e)){var f=t$(e),g=f?{width:i.height,height:30*s,x:i.x-i.height/2+15*s,y:o.y-30*s/2}:{width:i.width,height:30*s};(0,a.f0)(r,g),(0,a.f0)(m,{fontSize:h+"px",lineHeight:d,paddingTop:7*s+"px",paddingBottom:7*s+"px",paddingLeft:5*s+"px",paddingRight:5*s+"px",transform:f?"rotate(-90deg)":null})}if(tx(e,"bpmn:Participant")&&!tL(e)){var y=t$(e),v=y?{width:i.width,height:i.height}:{width:i.height,height:i.width,x:o.x-i.height/2,y:o.y-i.width/2};(0,a.f0)(r,v),(0,a.f0)(m,{fontSize:h+"px",lineHeight:d,paddingTop:7*s+"px",paddingBottom:7*s+"px",paddingLeft:5*s+"px",paddingRight:5*s+"px",transform:y?null:"rotate(-90deg)"})}(tE(e,["bpmn:Task","bpmn:CallActivity"])||uG(e))&&((0,a.f0)(r,{width:i.width,height:i.height}),(0,a.f0)(m,{fontSize:h+"px",lineHeight:d,paddingTop:7*s+"px",paddingBottom:7*s+"px",paddingLeft:5*s+"px",paddingRight:5*s+"px"})),tx(e,"bpmn:SubProcess")&&tL(e)&&((0,a.f0)(r,{width:i.width,x:i.x}),(0,a.f0)(m,{fontSize:h+"px",lineHeight:d,paddingTop:7*s+"px",paddingBottom:7*s+"px",paddingLeft:5*s+"px",paddingRight:5*s+"px"}));var _=90*s,b=7*s,x=4*s;if(n.labelTarget&&((0,a.f0)(r,{width:_,height:i.height+b+x,x:o.x-_/2,y:i.y-b}),(0,a.f0)(m,{fontSize:l+"px",lineHeight:u,paddingTop:b+"px",paddingBottom:x+"px"})),tG(n)&&!tW(n)&&!(0,tH.j_)(n)){var E=tV(e),w=t.getAbsoluteBBox({x:E.x,y:E.y,width:0,height:0}),S=l+b+x;(0,a.f0)(r,{width:_,height:S,x:w.x-_/2,y:w.y-S/2}),(0,a.f0)(m,{fontSize:l+"px",lineHeight:u,paddingTop:b+"px",paddingBottom:x+"px"})}return tx(e,"bpmn:TextAnnotation")&&((0,a.f0)(r,{width:i.width,height:i.height,minWidth:30*s,minHeight:10*s}),(0,a.f0)(m,{textAlign:"left",paddingTop:5*s+"px",paddingBottom:7*s+"px",paddingLeft:7*s+"px",paddingRight:5*s+"px",fontSize:h+"px",lineHeight:d})),{bounds:r,style:m}},uF.prototype.update=function(e,t,n,i){var o,r,a;tx(e,"bpmn:TextAnnotation")&&(r=this._canvas.getAbsoluteBBox(e),o={x:e.x,y:e.y,width:e.width/r.width*i.width,height:e.height/r.height*i.height}),(a=t)&&a.trim()||(t=null),this._modeling.updateLabel(e,t,o)};var uW="djs-element-hidden",uV="djs-label-hidden";function uU(e,t,n){var i,o,r,a=this,s=t.getDefaultLayer();e.on("directEditing.activate",function(e){var p=e.active;if(tx(i=p.element.label||p.element,"bpmn:TextAnnotation")){o=t.getAbsoluteBBox(i),r=(0,c.Ue)("g");var l=n.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:i.width,containerHeight:i.height,position:{mx:0,my:0}}),u=a.path=(0,c.Ue)("path");(0,c.Lj)(u,{d:l,strokeWidth:2,stroke:tS(i).get("stroke")||"black"}),(0,c.R3)(r,u),(0,c.R3)(s,r),eh(r,i.x,i.y)}tx(i,"bpmn:TextAnnotation")||i.labelTarget?t.addMarker(i,uW):(tx(i,"bpmn:Task")||tx(i,"bpmn:CallActivity")||tx(i,"bpmn:SubProcess")||tx(i,"bpmn:Participant")||tx(i,"bpmn:Lane"))&&t.addMarker(i,uV)}),e.on("directEditing.resize",function(e){if(tx(i,"bpmn:TextAnnotation")){var t=e.height,r=e.dy,s=Math.max(i.height/o.height*(t+r),0),p=n.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:i.width,containerHeight:s,position:{mx:0,my:0}});(0,c.Lj)(a.path,{d:p})}}),e.on(["directEditing.complete","directEditing.cancel"],function(e){var n=e.active;n&&(t.removeMarker(n.element.label||n.element,uW),t.removeMarker(i,uV)),i=void 0,o=void 0,r&&((0,c.Od)(r),r=void 0)})}uU.$inject=["eventBus","canvas","pathMap"];var uK=new no.Z("tt");function uq(e,t){e.style.display=!1===t?"none":""}var uJ="djs-tooltip",uX="."+uJ;function uY(e,t){this._eventBus=e,this._canvas=t,this._ids=uK,this._tooltipDefaults={show:{minZoom:.7,maxZoom:5}},this._tooltips={},this._tooltipRoot=(n=t.getContainer(),i=(0,s.H6)('<div class="djs-tooltip-container" />'),(0,s.i5)(i,{position:"absolute",width:"0",height:"0"}),n.insertBefore(i,n.firstChild),i);var n,i,o=this;s.cl.bind(this._tooltipRoot,uX,"mousedown",function(e){e.stopPropagation()}),s.cl.bind(this._tooltipRoot,uX,"mouseover",function(e){o.trigger("mouseover",e)}),s.cl.bind(this._tooltipRoot,uX,"mouseout",function(e){o.trigger("mouseout",e)}),this._init()}function uZ(e,t,n){function i(e,n,i){t.add({position:{x:e.x+5,y:e.y+5},type:"error",timeout:i||2e3,html:"<div>"+n+"</div>"})}e.on(["shape.move.rejected","create.rejected"],function(e){var t=e.context,o=t.shape;tx(t.target,"bpmn:Collaboration")&&(tx(o,"bpmn:FlowNode")?i(e,n("flow elements must be children of pools/participants")):tx(o,"bpmn:DataObjectReference")&&i(e,n("Data object must be placed within a pool/participant.")))})}function uQ(e,t){this._eventBus=e,this.offset=5;var n=t.cls("djs-outline",["no-fill"]),i=this;function o(e){var t=(0,c.Ue)("rect");return(0,c.Lj)(t,(0,a.f0)({x:0,y:0,rx:4,width:100,height:100},n)),t}e.on(["shape.added","shape.changed"],500,function(e){var t=e.element,n=e.gfx,r=(0,s.IO)(".djs-outline",n);r||(r=i.getOutline(t)||o(n),(0,c.R3)(n,r)),i.updateShapeOutline(r,t)}),e.on(["connection.added","connection.changed"],function(e){var t=e.element,n=e.gfx,r=(0,s.IO)(".djs-outline",n);r||(r=o(n),(0,c.R3)(n,r)),i.updateConnectionOutline(r,t)})}function u0(e,t,n){this._canvas=t;var i=this;e.on("element.changed",function(e){n.isSelected(e.element)&&i._updateMultiSelectionOutline(n.get())}),e.on("selection.changed",function(e){var t=e.newSelection;i._updateMultiSelectionOutline(t)})}uY.$inject=["eventBus","canvas"],uY.prototype.add=function(e){if(!e.position)throw Error("must specifiy tooltip position");if(!e.html)throw Error("must specifiy tooltip html");var t=this._ids.next();return e=(0,a.f0)({},this._tooltipDefaults,e,{id:t}),this._addTooltip(e),e.timeout&&this.setTimeout(e),t},uY.prototype.trigger=function(e,t){var n=t.delegateTarget||t.target,i=this.get((0,s.Lj)(n,"data-tooltip-id"));i&&("mouseover"===e&&i.timeout&&this.clearTimeout(i),"mouseout"===e&&i.timeout&&(i.timeout=1e3,this.setTimeout(i)))},uY.prototype.get=function(e){return"string"!=typeof e&&(e=e.id),this._tooltips[e]},uY.prototype.clearTimeout=function(e){if(e=this.get(e)){var t=e.removeTimer;t&&(clearTimeout(t),e.removeTimer=null)}},uY.prototype.setTimeout=function(e){if(e=this.get(e)){this.clearTimeout(e);var t=this;e.removeTimer=setTimeout(function(){t.remove(e)},e.timeout)}},uY.prototype.remove=function(e){var t=this.get(e);t&&((0,s.Od)(t.html),(0,s.Od)(t.htmlContainer),delete t.htmlContainer,delete this._tooltips[t.id])},uY.prototype.show=function(){uq(this._tooltipRoot)},uY.prototype.hide=function(){uq(this._tooltipRoot,!1)},uY.prototype._updateRoot=function(e){var t=e.scale||1,n=e.scale||1,i="matrix("+t+",0,0,"+n+","+-1*e.x*t+","+-1*e.y*n+")";this._tooltipRoot.style.transform=i,this._tooltipRoot.style["-ms-transform"]=i},uY.prototype._addTooltip=function(e){var t,n=e.id,i=e.html,o=this._tooltipRoot;i.get&&i.constructor.prototype.jquery&&(i=i.get(0)),(0,a.HD)(i)&&(i=(0,s.H6)(i)),t=(0,s.H6)('<div data-tooltip-id="'+n+'" class="'+uJ+'">'),(0,s.i5)(t,{position:"absolute"}),t.appendChild(i),e.type&&(0,s.Sh)(t).add("djs-tooltip-"+e.type),e.className&&(0,s.Sh)(t).add(e.className),e.htmlContainer=t,o.appendChild(t),this._tooltips[n]=e,this._updateTooltip(e)},uY.prototype._updateTooltip=function(e){var t,n,i,o=e.position;t=e.htmlContainer,n=o.x,i=o.y,(0,s.i5)(t,{left:n+"px",top:i+"px"})},uY.prototype._updateTooltipVisibilty=function(e){(0,a.Ed)(this._tooltips,function(t){var n=t.show,i=t.htmlContainer,o=!0;n&&((n.minZoom>e.scale||n.maxZoom<e.scale)&&(o=!1),uq(i,o))})},uY.prototype._init=function(){var e=this;this._eventBus.on("canvas.viewbox.changing",function(t){e.hide()}),this._eventBus.on("canvas.viewbox.changed",function(t){var n;n=t.viewbox,e._updateRoot(n),e._updateTooltipVisibilty(n),e.show()})},uZ.$inject=["eventBus","tooltips","translate"],uQ.prototype.updateShapeOutline=function(e,t){var n=!1,i=this._getProviders();i.length&&(0,a.Ed)(i,function(i){n=n||i.updateOutline(t,e)}),n||(0,c.Lj)(e,{x:-this.offset,y:-this.offset,width:t.width+2*this.offset,height:t.height+2*this.offset})},uQ.prototype.updateConnectionOutline=function(e,t){var n=P(t);(0,c.Lj)(e,{x:n.x-this.offset,y:n.y-this.offset,width:n.width+2*this.offset,height:n.height+2*this.offset})},uQ.prototype.registerProvider=function(e,t){t||(t=e,e=1e3),this._eventBus.on("outline.getProviders",e,function(e){e.providers.push(t)})},uQ.prototype._getProviders=function(){var e=this._eventBus.createEvent({type:"outline.getProviders",providers:[]});return this._eventBus.fire(e),e.providers},uQ.prototype.getOutline=function(e){var t,n=this._getProviders();return(0,a.Ed)(n,function(n){(0,a.mf)(n.getOutline)&&(t=t||n.getOutline(e))}),t},uQ.$inject=["eventBus","styles","elementRegistry"],u0.prototype._updateMultiSelectionOutline=function(e){var t=this._canvas.getLayer("selectionOutline");(0,c.ZH)(t);var n=e.length>1,i=this._canvas.getContainer();if((0,c.Sh)(i)[n?"add":"remove"]("djs-multi-select"),n){var o,r={x:(o=P(e)).x-6,y:o.y-6,width:o.width+12,height:o.height+12},s=(0,c.Ue)("rect");(0,c.Lj)(s,(0,a.f0)({rx:3},r)),(0,c.Sh)(s).add("djs-selection-outline"),(0,c.R3)(t,s)}},u0.$inject=["eventBus","canvas","selection"];var u1={__depends__:[nV],__init__:["outline","multiSelectionOutline"],outline:["type",uQ],multiSelectionOutline:["type",u0]},u2=Math.round;function u5(e,t,n,i,o){function r(e,t,n,i){return o.allowed("elements.move",{shapes:e,delta:t,position:n,target:i})}function s(e,n,i,o){if((0,a.Kn)(i)&&(o=i,i=!1),!(n.waypoints||!n.parent||(0,c.Sh)(e.target).has("djs-hit-no-move"))){var r={x:n.x+u2(n.width/2),y:n.y+u2(n.height/2)};return t.init(e,r,"shape.move",{cursor:"grabbing",autoActivate:i,data:{shape:n,context:o||{}}}),!0}}e.on("shape.move.start",1500,function(e){var t,n,o=e.context,r=e.shape,s=i.get().slice();-1===s.indexOf(r)&&(s=[r]),t=s,n=(0,a.vM)(t,"id"),s=(0,a.hX)(t,function(e){for(;e=e.parent;)if(n[e.id])return!1;return!0}),(0,a.f0)(o,{shapes:s,validatedShapes:s,shape:r})}),e.on("shape.move.start",1250,function(e){var t=e.context,n=t.validatedShapes;if(!(t.canExecute=r(n)))return!1}),e.on("shape.move.move",500,function(e){var t,n=e.context,i=n.validatedShapes,o=e.hover,a={x:e.dx,y:e.dy};if(t=r(i,a,{x:e.x,y:e.y},o),n.delta=a,n.canExecute=t,null===t){n.target=null;return}n.target=o}),e.on("shape.move.end",function(e){var t=e.context,i=t.delta,o=t.canExecute,r=t.shapes;if(!1===o)return!1;i.x=u2(i.x),i.y=u2(i.y),(0!==i.x||0!==i.y)&&n.moveElements(r,i,t.target,{primaryShape:t.shape,attach:"attach"===o})}),e.on("element.mousedown",function(e){if(nD(e)){var t=nR(e);if(!t)throw Error("must supply DOM mousedown event");return s(t,e.element)}}),this.start=s}u5.$inject=["eventBus","dragging","modeling","selection","rules"];var u3="djs-dragging",u6="drop-ok",u4="drop-not-ok",u9="new-parent",u8="attach-ok";function u7(e,t,n,i){function o(e){var t=R(e,!0),n=t.flatMap(e=>(e.incoming||[]).concat(e.outgoing||[]));return[...new Set(t.concat(n))]}function r(e,n){[u8,u6,u4,u9].forEach(function(i){i===n?t.addMarker(e,i):t.removeMarker(e,i)})}e.on("shape.move.start",499,function(e){var r,s=e.context,p=s.shapes,l=s.allDraggedElements,u=(r=o(p),(0,a.hX)(r,function(e){return!(0,tH.Ho)(e)||(0,a.sE)(r,(0,a.KQ)({id:e.source.id}))&&(0,a.sE)(r,(0,a.KQ)({id:e.target.id}))}));if(!s.dragGroup){var h=(0,c.Ue)("g");(0,c.Lj)(h,n.cls("djs-drag-group",["no-events"]));var d=t.getActiveLayer();(0,c.R3)(d,h),s.dragGroup=h}u.forEach(function(e){i.addDragger(e,s.dragGroup)}),l=l?(0,a.xH)([l,o(p)]):o(p),(0,a.Ed)(l,function(e){t.addMarker(e,u3)}),s.allDraggedElements=l,s.differentParents=1!==(0,a.dp)((0,a.vM)(p,function(e){return e.parent&&e.parent.id}))}),e.on("shape.move.move",499,function(e){var t=e.context,n=t.dragGroup,i=t.target,o=t.shape.parent,a=t.canExecute;i&&("attach"===a?r(i,u8):t.canExecute&&o&&i.id!==o.id?r(i,u9):r(i,t.canExecute?u6:u4)),eh(n,e.dx,e.dy)}),e.on(["shape.move.out","shape.move.cleanup"],function(e){var t=e.context.target;t&&r(t,null)}),e.on("shape.move.cleanup",function(e){var n=e.context,i=n.allDraggedElements,o=n.dragGroup;(0,a.Ed)(i,function(e){t.removeMarker(e,u3)}),o&&(0,c.Od)(o)}),this.makeDraggable=function(e,n,o){i.addDragger(n,e.dragGroup),o&&t.addMarker(n,u3),e.allDraggedElements?e.allDraggedElements.push(n):e.allDraggedElements=[n]}}u7.$inject=["eventBus","canvas","styles","previewSupport"];var he=".djs-palette-toggle",ht=".entry",hn=he+", "+ht,hi="djs-palette-",ho="open",hr="two-column";function ha(e,t){this._eventBus=e,this._canvas=t;var n=this;e.on("tool-manager.update",function(e){var t=e.tool;n.updateToolHighlight(t)}),e.on("i18n.changed",function(){n._update()}),e.on("diagram.init",function(){n._diagramInitialized=!0,n._rebuild()})}function hs(e,t){var n=t.getPaletteEntries();return(0,a.mf)(n)?n(e):((0,a.Ed)(n,function(t,n){e[n]=t}),e)}ha.$inject=["eventBus","canvas"],ha.prototype.registerProvider=function(e,t){t||(t=e,e=1e3),this._eventBus.on("palette.getProviders",e,function(e){e.providers.push(t)}),this._rebuild()},ha.prototype.getEntries=function(){return this._getProviders().reduce(hs,{})},ha.prototype._rebuild=function(){this._diagramInitialized&&this._getProviders().length&&(this._container||this._init(),this._update())},ha.prototype._init=function(){var e=this,t=this._eventBus,n=this._getParentContainer(),i=this._container=(0,s.H6)(ha.HTML_MARKUP);n.appendChild(i),(0,s.Sh)(n).add(hi+"shown"),s.cl.bind(i,hn,"click",function(t){var n=t.delegateTarget;if((0,s.wB)(n,he))return e.toggle();e.trigger("click",t)}),s.B.bind(i,"mousedown",function(e){e.stopPropagation()}),s.cl.bind(i,ht,"dragstart",function(t){e.trigger("dragstart",t)}),t.on("canvas.resized",this._layoutChanged,this),t.fire("palette.create",{container:i})},ha.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"palette.getProviders",providers:[]});return this._eventBus.fire(t),t.providers},ha.prototype._toggleState=function(e){e=e||{};var t,n=this._getParentContainer(),i=this._container,o=this._eventBus,r=(0,s.Sh)(i),a=(0,s.Sh)(n);t="twoColumn"in e?e.twoColumn:this._needsCollapse(n.clientHeight,this._entries||{}),r.toggle(hr,t),a.toggle(hi+hr,t),"open"in e&&(r.toggle(ho,e.open),a.toggle(hi+ho,e.open)),o.fire("palette.changed",{twoColumn:t,open:this.isOpen()})},ha.prototype._update=function(){var e=(0,s.IO)(".djs-palette-entries",this._container),t=this._entries=this.getEntries();(0,s.ZH)(e),(0,a.Ed)(t,function(t,n){var i=t.group||"default",o=(0,s.IO)("[data-group="+(0,ng.D)(i)+"]",e);o||(o=(0,s.H6)('<div class="group"></div>'),(0,s.Lj)(o,"data-group",i),e.appendChild(o));var r=t.html||(t.separator?'<hr class="separator" />':'<div class="entry" draggable="true"></div>'),c=(0,s.H6)(r);if(o.appendChild(c),!t.separator&&((0,s.Lj)(c,"data-action",n),t.title&&(0,s.Lj)(c,"title",t.title),t.className&&function(e,t){var n=(0,s.Sh)(e);((0,a.kJ)(t)?t:t.split(/\s+/g)).forEach(function(e){n.add(e)})}(c,t.className),t.imageUrl)){var p=(0,s.H6)("<img>");(0,s.Lj)(p,"src",t.imageUrl),c.appendChild(p)}}),this.open()},ha.prototype.trigger=function(e,t,n){var i,o,r=t.delegateTarget||t.target;return r?(i=(0,s.Lj)(r,"data-action"),o=t.originalEvent||t,this.triggerEntry(i,e,o,n)):t.preventDefault()},ha.prototype.triggerEntry=function(e,t,n,i){var o,r;if((o=this._entries[e])&&(r=o.action,!1!==this._eventBus.fire("palette.trigger",{entry:o,event:n}))){if((0,a.mf)(r)){if("click"===t)return r(n,i)}else if(r[t])return r[t](n,i);n.preventDefault()}},ha.prototype._layoutChanged=function(){this._toggleState({})},ha.prototype._needsCollapse=function(e,t){return e<46*Object.keys(t).length+50},ha.prototype.close=function(){this._toggleState({open:!1,twoColumn:!1})},ha.prototype.open=function(){this._toggleState({open:!0})},ha.prototype.toggle=function(){this.isOpen()?this.close():this.open()},ha.prototype.isActiveTool=function(e){return e&&this._activeTool===e},ha.prototype.updateToolHighlight=function(e){var t,n;this._toolsContainer||(t=(0,s.IO)(".djs-palette-entries",this._container),this._toolsContainer=(0,s.IO)("[data-group=tools]",t)),n=this._toolsContainer,(0,a.Ed)(n.children,function(t){var n=t.getAttribute("data-action");if(n){var i=(0,s.Sh)(t);n=n.replace("-tool",""),i.contains("entry")&&n===e?i.add("highlighted-entry"):i.remove("highlighted-entry")}})},ha.prototype.isOpen=function(){return(0,s.Sh)(this._container).has(ho)},ha.prototype._getParentContainer=function(){return this._canvas.getContainer()},ha.HTML_MARKUP='<div class="djs-palette"><div class="djs-palette-entries"></div><div class="djs-palette-toggle"></div></div>';var hc="crosshair";function hp(e,t,n,i,o,r,a){this._selection=o,this._dragging=n,this._mouse=a;var s=this,p=function(e){var n,i=t.getActiveLayer();n=e.frame=(0,c.Ue)("rect"),(0,c.Lj)(n,{class:"djs-lasso-overlay",width:1,height:1,x:0,y:0}),(0,c.R3)(i,n)},l=function(e){var t=e.frame,n=e.bbox;(0,c.Lj)(t,{x:n.x,y:n.y,width:n.width,height:n.height})},u=function(e){e.frame&&(0,c.Od)(e.frame)};r.registerTool("lasso",{tool:"lasso.selection",dragging:"lasso"}),e.on("lasso.selection.end",function(t){var n=t.originalEvent.target;(t.hover||n instanceof SVGElement)&&e.once("lasso.selection.ended",function(){s.activateLasso(t.originalEvent,!0)})}),e.on("lasso.end",0,function(e){var t=e.context,n=hl(e),o=i.filter(function(e){return e}),r=nj(e);s.select(o,n,r?t.selection:[])}),e.on("lasso.start",function(e){var t=e.context;t.bbox=hl(e),p(t),t.selection=o.get()}),e.on("lasso.move",function(e){var t=e.context;t.bbox=hl(e),l(t)}),e.on("lasso.cleanup",function(e){u(e.context)}),e.on("element.mousedown",1500,function(e){if(nj(e))return s.activateLasso(e.originalEvent),!0})}function hl(e){var t={x:e.x-e.dx,y:e.y-e.dy},n={x:e.x,y:e.y};return t.x<=n.x&&t.y<n.y||t.x<n.x&&t.y<=n.y?{x:t.x,y:t.y,width:n.x-t.x,height:n.y-t.y}:t.x>=n.x&&t.y<n.y||t.x>n.x&&t.y<=n.y?{x:n.x,y:t.y,width:t.x-n.x,height:n.y-t.y}:t.x<=n.x&&t.y>n.y||t.x<n.x&&t.y>=n.y?{x:t.x,y:n.y,width:n.x-t.x,height:t.y-n.y}:t.x>=n.x&&t.y>n.y||t.x>n.x&&t.y>=n.y?{x:n.x,y:n.y,width:t.x-n.x,height:t.y-n.y}:{x:n.x,y:n.y,width:0,height:0}}hp.$inject=["eventBus","canvas","dragging","elementRegistry","selection","toolManager","mouse"],hp.prototype.activateLasso=function(e,t){this._dragging.init(e,"lasso",{autoActivate:t,cursor:hc,data:{context:{}}})},hp.prototype.activateSelection=function(e,t){this._dragging.init(e,"lasso.selection",{trapClick:!1,autoActivate:t,cursor:hc,data:{context:{}},keepSelection:!0})},hp.prototype.select=function(e,t,n=[]){var i=A(e,t);this._selection.select([...n,...(0,a.VO)(i)])},hp.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateSelection(e,!!e)},hp.prototype.isActive=function(){var e=this._dragging.context();return e&&/^lasso/.test(e.prefix)};var hu="grab";function hh(e,t,n,i,o,r){this._dragging=n,this._mouse=r;var a=this,s=i.get("keyboard",!1);o.registerTool("hand",{tool:"hand",dragging:"hand.move"}),e.on("element.mousedown",1500,function(e){if(nB(e))return a.activateMove(e.originalEvent,!0),!1}),s&&s.addListener(1500,function(e){if(!(!hd(e.keyEvent)||a.isActive())){var t=a._mouse.getLastMoveEvent();a.activateMove(t,!!t)}},"keyboard.keydown"),s&&s.addListener(1500,function(e){hd(e.keyEvent)&&a.isActive()&&a.toggle()},"keyboard.keyup"),e.on("hand.end",function(t){var n=t.originalEvent.target;if(!t.hover&&!(n instanceof SVGElement))return!1;e.once("hand.ended",function(){a.activateMove(t.originalEvent,{reactivate:!0})})}),e.on("hand.move.move",function(e){var n=t.viewbox().scale;t.scroll({dx:e.dx*n,dy:e.dy*n})}),e.on("hand.move.end",function(t){var n=t.context.reactivate;return!nB(t)&&n&&e.once("hand.move.ended",function(e){a.activateHand(e.originalEvent,!0,!0)}),!1})}function hd(e){return nZ("Space",e)}hh.$inject=["eventBus","canvas","dragging","injector","toolManager","mouse"],hh.prototype.activateMove=function(e,t,n){"object"==typeof t&&(n=t,t=!1),this._dragging.init(e,"hand.move",{autoActivate:t,cursor:hu,data:{context:n||{}}})},hh.prototype.activateHand=function(e,t,n){this._dragging.init(e,"hand",{trapClick:!1,autoActivate:t,cursor:hu,data:{context:{reactivate:n}}})},hh.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateHand(e,!!e)},hh.prototype.isActive=function(){var e=this._dragging.context();return!!e&&/^(hand|hand\.move)$/.test(e.prefix)};var hm="connect-ok",hf="connect-not-ok";function hg(e,t,n,i,o,r,a){var s=this;this._dragging=t,this._rules=r,this._mouse=a,o.registerTool("global-connect",{tool:"global-connect",dragging:"global-connect.drag"}),e.on("global-connect.hover",function(e){var t=e.context,n=e.hover,o=t.canStartConnect=s.canStartConnect(n);null!==o&&(t.startTarget=n,i.addMarker(n,o?hm:hf))}),e.on(["global-connect.out","global-connect.cleanup"],function(e){var t=e.context.startTarget,n=e.context.canStartConnect;t&&i.removeMarker(t,n?hm:hf)}),e.on(["global-connect.ended"],function(t){var i=t.context.startTarget,o={x:t.x,y:t.y};if(s.canStartConnect(i))return e.once("element.out",function(){e.once(["connect.ended","connect.canceled"],function(){e.fire("global-connect.drag.ended")}),n.start(null,i,o)}),!1})}function hy(e,t,n,i,o,r,a,s){this._palette=e,this._create=t,this._elementFactory=n,this._spaceTool=i,this._lassoTool=o,this._handTool=r,this._globalConnect=a,this._translate=s,e.registerProvider(this)}function hv(e,t,n,i,o){nd.call(this,e),e.on("shape.move.move",250,function(e){var r,p,l=e.context,u=l.canExecute;(l.visualReplacements||(l.visualReplacements={}),u&&u.replacements)?(r=l.canExecute.replacements,(0,a.Ed)(r,function(e){var r=e.oldElementId,p={type:e.newElementType};if(!l.visualReplacements[r]){var u=t.get(r);(0,a.f0)(p,{x:u.x,y:u.y});var h=n.createShape(p);i.addShape(h,u.parent);var d=(0,s.IO)('[data-element-id="'+(0,ng.D)(u.id)+'"]',l.dragGroup);d&&(0,c.Lj)(d,{display:"none"});var m=o.addDragger(h,l.dragGroup);l.visualReplacements[r]=m,i.removeShape(h)}})):(p=l.visualReplacements,(0,a.Ed)(p,function(e,t){var n=(0,s.IO)('[data-element-id="'+(0,ng.D)(t)+'"]',l.dragGroup);n&&(0,c.Lj)(n,{display:"inline"}),e.remove(),p[t]&&delete p[t]}))})}hg.$inject=["eventBus","dragging","connect","canvas","toolManager","rules","mouse"],hg.prototype.start=function(e,t){this._dragging.init(e,"global-connect",{autoActivate:t,trapClick:!1,data:{context:{}}})},hg.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();return this.start(e,!!e)},hg.prototype.isActive=function(){var e=this._dragging.context();return e&&/^global-connect/.test(e.prefix)},hg.prototype.canStartConnect=function(e){return this._rules.allowed("connection.start",{source:e})},hy.$inject=["palette","create","elementFactory","spaceTool","lassoTool","handTool","globalConnect","translate"],hy.prototype.getPaletteEntries=function(){var e={},t=this._create,n=this._elementFactory,i=this._spaceTool,o=this._lassoTool,r=this._handTool,s=this._globalConnect,c=this._translate;function p(e,i,o,r,s){function c(i){var o=n.createShape((0,a.f0)({type:e},s));t.start(i,o)}return{group:i,className:o,title:r,action:{dragstart:c,click:c}}}function l(e){var i=n.createShape({type:"bpmn:SubProcess",x:0,y:0,isExpanded:!0}),o=n.createShape({type:"bpmn:StartEvent",x:40,y:82,parent:i});t.start(e,[i,o],{hints:{autoSelect:[i]}})}function u(e){t.start(e,n.createParticipantShape())}return(0,a.f0)(e,{"hand-tool":{group:"tools",className:"bpmn-icon-hand-tool",title:c("Activate hand tool"),action:{click:function(e){r.activateHand(e)}}},"lasso-tool":{group:"tools",className:"bpmn-icon-lasso-tool",title:c("Activate lasso tool"),action:{click:function(e){o.activateSelection(e)}}},"space-tool":{group:"tools",className:"bpmn-icon-space-tool",title:c("Activate create/remove space tool"),action:{click:function(e){i.activateSelection(e)}}},"global-connect-tool":{group:"tools",className:"bpmn-icon-connection-multi",title:c("Activate global connect tool"),action:{click:function(e){s.start(e)}}},"tool-separator":{group:"tools",separator:!0},"create.start-event":p("bpmn:StartEvent","event","bpmn-icon-start-event-none",c("Create start event")),"create.intermediate-event":p("bpmn:IntermediateThrowEvent","event","bpmn-icon-intermediate-event-none",c("Create intermediate/boundary event")),"create.end-event":p("bpmn:EndEvent","event","bpmn-icon-end-event-none",c("Create end event")),"create.exclusive-gateway":p("bpmn:ExclusiveGateway","gateway","bpmn-icon-gateway-none",c("Create gateway")),"create.task":p("bpmn:Task","activity","bpmn-icon-task",c("Create task")),"create.data-object":p("bpmn:DataObjectReference","data-object","bpmn-icon-data-object",c("Create data object reference")),"create.data-store":p("bpmn:DataStoreReference","data-store","bpmn-icon-data-store",c("Create data store reference")),"create.subprocess-expanded":{group:"activity",className:"bpmn-icon-subprocess-expanded",title:c("Create expanded sub-process"),action:{dragstart:l,click:l}},"create.participant-expanded":{group:"collaboration",className:"bpmn-icon-participant",title:c("Create pool/participant"),action:{dragstart:u,click:u}},"create.group":p("bpmn:Group","artifact","bpmn-icon-group",c("Create group"))}),e},hv.$inject=["eventBus","elementRegistry","elementFactory","canvas","previewSupport"],i(hv,nd);var h_=["x","y"],hb=Math.abs;function hx(e){e.on(["connect.hover","connect.move","connect.end"],1250,function(e){var t,n,i,o=e.context,r=o.canExecute,s=o.start,c=o.hover,p=o.source,l=o.target;!(e.originalEvent&&nY(e.originalEvent))&&(o.initialConnectionStart||(o.initialConnectionStart=o.connectionStart),r&&c&&(t=tx(c,"bpmn:Task")?10:20,h_.forEach(function(n){var i=hw(n,c);e[n]<c[n]+t?rX(e,n,c[n]+t):e[n]>c[n]+i-t&&rX(e,n,c[n]+i-t)})),c&&(n=["bpmn:Association","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:SequenceFlow"],(0,a.G)(n,function(e){return r&&r.type===e}))?(o.connectionStart=rq(s),tE(c,["bpmn:Event","bpmn:Gateway"])&&hE(e,rq(c)),tE(c,["bpmn:Task","bpmn:SubProcess"])&&(i=rq(c),h_.forEach(function(t){e[t]>c[t]+20&&e[t]<c[t]+hw(t,c)-20&&rX(e,t,i[t])})),tx(p,"bpmn:BoundaryEvent")&&l===p.host&&function(e){var t,n,i=e.context,o=i.source,r=i.target;if(t=i.hover,n=i.source,!t||!n||t!==n){var a=rq(o),s=(0,L.T8)(a,r,-10),c=[];/top|bottom/.test(s)&&c.push("x"),/left|right/.test(s)&&c.push("y"),c.forEach(function(t){var n,i=e[t];40>hb(i-a[t])&&(n=i>a[t]?a[t]+40:a[t]-40,rX(e,t,n))})}}(e)):r&&"bpmn:MessageFlow"===r.type?(tx(s,"bpmn:Event")&&(o.connectionStart=rq(s)),tx(c,"bpmn:Event")&&hE(e,rq(c))):o.connectionStart=o.initialConnectionStart)})}function hE(e,t){rX(e,"x",t.x),rX(e,"y",t.y)}function hw(e,t){return"x"===e?t.width:t.height}function hS(){this._targets={},this._snapOrigins={},this._snapLocations=[],this._defaultSnaps={}}function hk(){this._snapValues={}}function hC(e,t,n){var i=this;this._elementRegistry=e,t.on(["create.start","shape.move.start"],function(e){i.initSnap(e)}),t.on(["create.move","create.end","shape.move.move","shape.move.end"],1250,function(e){var t=e.context,o=t.shape,r=t.snapContext,a=t.target;if(!(e.originalEvent&&nY(e.originalEvent)||rJ(e)||!a)){var s=r.pointsForTarget(a);s.initialized||((s=i.addSnapTargetPoints(s,o,a)).initialized=!0),n.snap(e,s)}}),t.on(["create.cleanup","shape.move.cleanup"],function(){n.hide()})}function hR(e,t){t.invoke(hC,this),e.on(["create.move","create.end"],1500,hP),e.on(["create.move","create.end","shape.move.move","shape.move.end"],1500,function(e){var t,n,i,o,r=e.context,a=r.canExecute,s=r.target;a&&("attach"===a||a.attach)&&!rJ(e)&&(n=(0,L.JA)(s),i=sQ(e,s),t=(o=e.context.shape).parent?{x:0,y:0}:(0,L.wS)(o),/top/.test(i)?rX(e,"y",n.top-t.y):/bottom/.test(i)&&rX(e,"y",n.bottom-t.y),/left/.test(i)?rX(e,"x",n.left-t.x):/right/.test(i)&&rX(e,"x",n.right-t.x))})}function hP(e){var t=e.context.createConstraints;if(t){var n=t.top,i=t.right,o=t.bottom,r=t.left;(r&&r>=e.x||i&&i<=e.x)&&rX(e,"x",e.x),(n&&n>=e.y||o&&o<=e.y)&&rX(e,"y",e.y)}}function hA(e,t){return -1!==e.indexOf(t)}function hM(e,t,n){return t?{x:e.x-n.x,y:e.y-n.y}:{x:e.x,y:e.y}}function hT(e,t){var n=this;e.on(["resize.start"],function(e){n.initSnap(e)}),e.on(["resize.move","resize.end"],1250,function(e){var i=e.context,o=i.shape,r=o.parent,a=i.direction,s=i.snapContext;if(!(e.originalEvent&&nY(e.originalEvent)||rJ(e))){var c=s.pointsForTarget(r);c.initialized||((c=n.addSnapTargetPoints(c,o,r,a)).initialized=!0),("n"===a||"s"===a)&&rX(e,"x",e.x),("e"===a||"w"===a)&&rX(e,"y",e.y),t.snap(e,c)}}),e.on(["resize.cleanup"],function(){t.hide()})}function hD(e,t){var n=(0,L.wS)(e),i=(0,L.JA)(e),o={x:n.x,y:n.y};return -1!==t.indexOf("n")?o.y=i.top:-1!==t.indexOf("s")&&(o.y=i.bottom),-1!==t.indexOf("e")?o.x=i.right:-1!==t.indexOf("w")&&(o.x=i.left),o}function hB(e){this._canvas=e,this._asyncHide=(0,a.Ds)((0,a.ak)(this.hide,this),1e3)}function hj(e,t,n,i){this._open=!1,this._results={},this._eventMaps=[],this._cachedRootElement=null,this._cachedSelection=null,this._cachedViewbox=null,this._canvas=e,this._eventBus=t,this._selection=n,this._translate=i,this._container=this._getBoxHtml(),this._searchInput=(0,s.IO)(hj.INPUT_SELECTOR,this._container),this._resultsContainer=(0,s.IO)(hj.RESULTS_CONTAINER_SELECTOR,this._container),this._canvas.getContainer().appendChild(this._container),t.on(["canvas.destroy","diagram.destroy","drag.init","elements.changed"],this.close,this)}function hN(e,t,n){var i,o=(i="",t.forEach(function(e){var t=(0,ng.r)(e.value||e.matched||e.normal);e.match||e.matched?i+='<b class="'+hj.RESULT_HIGHLIGHT_CLASS+'">'+t+"</b>":i+=t}),""!==i?i:null),r=(0,s.H6)(n);r.innerHTML=o,e.appendChild(r)}function hO(e,t,n,i){this._elementRegistry=e,this._canvas=n,this._search=i,t.registerProvider(this)}function hL(e){let{item:{element:t},tokens:n}=e;return{element:t,primaryTokens:n.label,secondaryTokens:n.id}}hx.$inject=["eventBus"],hS.prototype.getSnapOrigin=function(e){return this._snapOrigins[e]},hS.prototype.setSnapOrigin=function(e,t){this._snapOrigins[e]=t,-1===this._snapLocations.indexOf(e)&&this._snapLocations.push(e)},hS.prototype.addDefaultSnap=function(e,t){var n=this._defaultSnaps[e];n||(n=this._defaultSnaps[e]=[]),n.push(t)},hS.prototype.getSnapLocations=function(){return this._snapLocations},hS.prototype.setSnapLocations=function(e){this._snapLocations=e},hS.prototype.pointsForTarget=function(e){var t=e.id||e,n=this._targets[t];return n||(n=this._targets[t]=new hk).initDefaults(this._defaultSnaps),n},hk.prototype.add=function(e,t){var n=this._snapValues[e];n||(n=this._snapValues[e]={x:[],y:[]}),-1===n.x.indexOf(t.x)&&n.x.push(t.x),-1===n.y.indexOf(t.y)&&n.y.push(t.y)},hk.prototype.snap=function(e,t,n,i){var o=this._snapValues[t];return o&&function(e,t,n){var i,o;for(i=0,n=void 0===n?10:n;i<t.length;i++)if(rW((o=t[i])-e)<=n)return o}(e[n],o[n],i)},hk.prototype.initDefaults=function(e){var t=this;(0,a.Ed)(e||{},function(e,n){(0,a.Ed)(e,function(e){t.add(n,e)})})},hC.$inject=["elementRegistry","eventBus","snapping"],hC.prototype.initSnap=function(e){var t,n=this._elementRegistry,i=e.context,o=i.shape,r=i.snapContext;r||(r=i.snapContext=new hS);var a={x:(t=n.get(o.id)?rq(o,e):{x:e.x+rq(o).x,y:e.y+rq(o).y}).x-o.width/2,y:t.y-o.height/2},s={x:t.x+o.width/2,y:t.y+o.height/2};return r.setSnapOrigin("mid",{x:t.x-e.x,y:t.y-e.y}),(0,tH.j_)(o)||(r.setSnapOrigin("top-left",{x:a.x-e.x,y:a.y-e.y}),r.setSnapOrigin("bottom-right",{x:s.x-e.x,y:s.y-e.y})),r},hC.prototype.addSnapTargetPoints=function(e,t,n){var i=this.getSnapTargets(t,n);return(0,a.Ed)(i,function(n){if((0,tH.j_)(n)){(0,tH.j_)(t)&&e.add("mid",rq(n));return}if((0,tH.Ho)(n)){if(n.waypoints.length<3)return;var i=n.waypoints.slice(1,-1);(0,a.Ed)(i,function(t){e.add("mid",t)});return}e.add("mid",rq(n))}),(0,a.hj)(t.x)&&(0,a.hj)(t.y)&&this._elementRegistry.get(t.id)&&e.add("mid",rq(t)),e},hC.prototype.getSnapTargets=function(e,t){return rY(t).filter(function(e){return!e.hidden})},i(hR,hC),hR.$inject=["eventBus","injector"],hR.prototype.initSnap=function(e){var t=hC.prototype.initSnap.call(this,e),n=e.shape,i=!!this._elementRegistry.get(n.id);return(0,a.Ed)(n.outgoing,function(n){var o=n.waypoints[0];o=o.original||o,t.setSnapOrigin(n.id+"-docking",hM(o,i,e))}),(0,a.Ed)(n.incoming,function(n){var o=n.waypoints[n.waypoints.length-1];o=o.original||o,t.setSnapOrigin(n.id+"-docking",hM(o,i,e))}),tx(n,"bpmn:Participant")&&t.setSnapLocations(["top-left","bottom-right","mid"]),t},hR.prototype.addSnapTargetPoints=function(e,t,n){hC.prototype.addSnapTargetPoints.call(this,e,t,n);var i=this.getSnapTargets(t,n);(0,a.Ed)(i,function(n){var i;(tx(n,"bpmn:SubProcess")&&tL(n)||tx(n,"bpmn:Participant")||(i="bpmn:TextAnnotation",[t,n].every(function(e){return tx(e,i)})))&&(e.add("top-left",rU(n)),e.add("bottom-right",rK(n)))});var o=this._elementRegistry;return(0,a.Ed)(t.incoming,function(n){if(o.get(t.id)){hA(i,n.source)||e.add("mid",(0,L.wS)(n.source));var r=n.waypoints[0];e.add(n.id+"-docking",r.original||r)}}),(0,a.Ed)(t.outgoing,function(n){if(o.get(t.id)){hA(i,n.target)||e.add("mid",(0,L.wS)(n.target));var r=n.waypoints[n.waypoints.length-1];e.add(n.id+"-docking",r.original||r)}}),tx(n,"bpmn:SequenceFlow")&&(e=this.addSnapTargetPoints(e,t,n.parent)),e},hR.prototype.getSnapTargets=function(e,t){return hC.prototype.getSnapTargets.call(this,e,t).filter(function(e){return!tx(e,"bpmn:Lane")})},hT.prototype.initSnap=function(e){var t=e.context,n=t.shape,i=t.direction,o=t.snapContext;o||(o=t.snapContext=new hS);var r=hD(n,i);return o.setSnapOrigin("corner",{x:r.x-e.x,y:r.y-e.y}),o},hT.prototype.addSnapTargetPoints=function(e,t,n,i){var o=this.getSnapTargets(t,n);return(0,a.Ed)(o,function(t){e.add("corner",rK(t)),e.add("corner",rU(t))}),e.add("corner",hD(t,i)),e},hT.$inject=["eventBus","snapping"],hT.prototype.getSnapTargets=function(e,t){return rY(t).filter(function(t){return t.host!==e&&!(0,tH.Ho)(t)&&!t.hidden&&!(0,tH.j_)(t)})},hB.$inject=["canvas"],hB.prototype.snap=function(e,t){var n=e.context.snapContext,i=n.getSnapLocations(),o={x:rJ(e,"x"),y:rJ(e,"y")};(0,a.Ed)(i,function(i){var r=n.getSnapOrigin(i),s={x:e.x+r.x,y:e.y+r.y};if((0,a.Ed)(["x","y"],function(e){var n;o[e]||void 0===(n=t.snap(s,i,e,7))||(o[e]={value:n,originValue:n-r[e]})}),o.x&&o.y)return!1}),this.showSnapLine("vertical",o.x&&o.x.value),this.showSnapLine("horizontal",o.y&&o.y.value),(0,a.Ed)(["x","y"],function(t){var n=o[t];(0,a.Kn)(n)&&rX(e,t,n.originValue)})},hB.prototype._createLine=function(e){var t=this._canvas.getLayer("snap"),n=(0,c.Ue)("path");return(0,c.Lj)(n,{d:"M0,0 L0,0"}),(0,c.Sh)(n).add("djs-snap-line"),(0,c.R3)(t,n),{update:function(t){(0,a.hj)(t)?"horizontal"===e?(0,c.Lj)(n,{d:"M-100000,"+t+" L+100000,"+t,display:""}):(0,c.Lj)(n,{d:"M "+t+",-100000 L "+t+", +100000",display:""}):(0,c.Lj)(n,{display:"none"})}}},hB.prototype._createSnapLines=function(){this._snapLines={horizontal:this._createLine("horizontal"),vertical:this._createLine("vertical")}},hB.prototype.showSnapLine=function(e,t){var n=this.getSnapLine(e);n&&n.update(t),this._asyncHide()},hB.prototype.getSnapLine=function(e){return this._snapLines||this._createSnapLines(),this._snapLines[e]},hB.prototype.hide=function(){(0,a.Ed)(this._snapLines,function(e){e.update()})},hj.$inject=["canvas","eventBus","selection","translate"],hj.prototype._bindEvents=function(){var e=this;function t(t,n,i,o){e._eventMaps.push({el:t,type:i,listener:s.cl.bind(t,n,i,o)})}t(document,"html","click",function(t){e.close(!1)}),t(this._container,hj.INPUT_SELECTOR,"click",function(e){e.stopPropagation(),e.delegateTarget.focus()}),t(this._container,hj.RESULT_SELECTOR,"mouseover",function(t){t.stopPropagation(),e._scrollToNode(t.delegateTarget),e._preselect(t.delegateTarget)}),t(this._container,hj.RESULT_SELECTOR,"click",function(t){t.stopPropagation(),e._select(t.delegateTarget)}),t(this._container,hj.INPUT_SELECTOR,"keydown",function(e){nZ("ArrowUp",e)&&e.preventDefault(),nZ("ArrowDown",e)&&e.preventDefault()}),t(this._container,hj.INPUT_SELECTOR,"keyup",function(t){if(nZ("Escape",t))return e.close();if(nZ("Enter",t)){var n=e._getCurrentResult();return n?e._select(n):e.close(!1)}return nZ("ArrowUp",t)?e._scrollToDirection(!0):nZ("ArrowDown",t)?e._scrollToDirection():nZ(["ArrowLeft","ArrowRight"],t)?void 0:void e._search(t.delegateTarget.value)})},hj.prototype._unbindEvents=function(){this._eventMaps.forEach(function(e){s.cl.unbind(e.el,e.type,e.listener)})},hj.prototype._search=function(e){var t=this;if(this._clearResults(),e.trim()){var n=this._searchProvider.find(e);if(!(n=n.filter(function(e){return!t._canvas.getRootElements().includes(e.element)})).length){this._selection.select(null);return}n.forEach(function(e){var n=e.element.id,i=t._createResultNode(e,n);t._results[n]={element:e.element,node:i}});var i=(0,s.IO)(hj.RESULT_SELECTOR,this._resultsContainer);this._scrollToNode(i),this._preselect(i)}},hj.prototype._scrollToDirection=function(e){var t=this._getCurrentResult();if(t){var n=e?t.previousElementSibling:t.nextElementSibling;n&&(this._scrollToNode(n),this._preselect(n))}},hj.prototype._scrollToNode=function(e){if(e&&e!==this._getCurrentResult()){var t=e.offsetTop,n=this._resultsContainer.scrollTop,i=t-this._resultsContainer.clientHeight+e.clientHeight;t<n?this._resultsContainer.scrollTop=t:n<i&&(this._resultsContainer.scrollTop=i)}},hj.prototype._clearResults=function(){(0,s.ZH)(this._resultsContainer),this._results={},this._eventBus.fire("searchPad.cleared")},hj.prototype._getCurrentResult=function(){return(0,s.IO)(hj.RESULT_SELECTED_SELECTOR,this._resultsContainer)},hj.prototype._createResultNode=function(e,t){var n=(0,s.H6)(hj.RESULT_HTML);return e.primaryTokens.length>0&&hN(n,e.primaryTokens,hj.RESULT_PRIMARY_HTML),hN(n,e.secondaryTokens,hj.RESULT_SECONDARY_HTML),(0,s.Lj)(n,hj.RESULT_ID_ATTRIBUTE,t),this._resultsContainer.appendChild(n),n},hj.prototype.registerProvider=function(e){this._searchProvider=e},hj.prototype.open=function(){if(!this._searchProvider)throw Error("no search provider registered");this.isOpen()||(this._cachedRootElement=this._canvas.getRootElement(),this._cachedSelection=this._selection.get(),this._cachedViewbox=this._canvas.viewbox(),this._selection.select(null),this._bindEvents(),this._open=!0,(0,s.Sh)(this._canvas.getContainer()).add("djs-search-open"),(0,s.Sh)(this._container).add("open"),this._searchInput.focus(),this._eventBus.fire("searchPad.opened"))},hj.prototype.close=function(e=!0){this.isOpen()&&(e&&(this._cachedRootElement&&this._canvas.setRootElement(this._cachedRootElement),this._cachedSelection&&this._selection.select(this._cachedSelection),this._cachedViewbox&&this._canvas.viewbox(this._cachedViewbox),this._eventBus.fire("searchPad.restored")),this._cachedRootElement=null,this._cachedSelection=null,this._cachedViewbox=null,this._unbindEvents(),this._open=!1,(0,s.Sh)(this._canvas.getContainer()).remove("djs-search-open"),(0,s.Sh)(this._container).remove("open"),this._clearResults(),this._searchInput.value="",this._searchInput.blur(),this._eventBus.fire("searchPad.closed"),this._canvas.restoreFocus())},hj.prototype.toggle=function(){this.isOpen()?this.close():this.open()},hj.prototype.isOpen=function(){return this._open},hj.prototype._preselect=function(e){var t=this._getCurrentResult();if(e!==t){t&&(0,s.Sh)(t).remove(hj.RESULT_SELECTED_CLASS);var n=(0,s.Lj)(e,hj.RESULT_ID_ATTRIBUTE),i=this._results[n].element;(0,s.Sh)(e).add(hj.RESULT_SELECTED_CLASS),this._canvas.scrollToElement(i,{top:300}),this._selection.select(i),this._eventBus.fire("searchPad.preselected",i)}},hj.prototype._select=function(e){var t=(0,s.Lj)(e,hj.RESULT_ID_ATTRIBUTE),n=this._results[t].element;this._cachedSelection=null,this._cachedViewbox=null,this.close(!1),this._canvas.scrollToElement(n,{top:300}),this._selection.select(n),this._eventBus.fire("searchPad.selected",n)},hj.prototype._getBoxHtml=function(){let e=(0,s.H6)(hj.BOX_HTML),t=(0,s.IO)(hj.INPUT_SELECTOR,e);return t&&t.setAttribute("aria-label",this._translate("Search in diagram")),e},hj.CONTAINER_SELECTOR=".djs-search-container",hj.INPUT_SELECTOR=".djs-search-input input",hj.RESULTS_CONTAINER_SELECTOR=".djs-search-results",hj.RESULT_SELECTOR=".djs-search-result",hj.RESULT_SELECTED_CLASS="djs-search-result-selected",hj.RESULT_SELECTED_SELECTOR="."+hj.RESULT_SELECTED_CLASS,hj.RESULT_ID_ATTRIBUTE="data-result-id",hj.RESULT_HIGHLIGHT_CLASS="djs-search-highlight",hj.BOX_HTML=`<div class="djs-search-container djs-scrollable">
  <div class="djs-search-input">
    <svg class="djs-search-icon" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path fill-rule="evenodd" clip-rule="evenodd" d="M9.0325 8.5H9.625L13.3675 12.25L12.25 13.3675L8.5 9.625V9.0325L8.2975 8.8225C7.4425 9.5575 6.3325 10 5.125 10C2.4325 10 0.25 7.8175 0.25 5.125C0.25 2.4325 2.4325 0.25 5.125 0.25C7.8175 0.25 10 2.4325 10 5.125C10 6.3325 9.5575 7.4425 8.8225 8.2975L9.0325 8.5ZM1.75 5.125C1.75 6.9925 3.2575 8.5 5.125 8.5C6.9925 8.5 8.5 6.9925 8.5 5.125C8.5 3.2575 6.9925 1.75 5.125 1.75C3.2575 1.75 1.75 3.2575 1.75 5.125Z" fill="#22242A"/>
    </svg>
    <input type="text" spellcheck="false" />
  </div>
  <div class="djs-search-results" />
</div>`,hj.RESULT_HTML='<div class="djs-search-result"></div>',hj.RESULT_PRIMARY_HTML='<div class="djs-search-result-primary"></div>',hj.RESULT_SECONDARY_HTML='<p class="djs-search-result-secondary"></p>',hO.$inject=["elementRegistry","searchPad","canvas","search"],hO.prototype.find=function(e){var t=this._canvas.getRootElements(),n=this._elementRegistry.filter(function(e){return!(0,tH.j_)(e)&&!t.includes(e)});return this._search(n.map(e=>({element:e,label:tK(e),id:e.id})),e,{keys:["label","id"]}).map(hL)};let h$={width:36,height:50},hI={width:50,height:50};function hz(e,t,n){return(0,c.Ue)("path",{d:e,strokeWidth:2,transform:`translate(${t.x}, ${t.y})`,...n})}function hH(e,t){this._styles=t,e.registerProvider(this)}function hF(e,t){var n;return"bpmn:DataObjectReference"===t?n=h$:"bpmn:DataStoreReference"===t&&(n=hI),e.width===n.width&&e.height===n.height}function hG(e){tO.call(this,e)}hH.$inject=["outline","styles"],hH.prototype.getOutline=function(e){var t;let n=this._styles.cls("djs-outline",["no-fill"]);if(!(0,tH.j_)(e))return tx(e,"bpmn:Gateway")?(t=(0,c.Ue)("rect"),(0,a.f0)(t.style,{"transform-box":"fill-box",transform:"rotate(45deg)","transform-origin":"center"}),(0,c.Lj)(t,(0,a.f0)({x:2,y:2,rx:4,width:e.width-4,height:e.height-4},n))):tE(e,["bpmn:Task","bpmn:SubProcess","bpmn:Group","bpmn:CallActivity"])?(t=(0,c.Ue)("rect"),(0,c.Lj)(t,(0,a.f0)({x:-5,y:-5,rx:14,width:e.width+10,height:e.height+10},n))):tx(e,"bpmn:EndEvent")?(t=(0,c.Ue)("circle"),(0,c.Lj)(t,(0,a.f0)({cx:e.width/2,cy:e.height/2,r:e.width/2+5+1},n))):tx(e,"bpmn:Event")?(t=(0,c.Ue)("circle"),(0,c.Lj)(t,(0,a.f0)({cx:e.width/2,cy:e.height/2,r:e.width/2+5},n))):tx(e,"bpmn:DataObjectReference")&&hF(e,"bpmn:DataObjectReference")?t=hz("M44.7648 11.3263L36.9892 2.64074C36.0451 1.58628 34.5651 0.988708 33.1904 0.988708H5.98667C3.22688 0.988708 0.989624 3.34892 0.989624 6.26039V55.0235C0.989624 57.9349 3.22688 60.2952 5.98667 60.2952H40.966C43.7257 60.2952 45.963 57.9349 45.963 55.0235V14.9459C45.963 13.5998 45.6407 12.3048 44.7648 11.3263Z",{x:-6,y:-6},n):tx(e,"bpmn:DataStoreReference")&&hF(e,"bpmn:DataStoreReference")&&(t=hz("M1.03845 48.1347C1.03845 49.3511 1.07295 50.758 1.38342 52.064C1.69949 53.3938 2.32428 54.7154 3.56383 55.6428C6.02533 57.4841 10.1161 58.7685 14.8212 59.6067C19.5772 60.4538 25.1388 60.8738 30.6831 60.8738C36.2276 60.8738 41.7891 60.4538 46.545 59.6067C51.2504 58.7687 55.3412 57.4842 57.8028 55.6429C59.0424 54.7156 59.6673 53.3938 59.9834 52.064C60.2938 50.7579 60.3285 49.351 60.3285 48.1344V13.8415C60.3285 12.6249 60.2938 11.218 59.9834 9.91171C59.6673 8.58194 59.0423 7.2602 57.8027 6.33294C55.341 4.49168 51.2503 3.20723 46.545 2.36914C41.7891 1.522 36.2276 1.10204 30.6831 1.10205C25.1388 1.10206 19.5772 1.52206 14.8213 2.36923C10.1162 3.20734 6.02543 4.49183 3.5639 6.33314C2.32433 7.26038 1.69951 8.58206 1.38343 9.91181C1.07295 11.2179 1.03845 12.6247 1.03845 13.8411V48.1347Z",{x:-6,y:-6},n)),t},hH.prototype.updateOutline=function(e,t){return(0,tH.j_)(e)?void 0:tE(e,["bpmn:SubProcess","bpmn:Group"])?((0,c.Lj)(t,{width:e.width+10,height:e.height+10}),!0):!!tE(e,["bpmn:Event","bpmn:Gateway","bpmn:DataStoreReference","bpmn:DataObjectReference"])},i(hG,tO),hG.Viewer=nU,hG.NavigatedViewer=ih,hG.prototype.createDiagram=function(){return this.importXML('<?xml version="1.0" encoding="UTF-8"?><bpmn:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" targetNamespace="http://bpmn.io/schema/bpmn" id="Definitions_1"><bpmn:process id="Process_1" isExecutable="false"><bpmn:startEvent id="StartEvent_1"/></bpmn:process><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1"><bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1"><dc:Bounds height="36.0" width="36.0" x="173.0" y="102.0"/></bpmndi:BPMNShape></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn:definitions>')},hG.prototype._interactionModules=[n9,ir,iu],hG.prototype._modelingModules=[{__depends__:[{__init__:["alignElements"],alignElements:["type",iv]},i$,oz],__init__:["alignElementsContextPadProvider","alignElementsMenuProvider","bpmnAlignElements"],alignElementsContextPadProvider:["type",oF],alignElementsMenuProvider:["type",oW],bpmnAlignElements:["type",oU]},o3,{__depends__:[ro],__init__:["autoScroll"],autoScroll:["type",rr]},{__init__:["bpmnAutoResize","bpmnAutoResizeProvider"],bpmnAutoResize:["type",o4],bpmnAutoResizeProvider:["type",o8]},{__depends__:[ro,rs],__init__:["bendpoints","bendpointSnapping","bendpointMovePreview"],bendpoints:["type",rS],bendpointMove:["type",rA],bendpointMovePreview:["type",rL],connectionSegmentMove:["type",rG],bendpointSnapping:["type",r0]},r4,{__init__:["connectionPreview"],connectionPreview:["type",r9]},{__depends__:[{__depends__:[o3,{__depends__:[an],__init__:["complexPreview"],complexPreview:["type",ao]},lI],__init__:["appendPreview"],appendPreview:["type",lH]},lq,i$,nV,r4,cD,{__depends__:[oz,cY,o3],__init__:["replaceMenuProvider"],replaceMenuProvider:["type",un]}],__init__:["contextPadProvider"],contextPadProvider:["type",ui]},cG,cD,{__depends__:[oz,{__init__:["distributeElements"],distributeElements:["type",ua]}],__init__:["bpmnDistributeElements","distributeElementsMenuProvider"],bpmnDistributeElements:["type",us],distributeElementsMenuProvider:["type",up]},{__depends__:[{__init__:["editorActions"],editorActions:["type",uu]}],editorActions:["type",ud]},{__depends__:[{__depends__:[{__init__:["gridSnappingResizeBehavior","gridSnappingSpaceToolBehavior"],gridSnappingResizeBehavior:["type",u_],gridSnappingSpaceToolBehavior:["type",ub]}],__init__:["gridSnapping"],gridSnapping:["type",ug]},{__init__:["gridSnappingAutoPlaceBehavior","gridSnappingParticipantBehavior","gridSnappingLayoutConnectionBehavior"],gridSnappingAutoPlaceBehavior:["type",ux],gridSnappingParticipantBehavior:["type",uE],gridSnappingLayoutConnectionBehavior:["type",uw]}],__init__:["bpmnGridSnapping"],bpmnGridSnapping:["type",um]},{__init__:["bpmnInteractionEvents"],bpmnInteractionEvents:["type",uS]},{__depends__:[n3],__init__:["keyboardBindings"],keyboardBindings:["type",uk]},{__depends__:[n3,nV],__init__:["keyboardMoveSelection"],keyboardMoveSelection:["type",uD]},{__depends__:[nh,uH,lq],__init__:["labelEditingProvider","labelEditingPreview"],labelEditingProvider:["type",uF],labelEditingPreview:["type",uU]},lI,{__depends__:[{__init__:["tooltips"],tooltips:["type",uY]}],__init__:["modelingFeedback"],modelingFeedback:["type",uZ]},{__depends__:[n$,nV,u1,rs,ro,an],__init__:["move","movePreview"],move:["type",u5],movePreview:["type",u7]},{__depends__:[{__init__:["palette"],palette:["type",ha]},cD,pa,{__depends__:[cQ,cj],__init__:["lassoTool"],lassoTool:["type",hp]},{__depends__:[cQ,cj],__init__:["handTool"],handTool:["type",hh]},{__depends__:[r4,rs,ro,cQ,cj],globalConnect:["type",hg]},ne],__init__:["paletteProvider"],paletteProvider:["type",hy]},{__depends__:[an],__init__:["bpmnReplacePreview"],bpmnReplacePreview:["type",hv]},uH,{__depends__:[{__init__:["createMoveSnapping","resizeSnapping","snapping"],createMoveSnapping:["type",hC],resizeSnapping:["type",hT],snapping:["type",hB]}],__init__:["connectSnapping","createMoveSnapping"],connectSnapping:["type",hx],createMoveSnapping:["type",hR]},{__depends__:[{__depends__:[ne,nl,nV],searchPad:["type",hj]},oI],__init__:["bpmnSearch"],bpmnSearch:["type",hO]},{__depends__:[u1],__init__:["outlineProvider"],outlineProvider:["type",hH]}],hG.prototype._modules=[].concat(nU.prototype._modules,hG.prototype._interactionModules,hG.prototype._modelingModules)},5694:function(e,t,n){function i(e){return CSS.escape(e)}n.d(t,{D:function(){return i},r:function(){return r}});var o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function r(e){return(e=""+e)&&e.replace(/[&<>"']/g,function(e){return o[e]})}},2722:function(e,t,n){function i(e){return e.childNodes[0]}function o(e){return e.parentNode.childNodes[1]}n.d(t,{G:function(){return o},s:function(){return i}})},725:function(e,t,n){function i(e){this._counter=0,this._prefix=(e?e+"-":"")+Math.floor(1e9*Math.random())+"-"}n.d(t,{Z:function(){return i}}),i.prototype.next=function(){return this._prefix+ ++this._counter}}}]);