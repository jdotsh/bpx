(()=>{var e={};e.id=8642,e.ids=[8642],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},9383:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d}),r(321),r(2734),r(5866);var t=r(3191),a=r(8716),n=r(7922),i=r.n(n),l=r(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(s,o);let d=["",{children:["test-supabase",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,321)),"/Users/home/Desktop/mvp/app/test-supabase/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,2734)),"/Users/home/Desktop/mvp/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/home/Desktop/mvp/app/test-supabase/page.tsx"],u="/test-supabase/page",m={require:r,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/test-supabase/page",pathname:"/test-supabase",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9947:(e,s,r)=>{Promise.resolve().then(r.bind(r,5813))},1055:(e,s,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},5303:()=>{},5813:(e,s,r)=>{"use strict";r.d(s,{F:()=>i,ThemeProvider:()=>l});var t=r(326),a=r(7577);let n=(0,a.createContext)(void 0);function i(){let e=(0,a.useContext)(n);if(!e)throw Error("useTheme must be used within a ThemeProvider");return e}function l({children:e}){let[s,r]=(0,a.useState)("light"),[i,l]=(0,a.useState)(!1),o=e=>{r(e),localStorage.setItem("bpmn-studio-theme",e),"dark"===e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")};return t.jsx(n.Provider,{value:{theme:s,toggleTheme:()=>{o("light"===s?"dark":"light")},setTheme:o},children:e})}},2734:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>d,metadata:()=>o});var t=r(9510),a=r(5384),n=r.n(a);r(7272);var i=r(8570);(0,i.createProxy)(String.raw`/Users/home/Desktop/mvp/components/theme-provider.tsx#useTheme`);let l=(0,i.createProxy)(String.raw`/Users/home/Desktop/mvp/components/theme-provider.tsx#ThemeProvider`),o={title:"BPMN Studio Web",description:"Enterprise BPMN Process Design Studio"};function d({children:e}){return t.jsx("html",{lang:"en",children:t.jsx("body",{className:n().className,children:t.jsx(l,{children:t.jsx("div",{className:"min-h-screen bg-background",children:e})})})})}},321:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>n});var t=r(9510),a=r(9949);async function n(){let e=(0,a.lx)(),{data:{session:s},error:r}=await e.auth.getSession(),{data:n,error:i}=await e.from("profiles").select("*").limit(5),l="https://adjdqxptoaecafmmjgtf.supabase.co",o=!!process.env.SUPABASE_SERVICE_ROLE_KEY;return(0,t.jsxs)("div",{className:"p-8 max-w-4xl mx-auto",children:[t.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Supabase Connection Test"}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"border rounded-lg p-6",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Configuration Status"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:l?"text-green-500":"text-red-500",children:l?"✅":"❌"}),(0,t.jsxs)("span",{children:["Supabase URL: ",l||"Not configured"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-green-500",children:"✅"}),(0,t.jsxs)("span",{children:["Anon Key: ","Configured"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:o?"text-green-500":"text-red-500",children:o?"✅":"❌"}),(0,t.jsxs)("span",{children:["Service Role Key: ",o?"Configured":"Missing - Get from Supabase Dashboard"]})]})]})]}),(0,t.jsxs)("div",{className:"border rounded-lg p-6",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Auth Status"}),r?t.jsx("div",{className:"text-red-500",children:(0,t.jsxs)("p",{children:["❌ Auth Error: ",r.message]})}):(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-green-500",children:"✅ Auth service connected"}),s?(0,t.jsxs)("p",{children:["Logged in as: ",s.user.email]}):t.jsx("p",{children:"No active session (not logged in)"})]})]}),(0,t.jsxs)("div",{className:"border rounded-lg p-6",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Database Status"}),i?(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-yellow-500",children:"⚠️ Database query failed"}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Error: ",i.message]}),t.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"This is normal if you haven't run the database setup SQL yet."})]}):(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-green-500",children:"✅ Database connected"}),(0,t.jsxs)("p",{children:["Profiles table has ",n?.length||0," records"]})]})]}),(0,t.jsxs)("div",{className:"border rounded-lg p-6 bg-blue-50",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Next Steps"}),!o&&(0,t.jsxs)("div",{className:"mb-4",children:[t.jsx("p",{className:"font-semibold",children:"1. Get Service Role Key:"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Go to your Supabase Dashboard → Settings → API → Service Role Key"}),t.jsx("a",{href:`https://supabase.com/dashboard/project/${l?.split(".")[0].replace("https://","")}/settings/api`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 underline text-sm",children:"Open Supabase Dashboard →"})]}),i&&(0,t.jsxs)("div",{className:"mb-4",children:[t.jsx("p",{className:"font-semibold",children:"2. Run Database Setup:"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Copy the SQL from supabase-setup.sql and run it in your Supabase SQL Editor"}),t.jsx("a",{href:`https://supabase.com/dashboard/project/${l?.split(".")[0].replace("https://","")}/sql/new`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 underline text-sm",children:"Open SQL Editor →"})]}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"font-semibold",children:"3. Test Authentication:"}),(0,t.jsxs)("div",{className:"flex gap-4 mt-2",children:[t.jsx("a",{href:"/auth/signup",className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"Sign Up"}),t.jsx("a",{href:"/auth/signin",className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"Sign In"})]})]})]}),(0,t.jsxs)("details",{className:"border rounded-lg p-6",children:[t.jsx("summary",{className:"cursor-pointer font-semibold",children:"View Raw Response Data"}),t.jsx("pre",{className:"mt-4 text-xs overflow-auto bg-gray-100 p-4 rounded",children:JSON.stringify({auth:{session:s?.user?.email||null,error:r?.message},database:{profiles:n?.length||0,error:i?.message},config:{url:l,hasKeys:{anon:!0,service:o}}},null,2)})]})]})]})}},9949:(e,s,r)=>{"use strict";r.d(s,{et:()=>l,lx:()=>n,ts:()=>i,xv:()=>o});var t=r(6718),a=r(1615);function n(){let e=(0,a.cookies)();return(0,t.createServerClient)("https://adjdqxptoaecafmmjgtf.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFkamRxeHB0b2FlY2FmbW1qZ3RmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU1NTgzOTMsImV4cCI6MjA3MTEzNDM5M30.L_PMZMsTkFklUOx9lNll-s1NiaW9HnGifk-bkB5tdIQ",{cookies:{get:s=>e.get(s)?.value,set(s,r,t){e.set({name:s,value:r,...t})},remove(s,r){e.set({name:s,value:"",...r})}}})}async function i(){let e=n();try{let{data:{user:s},error:r}=await e.auth.getUser();if(r||!s)return null;return s}catch(e){return console.error("Error getting current user:",e),null}}async function l(e){let s=n();try{let{data:r,error:t}=await s.from("profiles").select(`
        *,
        subscriptions (
          plan,
          status,
          current_period_end
        )
      `).eq("id",e).single();if(t)return console.error("Error getting user profile:",t),null;return r}catch(e){return console.error("Error getting user profile:",e),null}}async function o(e){let s=n();try{let{data:r,error:t}=await s.from("profiles").insert({id:e.id,email:e.email,name:e.user_metadata?.full_name||e.email?.split("@")[0]||"User",avatar_url:e.user_metadata?.avatar_url}).select().single();if(t)return console.error("Error creating profile:",t),null;let{error:a}=await s.from("subscriptions").insert({profile_id:e.id,stripe_customer_id:`temp_${e.id}`,plan:"FREE",status:"ACTIVE",current_period_end:new Date(Date.now()+31536e6)});return a&&console.error("Error creating subscription:",a),r}catch(e){return console.error("Error creating user profile:",e),null}}},7272:()=>{}};var s=require("../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[9276,4305,2892],()=>r(9383));module.exports=t})();