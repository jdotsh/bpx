(()=>{var e={};e.id=7702,e.ids=[7702],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},3768:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d}),r(8168),r(2734),r(5866);var s=r(3191),a=r(8716),i=r(7922),n=r.n(i),l=r(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let d=["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,8168)),"/Users/home/Desktop/mvp/app/dashboard/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,2734)),"/Users/home/Desktop/mvp/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/home/Desktop/mvp/app/dashboard/page.tsx"],u="/dashboard/page",m={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9947:(e,t,r)=>{Promise.resolve().then(r.bind(r,5813))},1055:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},6765:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,9404,23))},5813:(e,t,r)=>{"use strict";r.d(t,{F:()=>n,ThemeProvider:()=>l});var s=r(326),a=r(7577);let i=(0,a.createContext)(void 0);function n(){let e=(0,a.useContext)(i);if(!e)throw Error("useTheme must be used within a ThemeProvider");return e}function l({children:e}){let[t,r]=(0,a.useState)("light"),[n,l]=(0,a.useState)(!1),o=e=>{r(e),localStorage.setItem("bpmn-studio-theme",e),"dark"===e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")};return s.jsx(i.Provider,{value:{theme:t,toggleTheme:()=>{o("light"===t?"dark":"light")},setTheme:o},children:e})}},8168:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var s=r(9510),a=r(9949),i=r(278),n=r(8345),l=r(384),o=r(1085),d=r(2946),c=r(6697),u=r(7371);async function m(){let e=await (0,a.ts)();e||(0,o.redirect)("/auth/signin");let t=await i.H.getOrCreateProfile(e.id),r=await n.Y.listProjects(e.id)||[],m=await l.p.listDiagrams(e.id)||[];return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("header",{className:"bg-white shadow",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex justify-between items-center py-6",children:[s.jsx("div",{className:"flex items-center",children:s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"BPMN Studio"})}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("span",{className:"text-sm text-gray-700",children:["Welcome, ",t?.displayName||e.email]}),s.jsx("form",{action:"/auth/signout",method:"post",children:s.jsx(d.z,{variant:"outline",type:"submit",children:"Sign out"})})]})]})})}),s.jsx("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"px-4 py-6 sm:px-0",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,s.jsxs)(c.Zb,{children:[(0,s.jsxs)(c.Ol,{children:[s.jsx(c.ll,{children:"Your Studio"}),s.jsx(c.SZ,{children:"Projects and diagrams overview"})]}),s.jsx(c.aY,{children:(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Projects:"}),s.jsx("span",{className:"font-semibold",children:0})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Diagrams:"}),s.jsx("span",{className:"font-semibold",children:0})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Plan:"}),s.jsx("span",{className:"font-semibold text-green-600",children:t?.subscription?.plan||"FREE"})]})]})})]}),(0,s.jsxs)(c.Zb,{children:[(0,s.jsxs)(c.Ol,{children:[s.jsx(c.ll,{children:"Quick Actions"}),s.jsx(c.SZ,{children:"Get started with BPMN Studio"})]}),(0,s.jsxs)(c.aY,{className:"space-y-3",children:[s.jsx(u.default,{href:"/studio",className:"block",children:s.jsx(d.z,{className:"w-full",children:"Create New Diagram"})}),s.jsx(u.default,{href:"/projects",className:"block",children:s.jsx(d.z,{variant:"outline",className:"w-full",children:"Browse Projects"})}),s.jsx(u.default,{href:"/settings",className:"block",children:s.jsx(d.z,{variant:"outline",className:"w-full",children:"Account Settings"})})]})]}),(0,s.jsxs)(c.Zb,{children:[(0,s.jsxs)(c.Ol,{children:[s.jsx(c.ll,{children:"Recent Diagrams"}),s.jsx(c.SZ,{children:"Your latest work"})]}),s.jsx(c.aY,{children:m.length>0?s.jsx("div",{className:"space-y-3",children:m.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-0",children:[s.jsx("div",{className:"flex-1 min-w-0",children:(0,s.jsxs)(u.default,{href:`/studio?diagram=${e.id}`,className:"block",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.name||e.title||"Untitled"}),s.jsx("p",{className:"text-xs text-gray-500",children:e.project_id||e.projectId||""})]})}),s.jsx("div",{className:"text-xs text-gray-400",children:new Date(e.updated_at||e.updatedAt||Date.now()).toLocaleDateString()})]},e.id))}):(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:[s.jsx("p",{children:"No diagrams yet"}),s.jsx("p",{className:"mt-2",children:"Create your first diagram to see it here."})]})})]})]}),r.length>0&&(0,s.jsxs)("div",{className:"mt-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Projects"}),s.jsx(u.default,{href:"/projects",children:s.jsx(d.z,{variant:"outline",size:"sm",children:"View All"})})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(e=>(0,s.jsxs)(c.Zb,{children:[(0,s.jsxs)(c.Ol,{className:"pb-3",children:[s.jsx(c.ll,{className:"text-base",children:e.name}),e.description&&s.jsx(c.SZ,{className:"text-sm",children:e.description})]}),s.jsx(c.aY,{children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:["Updated ",new Date(e.updatedAt).toLocaleDateString()]}),s.jsx(u.default,{href:`/projects/${e.id}`,children:s.jsx(d.z,{variant:"outline",size:"sm",children:"Open"})})]})})]},e.id))})]})]})})]})}},2734:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d,metadata:()=>o});var s=r(9510),a=r(5384),i=r.n(a);r(7272);var n=r(8570);(0,n.createProxy)(String.raw`/Users/home/Desktop/mvp/components/theme-provider.tsx#useTheme`);let l=(0,n.createProxy)(String.raw`/Users/home/Desktop/mvp/components/theme-provider.tsx#ThemeProvider`),o={title:"BPMN Studio Web",description:"Enterprise BPMN Process Design Studio"};function d({children:e}){return s.jsx("html",{lang:"en",children:s.jsx("body",{className:i().className,children:s.jsx(l,{children:s.jsx("div",{className:"min-h-screen bg-background",children:e})})})})}},2946:(e,t,r)=>{"use strict";r.d(t,{z:()=>d});var s=r(9510),a=r(1159),i=r(3025),n=r(6145),l=r(650);let o=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef(({className:e,variant:t,size:r,asChild:a=!1,...n},d)=>{let c=a?i.g7:"button";return s.jsx(c,{className:(0,l.cn)(o({variant:t,size:r,className:e})),ref:d,...n})});d.displayName="Button"},6697:(e,t,r)=>{"use strict";r.d(t,{Ol:()=>l,SZ:()=>d,Zb:()=>n,aY:()=>c,ll:()=>o});var s=r(9510),a=r(1159),i=r(650);let n=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,i.cn)("rounded-xl border bg-card text-card-foreground shadow",e),...t}));n.displayName="Card";let l=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...t}));l.displayName="CardHeader";let o=a.forwardRef(({className:e,...t},r)=>s.jsx("h3",{ref:r,className:(0,i.cn)("font-semibold leading-none tracking-tight",e),...t}));o.displayName="CardTitle";let d=a.forwardRef(({className:e,...t},r)=>s.jsx("p",{ref:r,className:(0,i.cn)("text-sm text-muted-foreground",e),...t}));d.displayName="CardDescription";let c=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,i.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent",a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,i.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},9949:(e,t,r)=>{"use strict";r.d(t,{et:()=>l,lx:()=>i,ts:()=>n,xv:()=>o});var s=r(6718),a=r(1615);function i(){let e=(0,a.cookies)();return(0,s.createServerClient)("https://adjdqxptoaecafmmjgtf.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFkamRxeHB0b2FlY2FmbW1qZ3RmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU1NTgzOTMsImV4cCI6MjA3MTEzNDM5M30.L_PMZMsTkFklUOx9lNll-s1NiaW9HnGifk-bkB5tdIQ",{cookies:{get:t=>e.get(t)?.value,set(t,r,s){e.set({name:t,value:r,...s})},remove(t,r){e.set({name:t,value:"",...r})}}})}async function n(){let e=i();try{let{data:{user:t},error:r}=await e.auth.getUser();if(r||!t)return null;return t}catch(e){return console.error("Error getting current user:",e),null}}async function l(e){let t=i();try{let{data:r,error:s}=await t.from("profiles").select(`
        *,
        subscriptions (
          plan,
          status,
          current_period_end
        )
      `).eq("id",e).single();if(s)return console.error("Error getting user profile:",s),null;return r}catch(e){return console.error("Error getting user profile:",e),null}}async function o(e){let t=i();try{let{data:r,error:s}=await t.from("profiles").insert({id:e.id,email:e.email,name:e.user_metadata?.full_name||e.email?.split("@")[0]||"User",avatar_url:e.user_metadata?.avatar_url}).select().single();if(s)return console.error("Error creating profile:",s),null;let{error:a}=await t.from("subscriptions").insert({profile_id:e.id,stripe_customer_id:`temp_${e.id}`,plan:"FREE",status:"ACTIVE",current_period_end:new Date(Date.now()+31536e6)});return a&&console.error("Error creating subscription:",a),r}catch(e){return console.error("Error creating user profile:",e),null}}},384:(e,t,r)=>{"use strict";r.d(t,{p:()=>a});var s=r(9949);class a{static async createDiagram(e,t){let r=(0,s.lx)(),{data:a}=await r.from("projects").select("id").eq("id",t.projectId).eq("owner_id",e).single();if(!a)return null;let{data:i,error:n}=await r.from("diagrams").insert({...t,owner_id:e,version:1}).select().single();return i}static async updateDiagram(e,t,r){let a=(0,s.lx)(),{data:i,error:n}=await a.from("diagrams").update(r).eq("id",t).eq("owner_id",e).select().single();return i}static async deleteDiagram(e,t){let r=(0,s.lx)(),{error:a}=await r.from("diagrams").delete().eq("id",t).eq("owner_id",e);return!a}static async getDiagram(e,t){let r=(0,s.lx)(),{data:a}=await r.from("diagrams").select(`
        *,
        project:projects(id, name, owner_id)
      `).eq("id",t).eq("owner_id",e).single();return a}static async listDiagrams(e,t){let r=(0,s.lx)().from("diagrams").select(`
        *,
        project:projects(id, name)
      `).eq("owner_id",e);t&&(r=r.eq("project_id",t));let{data:a}=await r;return a||[]}static async saveDiagram(e,t,r){return a.updateDiagram(e,t,r)}}},278:(e,t,r)=>{"use strict";r.d(t,{H:()=>a});var s=r(9949);class a{static async getOrCreateProfile(e){let t=(0,s.lx)(),{data:r}=await t.from("profiles").select(`
        *,
        subscription:subscriptions(*)
      `).eq("id",e).single();if(!r){let{data:{user:s}}=await t.auth.getUser();if(s){let{data:a}=await t.from("profiles").insert({id:e,email:s.email,display_name:s.user_metadata?.display_name||s.email?.split("@")[0],avatar_url:s.user_metadata?.avatar_url}).select(`
            *,
            subscription:subscriptions(*)
          `).single();r=a}}return r}static async getProfile(e){let t=(0,s.lx)(),{data:r}=await t.from("profiles").select(`
        *,
        subscription:subscriptions(*)
      `).eq("id",e).single();return r}static async updateProfile(e,t){let r=(0,s.lx)(),{data:a,error:i}=await r.from("profiles").update(t).eq("id",e).select().single();return a}static async createProfile(e){let t=(0,s.lx)(),{data:r,error:a}=await t.from("profiles").insert(e).select().single();return r}static async getProfileByEmail(e){let t=(0,s.lx)(),{data:r}=await t.from("profiles").select("*").eq("email",e).single();return r}static async deleteProfile(e){let t=(0,s.lx)(),{error:r}=await t.from("profiles").delete().eq("id",e);return!r}static async getSubscription(e){let t=(0,s.lx)(),{data:r}=await t.from("subscriptions").select("*").eq("profile_id",e).single();return r}}},8345:(e,t,r)=>{"use strict";r.d(t,{Y:()=>a});var s=r(9949);class a{static async createProject(e,t){let r=(0,s.lx)(),{data:a,error:i}=await r.from("projects").insert({name:t.name,description:t.description,owner_id:e,version:1,metadata:t.metadata||{}}).select().single();return a}static async updateProject(e,t,r){let a=(0,s.lx)(),{data:i,error:n}=await a.from("projects").update({name:r.name,description:r.description,metadata:r.metadata,updated_at:new Date().toISOString()}).eq("id",t).eq("owner_id",e).select().single();return i}static async deleteProject(e,t){let r=(0,s.lx)(),{error:a}=await r.from("projects").update({deleted_at:new Date().toISOString()}).eq("id",t).eq("owner_id",e);return!a}static async getProject(e,t){let r=(0,s.lx)(),{data:a}=await r.from("projects").select(`
        *,
        diagrams (
          id,
          name,
          updated_at
        )
      `).eq("id",t).eq("owner_id",e).is("deleted_at",null).single();return a&&(a._count={diagrams:a.diagrams?.length||0}),a}static async listProjects(e){let t=(0,s.lx)(),{data:r}=await t.from("projects").select(`
        *,
        diagrams (
          id,
          name,
          updated_at
        )
      `).eq("owner_id",e).is("deleted_at",null).order("updated_at",{ascending:!1});return r?.map(e=>({...e,_count:{diagrams:e.diagrams?.length||0}}))||[]}static async getProjectStats(e,t){let r=(0,s.lx)(),{data:a}=await r.from("projects").select(`
        id,
        name,
        diagrams (count)
      `).eq("id",t).eq("owner_id",e).single();return a?{projectId:a.id,name:a.name,diagramCount:a.diagrams?.length||0,lastUpdated:new Date}:null}}},650:(e,t,r)=>{"use strict";r.d(t,{cn:()=>i});var s=r(5761),a=r(2386);function i(...e){return(0,a.m6)((0,s.W)(e))}},1085:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return n},RedirectType:function(){return s.RedirectType},notFound:function(){return a.notFound},permanentRedirect:function(){return s.permanentRedirect},redirect:function(){return s.redirect}});let s=r(3953),a=r(6399);class i extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class n extends URLSearchParams{append(){throw new i}delete(){throw new i}set(){throw new i}sort(){throw new i}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6399:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{isNotFoundError:function(){return a},notFound:function(){return s}});let r="NEXT_NOT_FOUND";function s(){let e=Error(r);throw e.digest=r,e}function a(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===r}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8586:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RedirectStatusCode",{enumerable:!0,get:function(){return r}}),function(e){e[e.SeeOther=303]="SeeOther",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect"}(r||(r={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3953:(e,t,r)=>{"use strict";var s;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{RedirectType:function(){return s},getRedirectError:function(){return o},getRedirectStatusCodeFromError:function(){return f},getRedirectTypeFromError:function(){return p},getURLFromRedirectError:function(){return m},isRedirectError:function(){return u},permanentRedirect:function(){return c},redirect:function(){return d}});let a=r(4580),i=r(2934),n=r(8586),l="NEXT_REDIRECT";function o(e,t,r){void 0===r&&(r=n.RedirectStatusCode.TemporaryRedirect);let s=Error(l);s.digest=l+";"+t+";"+e+";"+r+";";let i=a.requestAsyncStorage.getStore();return i&&(s.mutableCookies=i.mutableCookies),s}function d(e,t){void 0===t&&(t="replace");let r=i.actionAsyncStorage.getStore();throw o(e,t,(null==r?void 0:r.isAction)?n.RedirectStatusCode.SeeOther:n.RedirectStatusCode.TemporaryRedirect)}function c(e,t){void 0===t&&(t="replace");let r=i.actionAsyncStorage.getStore();throw o(e,t,(null==r?void 0:r.isAction)?n.RedirectStatusCode.SeeOther:n.RedirectStatusCode.PermanentRedirect)}function u(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[t,r,s,a]=e.digest.split(";",4),i=Number(a);return t===l&&("replace"===r||"push"===r)&&"string"==typeof s&&!isNaN(i)&&i in n.RedirectStatusCode}function m(e){return u(e)?e.digest.split(";",3)[2]:null}function p(e){if(!u(e))throw Error("Not a redirect error");return e.digest.split(";",2)[1]}function f(e){if(!u(e))throw Error("Not a redirect error");return Number(e.digest.split(";",4)[3])}(function(e){e.push="push",e.replace="replace"})(s||(s={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7272:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[9276,4305,2892,9404,8590],()=>r(3768));module.exports=s})();